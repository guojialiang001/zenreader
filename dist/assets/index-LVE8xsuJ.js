var Fc=Object.defineProperty;var po=e=>{throw TypeError(e)};var Hc=(e,t,s)=>t in e?Fc(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s;var Xe=(e,t,s)=>Hc(e,typeof t!="symbol"?t+"":t,s),Nc=(e,t,s)=>t.has(e)||po("Cannot "+s);var _o=(e,t,s)=>t.has(e)?po("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,s);var Hr=(e,t,s)=>(Nc(e,t,"access private method"),s);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const u of a)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&i(f)}).observe(document,{childList:!0,subtree:!0});function s(a){const u={};return a.integrity&&(u.integrity=a.integrity),a.referrerPolicy&&(u.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?u.credentials="include":a.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(a){if(a.ep)return;a.ep=!0;const u=s(a);fetch(a.href,u)}})();function On(e,t){const s=Object.create(null),i=e.split(",");for(let a=0;a<i.length;a++)s[i[a]]=!0;return a=>!!s[a]}const tt={},Vs=[],ls=()=>{},zc=()=>!1,Uc=/^on[^a-z]/,Ci=e=>Uc.test(e),Mn=e=>e.startsWith("onUpdate:"),wt=Object.assign,In=(e,t)=>{const s=e.indexOf(t);s>-1&&e.splice(s,1)},jc=Object.prototype.hasOwnProperty,ze=(e,t)=>jc.call(e,t),Le=Array.isArray,Gs=e=>Or(e)==="[object Map]",ja=e=>Or(e)==="[object Set]",go=e=>Or(e)==="[object Date]",Ie=e=>typeof e=="function",lt=e=>typeof e=="string",Cr=e=>typeof e=="symbol",et=e=>e!==null&&typeof e=="object",Wa=e=>et(e)&&Ie(e.then)&&Ie(e.catch),qa=Object.prototype.toString,Or=e=>qa.call(e),Wc=e=>Or(e).slice(8,-1),Ka=e=>Or(e)==="[object Object]",Bn=e=>lt(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,ei=On(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),ki=e=>{const t=Object.create(null);return s=>t[s]||(t[s]=e(s))},qc=/-(\w)/g,cs=ki(e=>e.replace(qc,(t,s)=>s?s.toUpperCase():"")),Kc=/\B([A-Z])/g,ir=ki(e=>e.replace(Kc,"-$1").toLowerCase()),Ei=ki(e=>e.charAt(0).toUpperCase()+e.slice(1)),Ui=ki(e=>e?`on${Ei(e)}`:""),kr=(e,t)=>!Object.is(e,t),ti=(e,t)=>{for(let s=0;s<e.length;s++)e[s](t)},hi=(e,t,s)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:s})},an=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let mo;const ln=()=>mo||(mo=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function At(e){if(Le(e)){const t={};for(let s=0;s<e.length;s++){const i=e[s],a=lt(i)?Xc(i):At(i);if(a)for(const u in a)t[u]=a[u]}return t}else{if(lt(e))return e;if(et(e))return e}}const Vc=/;(?![^(]*\))/g,Gc=/:([^]+)/,Zc=/\/\*[^]*?\*\//g;function Xc(e){const t={};return e.replace(Zc,"").split(Vc).forEach(s=>{if(s){const i=s.split(Gc);i.length>1&&(t[i[0].trim()]=i[1].trim())}}),t}function Te(e){let t="";if(lt(e))t=e;else if(Le(e))for(let s=0;s<e.length;s++){const i=Te(e[s]);i&&(t+=i+" ")}else if(et(e))for(const s in e)e[s]&&(t+=s+" ");return t.trim()}const Jc="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Yc=On(Jc);function Va(e){return!!e||e===""}function Qc(e,t){if(e.length!==t.length)return!1;let s=!0;for(let i=0;s&&i<e.length;i++)s=ui(e[i],t[i]);return s}function ui(e,t){if(e===t)return!0;let s=go(e),i=go(t);if(s||i)return s&&i?e.getTime()===t.getTime():!1;if(s=Cr(e),i=Cr(t),s||i)return e===t;if(s=Le(e),i=Le(t),s||i)return s&&i?Qc(e,t):!1;if(s=et(e),i=et(t),s||i){if(!s||!i)return!1;const a=Object.keys(e).length,u=Object.keys(t).length;if(a!==u)return!1;for(const f in e){const r=e.hasOwnProperty(f),n=t.hasOwnProperty(f);if(r&&!n||!r&&n||!ui(e[f],t[f]))return!1}}return String(e)===String(t)}const we=e=>lt(e)?e:e==null?"":Le(e)||et(e)&&(e.toString===qa||!Ie(e.toString))?JSON.stringify(e,Ga,2):String(e),Ga=(e,t)=>t&&t.__v_isRef?Ga(e,t.value):Gs(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((s,[i,a])=>(s[`${i} =>`]=a,s),{})}:ja(t)?{[`Set(${t.size})`]:[...t.values()]}:et(t)&&!Le(t)&&!Ka(t)?String(t):t;let jt;class eh{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this.parent=jt,!t&&jt&&(this.index=(jt.scopes||(jt.scopes=[])).push(this)-1)}get active(){return this._active}run(t){if(this._active){const s=jt;try{return jt=this,t()}finally{jt=s}}}on(){jt=this}off(){jt=this.parent}stop(t){if(this._active){let s,i;for(s=0,i=this.effects.length;s<i;s++)this.effects[s].stop();for(s=0,i=this.cleanups.length;s<i;s++)this.cleanups[s]();if(this.scopes)for(s=0,i=this.scopes.length;s<i;s++)this.scopes[s].stop(!0);if(!this.detached&&this.parent&&!t){const a=this.parent.scopes.pop();a&&a!==this&&(this.parent.scopes[this.index]=a,a.index=this.index)}this.parent=void 0,this._active=!1}}}function th(e,t=jt){t&&t.active&&t.effects.push(e)}function sh(){return jt}const Pn=e=>{const t=new Set(e);return t.w=0,t.n=0,t},Za=e=>(e.w&Cs)>0,Xa=e=>(e.n&Cs)>0,rh=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=Cs},ih=e=>{const{deps:t}=e;if(t.length){let s=0;for(let i=0;i<t.length;i++){const a=t[i];Za(a)&&!Xa(a)?a.delete(e):t[s++]=a,a.w&=~Cs,a.n&=~Cs}t.length=s}},cn=new WeakMap;let gr=0,Cs=1;const hn=30;let Wt;const Is=Symbol(""),un=Symbol("");class $n{constructor(t,s=null,i){this.fn=t,this.scheduler=s,this.active=!0,this.deps=[],this.parent=void 0,th(this,i)}run(){if(!this.active)return this.fn();let t=Wt,s=Ss;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=Wt,Wt=this,Ss=!0,Cs=1<<++gr,gr<=hn?rh(this):vo(this),this.fn()}finally{gr<=hn&&ih(this),Cs=1<<--gr,Wt=this.parent,Ss=s,this.parent=void 0,this.deferStop&&this.stop()}}stop(){Wt===this?this.deferStop=!0:this.active&&(vo(this),this.onStop&&this.onStop(),this.active=!1)}}function vo(e){const{deps:t}=e;if(t.length){for(let s=0;s<t.length;s++)t[s].delete(e);t.length=0}}let Ss=!0;const Ja=[];function nr(){Ja.push(Ss),Ss=!1}function or(){const e=Ja.pop();Ss=e===void 0?!0:e}function Lt(e,t,s){if(Ss&&Wt){let i=cn.get(e);i||cn.set(e,i=new Map);let a=i.get(s);a||i.set(s,a=Pn()),Ya(a)}}function Ya(e,t){let s=!1;gr<=hn?Xa(e)||(e.n|=Cs,s=!Za(e)):s=!e.has(Wt),s&&(e.add(Wt),Wt.deps.push(e))}function ps(e,t,s,i,a,u){const f=cn.get(e);if(!f)return;let r=[];if(t==="clear")r=[...f.values()];else if(s==="length"&&Le(e)){const n=Number(i);f.forEach((p,_)=>{(_==="length"||_>=n)&&r.push(p)})}else switch(s!==void 0&&r.push(f.get(s)),t){case"add":Le(e)?Bn(s)&&r.push(f.get("length")):(r.push(f.get(Is)),Gs(e)&&r.push(f.get(un)));break;case"delete":Le(e)||(r.push(f.get(Is)),Gs(e)&&r.push(f.get(un)));break;case"set":Gs(e)&&r.push(f.get(Is));break}if(r.length===1)r[0]&&dn(r[0]);else{const n=[];for(const p of r)p&&n.push(...p);dn(Pn(n))}}function dn(e,t){const s=Le(e)?e:[...e];for(const i of s)i.computed&&bo(i);for(const i of s)i.computed||bo(i)}function bo(e,t){(e!==Wt||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}const nh=On("__proto__,__v_isRef,__isVue"),Qa=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Cr)),oh=Fn(),ah=Fn(!1,!0),lh=Fn(!0),wo=ch();function ch(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...s){const i=qe(this);for(let u=0,f=this.length;u<f;u++)Lt(i,"get",u+"");const a=i[t](...s);return a===-1||a===!1?i[t](...s.map(qe)):a}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...s){nr();const i=qe(this)[t].apply(this,s);return or(),i}}),e}function hh(e){const t=qe(this);return Lt(t,"has",e),t.hasOwnProperty(e)}function Fn(e=!1,t=!1){return function(i,a,u){if(a==="__v_isReactive")return!e;if(a==="__v_isReadonly")return e;if(a==="__v_isShallow")return t;if(a==="__v_raw"&&u===(e?t?Eh:il:t?rl:sl).get(i))return i;const f=Le(i);if(!e){if(f&&ze(wo,a))return Reflect.get(wo,a,u);if(a==="hasOwnProperty")return hh}const r=Reflect.get(i,a,u);return(Cr(a)?Qa.has(a):nh(a))||(e||Lt(i,"get",a),t)?r:bt(r)?f&&Bn(a)?r:r.value:et(r)?e?ol(r):qt(r):r}}const uh=el(),dh=el(!0);function el(e=!1){return function(s,i,a,u){let f=s[i];if(Js(f)&&bt(f)&&!bt(a))return!1;if(!e&&(!di(a)&&!Js(a)&&(f=qe(f),a=qe(a)),!Le(s)&&bt(f)&&!bt(a)))return f.value=a,!0;const r=Le(s)&&Bn(i)?Number(i)<s.length:ze(s,i),n=Reflect.set(s,i,a,u);return s===qe(u)&&(r?kr(a,f)&&ps(s,"set",i,a):ps(s,"add",i,a)),n}}function fh(e,t){const s=ze(e,t);e[t];const i=Reflect.deleteProperty(e,t);return i&&s&&ps(e,"delete",t,void 0),i}function ph(e,t){const s=Reflect.has(e,t);return(!Cr(t)||!Qa.has(t))&&Lt(e,"has",t),s}function _h(e){return Lt(e,"iterate",Le(e)?"length":Is),Reflect.ownKeys(e)}const tl={get:oh,set:uh,deleteProperty:fh,has:ph,ownKeys:_h},gh={get:lh,set(e,t){return!0},deleteProperty(e,t){return!0}},mh=wt({},tl,{get:ah,set:dh}),Hn=e=>e,Ri=e=>Reflect.getPrototypeOf(e);function Nr(e,t,s=!1,i=!1){e=e.__v_raw;const a=qe(e),u=qe(t);s||(t!==u&&Lt(a,"get",t),Lt(a,"get",u));const{has:f}=Ri(a),r=i?Hn:s?Un:Er;if(f.call(a,t))return r(e.get(t));if(f.call(a,u))return r(e.get(u));e!==a&&e.get(t)}function zr(e,t=!1){const s=this.__v_raw,i=qe(s),a=qe(e);return t||(e!==a&&Lt(i,"has",e),Lt(i,"has",a)),e===a?s.has(e):s.has(e)||s.has(a)}function Ur(e,t=!1){return e=e.__v_raw,!t&&Lt(qe(e),"iterate",Is),Reflect.get(e,"size",e)}function yo(e){e=qe(e);const t=qe(this);return Ri(t).has.call(t,e)||(t.add(e),ps(t,"add",e,e)),this}function So(e,t){t=qe(t);const s=qe(this),{has:i,get:a}=Ri(s);let u=i.call(s,e);u||(e=qe(e),u=i.call(s,e));const f=a.call(s,e);return s.set(e,t),u?kr(t,f)&&ps(s,"set",e,t):ps(s,"add",e,t),this}function xo(e){const t=qe(this),{has:s,get:i}=Ri(t);let a=s.call(t,e);a||(e=qe(e),a=s.call(t,e)),i&&i.call(t,e);const u=t.delete(e);return a&&ps(t,"delete",e,void 0),u}function Co(){const e=qe(this),t=e.size!==0,s=e.clear();return t&&ps(e,"clear",void 0,void 0),s}function jr(e,t){return function(i,a){const u=this,f=u.__v_raw,r=qe(f),n=t?Hn:e?Un:Er;return!e&&Lt(r,"iterate",Is),f.forEach((p,_)=>i.call(a,n(p),n(_),u))}}function Wr(e,t,s){return function(...i){const a=this.__v_raw,u=qe(a),f=Gs(u),r=e==="entries"||e===Symbol.iterator&&f,n=e==="keys"&&f,p=a[e](...i),_=s?Hn:t?Un:Er;return!t&&Lt(u,"iterate",n?un:Is),{next(){const{value:d,done:g}=p.next();return g?{value:d,done:g}:{value:r?[_(d[0]),_(d[1])]:_(d),done:g}},[Symbol.iterator](){return this}}}}function vs(e){return function(...t){return e==="delete"?!1:this}}function vh(){const e={get(u){return Nr(this,u)},get size(){return Ur(this)},has:zr,add:yo,set:So,delete:xo,clear:Co,forEach:jr(!1,!1)},t={get(u){return Nr(this,u,!1,!0)},get size(){return Ur(this)},has:zr,add:yo,set:So,delete:xo,clear:Co,forEach:jr(!1,!0)},s={get(u){return Nr(this,u,!0)},get size(){return Ur(this,!0)},has(u){return zr.call(this,u,!0)},add:vs("add"),set:vs("set"),delete:vs("delete"),clear:vs("clear"),forEach:jr(!0,!1)},i={get(u){return Nr(this,u,!0,!0)},get size(){return Ur(this,!0)},has(u){return zr.call(this,u,!0)},add:vs("add"),set:vs("set"),delete:vs("delete"),clear:vs("clear"),forEach:jr(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(u=>{e[u]=Wr(u,!1,!1),s[u]=Wr(u,!0,!1),t[u]=Wr(u,!1,!0),i[u]=Wr(u,!0,!0)}),[e,s,t,i]}const[bh,wh,yh,Sh]=vh();function Nn(e,t){const s=t?e?Sh:yh:e?wh:bh;return(i,a,u)=>a==="__v_isReactive"?!e:a==="__v_isReadonly"?e:a==="__v_raw"?i:Reflect.get(ze(s,a)&&a in i?s:i,a,u)}const xh={get:Nn(!1,!1)},Ch={get:Nn(!1,!0)},kh={get:Nn(!0,!1)},sl=new WeakMap,rl=new WeakMap,il=new WeakMap,Eh=new WeakMap;function Rh(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Ah(e){return e.__v_skip||!Object.isExtensible(e)?0:Rh(Wc(e))}function qt(e){return Js(e)?e:zn(e,!1,tl,xh,sl)}function nl(e){return zn(e,!1,mh,Ch,rl)}function ol(e){return zn(e,!0,gh,kh,il)}function zn(e,t,s,i,a){if(!et(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const u=a.get(e);if(u)return u;const f=Ah(e);if(f===0)return e;const r=new Proxy(e,f===2?i:s);return a.set(e,r),r}function Zs(e){return Js(e)?Zs(e.__v_raw):!!(e&&e.__v_isReactive)}function Js(e){return!!(e&&e.__v_isReadonly)}function di(e){return!!(e&&e.__v_isShallow)}function al(e){return Zs(e)||Js(e)}function qe(e){const t=e&&e.__v_raw;return t?qe(t):e}function ll(e){return hi(e,"__v_skip",!0),e}const Er=e=>et(e)?qt(e):e,Un=e=>et(e)?ol(e):e;function cl(e){Ss&&Wt&&(e=qe(e),Ya(e.dep||(e.dep=Pn())))}function hl(e,t){e=qe(e);const s=e.dep;s&&dn(s)}function bt(e){return!!(e&&e.__v_isRef===!0)}function fe(e){return ul(e,!1)}function Th(e){return ul(e,!0)}function ul(e,t){return bt(e)?e:new Dh(e,t)}class Dh{constructor(t,s){this.__v_isShallow=s,this.dep=void 0,this.__v_isRef=!0,this._rawValue=s?t:qe(t),this._value=s?t:Er(t)}get value(){return cl(this),this._value}set value(t){const s=this.__v_isShallow||di(t)||Js(t);t=s?t:qe(t),kr(t,this._rawValue)&&(this._rawValue=t,this._value=s?t:Er(t),hl(this))}}function ve(e){return bt(e)?e.value:e}const Lh={get:(e,t,s)=>ve(Reflect.get(e,t,s)),set:(e,t,s,i)=>{const a=e[t];return bt(a)&&!bt(s)?(a.value=s,!0):Reflect.set(e,t,s,i)}};function dl(e){return Zs(e)?e:new Proxy(e,Lh)}class Oh{constructor(t,s,i,a){this._setter=s,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new $n(t,()=>{this._dirty||(this._dirty=!0,hl(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!a,this.__v_isReadonly=i}get value(){const t=qe(this);return cl(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function Mh(e,t,s=!1){let i,a;const u=Ie(e);return u?(i=e,a=ls):(i=e.get,a=e.set),new Oh(i,a,u||!a,s)}function xs(e,t,s,i){let a;try{a=i?e(...i):e()}catch(u){Ai(u,t,s)}return a}function Vt(e,t,s,i){if(Ie(e)){const u=xs(e,t,s,i);return u&&Wa(u)&&u.catch(f=>{Ai(f,t,s)}),u}const a=[];for(let u=0;u<e.length;u++)a.push(Vt(e[u],t,s,i));return a}function Ai(e,t,s,i=!0){const a=t?t.vnode:null;if(t){let u=t.parent;const f=t.proxy,r=s;for(;u;){const p=u.ec;if(p){for(let _=0;_<p.length;_++)if(p[_](e,f,r)===!1)return}u=u.parent}const n=t.appContext.config.errorHandler;if(n){xs(n,null,10,[e,f,r]);return}}Ih(e,s,a,i)}function Ih(e,t,s,i=!0){console.error(e)}let Rr=!1,fn=!1;const mt=[];let ns=0;const Xs=[];let ds=null,Ts=0;const fl=Promise.resolve();let jn=null;function Wn(e){const t=jn||fl;return e?t.then(this?e.bind(this):e):t}function Bh(e){let t=ns+1,s=mt.length;for(;t<s;){const i=t+s>>>1;Ar(mt[i])<e?t=i+1:s=i}return t}function qn(e){(!mt.length||!mt.includes(e,Rr&&e.allowRecurse?ns+1:ns))&&(e.id==null?mt.push(e):mt.splice(Bh(e.id),0,e),pl())}function pl(){!Rr&&!fn&&(fn=!0,jn=fl.then(gl))}function Ph(e){const t=mt.indexOf(e);t>ns&&mt.splice(t,1)}function $h(e){Le(e)?Xs.push(...e):(!ds||!ds.includes(e,e.allowRecurse?Ts+1:Ts))&&Xs.push(e),pl()}function ko(e,t=Rr?ns+1:0){for(;t<mt.length;t++){const s=mt[t];s&&s.pre&&(mt.splice(t,1),t--,s())}}function _l(e){if(Xs.length){const t=[...new Set(Xs)];if(Xs.length=0,ds){ds.push(...t);return}for(ds=t,ds.sort((s,i)=>Ar(s)-Ar(i)),Ts=0;Ts<ds.length;Ts++)ds[Ts]();ds=null,Ts=0}}const Ar=e=>e.id==null?1/0:e.id,Fh=(e,t)=>{const s=Ar(e)-Ar(t);if(s===0){if(e.pre&&!t.pre)return-1;if(t.pre&&!e.pre)return 1}return s};function gl(e){fn=!1,Rr=!0,mt.sort(Fh);try{for(ns=0;ns<mt.length;ns++){const t=mt[ns];t&&t.active!==!1&&xs(t,null,14)}}finally{ns=0,mt.length=0,_l(),Rr=!1,jn=null,(mt.length||Xs.length)&&gl()}}function Hh(e,t,...s){if(e.isUnmounted)return;const i=e.vnode.props||tt;let a=s;const u=t.startsWith("update:"),f=u&&t.slice(7);if(f&&f in i){const _=`${f==="modelValue"?"model":f}Modifiers`,{number:d,trim:g}=i[_]||tt;g&&(a=s.map(b=>lt(b)?b.trim():b)),d&&(a=s.map(an))}let r,n=i[r=Ui(t)]||i[r=Ui(cs(t))];!n&&u&&(n=i[r=Ui(ir(t))]),n&&Vt(n,e,6,a);const p=i[r+"Once"];if(p){if(!e.emitted)e.emitted={};else if(e.emitted[r])return;e.emitted[r]=!0,Vt(p,e,6,a)}}function ml(e,t,s=!1){const i=t.emitsCache,a=i.get(e);if(a!==void 0)return a;const u=e.emits;let f={},r=!1;if(!Ie(e)){const n=p=>{const _=ml(p,t,!0);_&&(r=!0,wt(f,_))};!s&&t.mixins.length&&t.mixins.forEach(n),e.extends&&n(e.extends),e.mixins&&e.mixins.forEach(n)}return!u&&!r?(et(e)&&i.set(e,null),null):(Le(u)?u.forEach(n=>f[n]=null):wt(f,u),et(e)&&i.set(e,f),f)}function Ti(e,t){return!e||!Ci(t)?!1:(t=t.slice(2).replace(/Once$/,""),ze(e,t[0].toLowerCase()+t.slice(1))||ze(e,ir(t))||ze(e,t))}let zt=null,Di=null;function fi(e){const t=zt;return zt=e,Di=e&&e.type.__scopeId||null,t}function vl(e){Di=e}function bl(){Di=null}function Yt(e,t=zt,s){if(!t||e._n)return e;const i=(...a)=>{i._d&&$o(-1);const u=fi(t);let f;try{f=e(...a)}finally{fi(u),i._d&&$o(1)}return f};return i._n=!0,i._c=!0,i._d=!0,i}function Eo(e){const{type:t,vnode:s,proxy:i,withProxy:a,props:u,propsOptions:[f],slots:r,attrs:n,emit:p,render:_,renderCache:d,data:g,setupState:b,ctx:w,inheritAttrs:m}=e;let c,h;const o=fi(e);try{if(s.shapeFlag&4){const v=a||i;c=is(_.call(v,v,d,u,b,g,w)),h=n}else{const v=t;c=is(v.length>1?v(u,{attrs:n,slots:r,emit:p}):v(u,null)),h=t.props?n:Nh(n)}}catch(v){br.length=0,Ai(v,e,1),c=be(Fs)}let l=c;if(h&&m!==!1){const v=Object.keys(h),{shapeFlag:S}=l;v.length&&S&7&&(f&&v.some(Mn)&&(h=zh(h,f)),l=Ys(l,h))}return s.dirs&&(l=Ys(l),l.dirs=l.dirs?l.dirs.concat(s.dirs):s.dirs),s.transition&&(l.transition=s.transition),c=l,fi(o),c}const Nh=e=>{let t;for(const s in e)(s==="class"||s==="style"||Ci(s))&&((t||(t={}))[s]=e[s]);return t},zh=(e,t)=>{const s={};for(const i in e)(!Mn(i)||!(i.slice(9)in t))&&(s[i]=e[i]);return s};function Uh(e,t,s){const{props:i,children:a,component:u}=e,{props:f,children:r,patchFlag:n}=t,p=u.emitsOptions;if(t.dirs||t.transition)return!0;if(s&&n>=0){if(n&1024)return!0;if(n&16)return i?Ro(i,f,p):!!f;if(n&8){const _=t.dynamicProps;for(let d=0;d<_.length;d++){const g=_[d];if(f[g]!==i[g]&&!Ti(p,g))return!0}}}else return(a||r)&&(!r||!r.$stable)?!0:i===f?!1:i?f?Ro(i,f,p):!0:!!f;return!1}function Ro(e,t,s){const i=Object.keys(t);if(i.length!==Object.keys(e).length)return!0;for(let a=0;a<i.length;a++){const u=i[a];if(t[u]!==e[u]&&!Ti(s,u))return!0}return!1}function jh({vnode:e,parent:t},s){for(;t&&t.subTree===e;)(e=t.vnode).el=s,t=t.parent}const Wh=e=>e.__isSuspense;function qh(e,t){t&&t.pendingBranch?Le(e)?t.effects.push(...e):t.effects.push(e):$h(e)}const qr={};function Bs(e,t,s){return wl(e,t,s)}function wl(e,t,{immediate:s,deep:i,flush:a,onTrack:u,onTrigger:f}=tt){var r;const n=sh()===((r=ft)==null?void 0:r.scope)?ft:null;let p,_=!1,d=!1;if(bt(e)?(p=()=>e.value,_=di(e)):Zs(e)?(p=()=>e,i=!0):Le(e)?(d=!0,_=e.some(v=>Zs(v)||di(v)),p=()=>e.map(v=>{if(bt(v))return v.value;if(Zs(v))return Os(v);if(Ie(v))return xs(v,n,2)})):Ie(e)?t?p=()=>xs(e,n,2):p=()=>{if(!(n&&n.isUnmounted))return g&&g(),Vt(e,n,3,[b])}:p=ls,t&&i){const v=p;p=()=>Os(v())}let g,b=v=>{g=o.onStop=()=>{xs(v,n,4)}},w;if(Dr)if(b=ls,t?s&&Vt(t,n,3,[p(),d?[]:void 0,b]):p(),a==="sync"){const v=$u();w=v.__watcherHandles||(v.__watcherHandles=[])}else return ls;let m=d?new Array(e.length).fill(qr):qr;const c=()=>{if(o.active)if(t){const v=o.run();(i||_||(d?v.some((S,x)=>kr(S,m[x])):kr(v,m)))&&(g&&g(),Vt(t,n,3,[v,m===qr?void 0:d&&m[0]===qr?[]:m,b]),m=v)}else o.run()};c.allowRecurse=!!t;let h;a==="sync"?h=c:a==="post"?h=()=>Rt(c,n&&n.suspense):(c.pre=!0,n&&(c.id=n.uid),h=()=>qn(c));const o=new $n(p,h);t?s?c():m=o.run():a==="post"?Rt(o.run.bind(o),n&&n.suspense):o.run();const l=()=>{o.stop(),n&&n.scope&&In(n.scope.effects,o)};return w&&w.push(l),l}function Kh(e,t,s){const i=this.proxy,a=lt(e)?e.includes(".")?yl(i,e):()=>i[e]:e.bind(i,i);let u;Ie(t)?u=t:(u=t.handler,s=t);const f=ft;Qs(this);const r=wl(a,u.bind(i),s);return f?Qs(f):Ps(),r}function yl(e,t){const s=t.split(".");return()=>{let i=e;for(let a=0;a<s.length&&i;a++)i=i[s[a]];return i}}function Os(e,t){if(!et(e)||e.__v_skip||(t=t||new Set,t.has(e)))return e;if(t.add(e),bt(e))Os(e.value,t);else if(Le(e))for(let s=0;s<e.length;s++)Os(e[s],t);else if(ja(e)||Gs(e))e.forEach(s=>{Os(s,t)});else if(Ka(e))for(const s in e)Os(e[s],t);return e}function Ze(e,t){const s=zt;if(s===null)return e;const i=Ii(s)||s.proxy,a=e.dirs||(e.dirs=[]);for(let u=0;u<t.length;u++){let[f,r,n,p=tt]=t[u];f&&(Ie(f)&&(f={mounted:f,updated:f}),f.deep&&Os(r),a.push({dir:f,instance:i,value:r,oldValue:void 0,arg:n,modifiers:p}))}return e}function Rs(e,t,s,i){const a=e.dirs,u=t&&t.dirs;for(let f=0;f<a.length;f++){const r=a[f];u&&(r.oldValue=u[f].value);let n=r.dir[i];n&&(nr(),Vt(n,s,8,[e.el,r,e,t]),or())}}function ut(e,t){return Ie(e)?wt({name:e.name},t,{setup:e}):e}const si=e=>!!e.type.__asyncLoader,Sl=e=>e.type.__isKeepAlive;function Vh(e,t){xl(e,"a",t)}function Gh(e,t){xl(e,"da",t)}function xl(e,t,s=ft){const i=e.__wdc||(e.__wdc=()=>{let a=s;for(;a;){if(a.isDeactivated)return;a=a.parent}return e()});if(Li(t,i,s),s){let a=s.parent;for(;a&&a.parent;)Sl(a.parent.vnode)&&Zh(i,t,s,a),a=a.parent}}function Zh(e,t,s,i){const a=Li(t,e,i,!0);Mr(()=>{In(i[t],a)},s)}function Li(e,t,s=ft,i=!1){if(s){const a=s[e]||(s[e]=[]),u=t.__weh||(t.__weh=(...f)=>{if(s.isUnmounted)return;nr(),Qs(s);const r=Vt(t,s,e,f);return Ps(),or(),r});return i?a.unshift(u):a.push(u),u}}const _s=e=>(t,s=ft)=>(!Dr||e==="sp")&&Li(e,(...i)=>t(...i),s),Xh=_s("bm"),fs=_s("m"),Jh=_s("bu"),Yh=_s("u"),Qh=_s("bum"),Mr=_s("um"),eu=_s("sp"),tu=_s("rtg"),su=_s("rtc");function ru(e,t=ft){Li("ec",e,t)}const iu="components",Cl=Symbol.for("v-ndc");function kl(e){return lt(e)?nu(iu,e,!1)||e:e||Cl}function nu(e,t,s=!0,i=!1){const a=zt||ft;if(a){const u=a.type;{const r=Iu(u,!1);if(r&&(r===t||r===cs(t)||r===Ei(cs(t))))return u}const f=Ao(a[e]||u[e],t)||Ao(a.appContext[e],t);return!f&&i?u:f}}function Ao(e,t){return e&&(e[t]||e[cs(t)]||e[Ei(cs(t))])}function Gt(e,t,s,i){let a;const u=s;if(Le(e)||lt(e)){a=new Array(e.length);for(let f=0,r=e.length;f<r;f++)a[f]=t(e[f],f,void 0,u)}else if(typeof e=="number"){a=new Array(e);for(let f=0;f<e;f++)a[f]=t(f+1,f,void 0,u)}else if(et(e))if(e[Symbol.iterator])a=Array.from(e,(f,r)=>t(f,r,void 0,u));else{const f=Object.keys(e);a=new Array(f.length);for(let r=0,n=f.length;r<n;r++){const p=f[r];a[r]=t(e[p],p,r,u)}}else a=[];return a}const pn=e=>e?$l(e)?Ii(e)||e.proxy:pn(e.parent):null,vr=wt(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>pn(e.parent),$root:e=>pn(e.root),$emit:e=>e.emit,$options:e=>Rl(e),$forceUpdate:e=>e.f||(e.f=()=>qn(e.update)),$nextTick:e=>e.n||(e.n=Wn.bind(e.proxy)),$watch:e=>Kh.bind(e)}),ji=(e,t)=>e!==tt&&!e.__isScriptSetup&&ze(e,t),ou={get({_:e},t){const{ctx:s,setupState:i,data:a,props:u,accessCache:f,type:r,appContext:n}=e;let p;if(t[0]!=="$"){const b=f[t];if(b!==void 0)switch(b){case 1:return i[t];case 2:return a[t];case 4:return s[t];case 3:return u[t]}else{if(ji(i,t))return f[t]=1,i[t];if(a!==tt&&ze(a,t))return f[t]=2,a[t];if((p=e.propsOptions[0])&&ze(p,t))return f[t]=3,u[t];if(s!==tt&&ze(s,t))return f[t]=4,s[t];_n&&(f[t]=0)}}const _=vr[t];let d,g;if(_)return t==="$attrs"&&Lt(e,"get",t),_(e);if((d=r.__cssModules)&&(d=d[t]))return d;if(s!==tt&&ze(s,t))return f[t]=4,s[t];if(g=n.config.globalProperties,ze(g,t))return g[t]},set({_:e},t,s){const{data:i,setupState:a,ctx:u}=e;return ji(a,t)?(a[t]=s,!0):i!==tt&&ze(i,t)?(i[t]=s,!0):ze(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(u[t]=s,!0)},has({_:{data:e,setupState:t,accessCache:s,ctx:i,appContext:a,propsOptions:u}},f){let r;return!!s[f]||e!==tt&&ze(e,f)||ji(t,f)||(r=u[0])&&ze(r,f)||ze(i,f)||ze(vr,f)||ze(a.config.globalProperties,f)},defineProperty(e,t,s){return s.get!=null?e._.accessCache[t]=0:ze(s,"value")&&this.set(e,t,s.value,null),Reflect.defineProperty(e,t,s)}};function To(e){return Le(e)?e.reduce((t,s)=>(t[s]=null,t),{}):e}let _n=!0;function au(e){const t=Rl(e),s=e.proxy,i=e.ctx;_n=!1,t.beforeCreate&&Do(t.beforeCreate,e,"bc");const{data:a,computed:u,methods:f,watch:r,provide:n,inject:p,created:_,beforeMount:d,mounted:g,beforeUpdate:b,updated:w,activated:m,deactivated:c,beforeDestroy:h,beforeUnmount:o,destroyed:l,unmounted:v,render:S,renderTracked:x,renderTriggered:k,errorCaptured:C,serverPrefetch:A,expose:N,inheritAttrs:G,components:L,directives:I,filters:E}=t;if(p&&lu(p,i,null),f)for(const J in f){const ie=f[J];Ie(ie)&&(i[J]=ie.bind(s))}if(a){const J=a.call(s,s);et(J)&&(e.data=qt(J))}if(_n=!0,u)for(const J in u){const ie=u[J],T=Ie(ie)?ie.bind(s,s):Ie(ie.get)?ie.get.bind(s,s):ls,U=!Ie(ie)&&Ie(ie.set)?ie.set.bind(s):ls,M=Ue({get:T,set:U});Object.defineProperty(i,J,{enumerable:!0,configurable:!0,get:()=>M.value,set:$=>M.value=$})}if(r)for(const J in r)El(r[J],i,s,J);if(n){const J=Ie(n)?n.call(s):n;Reflect.ownKeys(J).forEach(ie=>{ri(ie,J[ie])})}_&&Do(_,e,"c");function Q(J,ie){Le(ie)?ie.forEach(T=>J(T.bind(s))):ie&&J(ie.bind(s))}if(Q(Xh,d),Q(fs,g),Q(Jh,b),Q(Yh,w),Q(Vh,m),Q(Gh,c),Q(ru,C),Q(su,x),Q(tu,k),Q(Qh,o),Q(Mr,v),Q(eu,A),Le(N))if(N.length){const J=e.exposed||(e.exposed={});N.forEach(ie=>{Object.defineProperty(J,ie,{get:()=>s[ie],set:T=>s[ie]=T})})}else e.exposed||(e.exposed={});S&&e.render===ls&&(e.render=S),G!=null&&(e.inheritAttrs=G),L&&(e.components=L),I&&(e.directives=I)}function lu(e,t,s=ls){Le(e)&&(e=gn(e));for(const i in e){const a=e[i];let u;et(a)?"default"in a?u=Zt(a.from||i,a.default,!0):u=Zt(a.from||i):u=Zt(a),bt(u)?Object.defineProperty(t,i,{enumerable:!0,configurable:!0,get:()=>u.value,set:f=>u.value=f}):t[i]=u}}function Do(e,t,s){Vt(Le(e)?e.map(i=>i.bind(t.proxy)):e.bind(t.proxy),t,s)}function El(e,t,s,i){const a=i.includes(".")?yl(s,i):()=>s[i];if(lt(e)){const u=t[e];Ie(u)&&Bs(a,u)}else if(Ie(e))Bs(a,e.bind(s));else if(et(e))if(Le(e))e.forEach(u=>El(u,t,s,i));else{const u=Ie(e.handler)?e.handler.bind(s):t[e.handler];Ie(u)&&Bs(a,u,e)}}function Rl(e){const t=e.type,{mixins:s,extends:i}=t,{mixins:a,optionsCache:u,config:{optionMergeStrategies:f}}=e.appContext,r=u.get(t);let n;return r?n=r:!a.length&&!s&&!i?n=t:(n={},a.length&&a.forEach(p=>pi(n,p,f,!0)),pi(n,t,f)),et(t)&&u.set(t,n),n}function pi(e,t,s,i=!1){const{mixins:a,extends:u}=t;u&&pi(e,u,s,!0),a&&a.forEach(f=>pi(e,f,s,!0));for(const f in t)if(!(i&&f==="expose")){const r=cu[f]||s&&s[f];e[f]=r?r(e[f],t[f]):t[f]}return e}const cu={data:Lo,props:Oo,emits:Oo,methods:mr,computed:mr,beforeCreate:St,created:St,beforeMount:St,mounted:St,beforeUpdate:St,updated:St,beforeDestroy:St,beforeUnmount:St,destroyed:St,unmounted:St,activated:St,deactivated:St,errorCaptured:St,serverPrefetch:St,components:mr,directives:mr,watch:uu,provide:Lo,inject:hu};function Lo(e,t){return t?e?function(){return wt(Ie(e)?e.call(this,this):e,Ie(t)?t.call(this,this):t)}:t:e}function hu(e,t){return mr(gn(e),gn(t))}function gn(e){if(Le(e)){const t={};for(let s=0;s<e.length;s++)t[e[s]]=e[s];return t}return e}function St(e,t){return e?[...new Set([].concat(e,t))]:t}function mr(e,t){return e?wt(Object.create(null),e,t):t}function Oo(e,t){return e?Le(e)&&Le(t)?[...new Set([...e,...t])]:wt(Object.create(null),To(e),To(t??{})):t}function uu(e,t){if(!e)return t;if(!t)return e;const s=wt(Object.create(null),e);for(const i in t)s[i]=St(e[i],t[i]);return s}function Al(){return{app:null,config:{isNativeTag:zc,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let du=0;function fu(e,t){return function(i,a=null){Ie(i)||(i=wt({},i)),a!=null&&!et(a)&&(a=null);const u=Al(),f=new Set;let r=!1;const n=u.app={_uid:du++,_component:i,_props:a,_container:null,_context:u,_instance:null,version:Fu,get config(){return u.config},set config(p){},use(p,..._){return f.has(p)||(p&&Ie(p.install)?(f.add(p),p.install(n,..._)):Ie(p)&&(f.add(p),p(n,..._))),n},mixin(p){return u.mixins.includes(p)||u.mixins.push(p),n},component(p,_){return _?(u.components[p]=_,n):u.components[p]},directive(p,_){return _?(u.directives[p]=_,n):u.directives[p]},mount(p,_,d){if(!r){const g=be(i,a);return g.appContext=u,e(g,p,d),r=!0,n._container=p,p.__vue_app__=n,Ii(g.component)||g.component.proxy}},unmount(){r&&(e(null,n._container),delete n._container.__vue_app__)},provide(p,_){return u.provides[p]=_,n},runWithContext(p){_i=n;try{return p()}finally{_i=null}}};return n}}let _i=null;function ri(e,t){if(ft){let s=ft.provides;const i=ft.parent&&ft.parent.provides;i===s&&(s=ft.provides=Object.create(i)),s[e]=t}}function Zt(e,t,s=!1){const i=ft||zt;if(i||_i){const a=i?i.parent==null?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:_i._context.provides;if(a&&e in a)return a[e];if(arguments.length>1)return s&&Ie(t)?t.call(i&&i.proxy):t}}function pu(e,t,s,i=!1){const a={},u={};hi(u,Mi,1),e.propsDefaults=Object.create(null),Tl(e,t,a,u);for(const f in e.propsOptions[0])f in a||(a[f]=void 0);s?e.props=i?a:nl(a):e.type.props?e.props=a:e.props=u,e.attrs=u}function _u(e,t,s,i){const{props:a,attrs:u,vnode:{patchFlag:f}}=e,r=qe(a),[n]=e.propsOptions;let p=!1;if((i||f>0)&&!(f&16)){if(f&8){const _=e.vnode.dynamicProps;for(let d=0;d<_.length;d++){let g=_[d];if(Ti(e.emitsOptions,g))continue;const b=t[g];if(n)if(ze(u,g))b!==u[g]&&(u[g]=b,p=!0);else{const w=cs(g);a[w]=mn(n,r,w,b,e,!1)}else b!==u[g]&&(u[g]=b,p=!0)}}}else{Tl(e,t,a,u)&&(p=!0);let _;for(const d in r)(!t||!ze(t,d)&&((_=ir(d))===d||!ze(t,_)))&&(n?s&&(s[d]!==void 0||s[_]!==void 0)&&(a[d]=mn(n,r,d,void 0,e,!0)):delete a[d]);if(u!==r)for(const d in u)(!t||!ze(t,d))&&(delete u[d],p=!0)}p&&ps(e,"set","$attrs")}function Tl(e,t,s,i){const[a,u]=e.propsOptions;let f=!1,r;if(t)for(let n in t){if(ei(n))continue;const p=t[n];let _;a&&ze(a,_=cs(n))?!u||!u.includes(_)?s[_]=p:(r||(r={}))[_]=p:Ti(e.emitsOptions,n)||(!(n in i)||p!==i[n])&&(i[n]=p,f=!0)}if(u){const n=qe(s),p=r||tt;for(let _=0;_<u.length;_++){const d=u[_];s[d]=mn(a,n,d,p[d],e,!ze(p,d))}}return f}function mn(e,t,s,i,a,u){const f=e[s];if(f!=null){const r=ze(f,"default");if(r&&i===void 0){const n=f.default;if(f.type!==Function&&!f.skipFactory&&Ie(n)){const{propsDefaults:p}=a;s in p?i=p[s]:(Qs(a),i=p[s]=n.call(null,t),Ps())}else i=n}f[0]&&(u&&!r?i=!1:f[1]&&(i===""||i===ir(s))&&(i=!0))}return i}function Dl(e,t,s=!1){const i=t.propsCache,a=i.get(e);if(a)return a;const u=e.props,f={},r=[];let n=!1;if(!Ie(e)){const _=d=>{n=!0;const[g,b]=Dl(d,t,!0);wt(f,g),b&&r.push(...b)};!s&&t.mixins.length&&t.mixins.forEach(_),e.extends&&_(e.extends),e.mixins&&e.mixins.forEach(_)}if(!u&&!n)return et(e)&&i.set(e,Vs),Vs;if(Le(u))for(let _=0;_<u.length;_++){const d=cs(u[_]);Mo(d)&&(f[d]=tt)}else if(u)for(const _ in u){const d=cs(_);if(Mo(d)){const g=u[_],b=f[d]=Le(g)||Ie(g)?{type:g}:wt({},g);if(b){const w=Po(Boolean,b.type),m=Po(String,b.type);b[0]=w>-1,b[1]=m<0||w<m,(w>-1||ze(b,"default"))&&r.push(d)}}}const p=[f,r];return et(e)&&i.set(e,p),p}function Mo(e){return e[0]!=="$"}function Io(e){const t=e&&e.toString().match(/^\s*(function|class) (\w+)/);return t?t[2]:e===null?"null":""}function Bo(e,t){return Io(e)===Io(t)}function Po(e,t){return Le(t)?t.findIndex(s=>Bo(s,e)):Ie(t)&&Bo(t,e)?0:-1}const Ll=e=>e[0]==="_"||e==="$stable",Kn=e=>Le(e)?e.map(is):[is(e)],gu=(e,t,s)=>{if(t._n)return t;const i=Yt((...a)=>Kn(t(...a)),s);return i._c=!1,i},Ol=(e,t,s)=>{const i=e._ctx;for(const a in e){if(Ll(a))continue;const u=e[a];if(Ie(u))t[a]=gu(a,u,i);else if(u!=null){const f=Kn(u);t[a]=()=>f}}},Ml=(e,t)=>{const s=Kn(t);e.slots.default=()=>s},mu=(e,t)=>{if(e.vnode.shapeFlag&32){const s=t._;s?(e.slots=qe(t),hi(t,"_",s)):Ol(t,e.slots={})}else e.slots={},t&&Ml(e,t);hi(e.slots,Mi,1)},vu=(e,t,s)=>{const{vnode:i,slots:a}=e;let u=!0,f=tt;if(i.shapeFlag&32){const r=t._;r?s&&r===1?u=!1:(wt(a,t),!s&&r===1&&delete a._):(u=!t.$stable,Ol(t,a)),f=t}else t&&(Ml(e,t),f={default:1});if(u)for(const r in a)!Ll(r)&&!(r in f)&&delete a[r]};function vn(e,t,s,i,a=!1){if(Le(e)){e.forEach((g,b)=>vn(g,t&&(Le(t)?t[b]:t),s,i,a));return}if(si(i)&&!a)return;const u=i.shapeFlag&4?Ii(i.component)||i.component.proxy:i.el,f=a?null:u,{i:r,r:n}=e,p=t&&t.r,_=r.refs===tt?r.refs={}:r.refs,d=r.setupState;if(p!=null&&p!==n&&(lt(p)?(_[p]=null,ze(d,p)&&(d[p]=null)):bt(p)&&(p.value=null)),Ie(n))xs(n,r,12,[f,_]);else{const g=lt(n),b=bt(n);if(g||b){const w=()=>{if(e.f){const m=g?ze(d,n)?d[n]:_[n]:n.value;a?Le(m)&&In(m,u):Le(m)?m.includes(u)||m.push(u):g?(_[n]=[u],ze(d,n)&&(d[n]=_[n])):(n.value=[u],e.k&&(_[e.k]=n.value))}else g?(_[n]=f,ze(d,n)&&(d[n]=f)):b&&(n.value=f,e.k&&(_[e.k]=f))};f?(w.id=-1,Rt(w,s)):w()}}}const Rt=qh;function bu(e){return wu(e)}function wu(e,t){const s=ln();s.__VUE__=!0;const{insert:i,remove:a,patchProp:u,createElement:f,createText:r,createComment:n,setText:p,setElementText:_,parentNode:d,nextSibling:g,setScopeId:b=ls,insertStaticContent:w}=e,m=(F,q,Y,y=null,P=null,K=null,D=!1,B=null,V=!!q.dynamicChildren)=>{if(F===q)return;F&&!hr(F,q)&&(y=j(F),$(F,P,K,!0),F=null),q.patchFlag===-2&&(V=!1,q.dynamicChildren=null);const{type:Z,ref:z,shapeFlag:H}=q;switch(Z){case Oi:c(F,q,Y,y);break;case Fs:h(F,q,Y,y);break;case ii:F==null&&o(q,Y,y,D);break;case Qe:L(F,q,Y,y,P,K,D,B,V);break;default:H&1?S(F,q,Y,y,P,K,D,B,V):H&6?I(F,q,Y,y,P,K,D,B,V):(H&64||H&128)&&Z.process(F,q,Y,y,P,K,D,B,V,ee)}z!=null&&P&&vn(z,F&&F.ref,K,q||F,!q)},c=(F,q,Y,y)=>{if(F==null)i(q.el=r(q.children),Y,y);else{const P=q.el=F.el;q.children!==F.children&&p(P,q.children)}},h=(F,q,Y,y)=>{F==null?i(q.el=n(q.children||""),Y,y):q.el=F.el},o=(F,q,Y,y)=>{[F.el,F.anchor]=w(F.children,q,Y,y,F.el,F.anchor)},l=({el:F,anchor:q},Y,y)=>{let P;for(;F&&F!==q;)P=g(F),i(F,Y,y),F=P;i(q,Y,y)},v=({el:F,anchor:q})=>{let Y;for(;F&&F!==q;)Y=g(F),a(F),F=Y;a(q)},S=(F,q,Y,y,P,K,D,B,V)=>{D=D||q.type==="svg",F==null?x(q,Y,y,P,K,D,B,V):A(F,q,P,K,D,B,V)},x=(F,q,Y,y,P,K,D,B)=>{let V,Z;const{type:z,props:H,shapeFlag:W,transition:se,dirs:re}=F;if(V=F.el=f(F.type,K,H&&H.is,H),W&8?_(V,F.children):W&16&&C(F.children,V,null,y,P,K&&z!=="foreignObject",D,B),re&&Rs(F,null,y,"created"),k(V,F,F.scopeId,D,y),H){for(const ge in H)ge!=="value"&&!ei(ge)&&u(V,ge,null,H[ge],K,F.children,y,P,pe);"value"in H&&u(V,"value",null,H.value),(Z=H.onVnodeBeforeMount)&&ts(Z,y,F)}re&&Rs(F,null,y,"beforeMount");const ae=(!P||P&&!P.pendingBranch)&&se&&!se.persisted;ae&&se.beforeEnter(V),i(V,q,Y),((Z=H&&H.onVnodeMounted)||ae||re)&&Rt(()=>{Z&&ts(Z,y,F),ae&&se.enter(V),re&&Rs(F,null,y,"mounted")},P)},k=(F,q,Y,y,P)=>{if(Y&&b(F,Y),y)for(let K=0;K<y.length;K++)b(F,y[K]);if(P){let K=P.subTree;if(q===K){const D=P.vnode;k(F,D,D.scopeId,D.slotScopeIds,P.parent)}}},C=(F,q,Y,y,P,K,D,B,V=0)=>{for(let Z=V;Z<F.length;Z++){const z=F[Z]=B?ws(F[Z]):is(F[Z]);m(null,z,q,Y,y,P,K,D,B)}},A=(F,q,Y,y,P,K,D)=>{const B=q.el=F.el;let{patchFlag:V,dynamicChildren:Z,dirs:z}=q;V|=F.patchFlag&16;const H=F.props||tt,W=q.props||tt;let se;Y&&As(Y,!1),(se=W.onVnodeBeforeUpdate)&&ts(se,Y,q,F),z&&Rs(q,F,Y,"beforeUpdate"),Y&&As(Y,!0);const re=P&&q.type!=="foreignObject";if(Z?N(F.dynamicChildren,Z,B,Y,y,re,K):D||ie(F,q,B,null,Y,y,re,K,!1),V>0){if(V&16)G(B,q,H,W,Y,y,P);else if(V&2&&H.class!==W.class&&u(B,"class",null,W.class,P),V&4&&u(B,"style",H.style,W.style,P),V&8){const ae=q.dynamicProps;for(let ge=0;ge<ae.length;ge++){const _e=ae[ge],xe=H[_e],De=W[_e];(De!==xe||_e==="value")&&u(B,_e,xe,De,P,F.children,Y,y,pe)}}V&1&&F.children!==q.children&&_(B,q.children)}else!D&&Z==null&&G(B,q,H,W,Y,y,P);((se=W.onVnodeUpdated)||z)&&Rt(()=>{se&&ts(se,Y,q,F),z&&Rs(q,F,Y,"updated")},y)},N=(F,q,Y,y,P,K,D)=>{for(let B=0;B<q.length;B++){const V=F[B],Z=q[B],z=V.el&&(V.type===Qe||!hr(V,Z)||V.shapeFlag&70)?d(V.el):Y;m(V,Z,z,null,y,P,K,D,!0)}},G=(F,q,Y,y,P,K,D)=>{if(Y!==y){if(Y!==tt)for(const B in Y)!ei(B)&&!(B in y)&&u(F,B,Y[B],null,D,q.children,P,K,pe);for(const B in y){if(ei(B))continue;const V=y[B],Z=Y[B];V!==Z&&B!=="value"&&u(F,B,Z,V,D,q.children,P,K,pe)}"value"in y&&u(F,"value",Y.value,y.value)}},L=(F,q,Y,y,P,K,D,B,V)=>{const Z=q.el=F?F.el:r(""),z=q.anchor=F?F.anchor:r("");let{patchFlag:H,dynamicChildren:W,slotScopeIds:se}=q;se&&(B=B?B.concat(se):se),F==null?(i(Z,Y,y),i(z,Y,y),C(q.children,Y,z,P,K,D,B,V)):H>0&&H&64&&W&&F.dynamicChildren?(N(F.dynamicChildren,W,Y,P,K,D,B),(q.key!=null||P&&q===P.subTree)&&Il(F,q,!0)):ie(F,q,Y,z,P,K,D,B,V)},I=(F,q,Y,y,P,K,D,B,V)=>{q.slotScopeIds=B,F==null?q.shapeFlag&512?P.ctx.activate(q,Y,y,D,V):E(q,Y,y,P,K,D,V):X(F,q,V)},E=(F,q,Y,y,P,K,D)=>{const B=F.component=Tu(F,y,P);if(Sl(F)&&(B.ctx.renderer=ee),Du(B),B.asyncDep){if(P&&P.registerDep(B,Q),!F.el){const V=B.subTree=be(Fs);h(null,V,q,Y)}return}Q(B,F,q,Y,P,K,D)},X=(F,q,Y)=>{const y=q.component=F.component;if(Uh(F,q,Y))if(y.asyncDep&&!y.asyncResolved){J(y,q,Y);return}else y.next=q,Ph(y.update),y.update();else q.el=F.el,y.vnode=q},Q=(F,q,Y,y,P,K,D)=>{const B=()=>{if(F.isMounted){let{next:z,bu:H,u:W,parent:se,vnode:re}=F,ae=z,ge;As(F,!1),z?(z.el=re.el,J(F,z,D)):z=re,H&&ti(H),(ge=z.props&&z.props.onVnodeBeforeUpdate)&&ts(ge,se,z,re),As(F,!0);const _e=Eo(F),xe=F.subTree;F.subTree=_e,m(xe,_e,d(xe.el),j(xe),F,P,K),z.el=_e.el,ae===null&&jh(F,_e.el),W&&Rt(W,P),(ge=z.props&&z.props.onVnodeUpdated)&&Rt(()=>ts(ge,se,z,re),P)}else{let z;const{el:H,props:W}=q,{bm:se,m:re,parent:ae}=F,ge=si(q);As(F,!1),se&&ti(se),!ge&&(z=W&&W.onVnodeBeforeMount)&&ts(z,ae,q),As(F,!0);{const _e=F.subTree=Eo(F);m(null,_e,Y,y,F,P,K),q.el=_e.el}if(re&&Rt(re,P),!ge&&(z=W&&W.onVnodeMounted)){const _e=q;Rt(()=>ts(z,ae,_e),P)}(q.shapeFlag&256||ae&&si(ae.vnode)&&ae.vnode.shapeFlag&256)&&F.a&&Rt(F.a,P),F.isMounted=!0,q=Y=y=null}},V=F.effect=new $n(B,()=>qn(Z),F.scope),Z=F.update=()=>V.run();Z.id=F.uid,As(F,!0),Z()},J=(F,q,Y)=>{q.component=F;const y=F.vnode.props;F.vnode=q,F.next=null,_u(F,q.props,y,Y),vu(F,q.children,Y),nr(),ko(),or()},ie=(F,q,Y,y,P,K,D,B,V=!1)=>{const Z=F&&F.children,z=F?F.shapeFlag:0,H=q.children,{patchFlag:W,shapeFlag:se}=q;if(W>0){if(W&128){U(Z,H,Y,y,P,K,D,B,V);return}else if(W&256){T(Z,H,Y,y,P,K,D,B,V);return}}se&8?(z&16&&pe(Z,P,K),H!==Z&&_(Y,H)):z&16?se&16?U(Z,H,Y,y,P,K,D,B,V):pe(Z,P,K,!0):(z&8&&_(Y,""),se&16&&C(H,Y,y,P,K,D,B,V))},T=(F,q,Y,y,P,K,D,B,V)=>{F=F||Vs,q=q||Vs;const Z=F.length,z=q.length,H=Math.min(Z,z);let W;for(W=0;W<H;W++){const se=q[W]=V?ws(q[W]):is(q[W]);m(F[W],se,Y,null,P,K,D,B,V)}Z>z?pe(F,P,K,!0,!1,H):C(q,Y,y,P,K,D,B,V,H)},U=(F,q,Y,y,P,K,D,B,V)=>{let Z=0;const z=q.length;let H=F.length-1,W=z-1;for(;Z<=H&&Z<=W;){const se=F[Z],re=q[Z]=V?ws(q[Z]):is(q[Z]);if(hr(se,re))m(se,re,Y,null,P,K,D,B,V);else break;Z++}for(;Z<=H&&Z<=W;){const se=F[H],re=q[W]=V?ws(q[W]):is(q[W]);if(hr(se,re))m(se,re,Y,null,P,K,D,B,V);else break;H--,W--}if(Z>H){if(Z<=W){const se=W+1,re=se<z?q[se].el:y;for(;Z<=W;)m(null,q[Z]=V?ws(q[Z]):is(q[Z]),Y,re,P,K,D,B,V),Z++}}else if(Z>W)for(;Z<=H;)$(F[Z],P,K,!0),Z++;else{const se=Z,re=Z,ae=new Map;for(Z=re;Z<=W;Z++){const Be=q[Z]=V?ws(q[Z]):is(q[Z]);Be.key!=null&&ae.set(Be.key,Z)}let ge,_e=0;const xe=W-re+1;let De=!1,Ae=0;const Se=new Array(xe);for(Z=0;Z<xe;Z++)Se[Z]=0;for(Z=se;Z<=H;Z++){const Be=F[Z];if(_e>=xe){$(Be,P,K,!0);continue}let je;if(Be.key!=null)je=ae.get(Be.key);else for(ge=re;ge<=W;ge++)if(Se[ge-re]===0&&hr(Be,q[ge])){je=ge;break}je===void 0?$(Be,P,K,!0):(Se[je-re]=Z+1,je>=Ae?Ae=je:De=!0,m(Be,q[je],Y,null,P,K,D,B,V),_e++)}const Ee=De?yu(Se):Vs;for(ge=Ee.length-1,Z=xe-1;Z>=0;Z--){const Be=re+Z,je=q[Be],$e=Be+1<z?q[Be+1].el:y;Se[Z]===0?m(null,je,Y,$e,P,K,D,B,V):De&&(ge<0||Z!==Ee[ge]?M(je,Y,$e,2):ge--)}}},M=(F,q,Y,y,P=null)=>{const{el:K,type:D,transition:B,children:V,shapeFlag:Z}=F;if(Z&6){M(F.component.subTree,q,Y,y);return}if(Z&128){F.suspense.move(q,Y,y);return}if(Z&64){D.move(F,q,Y,ee);return}if(D===Qe){i(K,q,Y);for(let H=0;H<V.length;H++)M(V[H],q,Y,y);i(F.anchor,q,Y);return}if(D===ii){l(F,q,Y);return}if(y!==2&&Z&1&&B)if(y===0)B.beforeEnter(K),i(K,q,Y),Rt(()=>B.enter(K),P);else{const{leave:H,delayLeave:W,afterLeave:se}=B,re=()=>i(K,q,Y),ae=()=>{H(K,()=>{re(),se&&se()})};W?W(K,re,ae):ae()}else i(K,q,Y)},$=(F,q,Y,y=!1,P=!1)=>{const{type:K,props:D,ref:B,children:V,dynamicChildren:Z,shapeFlag:z,patchFlag:H,dirs:W}=F;if(B!=null&&vn(B,null,Y,F,!0),z&256){q.ctx.deactivate(F);return}const se=z&1&&W,re=!si(F);let ae;if(re&&(ae=D&&D.onVnodeBeforeUnmount)&&ts(ae,q,F),z&6)ce(F.component,Y,y);else{if(z&128){F.suspense.unmount(Y,y);return}se&&Rs(F,null,q,"beforeUnmount"),z&64?F.type.remove(F,q,Y,P,ee,y):Z&&(K!==Qe||H>0&&H&64)?pe(Z,q,Y,!1,!0):(K===Qe&&H&384||!P&&z&16)&&pe(V,q,Y),y&&ne(F)}(re&&(ae=D&&D.onVnodeUnmounted)||se)&&Rt(()=>{ae&&ts(ae,q,F),se&&Rs(F,null,q,"unmounted")},Y)},ne=F=>{const{type:q,el:Y,anchor:y,transition:P}=F;if(q===Qe){le(Y,y);return}if(q===ii){v(F);return}const K=()=>{a(Y),P&&!P.persisted&&P.afterLeave&&P.afterLeave()};if(F.shapeFlag&1&&P&&!P.persisted){const{leave:D,delayLeave:B}=P,V=()=>D(Y,K);B?B(F.el,K,V):V()}else K()},le=(F,q)=>{let Y;for(;F!==q;)Y=g(F),a(F),F=Y;a(q)},ce=(F,q,Y)=>{const{bum:y,scope:P,update:K,subTree:D,um:B}=F;y&&ti(y),P.stop(),K&&(K.active=!1,$(D,F,q,Y)),B&&Rt(B,q),Rt(()=>{F.isUnmounted=!0},q),q&&q.pendingBranch&&!q.isUnmounted&&F.asyncDep&&!F.asyncResolved&&F.suspenseId===q.pendingId&&(q.deps--,q.deps===0&&q.resolve())},pe=(F,q,Y,y=!1,P=!1,K=0)=>{for(let D=K;D<F.length;D++)$(F[D],q,Y,y,P)},j=F=>F.shapeFlag&6?j(F.component.subTree):F.shapeFlag&128?F.suspense.next():g(F.anchor||F.el),O=(F,q,Y)=>{F==null?q._vnode&&$(q._vnode,null,null,!0):m(q._vnode||null,F,q,null,null,null,Y),ko(),_l(),q._vnode=F},ee={p:m,um:$,m:M,r:ne,mt:E,mc:C,pc:ie,pbc:N,n:j,o:e};return{render:O,hydrate:void 0,createApp:fu(O)}}function As({effect:e,update:t},s){e.allowRecurse=t.allowRecurse=s}function Il(e,t,s=!1){const i=e.children,a=t.children;if(Le(i)&&Le(a))for(let u=0;u<i.length;u++){const f=i[u];let r=a[u];r.shapeFlag&1&&!r.dynamicChildren&&((r.patchFlag<=0||r.patchFlag===32)&&(r=a[u]=ws(a[u]),r.el=f.el),s||Il(f,r)),r.type===Oi&&(r.el=f.el)}}function yu(e){const t=e.slice(),s=[0];let i,a,u,f,r;const n=e.length;for(i=0;i<n;i++){const p=e[i];if(p!==0){if(a=s[s.length-1],e[a]<p){t[i]=a,s.push(i);continue}for(u=0,f=s.length-1;u<f;)r=u+f>>1,e[s[r]]<p?u=r+1:f=r;p<e[s[u]]&&(u>0&&(t[i]=s[u-1]),s[u]=i)}}for(u=s.length,f=s[u-1];u-- >0;)s[u]=f,f=t[f];return s}const Su=e=>e.__isTeleport,Qe=Symbol.for("v-fgt"),Oi=Symbol.for("v-txt"),Fs=Symbol.for("v-cmt"),ii=Symbol.for("v-stc"),br=[];let Kt=null;function ue(e=!1){br.push(Kt=e?null:[])}function xu(){br.pop(),Kt=br[br.length-1]||null}let Tr=1;function $o(e){Tr+=e}function Bl(e){return e.dynamicChildren=Tr>0?Kt||Vs:null,xu(),Tr>0&&Kt&&Kt.push(e),e}function de(e,t,s,i,a,u){return Bl(R(e,t,s,i,a,u,!0))}function Hs(e,t,s,i,a){return Bl(be(e,t,s,i,a,!0))}function bn(e){return e?e.__v_isVNode===!0:!1}function hr(e,t){return e.type===t.type&&e.key===t.key}const Mi="__vInternal",Pl=({key:e})=>e??null,ni=({ref:e,ref_key:t,ref_for:s})=>(typeof e=="number"&&(e=""+e),e!=null?lt(e)||bt(e)||Ie(e)?{i:zt,r:e,k:t,f:!!s}:e:null);function R(e,t=null,s=null,i=0,a=null,u=e===Qe?0:1,f=!1,r=!1){const n={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Pl(t),ref:t&&ni(t),scopeId:Di,slotScopeIds:null,children:s,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:u,patchFlag:i,dynamicProps:a,dynamicChildren:null,appContext:null,ctx:zt};return r?(Vn(n,s),u&128&&e.normalize(n)):s&&(n.shapeFlag|=lt(s)?8:16),Tr>0&&!f&&Kt&&(n.patchFlag>0||u&6)&&n.patchFlag!==32&&Kt.push(n),n}const be=Cu;function Cu(e,t=null,s=null,i=0,a=null,u=!1){if((!e||e===Cl)&&(e=Fs),bn(e)){const r=Ys(e,t,!0);return s&&Vn(r,s),Tr>0&&!u&&Kt&&(r.shapeFlag&6?Kt[Kt.indexOf(e)]=r:Kt.push(r)),r.patchFlag|=-2,r}if(Bu(e)&&(e=e.__vccOpts),t){t=ku(t);let{class:r,style:n}=t;r&&!lt(r)&&(t.class=Te(r)),et(n)&&(al(n)&&!Le(n)&&(n=wt({},n)),t.style=At(n))}const f=lt(e)?1:Wh(e)?128:Su(e)?64:et(e)?4:Ie(e)?2:0;return R(e,t,s,i,a,f,u,!0)}function ku(e){return e?al(e)||Mi in e?wt({},e):e:null}function Ys(e,t,s=!1){const{props:i,ref:a,patchFlag:u,children:f}=e,r=t?Eu(i||{},t):i;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:r,key:r&&Pl(r),ref:t&&t.ref?s&&a?Le(a)?a.concat(ni(t)):[a,ni(t)]:ni(t):a,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:f,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Qe?u===-1?16:u|16:u,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Ys(e.ssContent),ssFallback:e.ssFallback&&Ys(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce}}function We(e=" ",t=0){return be(Oi,null,e,t)}function Ir(e,t){const s=be(ii,null,e);return s.staticCount=t,s}function Oe(e="",t=!1){return t?(ue(),Hs(Fs,null,e)):be(Fs,null,e)}function is(e){return e==null||typeof e=="boolean"?be(Fs):Le(e)?be(Qe,null,e.slice()):typeof e=="object"?ws(e):be(Oi,null,String(e))}function ws(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Ys(e)}function Vn(e,t){let s=0;const{shapeFlag:i}=e;if(t==null)t=null;else if(Le(t))s=16;else if(typeof t=="object")if(i&65){const a=t.default;a&&(a._c&&(a._d=!1),Vn(e,a()),a._c&&(a._d=!0));return}else{s=32;const a=t._;!a&&!(Mi in t)?t._ctx=zt:a===3&&zt&&(zt.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else Ie(t)?(t={default:t,_ctx:zt},s=32):(t=String(t),i&64?(s=16,t=[We(t)]):s=8);e.children=t,e.shapeFlag|=s}function Eu(...e){const t={};for(let s=0;s<e.length;s++){const i=e[s];for(const a in i)if(a==="class")t.class!==i.class&&(t.class=Te([t.class,i.class]));else if(a==="style")t.style=At([t.style,i.style]);else if(Ci(a)){const u=t[a],f=i[a];f&&u!==f&&!(Le(u)&&u.includes(f))&&(t[a]=u?[].concat(u,f):f)}else a!==""&&(t[a]=i[a])}return t}function ts(e,t,s,i=null){Vt(e,t,7,[s,i])}const Ru=Al();let Au=0;function Tu(e,t,s){const i=e.type,a=(t?t.appContext:e.appContext)||Ru,u={uid:Au++,vnode:e,type:i,parent:t,appContext:a,root:null,next:null,subTree:null,effect:null,update:null,scope:new eh(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(a.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Dl(i,a),emitsOptions:ml(i,a),emit:null,emitted:null,propsDefaults:tt,inheritAttrs:i.inheritAttrs,ctx:tt,data:tt,props:tt,attrs:tt,slots:tt,refs:tt,setupState:tt,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:s,suspenseId:s?s.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return u.ctx={_:u},u.root=t?t.root:u,u.emit=Hh.bind(null,u),e.ce&&e.ce(u),u}let ft=null,Gn,Ws,Fo="__VUE_INSTANCE_SETTERS__";(Ws=ln()[Fo])||(Ws=ln()[Fo]=[]),Ws.push(e=>ft=e),Gn=e=>{Ws.length>1?Ws.forEach(t=>t(e)):Ws[0](e)};const Qs=e=>{Gn(e),e.scope.on()},Ps=()=>{ft&&ft.scope.off(),Gn(null)};function $l(e){return e.vnode.shapeFlag&4}let Dr=!1;function Du(e,t=!1){Dr=t;const{props:s,children:i}=e.vnode,a=$l(e);pu(e,s,a,t),mu(e,i);const u=a?Lu(e,t):void 0;return Dr=!1,u}function Lu(e,t){const s=e.type;e.accessCache=Object.create(null),e.proxy=ll(new Proxy(e.ctx,ou));const{setup:i}=s;if(i){const a=e.setupContext=i.length>1?Mu(e):null;Qs(e),nr();const u=xs(i,e,0,[e.props,a]);if(or(),Ps(),Wa(u)){if(u.then(Ps,Ps),t)return u.then(f=>{Ho(e,f)}).catch(f=>{Ai(f,e,0)});e.asyncDep=u}else Ho(e,u)}else Fl(e)}function Ho(e,t,s){Ie(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:et(t)&&(e.setupState=dl(t)),Fl(e)}function Fl(e,t,s){const i=e.type;e.render||(e.render=i.render||ls),Qs(e),nr(),au(e),or(),Ps()}function Ou(e){return e.attrsProxy||(e.attrsProxy=new Proxy(e.attrs,{get(t,s){return Lt(e,"get","$attrs"),t[s]}}))}function Mu(e){const t=s=>{e.exposed=s||{}};return{get attrs(){return Ou(e)},slots:e.slots,emit:e.emit,expose:t}}function Ii(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(dl(ll(e.exposed)),{get(t,s){if(s in t)return t[s];if(s in vr)return vr[s](e)},has(t,s){return s in t||s in vr}}))}function Iu(e,t=!0){return Ie(e)?e.displayName||e.name:e.name||t&&e.__name}function Bu(e){return Ie(e)&&"__vccOpts"in e}const Ue=(e,t)=>Mh(e,t,Dr);function gi(e,t,s){const i=arguments.length;return i===2?et(t)&&!Le(t)?bn(t)?be(e,null,[t]):be(e,t):be(e,null,t):(i>3?s=Array.prototype.slice.call(arguments,2):i===3&&bn(s)&&(s=[s]),be(e,t,s))}const Pu=Symbol.for("v-scx"),$u=()=>Zt(Pu),Fu="3.3.4",Hu="http://www.w3.org/2000/svg",Ds=typeof document<"u"?document:null,No=Ds&&Ds.createElement("template"),Nu={insert:(e,t,s)=>{t.insertBefore(e,s||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,s,i)=>{const a=t?Ds.createElementNS(Hu,e):Ds.createElement(e,s?{is:s}:void 0);return e==="select"&&i&&i.multiple!=null&&a.setAttribute("multiple",i.multiple),a},createText:e=>Ds.createTextNode(e),createComment:e=>Ds.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Ds.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,s,i,a,u){const f=s?s.previousSibling:t.lastChild;if(a&&(a===u||a.nextSibling))for(;t.insertBefore(a.cloneNode(!0),s),!(a===u||!(a=a.nextSibling)););else{No.innerHTML=i?`<svg>${e}</svg>`:e;const r=No.content;if(i){const n=r.firstChild;for(;n.firstChild;)r.appendChild(n.firstChild);r.removeChild(n)}t.insertBefore(r,s)}return[f?f.nextSibling:t.firstChild,s?s.previousSibling:t.lastChild]}};function zu(e,t,s){const i=e._vtc;i&&(t=(t?[t,...i]:[...i]).join(" ")),t==null?e.removeAttribute("class"):s?e.setAttribute("class",t):e.className=t}function Uu(e,t,s){const i=e.style,a=lt(s);if(s&&!a){if(t&&!lt(t))for(const u in t)s[u]==null&&wn(i,u,"");for(const u in s)wn(i,u,s[u])}else{const u=i.display;a?t!==s&&(i.cssText=s):t&&e.removeAttribute("style"),"_vod"in e&&(i.display=u)}}const zo=/\s*!important$/;function wn(e,t,s){if(Le(s))s.forEach(i=>wn(e,t,i));else if(s==null&&(s=""),t.startsWith("--"))e.setProperty(t,s);else{const i=ju(e,t);zo.test(s)?e.setProperty(ir(i),s.replace(zo,""),"important"):e[i]=s}}const Uo=["Webkit","Moz","ms"],Wi={};function ju(e,t){const s=Wi[t];if(s)return s;let i=cs(t);if(i!=="filter"&&i in e)return Wi[t]=i;i=Ei(i);for(let a=0;a<Uo.length;a++){const u=Uo[a]+i;if(u in e)return Wi[t]=u}return t}const jo="http://www.w3.org/1999/xlink";function Wu(e,t,s,i,a){if(i&&t.startsWith("xlink:"))s==null?e.removeAttributeNS(jo,t.slice(6,t.length)):e.setAttributeNS(jo,t,s);else{const u=Yc(t);s==null||u&&!Va(s)?e.removeAttribute(t):e.setAttribute(t,u?"":s)}}function qu(e,t,s,i,a,u,f){if(t==="innerHTML"||t==="textContent"){i&&f(i,a,u),e[t]=s??"";return}const r=e.tagName;if(t==="value"&&r!=="PROGRESS"&&!r.includes("-")){e._value=s;const p=r==="OPTION"?e.getAttribute("value"):e.value,_=s??"";p!==_&&(e.value=_),s==null&&e.removeAttribute(t);return}let n=!1;if(s===""||s==null){const p=typeof e[t];p==="boolean"?s=Va(s):s==null&&p==="string"?(s="",n=!0):p==="number"&&(s=0,n=!0)}try{e[t]=s}catch{}n&&e.removeAttribute(t)}function Ls(e,t,s,i){e.addEventListener(t,s,i)}function Ku(e,t,s,i){e.removeEventListener(t,s,i)}function Vu(e,t,s,i,a=null){const u=e._vei||(e._vei={}),f=u[t];if(i&&f)f.value=i;else{const[r,n]=Gu(t);if(i){const p=u[t]=Ju(i,a);Ls(e,r,p,n)}else f&&(Ku(e,r,f,n),u[t]=void 0)}}const Wo=/(?:Once|Passive|Capture)$/;function Gu(e){let t;if(Wo.test(e)){t={};let i;for(;i=e.match(Wo);)e=e.slice(0,e.length-i[0].length),t[i[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):ir(e.slice(2)),t]}let qi=0;const Zu=Promise.resolve(),Xu=()=>qi||(Zu.then(()=>qi=0),qi=Date.now());function Ju(e,t){const s=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=s.attached)return;Vt(Yu(i,s.value),t,5,[i])};return s.value=e,s.attached=Xu(),s}function Yu(e,t){if(Le(t)){const s=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{s.call(e),e._stopped=!0},t.map(i=>a=>!a._stopped&&i&&i(a))}else return t}const qo=/^on[a-z]/,Qu=(e,t,s,i,a=!1,u,f,r,n)=>{t==="class"?zu(e,i,a):t==="style"?Uu(e,s,i):Ci(t)?Mn(t)||Vu(e,t,s,i,f):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):ed(e,t,i,a))?qu(e,t,i,u,f,r,n):(t==="true-value"?e._trueValue=i:t==="false-value"&&(e._falseValue=i),Wu(e,t,i,a))};function ed(e,t,s,i){return i?!!(t==="innerHTML"||t==="textContent"||t in e&&qo.test(t)&&Ie(s)):t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA"||qo.test(t)&&lt(s)?!1:t in e}const mi=e=>{const t=e.props["onUpdate:modelValue"]||!1;return Le(t)?s=>ti(t,s):t};function td(e){e.target.composing=!0}function Ko(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Ye={created(e,{modifiers:{lazy:t,trim:s,number:i}},a){e._assign=mi(a);const u=i||a.props&&a.props.type==="number";Ls(e,t?"change":"input",f=>{if(f.target.composing)return;let r=e.value;s&&(r=r.trim()),u&&(r=an(r)),e._assign(r)}),s&&Ls(e,"change",()=>{e.value=e.value.trim()}),t||(Ls(e,"compositionstart",td),Ls(e,"compositionend",Ko),Ls(e,"change",Ko))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,modifiers:{lazy:s,trim:i,number:a}},u){if(e._assign=mi(u),e.composing||document.activeElement===e&&e.type!=="range"&&(s||i&&e.value.trim()===t||(a||e.type==="number")&&an(e.value)===t))return;const f=t??"";e.value!==f&&(e.value=f)}},Vo={created(e,{value:t},s){e.checked=ui(t,s.props.value),e._assign=mi(s),Ls(e,"change",()=>{e._assign(sd(e))})},beforeUpdate(e,{value:t,oldValue:s},i){e._assign=mi(i),t!==s&&(e.checked=ui(t,i.props.value))}};function sd(e){return"_value"in e?e._value:e.value}const rd=["ctrl","shift","alt","meta"],id={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>rd.some(s=>e[`${s}Key`]&&!t.includes(s))},wr=(e,t)=>(s,...i)=>{for(let a=0;a<t.length;a++){const u=id[t[a]];if(u&&u(s,t))return}return e(s,...i)},nd=wt({patchProp:Qu},Nu);let Go;function od(){return Go||(Go=bu(nd))}const ad=(...e)=>{const t=od().createApp(...e),{mount:s}=t;return t.mount=i=>{const a=ld(i);if(!a)return;const u=t._component;!Ie(u)&&!u.render&&!u.template&&(u.template=a.innerHTML),a.innerHTML="";const f=s(a,!1,a instanceof SVGElement);return a instanceof Element&&(a.removeAttribute("v-cloak"),a.setAttribute("data-v-app","")),f},t};function ld(e){return lt(e)?document.querySelector(e):e}/*!
  * vue-router v4.2.5
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */const Ks=typeof window<"u";function cd(e){return e.__esModule||e[Symbol.toStringTag]==="Module"}const Ve=Object.assign;function Ki(e,t){const s={};for(const i in t){const a=t[i];s[i]=Xt(a)?a.map(e):e(a)}return s}const yr=()=>{},Xt=Array.isArray,hd=/\/$/,ud=e=>e.replace(hd,"");function Vi(e,t,s="/"){let i,a={},u="",f="";const r=t.indexOf("#");let n=t.indexOf("?");return r<n&&r>=0&&(n=-1),n>-1&&(i=t.slice(0,n),u=t.slice(n+1,r>-1?r:t.length),a=e(u)),r>-1&&(i=i||t.slice(0,r),f=t.slice(r,t.length)),i=_d(i??t,s),{fullPath:i+(u&&"?")+u+f,path:i,query:a,hash:f}}function dd(e,t){const s=t.query?e(t.query):"";return t.path+(s&&"?")+s+(t.hash||"")}function Zo(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function fd(e,t,s){const i=t.matched.length-1,a=s.matched.length-1;return i>-1&&i===a&&er(t.matched[i],s.matched[a])&&Hl(t.params,s.params)&&e(t.query)===e(s.query)&&t.hash===s.hash}function er(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function Hl(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(!pd(e[s],t[s]))return!1;return!0}function pd(e,t){return Xt(e)?Xo(e,t):Xt(t)?Xo(t,e):e===t}function Xo(e,t){return Xt(t)?e.length===t.length&&e.every((s,i)=>s===t[i]):e.length===1&&e[0]===t}function _d(e,t){if(e.startsWith("/"))return e;if(!e)return t;const s=t.split("/"),i=e.split("/"),a=i[i.length-1];(a===".."||a===".")&&i.push("");let u=s.length-1,f,r;for(f=0;f<i.length;f++)if(r=i[f],r!==".")if(r==="..")u>1&&u--;else break;return s.slice(0,u).join("/")+"/"+i.slice(f-(f===i.length?1:0)).join("/")}var Lr;(function(e){e.pop="pop",e.push="push"})(Lr||(Lr={}));var Sr;(function(e){e.back="back",e.forward="forward",e.unknown=""})(Sr||(Sr={}));function gd(e){if(!e)if(Ks){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),ud(e)}const md=/^[^#]+#/;function vd(e,t){return e.replace(md,"#")+t}function bd(e,t){const s=document.documentElement.getBoundingClientRect(),i=e.getBoundingClientRect();return{behavior:t.behavior,left:i.left-s.left-(t.left||0),top:i.top-s.top-(t.top||0)}}const Bi=()=>({left:window.pageXOffset,top:window.pageYOffset});function wd(e){let t;if("el"in e){const s=e.el,i=typeof s=="string"&&s.startsWith("#"),a=typeof s=="string"?i?document.getElementById(s.slice(1)):document.querySelector(s):s;if(!a)return;t=bd(a,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.pageXOffset,t.top!=null?t.top:window.pageYOffset)}function Jo(e,t){return(history.state?history.state.position-t:-1)+e}const yn=new Map;function yd(e,t){yn.set(e,t)}function Sd(e){const t=yn.get(e);return yn.delete(e),t}let xd=()=>location.protocol+"//"+location.host;function Nl(e,t){const{pathname:s,search:i,hash:a}=t,u=e.indexOf("#");if(u>-1){let r=a.includes(e.slice(u))?e.slice(u).length:1,n=a.slice(r);return n[0]!=="/"&&(n="/"+n),Zo(n,"")}return Zo(s,e)+i+a}function Cd(e,t,s,i){let a=[],u=[],f=null;const r=({state:g})=>{const b=Nl(e,location),w=s.value,m=t.value;let c=0;if(g){if(s.value=b,t.value=g,f&&f===w){f=null;return}c=m?g.position-m.position:0}else i(b);a.forEach(h=>{h(s.value,w,{delta:c,type:Lr.pop,direction:c?c>0?Sr.forward:Sr.back:Sr.unknown})})};function n(){f=s.value}function p(g){a.push(g);const b=()=>{const w=a.indexOf(g);w>-1&&a.splice(w,1)};return u.push(b),b}function _(){const{history:g}=window;g.state&&g.replaceState(Ve({},g.state,{scroll:Bi()}),"")}function d(){for(const g of u)g();u=[],window.removeEventListener("popstate",r),window.removeEventListener("beforeunload",_)}return window.addEventListener("popstate",r),window.addEventListener("beforeunload",_,{passive:!0}),{pauseListeners:n,listen:p,destroy:d}}function Yo(e,t,s,i=!1,a=!1){return{back:e,current:t,forward:s,replaced:i,position:window.history.length,scroll:a?Bi():null}}function kd(e){const{history:t,location:s}=window,i={value:Nl(e,s)},a={value:t.state};a.value||u(i.value,{back:null,current:i.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function u(n,p,_){const d=e.indexOf("#"),g=d>-1?(s.host&&document.querySelector("base")?e:e.slice(d))+n:xd()+e+n;try{t[_?"replaceState":"pushState"](p,"",g),a.value=p}catch(b){console.error(b),s[_?"replace":"assign"](g)}}function f(n,p){const _=Ve({},t.state,Yo(a.value.back,n,a.value.forward,!0),p,{position:a.value.position});u(n,_,!0),i.value=n}function r(n,p){const _=Ve({},a.value,t.state,{forward:n,scroll:Bi()});u(_.current,_,!0);const d=Ve({},Yo(i.value,n,null),{position:_.position+1},p);u(n,d,!1),i.value=n}return{location:i,state:a,push:r,replace:f}}function Ed(e){e=gd(e);const t=kd(e),s=Cd(e,t.state,t.location,t.replace);function i(u,f=!0){f||s.pauseListeners(),history.go(u)}const a=Ve({location:"",base:e,go:i,createHref:vd.bind(null,e)},t,s);return Object.defineProperty(a,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(a,"state",{enumerable:!0,get:()=>t.state.value}),a}function Rd(e){return typeof e=="string"||e&&typeof e=="object"}function zl(e){return typeof e=="string"||typeof e=="symbol"}const bs={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},Ul=Symbol("");var Qo;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(Qo||(Qo={}));function tr(e,t){return Ve(new Error,{type:e,[Ul]:!0},t)}function us(e,t){return e instanceof Error&&Ul in e&&(t==null||!!(e.type&t))}const ea="[^/]+?",Ad={sensitive:!1,strict:!1,start:!0,end:!0},Td=/[.+*?^${}()[\]/\\]/g;function Dd(e,t){const s=Ve({},Ad,t),i=[];let a=s.start?"^":"";const u=[];for(const p of e){const _=p.length?[]:[90];s.strict&&!p.length&&(a+="/");for(let d=0;d<p.length;d++){const g=p[d];let b=40+(s.sensitive?.25:0);if(g.type===0)d||(a+="/"),a+=g.value.replace(Td,"\\$&"),b+=40;else if(g.type===1){const{value:w,repeatable:m,optional:c,regexp:h}=g;u.push({name:w,repeatable:m,optional:c});const o=h||ea;if(o!==ea){b+=10;try{new RegExp(`(${o})`)}catch(v){throw new Error(`Invalid custom RegExp for param "${w}" (${o}): `+v.message)}}let l=m?`((?:${o})(?:/(?:${o}))*)`:`(${o})`;d||(l=c&&p.length<2?`(?:/${l})`:"/"+l),c&&(l+="?"),a+=l,b+=20,c&&(b+=-8),m&&(b+=-20),o===".*"&&(b+=-50)}_.push(b)}i.push(_)}if(s.strict&&s.end){const p=i.length-1;i[p][i[p].length-1]+=.7000000000000001}s.strict||(a+="/?"),s.end?a+="$":s.strict&&(a+="(?:/|$)");const f=new RegExp(a,s.sensitive?"":"i");function r(p){const _=p.match(f),d={};if(!_)return null;for(let g=1;g<_.length;g++){const b=_[g]||"",w=u[g-1];d[w.name]=b&&w.repeatable?b.split("/"):b}return d}function n(p){let _="",d=!1;for(const g of e){(!d||!_.endsWith("/"))&&(_+="/"),d=!1;for(const b of g)if(b.type===0)_+=b.value;else if(b.type===1){const{value:w,repeatable:m,optional:c}=b,h=w in p?p[w]:"";if(Xt(h)&&!m)throw new Error(`Provided param "${w}" is an array but it is not repeatable (* or + modifiers)`);const o=Xt(h)?h.join("/"):h;if(!o)if(c)g.length<2&&(_.endsWith("/")?_=_.slice(0,-1):d=!0);else throw new Error(`Missing required param "${w}"`);_+=o}}return _||"/"}return{re:f,score:i,keys:u,parse:r,stringify:n}}function Ld(e,t){let s=0;for(;s<e.length&&s<t.length;){const i=t[s]-e[s];if(i)return i;s++}return e.length<t.length?e.length===1&&e[0]===80?-1:1:e.length>t.length?t.length===1&&t[0]===80?1:-1:0}function Od(e,t){let s=0;const i=e.score,a=t.score;for(;s<i.length&&s<a.length;){const u=Ld(i[s],a[s]);if(u)return u;s++}if(Math.abs(a.length-i.length)===1){if(ta(i))return 1;if(ta(a))return-1}return a.length-i.length}function ta(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const Md={type:0,value:""},Id=/[a-zA-Z0-9_]/;function Bd(e){if(!e)return[[]];if(e==="/")return[[Md]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(b){throw new Error(`ERR (${s})/"${p}": ${b}`)}let s=0,i=s;const a=[];let u;function f(){u&&a.push(u),u=[]}let r=0,n,p="",_="";function d(){p&&(s===0?u.push({type:0,value:p}):s===1||s===2||s===3?(u.length>1&&(n==="*"||n==="+")&&t(`A repeatable param (${p}) must be alone in its segment. eg: '/:ids+.`),u.push({type:1,value:p,regexp:_,repeatable:n==="*"||n==="+",optional:n==="*"||n==="?"})):t("Invalid state to consume buffer"),p="")}function g(){p+=n}for(;r<e.length;){if(n=e[r++],n==="\\"&&s!==2){i=s,s=4;continue}switch(s){case 0:n==="/"?(p&&d(),f()):n===":"?(d(),s=1):g();break;case 4:g(),s=i;break;case 1:n==="("?s=2:Id.test(n)?g():(d(),s=0,n!=="*"&&n!=="?"&&n!=="+"&&r--);break;case 2:n===")"?_[_.length-1]=="\\"?_=_.slice(0,-1)+n:s=3:_+=n;break;case 3:d(),s=0,n!=="*"&&n!=="?"&&n!=="+"&&r--,_="";break;default:t("Unknown state");break}}return s===2&&t(`Unfinished custom RegExp for param "${p}"`),d(),f(),a}function Pd(e,t,s){const i=Dd(Bd(e.path),s),a=Ve(i,{record:e,parent:t,children:[],alias:[]});return t&&!a.record.aliasOf==!t.record.aliasOf&&t.children.push(a),a}function $d(e,t){const s=[],i=new Map;t=ia({strict:!1,end:!0,sensitive:!1},t);function a(_){return i.get(_)}function u(_,d,g){const b=!g,w=Fd(_);w.aliasOf=g&&g.record;const m=ia(t,_),c=[w];if("alias"in _){const l=typeof _.alias=="string"?[_.alias]:_.alias;for(const v of l)c.push(Ve({},w,{components:g?g.record.components:w.components,path:v,aliasOf:g?g.record:w}))}let h,o;for(const l of c){const{path:v}=l;if(d&&v[0]!=="/"){const S=d.record.path,x=S[S.length-1]==="/"?"":"/";l.path=d.record.path+(v&&x+v)}if(h=Pd(l,d,m),g?g.alias.push(h):(o=o||h,o!==h&&o.alias.push(h),b&&_.name&&!ra(h)&&f(_.name)),w.children){const S=w.children;for(let x=0;x<S.length;x++)u(S[x],h,g&&g.children[x])}g=g||h,(h.record.components&&Object.keys(h.record.components).length||h.record.name||h.record.redirect)&&n(h)}return o?()=>{f(o)}:yr}function f(_){if(zl(_)){const d=i.get(_);d&&(i.delete(_),s.splice(s.indexOf(d),1),d.children.forEach(f),d.alias.forEach(f))}else{const d=s.indexOf(_);d>-1&&(s.splice(d,1),_.record.name&&i.delete(_.record.name),_.children.forEach(f),_.alias.forEach(f))}}function r(){return s}function n(_){let d=0;for(;d<s.length&&Od(_,s[d])>=0&&(_.record.path!==s[d].record.path||!jl(_,s[d]));)d++;s.splice(d,0,_),_.record.name&&!ra(_)&&i.set(_.record.name,_)}function p(_,d){let g,b={},w,m;if("name"in _&&_.name){if(g=i.get(_.name),!g)throw tr(1,{location:_});m=g.record.name,b=Ve(sa(d.params,g.keys.filter(o=>!o.optional).map(o=>o.name)),_.params&&sa(_.params,g.keys.map(o=>o.name))),w=g.stringify(b)}else if("path"in _)w=_.path,g=s.find(o=>o.re.test(w)),g&&(b=g.parse(w),m=g.record.name);else{if(g=d.name?i.get(d.name):s.find(o=>o.re.test(d.path)),!g)throw tr(1,{location:_,currentLocation:d});m=g.record.name,b=Ve({},d.params,_.params),w=g.stringify(b)}const c=[];let h=g;for(;h;)c.unshift(h.record),h=h.parent;return{name:m,path:w,params:b,matched:c,meta:Nd(c)}}return e.forEach(_=>u(_)),{addRoute:u,resolve:p,removeRoute:f,getRoutes:r,getRecordMatcher:a}}function sa(e,t){const s={};for(const i of t)i in e&&(s[i]=e[i]);return s}function Fd(e){return{path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:void 0,beforeEnter:e.beforeEnter,props:Hd(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}}}function Hd(e){const t={},s=e.props||!1;if("component"in e)t.default=s;else for(const i in e.components)t[i]=typeof s=="object"?s[i]:s;return t}function ra(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function Nd(e){return e.reduce((t,s)=>Ve(t,s.meta),{})}function ia(e,t){const s={};for(const i in e)s[i]=i in t?t[i]:e[i];return s}function jl(e,t){return t.children.some(s=>s===e||jl(e,s))}const Wl=/#/g,zd=/&/g,Ud=/\//g,jd=/=/g,Wd=/\?/g,ql=/\+/g,qd=/%5B/g,Kd=/%5D/g,Kl=/%5E/g,Vd=/%60/g,Vl=/%7B/g,Gd=/%7C/g,Gl=/%7D/g,Zd=/%20/g;function Zn(e){return encodeURI(""+e).replace(Gd,"|").replace(qd,"[").replace(Kd,"]")}function Xd(e){return Zn(e).replace(Vl,"{").replace(Gl,"}").replace(Kl,"^")}function Sn(e){return Zn(e).replace(ql,"%2B").replace(Zd,"+").replace(Wl,"%23").replace(zd,"%26").replace(Vd,"`").replace(Vl,"{").replace(Gl,"}").replace(Kl,"^")}function Jd(e){return Sn(e).replace(jd,"%3D")}function Yd(e){return Zn(e).replace(Wl,"%23").replace(Wd,"%3F")}function Qd(e){return e==null?"":Yd(e).replace(Ud,"%2F")}function vi(e){try{return decodeURIComponent(""+e)}catch{}return""+e}function ef(e){const t={};if(e===""||e==="?")return t;const i=(e[0]==="?"?e.slice(1):e).split("&");for(let a=0;a<i.length;++a){const u=i[a].replace(ql," "),f=u.indexOf("="),r=vi(f<0?u:u.slice(0,f)),n=f<0?null:vi(u.slice(f+1));if(r in t){let p=t[r];Xt(p)||(p=t[r]=[p]),p.push(n)}else t[r]=n}return t}function na(e){let t="";for(let s in e){const i=e[s];if(s=Jd(s),i==null){i!==void 0&&(t+=(t.length?"&":"")+s);continue}(Xt(i)?i.map(u=>u&&Sn(u)):[i&&Sn(i)]).forEach(u=>{u!==void 0&&(t+=(t.length?"&":"")+s,u!=null&&(t+="="+u))})}return t}function tf(e){const t={};for(const s in e){const i=e[s];i!==void 0&&(t[s]=Xt(i)?i.map(a=>a==null?null:""+a):i==null?i:""+i)}return t}const sf=Symbol(""),oa=Symbol(""),Pi=Symbol(""),Xn=Symbol(""),xn=Symbol("");function ur(){let e=[];function t(i){return e.push(i),()=>{const a=e.indexOf(i);a>-1&&e.splice(a,1)}}function s(){e=[]}return{add:t,list:()=>e.slice(),reset:s}}function ys(e,t,s,i,a){const u=i&&(i.enterCallbacks[a]=i.enterCallbacks[a]||[]);return()=>new Promise((f,r)=>{const n=d=>{d===!1?r(tr(4,{from:s,to:t})):d instanceof Error?r(d):Rd(d)?r(tr(2,{from:t,to:d})):(u&&i.enterCallbacks[a]===u&&typeof d=="function"&&u.push(d),f())},p=e.call(i&&i.instances[a],t,s,n);let _=Promise.resolve(p);e.length<3&&(_=_.then(n)),_.catch(d=>r(d))})}function Gi(e,t,s,i){const a=[];for(const u of e)for(const f in u.components){let r=u.components[f];if(!(t!=="beforeRouteEnter"&&!u.instances[f]))if(rf(r)){const p=(r.__vccOpts||r)[t];p&&a.push(ys(p,s,i,u,f))}else{let n=r();a.push(()=>n.then(p=>{if(!p)return Promise.reject(new Error(`Couldn't resolve component "${f}" at "${u.path}"`));const _=cd(p)?p.default:p;u.components[f]=_;const g=(_.__vccOpts||_)[t];return g&&ys(g,s,i,u,f)()}))}}return a}function rf(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function aa(e){const t=Zt(Pi),s=Zt(Xn),i=Ue(()=>t.resolve(ve(e.to))),a=Ue(()=>{const{matched:n}=i.value,{length:p}=n,_=n[p-1],d=s.matched;if(!_||!d.length)return-1;const g=d.findIndex(er.bind(null,_));if(g>-1)return g;const b=la(n[p-2]);return p>1&&la(_)===b&&d[d.length-1].path!==b?d.findIndex(er.bind(null,n[p-2])):g}),u=Ue(()=>a.value>-1&&af(s.params,i.value.params)),f=Ue(()=>a.value>-1&&a.value===s.matched.length-1&&Hl(s.params,i.value.params));function r(n={}){return of(n)?t[ve(e.replace)?"replace":"push"](ve(e.to)).catch(yr):Promise.resolve()}return{route:i,href:Ue(()=>i.value.href),isActive:u,isExactActive:f,navigate:r}}const nf=ut({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:aa,setup(e,{slots:t}){const s=qt(aa(e)),{options:i}=Zt(Pi),a=Ue(()=>({[ca(e.activeClass,i.linkActiveClass,"router-link-active")]:s.isActive,[ca(e.exactActiveClass,i.linkExactActiveClass,"router-link-exact-active")]:s.isExactActive}));return()=>{const u=t.default&&t.default(s);return e.custom?u:gi("a",{"aria-current":s.isExactActive?e.ariaCurrentValue:null,href:s.href,onClick:s.navigate,class:a.value},u)}}}),Qt=nf;function of(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function af(e,t){for(const s in t){const i=t[s],a=e[s];if(typeof i=="string"){if(i!==a)return!1}else if(!Xt(a)||a.length!==i.length||i.some((u,f)=>u!==a[f]))return!1}return!0}function la(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const ca=(e,t,s)=>e??t??s,lf=ut({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:s}){const i=Zt(xn),a=Ue(()=>e.route||i.value),u=Zt(oa,0),f=Ue(()=>{let p=ve(u);const{matched:_}=a.value;let d;for(;(d=_[p])&&!d.components;)p++;return p}),r=Ue(()=>a.value.matched[f.value]);ri(oa,Ue(()=>f.value+1)),ri(sf,r),ri(xn,a);const n=fe();return Bs(()=>[n.value,r.value,e.name],([p,_,d],[g,b,w])=>{_&&(_.instances[d]=p,b&&b!==_&&p&&p===g&&(_.leaveGuards.size||(_.leaveGuards=b.leaveGuards),_.updateGuards.size||(_.updateGuards=b.updateGuards))),p&&_&&(!b||!er(_,b)||!g)&&(_.enterCallbacks[d]||[]).forEach(m=>m(p))},{flush:"post"}),()=>{const p=a.value,_=e.name,d=r.value,g=d&&d.components[_];if(!g)return ha(s.default,{Component:g,route:p});const b=d.props[_],w=b?b===!0?p.params:typeof b=="function"?b(p):b:null,c=gi(g,Ve({},w,t,{onVnodeUnmounted:h=>{h.component.isUnmounted&&(d.instances[_]=null)},ref:n}));return ha(s.default,{Component:c,route:p})||c}}});function ha(e,t){if(!e)return null;const s=e(t);return s.length===1?s[0]:s}const Zl=lf;function cf(e){const t=$d(e.routes,e),s=e.parseQuery||ef,i=e.stringifyQuery||na,a=e.history,u=ur(),f=ur(),r=ur(),n=Th(bs);let p=bs;Ks&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const _=Ki.bind(null,j=>""+j),d=Ki.bind(null,Qd),g=Ki.bind(null,vi);function b(j,O){let ee,te;return zl(j)?(ee=t.getRecordMatcher(j),te=O):te=j,t.addRoute(te,ee)}function w(j){const O=t.getRecordMatcher(j);O&&t.removeRoute(O)}function m(){return t.getRoutes().map(j=>j.record)}function c(j){return!!t.getRecordMatcher(j)}function h(j,O){if(O=Ve({},O||n.value),typeof j=="string"){const y=Vi(s,j,O.path),P=t.resolve({path:y.path},O),K=a.createHref(y.fullPath);return Ve(y,P,{params:g(P.params),hash:vi(y.hash),redirectedFrom:void 0,href:K})}let ee;if("path"in j)ee=Ve({},j,{path:Vi(s,j.path,O.path).path});else{const y=Ve({},j.params);for(const P in y)y[P]==null&&delete y[P];ee=Ve({},j,{params:d(y)}),O.params=d(O.params)}const te=t.resolve(ee,O),F=j.hash||"";te.params=_(g(te.params));const q=dd(i,Ve({},j,{hash:Xd(F),path:te.path})),Y=a.createHref(q);return Ve({fullPath:q,hash:F,query:i===na?tf(j.query):j.query||{}},te,{redirectedFrom:void 0,href:Y})}function o(j){return typeof j=="string"?Vi(s,j,n.value.path):Ve({},j)}function l(j,O){if(p!==j)return tr(8,{from:O,to:j})}function v(j){return k(j)}function S(j){return v(Ve(o(j),{replace:!0}))}function x(j){const O=j.matched[j.matched.length-1];if(O&&O.redirect){const{redirect:ee}=O;let te=typeof ee=="function"?ee(j):ee;return typeof te=="string"&&(te=te.includes("?")||te.includes("#")?te=o(te):{path:te},te.params={}),Ve({query:j.query,hash:j.hash,params:"path"in te?{}:j.params},te)}}function k(j,O){const ee=p=h(j),te=n.value,F=j.state,q=j.force,Y=j.replace===!0,y=x(ee);if(y)return k(Ve(o(y),{state:typeof y=="object"?Ve({},F,y.state):F,force:q,replace:Y}),O||ee);const P=ee;P.redirectedFrom=O;let K;return!q&&fd(i,te,ee)&&(K=tr(16,{to:P,from:te}),M(te,te,!0,!1)),(K?Promise.resolve(K):N(P,te)).catch(D=>us(D)?us(D,2)?D:U(D):ie(D,P,te)).then(D=>{if(D){if(us(D,2))return k(Ve({replace:Y},o(D.to),{state:typeof D.to=="object"?Ve({},F,D.to.state):F,force:q}),O||P)}else D=L(P,te,!0,Y,F);return G(P,te,D),D})}function C(j,O){const ee=l(j,O);return ee?Promise.reject(ee):Promise.resolve()}function A(j){const O=le.values().next().value;return O&&typeof O.runWithContext=="function"?O.runWithContext(j):j()}function N(j,O){let ee;const[te,F,q]=hf(j,O);ee=Gi(te.reverse(),"beforeRouteLeave",j,O);for(const y of te)y.leaveGuards.forEach(P=>{ee.push(ys(P,j,O))});const Y=C.bind(null,j,O);return ee.push(Y),pe(ee).then(()=>{ee=[];for(const y of u.list())ee.push(ys(y,j,O));return ee.push(Y),pe(ee)}).then(()=>{ee=Gi(F,"beforeRouteUpdate",j,O);for(const y of F)y.updateGuards.forEach(P=>{ee.push(ys(P,j,O))});return ee.push(Y),pe(ee)}).then(()=>{ee=[];for(const y of q)if(y.beforeEnter)if(Xt(y.beforeEnter))for(const P of y.beforeEnter)ee.push(ys(P,j,O));else ee.push(ys(y.beforeEnter,j,O));return ee.push(Y),pe(ee)}).then(()=>(j.matched.forEach(y=>y.enterCallbacks={}),ee=Gi(q,"beforeRouteEnter",j,O),ee.push(Y),pe(ee))).then(()=>{ee=[];for(const y of f.list())ee.push(ys(y,j,O));return ee.push(Y),pe(ee)}).catch(y=>us(y,8)?y:Promise.reject(y))}function G(j,O,ee){r.list().forEach(te=>A(()=>te(j,O,ee)))}function L(j,O,ee,te,F){const q=l(j,O);if(q)return q;const Y=O===bs,y=Ks?history.state:{};ee&&(te||Y?a.replace(j.fullPath,Ve({scroll:Y&&y&&y.scroll},F)):a.push(j.fullPath,F)),n.value=j,M(j,O,ee,Y),U()}let I;function E(){I||(I=a.listen((j,O,ee)=>{if(!ce.listening)return;const te=h(j),F=x(te);if(F){k(Ve(F,{replace:!0}),te).catch(yr);return}p=te;const q=n.value;Ks&&yd(Jo(q.fullPath,ee.delta),Bi()),N(te,q).catch(Y=>us(Y,12)?Y:us(Y,2)?(k(Y.to,te).then(y=>{us(y,20)&&!ee.delta&&ee.type===Lr.pop&&a.go(-1,!1)}).catch(yr),Promise.reject()):(ee.delta&&a.go(-ee.delta,!1),ie(Y,te,q))).then(Y=>{Y=Y||L(te,q,!1),Y&&(ee.delta&&!us(Y,8)?a.go(-ee.delta,!1):ee.type===Lr.pop&&us(Y,20)&&a.go(-1,!1)),G(te,q,Y)}).catch(yr)}))}let X=ur(),Q=ur(),J;function ie(j,O,ee){U(j);const te=Q.list();return te.length?te.forEach(F=>F(j,O,ee)):console.error(j),Promise.reject(j)}function T(){return J&&n.value!==bs?Promise.resolve():new Promise((j,O)=>{X.add([j,O])})}function U(j){return J||(J=!j,E(),X.list().forEach(([O,ee])=>j?ee(j):O()),X.reset()),j}function M(j,O,ee,te){const{scrollBehavior:F}=e;if(!Ks||!F)return Promise.resolve();const q=!ee&&Sd(Jo(j.fullPath,0))||(te||!ee)&&history.state&&history.state.scroll||null;return Wn().then(()=>F(j,O,q)).then(Y=>Y&&wd(Y)).catch(Y=>ie(Y,j,O))}const $=j=>a.go(j);let ne;const le=new Set,ce={currentRoute:n,listening:!0,addRoute:b,removeRoute:w,hasRoute:c,getRoutes:m,resolve:h,options:e,push:v,replace:S,go:$,back:()=>$(-1),forward:()=>$(1),beforeEach:u.add,beforeResolve:f.add,afterEach:r.add,onError:Q.add,isReady:T,install(j){const O=this;j.component("RouterLink",Qt),j.component("RouterView",Zl),j.config.globalProperties.$router=O,Object.defineProperty(j.config.globalProperties,"$route",{enumerable:!0,get:()=>ve(n)}),Ks&&!ne&&n.value===bs&&(ne=!0,v(a.location).catch(F=>{}));const ee={};for(const F in bs)Object.defineProperty(ee,F,{get:()=>n.value[F],enumerable:!0});j.provide(Pi,O),j.provide(Xn,nl(ee)),j.provide(xn,n);const te=j.unmount;le.add(j),j.unmount=function(){le.delete(j),le.size<1&&(p=bs,I&&I(),I=null,n.value=bs,ne=!1,J=!1),te()}}};function pe(j){return j.reduce((O,ee)=>O.then(()=>A(ee)),Promise.resolve())}return ce}function hf(e,t){const s=[],i=[],a=[],u=Math.max(t.matched.length,e.matched.length);for(let f=0;f<u;f++){const r=t.matched[f];r&&(e.matched.find(p=>er(p,r))?i.push(r):s.push(r));const n=e.matched[f];n&&(t.matched.find(p=>er(p,n))||a.push(n))}return[s,i,a]}function Xl(){return Zt(Pi)}function uf(){return Zt(Xn)}const df={class:"min-h-[100vh] bg-gray-50 flex flex-col"},ff={key:0,class:"sticky top-0 bg-white/90 backdrop-blur-sm border-b border-slate-200 z-10"},pf={class:"max-w-6xl mx-auto px-6 md:px-8 py-3 flex items-center justify-between"},_f={class:"flex items-center"},gf=R("h1",{class:"font-bold text-xl text-slate-900 tracking-tight flex items-center gap-2 mr-6 whitespace-nowrap"},[R("span",{class:"w-3 h-3 rounded-full bg-brand-500"}),We("  ")],-1),mf={class:"relative w-full max-w-xl mx-2"},vf=R("div",{class:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 text-xs"},"",-1),bf={class:"flex items-center text-slate-600"},wf=ut({__name:"App",setup(e){const t=uf(),s=Ue(()=>t.name==="home"),i=fe("");return(a,u)=>(ue(),de("div",df,[s.value?(ue(),de("header",ff,[R("div",pf,[R("div",_f,[gf,R("div",mf,[Ze(R("input",{"onUpdate:modelValue":u[0]||(u[0]=f=>i.value=f),type:"text",placeholder:" JSONMarkdown",class:"w-full px-4 py-2.5 pr-10 rounded-lg border border-slate-200 shadow-sm focus:border-brand-500 focus:ring-2 focus:ring-brand-100 outline-none transition-all"},null,512),[[Ye,i.value]]),vf])]),R("nav",bf,[be(ve(Qt),{class:"hover:text-brand-600 font-medium transition-colors px-1 py-0.5 rounded-sm",to:"/"},{default:Yt(()=>[We("")]),_:1})])])])):Oe("",!0),be(ve(Zl),{class:"flex-grow"})]))}});var Kr={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};const yf=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Fe=(e,t)=>({size:s,strokeWidth:i=2,absoluteStrokeWidth:a,color:u,...f},{attrs:r,slots:n})=>gi("svg",{...Kr,width:s||Kr.width,height:s||Kr.height,stroke:u||Kr.stroke,"stroke-width":a?Number(i)*24/Number(s):i,...r,class:["lucide",`lucide-${yf(e)}`,(r==null?void 0:r.class)||""],...f},[...t.map(p=>gi(...p)),...n.default?[n.default()]:[]]),Sf=Fe("BoldIcon",[["path",{d:"M14 12a4 4 0 0 0 0-8H6v8",key:"v2sylx"}],["path",{d:"M15 20a4 4 0 0 0 0-8H6v8Z",key:"1ef5ya"}]]),xf=Fe("BracesIcon",[["path",{d:"M8 3H7a2 2 0 0 0-2 2v5a2 2 0 0 1-2 2 2 2 0 0 1 2 2v5c0 1.1.9 2 2 2h1",key:"ezmyqa"}],["path",{d:"M16 21h1a2 2 0 0 0 2-2v-5c0-1.1.9-2 2-2a2 2 0 0 1-2-2V5a2 2 0 0 0-2-2h-1",key:"e1hn23"}]]),Cf=Fe("CalendarIcon",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),kf=Fe("CheckIcon",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),Ef=Fe("ChevronLeftIcon",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),Jn=Fe("ClockIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),Jl=Fe("CodeIcon",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]),Rf=Fe("CopyIcon",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),bi=Fe("DownloadIcon",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),Af=Fe("FileImageIcon",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["circle",{cx:"10",cy:"13",r:"2",key:"6v46hv"}],["path",{d:"m20 17-1.09-1.09a2 2 0 0 0-2.82 0L10 22",key:"17vly1"}]]),Yn=Fe("FileTextIcon",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),Tf=Fe("FolderOpenIcon",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]),Df=Fe("HandIcon",[["path",{d:"M18 11V6a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v0",key:"aigmz7"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v2",key:"1n6bmn"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v8",key:"a9iiix"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]]),Lf=Fe("HashIcon",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]),Of=Fe("Heading1Icon",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"m17 12 3-2v8",key:"1hhhft"}]]),Mf=Fe("Heading2Icon",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M21 18h-4c0-4 4-3 4-6 0-1.5-2-2.5-4-1",key:"9jr5yi"}]]),gs=Fe("HomeIcon",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),Qn=Fe("ImageIcon",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),If=Fe("ItalicIcon",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]),Bf=Fe("LinkIcon",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]),Pf=Fe("ListOrderedIcon",[["line",{x1:"10",x2:"21",y1:"6",y2:"6",key:"76qw6h"}],["line",{x1:"10",x2:"21",y1:"12",y2:"12",key:"16nom4"}],["line",{x1:"10",x2:"21",y1:"18",y2:"18",key:"u3jurt"}],["path",{d:"M4 6h1v4",key:"cnovpq"}],["path",{d:"M4 10h2",key:"16xx2s"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1",key:"m9a95d"}]]),$f=Fe("ListIcon",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]),Yl=Fe("MenuIcon",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),Ff=Fe("MoveIcon",[["polyline",{points:"5 9 2 12 5 15",key:"1r5uj5"}],["polyline",{points:"9 5 12 2 15 5",key:"5v383o"}],["polyline",{points:"15 19 12 22 9 19",key:"g7qi8m"}],["polyline",{points:"19 9 22 12 19 15",key:"tpp73q"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}]]),ua=Fe("PenSquareIcon",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),Hf=Fe("PlusIcon",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),Nf=Fe("QuoteIcon",[["path",{d:"M3 21c3 0 7-1 7-8V5c0-1.25-.756-2.017-2-2H4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2 1 0 1 0 1 1v1c0 1-1 2-2 2s-1 .008-1 1.031V20c0 1 0 1 1 1z",key:"4rm80e"}],["path",{d:"M15 21c3 0 7-1 7-8V5c0-1.25-.757-2.017-2-2h-4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2h.75c0 2.25.25 4-2.75 4v3c0 1 0 1 1 1z",key:"10za9r"}]]),zf=Fe("RotateCcwIcon",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),Uf=Fe("RotateCwIcon",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]),jf=Fe("SaveIcon",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),Wf=Fe("TableIcon",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]),eo=Fe("Trash2Icon",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),Ql=Fe("TypeIcon",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]),sr=Fe("UploadIcon",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),qf=Fe("XIcon",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),da=Fe("ZapIcon",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),Kf=Fe("ZoomInIcon",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),Vf=Fe("ZoomOutIcon",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),Gf={class:"min-h-[100vh] bg-gradient-to-b from-brand-50 to-white"},Zf={class:"max-w-6xl mx-auto px-4 md:px-6 py-8 md:py-12"},Xf={class:"grid sm:grid-cols-2 lg:grid-cols-3 gap-6 md:gap-8"},Jf={class:"p-6 border-b border-slate-100 flex-1"},Yf={class:"flex items-center gap-3 mb-3"},Qf={class:"w-10 h-10 rounded-xl bg-brand-100 flex items-center justify-center text-brand-600 group-hover:scale-110 transition-transform"},ep={class:"text-xl font-bold text-slate-900"},tp={class:"text-slate-600 mb-3"},sp={class:"flex flex-wrap gap-2 mb-3"},rp={class:"space-y-1"},ip=R("svg",{class:"w-3 h-3 text-brand-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[R("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1),np=R("div",{class:"p-4 bg-slate-50 flex items-center justify-end mt-auto"},[R("span",{class:"text-xs text-brand-600 font-medium flex items-center gap-1"},[We("  "),R("svg",{class:"w-3 h-3 group-hover:translate-x-0.5 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[R("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 8l4 4m0 0l-4 4m4-4H3"})])])],-1),op=Ir('<div class="mt-16 flex justify-center"><div class="flex gap-2"><div class="w-2 h-2 rounded-full bg-slate-300"></div><div class="w-2 h-2 rounded-full bg-brand-500"></div><div class="w-2 h-2 rounded-full bg-slate-300"></div></div></div>',1),ap=ut({__name:"Home",setup(e){const t=[{name:"Markdown ",desc:" Markdown",route:"/reader",icon:"file",tags:["","",""],features:["","",""],usageCount:"12.5k+"},{name:"JSON ",desc:"",route:"/json",icon:"braces",tags:["","",""],features:["","","/"],usageCount:"9.3k+"},{name:"",desc:"",route:"/timestamp",icon:"clock",tags:["","",""],features:["","",""],usageCount:"7.8k+"},{name:"",desc:"",route:"/case",icon:"case",tags:["","",""],features:["","",""],usageCount:"5.2k+"},{name:"AI",desc:"AI",route:"/script-writer",icon:"file",tags:["","AI",""],features:["","",""],usageCount:"0.8k+"},{name:"SSH",desc:"SSH",route:"/ssh",icon:"string",tags:["SSH","",""],features:["","",""],usageCount:"0k+"},{name:"BASE64",desc:"BASE64",route:"/image-to-base64",icon:"code",tags:["","",""],features:["","",""],usageCount:"2.3k+"},{name:"",desc:"",route:"/string",icon:"string",tags:["","",""],features:["","",""],usageCount:"1.8k+"},{name:"",desc:"",route:"/images",icon:"image",tags:["","",""],features:["","",""],usageCount:"3.1k+"},{name:"",desc:"ZIP",route:"/images-new",icon:"image",tags:["","",""],features:["","ZIP",""],usageCount:"1.5k+"}],s=Ue(()=>t);return(i,a)=>(ue(),de("div",Gf,[R("main",Zf,[R("div",Xf,[(ue(!0),de(Qe,null,Gt(s.value,u=>(ue(),Hs(ve(Qt),{key:u.route,to:u.route,class:"group rounded-2xl bg-white border border-slate-200 shadow-sm overflow-hidden hover:border-brand-200 hover:shadow-brand-500/10 transition duration-300 flex flex-col"},{default:Yt(()=>[R("div",Jf,[R("div",Yf,[R("div",Qf,[(ue(),Hs(kl(u.icon==="file"?ve(Yn):u.icon==="braces"?ve(xf):u.icon==="clock"?ve(Jn):u.icon==="case"?ve(Ql):u.icon==="code"?ve(Jl):u.icon==="string"?ve(Lf):ve(Qn)),{class:"w-5 h-5"}))]),R("h2",ep,we(u.name),1)]),R("p",tp,we(u.desc),1),R("div",sp,[(ue(!0),de(Qe,null,Gt(u.tags,(f,r)=>(ue(),de("span",{key:r,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-slate-100 text-slate-600"},we(f),1))),128))]),R("div",rp,[(ue(!0),de(Qe,null,Gt(u.features.slice(0,2),(f,r)=>(ue(),de("div",{key:r,class:"flex items-center gap-1.5 text-sm text-slate-500"},[ip,R("span",null,we(f),1)]))),128))])]),np]),_:2},1032,["to"]))),128))]),op])]))}}),lp={class:"p-4 sm:p-5 md:p-6 border-b border-slate-100 flex items-center justify-between"},cp=R("h1",{class:"font-bold text-xl text-slate-800 tracking-tight flex items-center gap-2"},[R("span",{class:"w-3 h-3 rounded-full bg-brand-500"}),We(" ZenReader ")],-1),hp={class:"p-4 rounded-lg"},up=R("span",{class:"font-medium"},"Open File",-1),dp={class:"flex-1 overflow-y-auto px-2 py-0 space-y-1 min-h-0 flex flex-col"},fp={key:0,class:"text-center py-10 px-4"},pp=R("p",{class:"text-sm text-slate-400 italic"},"No files opened yet.",-1),_p=[pp],gp=R("h3",{class:"text-xs font-semibold text-slate-400 uppercase tracking-wider px-4 mb-2 mt-2"}," Recently Opened ",-1),mp=["onClick","onDblclick"],vp={class:"flex items-center gap-3 overflow-hidden flex-1"},bp={key:0,class:"relative flex items-center min-w-0 flex-1"},wp=["onBlur","onKeydown"],yp={class:"ml-1 whitespace-nowrap text-slate-500"},Sp=["title"],xp={class:"flex items-center gap-1"},Cp=["onClick"],kp=["onClick"],Ep={key:0,class:"absolute inset-0 flex flex-col items-center justify-center bg-brand-50/90 backdrop-blur-sm z-30 w-full"},Rp=R("div",{class:"text-center p-8"},[R("div",{class:"text-brand-600 text-6xl mb-4"},""),R("h3",{class:"text-xl font-bold text-brand-800 mb-2"},""),R("p",{class:"text-brand-700"},"Markdown")],-1),Ap=[Rp],Tp=R("div",{class:"p-2 border-t border-slate-100 mt-auto flex-shrink-0"},[R("div",{class:"text-xs text-slate-400 text-center"}," Built with Vue 3 & Tailwind ")],-1),Dp=ut({__name:"Sidebar",props:{files:{},activeFileId:{},isOpen:{type:Boolean}},emits:["select-file","delete-file","upload","toggle","rename-file"],setup(e,{emit:t}){const s=e,i=fe(null),a=fe(null),u=fe(!1),f=fe(!1),r=()=>{var o;(o=i.value)==null||o.click()},n=o=>{t("upload",o)},p=o=>{o.preventDefault(),o.stopPropagation(),u.value||(u.value=!0),f.value||(f.value=!0)},_=o=>{o.preventDefault(),o.stopPropagation();const l=o.currentTarget,v=o.relatedTarget;l.contains(v)||(u.value=!1,f.value=!1)},d=o=>{var l;if(o.preventDefault(),o.stopPropagation(),u.value=!1,f.value=!1,(l=o.dataTransfer)!=null&&l.files&&o.dataTransfer.files.length>0){const v={target:{files:o.dataTransfer.files}};t("upload",v)}};Ue(()=>({"border-dashed border-2 border-slate-200":!0,"border-brand-400 bg-brand-50":u.value,"hover:border-slate-300":!u.value}));const g=fe(null),b=fe(""),w=(o,l)=>{g.value=o,b.value=l},m=o=>{var l;if(b.value.trim()){const v=s.files.find(S=>S.id===o);if(v){const S=((l=v.name.match(/\.(md|markdown|txt)$/i))==null?void 0:l[0])||"",x=S?`${b.value.trim()}${S}`:b.value.trim();t("rename-file",o,x)}}g.value=null},c=()=>{g.value=null},h=(o,l)=>{o.key==="Enter"?m(l):o.key==="Escape"&&c()};return(o,l)=>(ue(),de(Qe,null,[o.isOpen?Oe("",!0):(ue(),de("button",{key:0,onClick:l[0]||(l[0]=v=>t("toggle")),class:"fixed top-3 sm:top-4 left-3 sm:left-4 z-20 p-2 bg-white rounded-lg shadow-md hover:bg-gray-50 text-slate-600 transition-colors","aria-label":"Open sidebar"},[be(ve(Yl),{class:"w-6 h-6"})])),o.isOpen?(ue(),de("div",{key:1,class:"fixed inset-0 bg-black/20 backdrop-blur-sm z-10 md:hidden",onClick:l[1]||(l[1]=v=>t("toggle"))})):Oe("",!0),o.isOpen?(ue(),de("div",{key:2,class:Te(["fixed md:static inset-0 left-0 w-64 sm:w-72 md:w-80 flex flex-col z-20 shadow-xl md:shadow-none transition-transform duration-300 h-full",u.value?"bg-brand-50 border-r-2 border-brand-300":"bg-white border-r border-slate-200"]),onDragover:p,onDragleave:_,onDrop:d},[R("div",lp,[cp,R("button",{onClick:l[2]||(l[2]=v=>t("toggle")),class:"md:hidden text-slate-400 hover:text-slate-600"},[be(ve(Ef),{class:"w-6 h-6"})])]),R("div",hp,[R("input",{type:"file",ref_key:"fileInputRef",ref:i,onChange:n,accept:".md,.markdown,.txt",multiple:"",class:"hidden"},null,544),R("button",{onClick:r,class:"w-full flex items-center justify-center gap-2 bg-slate-900 hover:bg-slate-800 text-white py-3 px-4 rounded-xl transition-all duration-200 shadow-sm hover:shadow active:scale-95"},[be(ve(Hf),{class:"w-5 h-5"}),up])]),R("div",dp,[o.files.length===0?(ue(),de("div",fp,_p)):(ue(),de(Qe,{key:1},[gp,(ue(!0),de(Qe,null,Gt(o.files,v=>{var S;return ue(),de("div",{key:v.id,class:Te(["group flex items-center justify-between p-2 rounded-lg cursor-pointer transition-all duration-200",o.activeFileId===v.id?"bg-brand-50 text-brand-900 ring-1 ring-brand-200":"text-slate-600 hover:bg-slate-50"]),onClick:x=>t("select-file",v.id),onDblclick:wr(x=>w(v.id,v.name.replace(/\.(md|markdown|txt)$/i,"")),["stop"])},[R("div",vp,[be(ve(Yn),{class:Te(["w-4 h-4 flex-shrink-0",o.activeFileId===v.id?"text-brand-500":"text-slate-400"])},null,8,["class"]),g.value===v.id?(ue(),de("div",bp,[Ze(R("input",{"onUpdate:modelValue":l[3]||(l[3]=x=>b.value=x),type:"text",class:"text-sm font-medium border-b-2 border-brand-400 focus:outline-none focus:border-brand-600 px-1 py-0 w-full min-w-0",onBlur:x=>m(v.id),onKeydown:x=>h(x,v.id),ref_for:!0,ref_key:"fileNameInputRef",ref:a,title:"EnterEscape",autofocus:""},null,40,wp),[[Ye,b.value]]),R("span",yp,we(((S=v.name.match(/\.(md|markdown|txt)$/i))==null?void 0:S[0])||""),1)])):(ue(),de("span",{key:1,class:"truncate text-sm font-medium hover:text-brand-600 transition-colors cursor-default max-w-[calc(100%-50px)] whitespace-nowrap overflow-hidden text-ellipsis",title:v.name},we(v.name),9,Sp))]),R("div",xp,[g.value!==v.id?(ue(),de("button",{key:0,onClick:wr(x=>w(v.id,v.name.replace(/\.(md|markdown|txt)$/i,"")),["stop"]),class:"opacity-0 group-hover:opacity-50 p-1.5 text-slate-400 hover:text-blue-500 hover:bg-blue-50 rounded-md transition-all",title:""},"  ",8,Cp)):Oe("",!0),R("button",{onClick:wr(x=>t("delete-file",v.id),["stop"]),class:"opacity-0 group-hover:opacity-100 p-1.5 text-slate-400 hover:text-red-500 hover:bg-red-50 rounded-md transition-all",title:""},[be(ve(eo),{class:"w-4 h-4"})],8,kp)])],42,mp)}),128))],64))]),f.value?(ue(),de("div",Ep,Ap)):Oe("",!0),Tp],34)):Oe("",!0)],64))}});function to(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}let js=to();function ec(e){js=e}const tc=/[&<>"']/,Lp=new RegExp(tc.source,"g"),sc=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,Op=new RegExp(sc.source,"g"),Mp={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},fa=e=>Mp[e];function Ht(e,t){if(t){if(tc.test(e))return e.replace(Lp,fa)}else if(sc.test(e))return e.replace(Op,fa);return e}const Ip=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function Bp(e){return e.replace(Ip,(t,s)=>(s=s.toLowerCase(),s==="colon"?":":s.charAt(0)==="#"?s.charAt(1)==="x"?String.fromCharCode(parseInt(s.substring(2),16)):String.fromCharCode(+s.substring(1)):""))}const Pp=/(^|[^\[])\^/g;function Ke(e,t){e=typeof e=="string"?e:e.source,t=t||"";const s={replace:(i,a)=>(a=typeof a=="object"&&"source"in a?a.source:a,a=a.replace(Pp,"$1"),e=e.replace(i,a),s),getRegex:()=>new RegExp(e,t)};return s}function pa(e){try{e=encodeURI(e).replace(/%25/g,"%")}catch{return null}return e}const wi={exec:()=>null};function _a(e,t){const s=e.replace(/\|/g,(u,f,r)=>{let n=!1,p=f;for(;--p>=0&&r[p]==="\\";)n=!n;return n?"|":" |"}),i=s.split(/ \|/);let a=0;if(i[0].trim()||i.shift(),i.length>0&&!i[i.length-1].trim()&&i.pop(),t)if(i.length>t)i.splice(t);else for(;i.length<t;)i.push("");for(;a<i.length;a++)i[a]=i[a].trim().replace(/\\\|/g,"|");return i}function Vr(e,t,s){const i=e.length;if(i===0)return"";let a=0;for(;a<i&&e.charAt(i-a-1)===t;)a++;return e.slice(0,i-a)}function $p(e,t){if(e.indexOf(t[1])===-1)return-1;let s=0;for(let i=0;i<e.length;i++)if(e[i]==="\\")i++;else if(e[i]===t[0])s++;else if(e[i]===t[1]&&(s--,s<0))return i;return-1}function ga(e,t,s,i){const a=t.href,u=t.title?Ht(t.title):null,f=e[1].replace(/\\([\[\]])/g,"$1");if(e[0].charAt(0)!=="!"){i.state.inLink=!0;const r={type:"link",raw:s,href:a,title:u,text:f,tokens:i.inlineTokens(f)};return i.state.inLink=!1,r}return{type:"image",raw:s,href:a,title:u,text:Ht(f)}}function Fp(e,t){const s=e.match(/^(\s+)(?:```)/);if(s===null)return t;const i=s[1];return t.split(`
`).map(a=>{const u=a.match(/^\s+/);if(u===null)return a;const[f]=u;return f.length>=i.length?a.slice(i.length):a}).join(`
`)}class yi{constructor(t){Xe(this,"options");Xe(this,"rules");Xe(this,"lexer");this.options=t||js}space(t){const s=this.rules.block.newline.exec(t);if(s&&s[0].length>0)return{type:"space",raw:s[0]}}code(t){const s=this.rules.block.code.exec(t);if(s){const i=s[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:s[0],codeBlockStyle:"indented",text:this.options.pedantic?i:Vr(i,`
`)}}}fences(t){const s=this.rules.block.fences.exec(t);if(s){const i=s[0],a=Fp(i,s[3]||"");return{type:"code",raw:i,lang:s[2]?s[2].trim().replace(this.rules.inline._escapes,"$1"):s[2],text:a}}}heading(t){const s=this.rules.block.heading.exec(t);if(s){let i=s[2].trim();if(/#$/.test(i)){const a=Vr(i,"#");(this.options.pedantic||!a||/ $/.test(a))&&(i=a.trim())}return{type:"heading",raw:s[0],depth:s[1].length,text:i,tokens:this.lexer.inline(i)}}}hr(t){const s=this.rules.block.hr.exec(t);if(s)return{type:"hr",raw:s[0]}}blockquote(t){const s=this.rules.block.blockquote.exec(t);if(s){const i=Vr(s[0].replace(/^ *>[ \t]?/gm,""),`
`),a=this.lexer.state.top;this.lexer.state.top=!0;const u=this.lexer.blockTokens(i);return this.lexer.state.top=a,{type:"blockquote",raw:s[0],tokens:u,text:i}}}list(t){let s=this.rules.block.list.exec(t);if(s){let i=s[1].trim();const a=i.length>1,u={type:"list",raw:"",ordered:a,start:a?+i.slice(0,-1):"",loose:!1,items:[]};i=a?`\\d{1,9}\\${i.slice(-1)}`:`\\${i}`,this.options.pedantic&&(i=a?i:"[*+-]");const f=new RegExp(`^( {0,3}${i})((?:[	 ][^\\n]*)?(?:\\n|$))`);let r="",n="",p=!1;for(;t;){let _=!1;if(!(s=f.exec(t))||this.rules.block.hr.test(t))break;r=s[0],t=t.substring(r.length);let d=s[2].split(`
`,1)[0].replace(/^\t+/,h=>" ".repeat(3*h.length)),g=t.split(`
`,1)[0],b=0;this.options.pedantic?(b=2,n=d.trimStart()):(b=s[2].search(/[^ ]/),b=b>4?1:b,n=d.slice(b),b+=s[1].length);let w=!1;if(!d&&/^ *$/.test(g)&&(r+=g+`
`,t=t.substring(g.length+1),_=!0),!_){const h=new RegExp(`^ {0,${Math.min(3,b-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),o=new RegExp(`^ {0,${Math.min(3,b-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),l=new RegExp(`^ {0,${Math.min(3,b-1)}}(?:\`\`\`|~~~)`),v=new RegExp(`^ {0,${Math.min(3,b-1)}}#`);for(;t;){const S=t.split(`
`,1)[0];if(g=S,this.options.pedantic&&(g=g.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),l.test(g)||v.test(g)||h.test(g)||o.test(t))break;if(g.search(/[^ ]/)>=b||!g.trim())n+=`
`+g.slice(b);else{if(w||d.search(/[^ ]/)>=4||l.test(d)||v.test(d)||o.test(d))break;n+=`
`+g}!w&&!g.trim()&&(w=!0),r+=S+`
`,t=t.substring(S.length+1),d=g.slice(b)}}u.loose||(p?u.loose=!0:/\n *\n *$/.test(r)&&(p=!0));let m=null,c;this.options.gfm&&(m=/^\[[ xX]\] /.exec(n),m&&(c=m[0]!=="[ ] ",n=n.replace(/^\[[ xX]\] +/,""))),u.items.push({type:"list_item",raw:r,task:!!m,checked:c,loose:!1,text:n,tokens:[]}),u.raw+=r}u.items[u.items.length-1].raw=r.trimEnd(),u.items[u.items.length-1].text=n.trimEnd(),u.raw=u.raw.trimEnd();for(let _=0;_<u.items.length;_++)if(this.lexer.state.top=!1,u.items[_].tokens=this.lexer.blockTokens(u.items[_].text,[]),!u.loose){const d=u.items[_].tokens.filter(b=>b.type==="space"),g=d.length>0&&d.some(b=>/\n.*\n/.test(b.raw));u.loose=g}if(u.loose)for(let _=0;_<u.items.length;_++)u.items[_].loose=!0;return u}}html(t){const s=this.rules.block.html.exec(t);if(s)return{type:"html",block:!0,raw:s[0],pre:s[1]==="pre"||s[1]==="script"||s[1]==="style",text:s[0]}}def(t){const s=this.rules.block.def.exec(t);if(s){const i=s[1].toLowerCase().replace(/\s+/g," "),a=s[2]?s[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline._escapes,"$1"):"",u=s[3]?s[3].substring(1,s[3].length-1).replace(this.rules.inline._escapes,"$1"):s[3];return{type:"def",tag:i,raw:s[0],href:a,title:u}}}table(t){const s=this.rules.block.table.exec(t);if(s){if(!/[:|]/.test(s[2]))return;const i={type:"table",raw:s[0],header:_a(s[1]).map(a=>({text:a,tokens:[]})),align:s[2].replace(/^\||\| *$/g,"").split("|"),rows:s[3]&&s[3].trim()?s[3].replace(/\n[ \t]*$/,"").split(`
`):[]};if(i.header.length===i.align.length){let a=i.align.length,u,f,r,n;for(u=0;u<a;u++){const p=i.align[u];p&&(/^ *-+: *$/.test(p)?i.align[u]="right":/^ *:-+: *$/.test(p)?i.align[u]="center":/^ *:-+ *$/.test(p)?i.align[u]="left":i.align[u]=null)}for(a=i.rows.length,u=0;u<a;u++)i.rows[u]=_a(i.rows[u],i.header.length).map(p=>({text:p,tokens:[]}));for(a=i.header.length,f=0;f<a;f++)i.header[f].tokens=this.lexer.inline(i.header[f].text);for(a=i.rows.length,f=0;f<a;f++)for(n=i.rows[f],r=0;r<n.length;r++)n[r].tokens=this.lexer.inline(n[r].text);return i}}}lheading(t){const s=this.rules.block.lheading.exec(t);if(s)return{type:"heading",raw:s[0],depth:s[2].charAt(0)==="="?1:2,text:s[1],tokens:this.lexer.inline(s[1])}}paragraph(t){const s=this.rules.block.paragraph.exec(t);if(s){const i=s[1].charAt(s[1].length-1)===`
`?s[1].slice(0,-1):s[1];return{type:"paragraph",raw:s[0],text:i,tokens:this.lexer.inline(i)}}}text(t){const s=this.rules.block.text.exec(t);if(s)return{type:"text",raw:s[0],text:s[0],tokens:this.lexer.inline(s[0])}}escape(t){const s=this.rules.inline.escape.exec(t);if(s)return{type:"escape",raw:s[0],text:Ht(s[1])}}tag(t){const s=this.rules.inline.tag.exec(t);if(s)return!this.lexer.state.inLink&&/^<a /i.test(s[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(s[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(s[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(s[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:s[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:s[0]}}link(t){const s=this.rules.inline.link.exec(t);if(s){const i=s[2].trim();if(!this.options.pedantic&&/^</.test(i)){if(!/>$/.test(i))return;const f=Vr(i.slice(0,-1),"\\");if((i.length-f.length)%2===0)return}else{const f=$p(s[2],"()");if(f>-1){const n=(s[0].indexOf("!")===0?5:4)+s[1].length+f;s[2]=s[2].substring(0,f),s[0]=s[0].substring(0,n).trim(),s[3]=""}}let a=s[2],u="";if(this.options.pedantic){const f=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(a);f&&(a=f[1],u=f[3])}else u=s[3]?s[3].slice(1,-1):"";return a=a.trim(),/^</.test(a)&&(this.options.pedantic&&!/>$/.test(i)?a=a.slice(1):a=a.slice(1,-1)),ga(s,{href:a&&a.replace(this.rules.inline._escapes,"$1"),title:u&&u.replace(this.rules.inline._escapes,"$1")},s[0],this.lexer)}}reflink(t,s){let i;if((i=this.rules.inline.reflink.exec(t))||(i=this.rules.inline.nolink.exec(t))){let a=(i[2]||i[1]).replace(/\s+/g," ");if(a=s[a.toLowerCase()],!a){const u=i[0].charAt(0);return{type:"text",raw:u,text:u}}return ga(i,a,i[0],this.lexer)}}emStrong(t,s,i=""){let a=this.rules.inline.emStrong.lDelim.exec(t);if(!a||a[3]&&i.match(/[\p{L}\p{N}]/u))return;if(!(a[1]||a[2]||"")||!i||this.rules.inline.punctuation.exec(i)){const f=[...a[0]].length-1;let r,n,p=f,_=0;const d=a[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(d.lastIndex=0,s=s.slice(-1*t.length+a[0].length-1);(a=d.exec(s))!=null;){if(r=a[1]||a[2]||a[3]||a[4]||a[5]||a[6],!r)continue;if(n=[...r].length,a[3]||a[4]){p+=n;continue}else if((a[5]||a[6])&&f%3&&!((f+n)%3)){_+=n;continue}if(p-=n,p>0)continue;n=Math.min(n,n+p+_);const g=[...t].slice(0,f+a.index+n+1).join("");if(Math.min(f,n)%2){const w=g.slice(1,-1);return{type:"em",raw:g,text:w,tokens:this.lexer.inlineTokens(w)}}const b=g.slice(2,-2);return{type:"strong",raw:g,text:b,tokens:this.lexer.inlineTokens(b)}}}}codespan(t){const s=this.rules.inline.code.exec(t);if(s){let i=s[2].replace(/\n/g," ");const a=/[^ ]/.test(i),u=/^ /.test(i)&&/ $/.test(i);return a&&u&&(i=i.substring(1,i.length-1)),i=Ht(i,!0),{type:"codespan",raw:s[0],text:i}}}br(t){const s=this.rules.inline.br.exec(t);if(s)return{type:"br",raw:s[0]}}del(t){const s=this.rules.inline.del.exec(t);if(s)return{type:"del",raw:s[0],text:s[2],tokens:this.lexer.inlineTokens(s[2])}}autolink(t){const s=this.rules.inline.autolink.exec(t);if(s){let i,a;return s[2]==="@"?(i=Ht(s[1]),a="mailto:"+i):(i=Ht(s[1]),a=i),{type:"link",raw:s[0],text:i,href:a,tokens:[{type:"text",raw:i,text:i}]}}}url(t){let s;if(s=this.rules.inline.url.exec(t)){let i,a;if(s[2]==="@")i=Ht(s[0]),a="mailto:"+i;else{let u;do u=s[0],s[0]=this.rules.inline._backpedal.exec(s[0])[0];while(u!==s[0]);i=Ht(s[0]),s[1]==="www."?a="http://"+s[0]:a=s[0]}return{type:"link",raw:s[0],text:i,href:a,tokens:[{type:"text",raw:i,text:i}]}}}inlineText(t){const s=this.rules.inline.text.exec(t);if(s){let i;return this.lexer.state.inRawBlock?i=s[0]:i=Ht(s[0]),{type:"text",raw:s[0],text:i}}}}const Re={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:wi,lheading:/^(?!bull )((?:.|\n(?!\s*?\n|bull ))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/};Re._label=/(?!\s*\])(?:\\.|[^\[\]\\])+/;Re._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/;Re.def=Ke(Re.def).replace("label",Re._label).replace("title",Re._title).getRegex();Re.bullet=/(?:[*+-]|\d{1,9}[.)])/;Re.listItemStart=Ke(/^( *)(bull) */).replace("bull",Re.bullet).getRegex();Re.list=Ke(Re.list).replace(/bull/g,Re.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+Re.def.source+")").getRegex();Re._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul";Re._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/;Re.html=Ke(Re.html,"i").replace("comment",Re._comment).replace("tag",Re._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex();Re.lheading=Ke(Re.lheading).replace(/bull/g,Re.bullet).getRegex();Re.paragraph=Ke(Re._paragraph).replace("hr",Re.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Re._tag).getRegex();Re.blockquote=Ke(Re.blockquote).replace("paragraph",Re.paragraph).getRegex();Re.normal={...Re};Re.gfm={...Re.normal,table:"^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"};Re.gfm.table=Ke(Re.gfm.table).replace("hr",Re.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Re._tag).getRegex();Re.gfm.paragraph=Ke(Re._paragraph).replace("hr",Re.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",Re.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Re._tag).getRegex();Re.pedantic={...Re.normal,html:Ke(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",Re._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:wi,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:Ke(Re.normal._paragraph).replace("hr",Re.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",Re.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()};const ye={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:wi,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,rDelimAst:/^[^_*]*?__[^_*]*?\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\*)[punct](\*+)(?=[\s]|$)|[^punct\s](\*+)(?!\*)(?=[punct\s]|$)|(?!\*)[punct\s](\*+)(?=[^punct\s])|[\s](\*+)(?!\*)(?=[punct])|(?!\*)[punct](\*+)(?!\*)(?=[punct])|[^punct\s](\*+)(?=[^punct\s])/,rDelimUnd:/^[^_*]*?\*\*[^_*]*?_[^_*]*?(?=\*\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\s]|$)|[^punct\s](_+)(?!_)(?=[punct\s]|$)|(?!_)[punct\s](_+)(?=[^punct\s])|[\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:wi,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^((?![*_])[\spunctuation])/};ye._punctuation="\\p{P}$+<=>`^|~";ye.punctuation=Ke(ye.punctuation,"u").replace(/punctuation/g,ye._punctuation).getRegex();ye.blockSkip=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g;ye.anyPunctuation=/\\[punct]/g;ye._escapes=/\\([punct])/g;ye._comment=Ke(Re._comment).replace("(?:-->|$)","-->").getRegex();ye.emStrong.lDelim=Ke(ye.emStrong.lDelim,"u").replace(/punct/g,ye._punctuation).getRegex();ye.emStrong.rDelimAst=Ke(ye.emStrong.rDelimAst,"gu").replace(/punct/g,ye._punctuation).getRegex();ye.emStrong.rDelimUnd=Ke(ye.emStrong.rDelimUnd,"gu").replace(/punct/g,ye._punctuation).getRegex();ye.anyPunctuation=Ke(ye.anyPunctuation,"gu").replace(/punct/g,ye._punctuation).getRegex();ye._escapes=Ke(ye._escapes,"gu").replace(/punct/g,ye._punctuation).getRegex();ye._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/;ye._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/;ye.autolink=Ke(ye.autolink).replace("scheme",ye._scheme).replace("email",ye._email).getRegex();ye._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/;ye.tag=Ke(ye.tag).replace("comment",ye._comment).replace("attribute",ye._attribute).getRegex();ye._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/;ye._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/;ye._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/;ye.link=Ke(ye.link).replace("label",ye._label).replace("href",ye._href).replace("title",ye._title).getRegex();ye.reflink=Ke(ye.reflink).replace("label",ye._label).replace("ref",Re._label).getRegex();ye.nolink=Ke(ye.nolink).replace("ref",Re._label).getRegex();ye.reflinkSearch=Ke(ye.reflinkSearch,"g").replace("reflink",ye.reflink).replace("nolink",ye.nolink).getRegex();ye.normal={...ye};ye.pedantic={...ye.normal,strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:Ke(/^!?\[(label)\]\((.*?)\)/).replace("label",ye._label).getRegex(),reflink:Ke(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",ye._label).getRegex()};ye.gfm={...ye.normal,escape:Ke(ye.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/};ye.gfm.url=Ke(ye.gfm.url,"i").replace("email",ye.gfm._extended_email).getRegex();ye.breaks={...ye.gfm,br:Ke(ye.br).replace("{2,}","*").getRegex(),text:Ke(ye.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()};class os{constructor(t){Xe(this,"tokens");Xe(this,"options");Xe(this,"state");Xe(this,"tokenizer");Xe(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=t||js,this.options.tokenizer=this.options.tokenizer||new yi,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const s={block:Re.normal,inline:ye.normal};this.options.pedantic?(s.block=Re.pedantic,s.inline=ye.pedantic):this.options.gfm&&(s.block=Re.gfm,this.options.breaks?s.inline=ye.breaks:s.inline=ye.gfm),this.tokenizer.rules=s}static get rules(){return{block:Re,inline:ye}}static lex(t,s){return new os(s).lex(t)}static lexInline(t,s){return new os(s).inlineTokens(t)}lex(t){t=t.replace(/\r\n|\r/g,`
`),this.blockTokens(t,this.tokens);let s;for(;s=this.inlineQueue.shift();)this.inlineTokens(s.src,s.tokens);return this.tokens}blockTokens(t,s=[]){this.options.pedantic?t=t.replace(/\t/g,"    ").replace(/^ +$/gm,""):t=t.replace(/^( *)(\t+)/gm,(r,n,p)=>n+"    ".repeat(p.length));let i,a,u,f;for(;t;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(r=>(i=r.call({lexer:this},t,s))?(t=t.substring(i.raw.length),s.push(i),!0):!1))){if(i=this.tokenizer.space(t)){t=t.substring(i.raw.length),i.raw.length===1&&s.length>0?s[s.length-1].raw+=`
`:s.push(i);continue}if(i=this.tokenizer.code(t)){t=t.substring(i.raw.length),a=s[s.length-1],a&&(a.type==="paragraph"||a.type==="text")?(a.raw+=`
`+i.raw,a.text+=`
`+i.text,this.inlineQueue[this.inlineQueue.length-1].src=a.text):s.push(i);continue}if(i=this.tokenizer.fences(t)){t=t.substring(i.raw.length),s.push(i);continue}if(i=this.tokenizer.heading(t)){t=t.substring(i.raw.length),s.push(i);continue}if(i=this.tokenizer.hr(t)){t=t.substring(i.raw.length),s.push(i);continue}if(i=this.tokenizer.blockquote(t)){t=t.substring(i.raw.length),s.push(i);continue}if(i=this.tokenizer.list(t)){t=t.substring(i.raw.length),s.push(i);continue}if(i=this.tokenizer.html(t)){t=t.substring(i.raw.length),s.push(i);continue}if(i=this.tokenizer.def(t)){t=t.substring(i.raw.length),a=s[s.length-1],a&&(a.type==="paragraph"||a.type==="text")?(a.raw+=`
`+i.raw,a.text+=`
`+i.raw,this.inlineQueue[this.inlineQueue.length-1].src=a.text):this.tokens.links[i.tag]||(this.tokens.links[i.tag]={href:i.href,title:i.title});continue}if(i=this.tokenizer.table(t)){t=t.substring(i.raw.length),s.push(i);continue}if(i=this.tokenizer.lheading(t)){t=t.substring(i.raw.length),s.push(i);continue}if(u=t,this.options.extensions&&this.options.extensions.startBlock){let r=1/0;const n=t.slice(1);let p;this.options.extensions.startBlock.forEach(_=>{p=_.call({lexer:this},n),typeof p=="number"&&p>=0&&(r=Math.min(r,p))}),r<1/0&&r>=0&&(u=t.substring(0,r+1))}if(this.state.top&&(i=this.tokenizer.paragraph(u))){a=s[s.length-1],f&&a.type==="paragraph"?(a.raw+=`
`+i.raw,a.text+=`
`+i.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=a.text):s.push(i),f=u.length!==t.length,t=t.substring(i.raw.length);continue}if(i=this.tokenizer.text(t)){t=t.substring(i.raw.length),a=s[s.length-1],a&&a.type==="text"?(a.raw+=`
`+i.raw,a.text+=`
`+i.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=a.text):s.push(i);continue}if(t){const r="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(r);break}else throw new Error(r)}}return this.state.top=!0,s}inline(t,s=[]){return this.inlineQueue.push({src:t,tokens:s}),s}inlineTokens(t,s=[]){let i,a,u,f=t,r,n,p;if(this.tokens.links){const _=Object.keys(this.tokens.links);if(_.length>0)for(;(r=this.tokenizer.rules.inline.reflinkSearch.exec(f))!=null;)_.includes(r[0].slice(r[0].lastIndexOf("[")+1,-1))&&(f=f.slice(0,r.index)+"["+"a".repeat(r[0].length-2)+"]"+f.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(r=this.tokenizer.rules.inline.blockSkip.exec(f))!=null;)f=f.slice(0,r.index)+"["+"a".repeat(r[0].length-2)+"]"+f.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(r=this.tokenizer.rules.inline.anyPunctuation.exec(f))!=null;)f=f.slice(0,r.index)+"++"+f.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;t;)if(n||(p=""),n=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(_=>(i=_.call({lexer:this},t,s))?(t=t.substring(i.raw.length),s.push(i),!0):!1))){if(i=this.tokenizer.escape(t)){t=t.substring(i.raw.length),s.push(i);continue}if(i=this.tokenizer.tag(t)){t=t.substring(i.raw.length),a=s[s.length-1],a&&i.type==="text"&&a.type==="text"?(a.raw+=i.raw,a.text+=i.text):s.push(i);continue}if(i=this.tokenizer.link(t)){t=t.substring(i.raw.length),s.push(i);continue}if(i=this.tokenizer.reflink(t,this.tokens.links)){t=t.substring(i.raw.length),a=s[s.length-1],a&&i.type==="text"&&a.type==="text"?(a.raw+=i.raw,a.text+=i.text):s.push(i);continue}if(i=this.tokenizer.emStrong(t,f,p)){t=t.substring(i.raw.length),s.push(i);continue}if(i=this.tokenizer.codespan(t)){t=t.substring(i.raw.length),s.push(i);continue}if(i=this.tokenizer.br(t)){t=t.substring(i.raw.length),s.push(i);continue}if(i=this.tokenizer.del(t)){t=t.substring(i.raw.length),s.push(i);continue}if(i=this.tokenizer.autolink(t)){t=t.substring(i.raw.length),s.push(i);continue}if(!this.state.inLink&&(i=this.tokenizer.url(t))){t=t.substring(i.raw.length),s.push(i);continue}if(u=t,this.options.extensions&&this.options.extensions.startInline){let _=1/0;const d=t.slice(1);let g;this.options.extensions.startInline.forEach(b=>{g=b.call({lexer:this},d),typeof g=="number"&&g>=0&&(_=Math.min(_,g))}),_<1/0&&_>=0&&(u=t.substring(0,_+1))}if(i=this.tokenizer.inlineText(u)){t=t.substring(i.raw.length),i.raw.slice(-1)!=="_"&&(p=i.raw.slice(-1)),n=!0,a=s[s.length-1],a&&a.type==="text"?(a.raw+=i.raw,a.text+=i.text):s.push(i);continue}if(t){const _="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(_);break}else throw new Error(_)}}return s}}class Si{constructor(t){Xe(this,"options");this.options=t||js}code(t,s,i){var u;const a=(u=(s||"").match(/^\S*/))==null?void 0:u[0];return t=t.replace(/\n$/,"")+`
`,a?'<pre><code class="language-'+Ht(a)+'">'+(i?t:Ht(t,!0))+`</code></pre>
`:"<pre><code>"+(i?t:Ht(t,!0))+`</code></pre>
`}blockquote(t){return`<blockquote>
${t}</blockquote>
`}html(t,s){return t}heading(t,s,i){return`<h${s}>${t}</h${s}>
`}hr(){return`<hr>
`}list(t,s,i){const a=s?"ol":"ul",u=s&&i!==1?' start="'+i+'"':"";return"<"+a+u+`>
`+t+"</"+a+`>
`}listitem(t,s,i){return`<li>${t}</li>
`}checkbox(t){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph(t){return`<p>${t}</p>
`}table(t,s){return s&&(s=`<tbody>${s}</tbody>`),`<table>
<thead>
`+t+`</thead>
`+s+`</table>
`}tablerow(t){return`<tr>
${t}</tr>
`}tablecell(t,s){const i=s.header?"th":"td";return(s.align?`<${i} align="${s.align}">`:`<${i}>`)+t+`</${i}>
`}strong(t){return`<strong>${t}</strong>`}em(t){return`<em>${t}</em>`}codespan(t){return`<code>${t}</code>`}br(){return"<br>"}del(t){return`<del>${t}</del>`}link(t,s,i){const a=pa(t);if(a===null)return i;t=a;let u='<a href="'+t+'"';return s&&(u+=' title="'+s+'"'),u+=">"+i+"</a>",u}image(t,s,i){const a=pa(t);if(a===null)return i;t=a;let u=`<img src="${t}" alt="${i}"`;return s&&(u+=` title="${s}"`),u+=">",u}text(t){return t}}class so{strong(t){return t}em(t){return t}codespan(t){return t}del(t){return t}html(t){return t}text(t){return t}link(t,s,i){return""+i}image(t,s,i){return""+i}br(){return""}}class as{constructor(t){Xe(this,"options");Xe(this,"renderer");Xe(this,"textRenderer");this.options=t||js,this.options.renderer=this.options.renderer||new Si,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new so}static parse(t,s){return new as(s).parse(t)}static parseInline(t,s){return new as(s).parseInline(t)}parse(t,s=!0){let i="";for(let a=0;a<t.length;a++){const u=t[a];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[u.type]){const f=u,r=this.options.extensions.renderers[f.type].call({parser:this},f);if(r!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(f.type)){i+=r||"";continue}}switch(u.type){case"space":continue;case"hr":{i+=this.renderer.hr();continue}case"heading":{const f=u;i+=this.renderer.heading(this.parseInline(f.tokens),f.depth,Bp(this.parseInline(f.tokens,this.textRenderer)));continue}case"code":{const f=u;i+=this.renderer.code(f.text,f.lang,!!f.escaped);continue}case"table":{const f=u;let r="",n="";for(let _=0;_<f.header.length;_++)n+=this.renderer.tablecell(this.parseInline(f.header[_].tokens),{header:!0,align:f.align[_]});r+=this.renderer.tablerow(n);let p="";for(let _=0;_<f.rows.length;_++){const d=f.rows[_];n="";for(let g=0;g<d.length;g++)n+=this.renderer.tablecell(this.parseInline(d[g].tokens),{header:!1,align:f.align[g]});p+=this.renderer.tablerow(n)}i+=this.renderer.table(r,p);continue}case"blockquote":{const f=u,r=this.parse(f.tokens);i+=this.renderer.blockquote(r);continue}case"list":{const f=u,r=f.ordered,n=f.start,p=f.loose;let _="";for(let d=0;d<f.items.length;d++){const g=f.items[d],b=g.checked,w=g.task;let m="";if(g.task){const c=this.renderer.checkbox(!!b);p?g.tokens.length>0&&g.tokens[0].type==="paragraph"?(g.tokens[0].text=c+" "+g.tokens[0].text,g.tokens[0].tokens&&g.tokens[0].tokens.length>0&&g.tokens[0].tokens[0].type==="text"&&(g.tokens[0].tokens[0].text=c+" "+g.tokens[0].tokens[0].text)):g.tokens.unshift({type:"text",text:c+" "}):m+=c+" "}m+=this.parse(g.tokens,p),_+=this.renderer.listitem(m,w,!!b)}i+=this.renderer.list(_,r,n);continue}case"html":{const f=u;i+=this.renderer.html(f.text,f.block);continue}case"paragraph":{const f=u;i+=this.renderer.paragraph(this.parseInline(f.tokens));continue}case"text":{let f=u,r=f.tokens?this.parseInline(f.tokens):f.text;for(;a+1<t.length&&t[a+1].type==="text";)f=t[++a],r+=`
`+(f.tokens?this.parseInline(f.tokens):f.text);i+=s?this.renderer.paragraph(r):r;continue}default:{const f='Token with "'+u.type+'" type was not found.';if(this.options.silent)return console.error(f),"";throw new Error(f)}}}return i}parseInline(t,s){s=s||this.renderer;let i="";for(let a=0;a<t.length;a++){const u=t[a];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[u.type]){const f=this.options.extensions.renderers[u.type].call({parser:this},u);if(f!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(u.type)){i+=f||"";continue}}switch(u.type){case"escape":{const f=u;i+=s.text(f.text);break}case"html":{const f=u;i+=s.html(f.text);break}case"link":{const f=u;i+=s.link(f.href,f.title,this.parseInline(f.tokens,s));break}case"image":{const f=u;i+=s.image(f.href,f.title,f.text);break}case"strong":{const f=u;i+=s.strong(this.parseInline(f.tokens,s));break}case"em":{const f=u;i+=s.em(this.parseInline(f.tokens,s));break}case"codespan":{const f=u;i+=s.codespan(f.text);break}case"br":{i+=s.br();break}case"del":{const f=u;i+=s.del(this.parseInline(f.tokens,s));break}case"text":{const f=u;i+=s.text(f.text);break}default:{const f='Token with "'+u.type+'" type was not found.';if(this.options.silent)return console.error(f),"";throw new Error(f)}}}return i}}class xr{constructor(t){Xe(this,"options");this.options=t||js}preprocess(t){return t}postprocess(t){return t}}Xe(xr,"passThroughHooks",new Set(["preprocess","postprocess"]));var Us,Cn,rc;class Hp{constructor(...t){_o(this,Us);Xe(this,"defaults",to());Xe(this,"options",this.setOptions);Xe(this,"parse",Hr(this,Us,Cn).call(this,os.lex,as.parse));Xe(this,"parseInline",Hr(this,Us,Cn).call(this,os.lexInline,as.parseInline));Xe(this,"Parser",as);Xe(this,"parser",as.parse);Xe(this,"Renderer",Si);Xe(this,"TextRenderer",so);Xe(this,"Lexer",os);Xe(this,"lexer",os.lex);Xe(this,"Tokenizer",yi);Xe(this,"Hooks",xr);this.use(...t)}walkTokens(t,s){var a,u;let i=[];for(const f of t)switch(i=i.concat(s.call(this,f)),f.type){case"table":{const r=f;for(const n of r.header)i=i.concat(this.walkTokens(n.tokens,s));for(const n of r.rows)for(const p of n)i=i.concat(this.walkTokens(p.tokens,s));break}case"list":{const r=f;i=i.concat(this.walkTokens(r.items,s));break}default:{const r=f;(u=(a=this.defaults.extensions)==null?void 0:a.childTokens)!=null&&u[r.type]?this.defaults.extensions.childTokens[r.type].forEach(n=>{i=i.concat(this.walkTokens(r[n],s))}):r.tokens&&(i=i.concat(this.walkTokens(r.tokens,s)))}}return i}use(...t){const s=this.defaults.extensions||{renderers:{},childTokens:{}};return t.forEach(i=>{const a={...i};if(a.async=this.defaults.async||a.async||!1,i.extensions&&(i.extensions.forEach(u=>{if(!u.name)throw new Error("extension name required");if("renderer"in u){const f=s.renderers[u.name];f?s.renderers[u.name]=function(...r){let n=u.renderer.apply(this,r);return n===!1&&(n=f.apply(this,r)),n}:s.renderers[u.name]=u.renderer}if("tokenizer"in u){if(!u.level||u.level!=="block"&&u.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const f=s[u.level];f?f.unshift(u.tokenizer):s[u.level]=[u.tokenizer],u.start&&(u.level==="block"?s.startBlock?s.startBlock.push(u.start):s.startBlock=[u.start]:u.level==="inline"&&(s.startInline?s.startInline.push(u.start):s.startInline=[u.start]))}"childTokens"in u&&u.childTokens&&(s.childTokens[u.name]=u.childTokens)}),a.extensions=s),i.renderer){const u=this.defaults.renderer||new Si(this.defaults);for(const f in i.renderer){const r=i.renderer[f],n=f,p=u[n];u[n]=(..._)=>{let d=r.apply(u,_);return d===!1&&(d=p.apply(u,_)),d||""}}a.renderer=u}if(i.tokenizer){const u=this.defaults.tokenizer||new yi(this.defaults);for(const f in i.tokenizer){const r=i.tokenizer[f],n=f,p=u[n];u[n]=(..._)=>{let d=r.apply(u,_);return d===!1&&(d=p.apply(u,_)),d}}a.tokenizer=u}if(i.hooks){const u=this.defaults.hooks||new xr;for(const f in i.hooks){const r=i.hooks[f],n=f,p=u[n];xr.passThroughHooks.has(f)?u[n]=_=>{if(this.defaults.async)return Promise.resolve(r.call(u,_)).then(g=>p.call(u,g));const d=r.call(u,_);return p.call(u,d)}:u[n]=(..._)=>{let d=r.apply(u,_);return d===!1&&(d=p.apply(u,_)),d}}a.hooks=u}if(i.walkTokens){const u=this.defaults.walkTokens,f=i.walkTokens;a.walkTokens=function(r){let n=[];return n.push(f.call(this,r)),u&&(n=n.concat(u.call(this,r))),n}}this.defaults={...this.defaults,...a}}),this}setOptions(t){return this.defaults={...this.defaults,...t},this}}Us=new WeakSet,Cn=function(t,s){return(i,a)=>{const u={...a},f={...this.defaults,...u};this.defaults.async===!0&&u.async===!1&&(f.silent||console.warn("marked(): The async option was set to true by an extension. The async: false option sent to parse will be ignored."),f.async=!0);const r=Hr(this,Us,rc).call(this,!!f.silent,!!f.async);if(typeof i>"u"||i===null)return r(new Error("marked(): input parameter is undefined or null"));if(typeof i!="string")return r(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(i)+", string expected"));if(f.hooks&&(f.hooks.options=f),f.async)return Promise.resolve(f.hooks?f.hooks.preprocess(i):i).then(n=>t(n,f)).then(n=>f.walkTokens?Promise.all(this.walkTokens(n,f.walkTokens)).then(()=>n):n).then(n=>s(n,f)).then(n=>f.hooks?f.hooks.postprocess(n):n).catch(r);try{f.hooks&&(i=f.hooks.preprocess(i));const n=t(i,f);f.walkTokens&&this.walkTokens(n,f.walkTokens);let p=s(n,f);return f.hooks&&(p=f.hooks.postprocess(p)),p}catch(n){return r(n)}}},rc=function(t,s){return i=>{if(i.message+=`
Please report this to https://github.com/markedjs/marked.`,t){const a="<p>An error occurred:</p><pre>"+Ht(i.message+"",!0)+"</pre>";return s?Promise.resolve(a):a}if(s)return Promise.reject(i);throw i}};const Ns=new Hp;function Ge(e,t){return Ns.parse(e,t)}Ge.options=Ge.setOptions=function(e){return Ns.setOptions(e),Ge.defaults=Ns.defaults,ec(Ge.defaults),Ge};Ge.getDefaults=to;Ge.defaults=js;Ge.use=function(...e){return Ns.use(...e),Ge.defaults=Ns.defaults,ec(Ge.defaults),Ge};Ge.walkTokens=function(e,t){return Ns.walkTokens(e,t)};Ge.parseInline=Ns.parseInline;Ge.Parser=as;Ge.parser=as.parse;Ge.Renderer=Si;Ge.TextRenderer=so;Ge.Lexer=os;Ge.lexer=os.lex;Ge.Tokenizer=yi;Ge.Hooks=xr;Ge.parse=Ge;Ge.options;Ge.setOptions;Ge.use;Ge.walkTokens;Ge.parseInline;as.parse;os.lex;/*! @license DOMPurify 3.0.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.0.6/LICENSE */const{entries:ic,setPrototypeOf:ma,isFrozen:Np,getPrototypeOf:zp,getOwnPropertyDescriptor:nc}=Object;let{freeze:xt,seal:Jt,create:oc}=Object,{apply:kn,construct:En}=typeof Reflect<"u"&&Reflect;xt||(xt=function(t){return t});Jt||(Jt=function(t){return t});kn||(kn=function(t,s,i){return t.apply(s,i)});En||(En=function(t,s){return new t(...s)});const Gr=Ut(Array.prototype.forEach),va=Ut(Array.prototype.pop),dr=Ut(Array.prototype.push),oi=Ut(String.prototype.toLowerCase),Zi=Ut(String.prototype.toString),Up=Ut(String.prototype.match),fr=Ut(String.prototype.replace),jp=Ut(String.prototype.indexOf),Wp=Ut(String.prototype.trim),$t=Ut(RegExp.prototype.test),pr=qp(TypeError);function Ut(e){return function(t){for(var s=arguments.length,i=new Array(s>1?s-1:0),a=1;a<s;a++)i[a-1]=arguments[a];return kn(e,t,i)}}function qp(e){return function(){for(var t=arguments.length,s=new Array(t),i=0;i<t;i++)s[i]=arguments[i];return En(e,s)}}function Pe(e,t){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:oi;ma&&ma(e,null);let i=t.length;for(;i--;){let a=t[i];if(typeof a=="string"){const u=s(a);u!==a&&(Np(t)||(t[i]=u),a=u)}e[a]=!0}return e}function qs(e){const t=oc(null);for(const[s,i]of ic(e))nc(e,s)!==void 0&&(t[s]=i);return t}function Zr(e,t){for(;e!==null;){const i=nc(e,t);if(i){if(i.get)return Ut(i.get);if(typeof i.value=="function")return Ut(i.value)}e=zp(e)}function s(i){return console.warn("fallback value for",i),null}return s}const ba=xt(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Xi=xt(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Ji=xt(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),Kp=xt(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Yi=xt(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),Vp=xt(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),wa=xt(["#text"]),ya=xt(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),Qi=xt(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Sa=xt(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Xr=xt(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Gp=Jt(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Zp=Jt(/<%[\w\W]*|[\w\W]*%>/gm),Xp=Jt(/\${[\w\W]*}/gm),Jp=Jt(/^data-[\-\w.\u00B7-\uFFFF]/),Yp=Jt(/^aria-[\-\w]+$/),ac=Jt(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Qp=Jt(/^(?:\w+script|data):/i),e_=Jt(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),lc=Jt(/^html$/i);var xa=Object.freeze({__proto__:null,MUSTACHE_EXPR:Gp,ERB_EXPR:Zp,TMPLIT_EXPR:Xp,DATA_ATTR:Jp,ARIA_ATTR:Yp,IS_ALLOWED_URI:ac,IS_SCRIPT_OR_DATA:Qp,ATTR_WHITESPACE:e_,DOCTYPE_NAME:lc});const t_=function(){return typeof window>"u"?null:window},s_=function(t,s){if(typeof t!="object"||typeof t.createPolicy!="function")return null;let i=null;const a="data-tt-policy-suffix";s&&s.hasAttribute(a)&&(i=s.getAttribute(a));const u="dompurify"+(i?"#"+i:"");try{return t.createPolicy(u,{createHTML(f){return f},createScriptURL(f){return f}})}catch{return console.warn("TrustedTypes policy "+u+" could not be created."),null}};function cc(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:t_();const t=ke=>cc(ke);if(t.version="3.0.6",t.removed=[],!e||!e.document||e.document.nodeType!==9)return t.isSupported=!1,t;let{document:s}=e;const i=s,a=i.currentScript,{DocumentFragment:u,HTMLTemplateElement:f,Node:r,Element:n,NodeFilter:p,NamedNodeMap:_=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:d,DOMParser:g,trustedTypes:b}=e,w=n.prototype,m=Zr(w,"cloneNode"),c=Zr(w,"nextSibling"),h=Zr(w,"childNodes"),o=Zr(w,"parentNode");if(typeof f=="function"){const ke=s.createElement("template");ke.content&&ke.content.ownerDocument&&(s=ke.content.ownerDocument)}let l,v="";const{implementation:S,createNodeIterator:x,createDocumentFragment:k,getElementsByTagName:C}=s,{importNode:A}=i;let N={};t.isSupported=typeof ic=="function"&&typeof o=="function"&&S&&S.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:G,ERB_EXPR:L,TMPLIT_EXPR:I,DATA_ATTR:E,ARIA_ATTR:X,IS_SCRIPT_OR_DATA:Q,ATTR_WHITESPACE:J}=xa;let{IS_ALLOWED_URI:ie}=xa,T=null;const U=Pe({},[...ba,...Xi,...Ji,...Yi,...wa]);let M=null;const $=Pe({},[...ya,...Qi,...Sa,...Xr]);let ne=Object.seal(oc(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),le=null,ce=null,pe=!0,j=!0,O=!1,ee=!0,te=!1,F=!1,q=!1,Y=!1,y=!1,P=!1,K=!1,D=!0,B=!1;const V="user-content-";let Z=!0,z=!1,H={},W=null;const se=Pe({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let re=null;const ae=Pe({},["audio","video","img","source","image","track"]);let ge=null;const _e=Pe({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),xe="http://www.w3.org/1998/Math/MathML",De="http://www.w3.org/2000/svg",Ae="http://www.w3.org/1999/xhtml";let Se=Ae,Ee=!1,Be=null;const je=Pe({},[xe,De,Ae],Zi);let $e=null;const it=["application/xhtml+xml","text/html"],at="text/html";let He=null,yt=null;const Mt=s.createElement("form"),ct=function(oe){return oe instanceof RegExp||oe instanceof Function},Ne=function(){let oe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(yt&&yt===oe)){if((!oe||typeof oe!="object")&&(oe={}),oe=qs(oe),$e=it.indexOf(oe.PARSER_MEDIA_TYPE)===-1?$e=at:$e=oe.PARSER_MEDIA_TYPE,He=$e==="application/xhtml+xml"?Zi:oi,T="ALLOWED_TAGS"in oe?Pe({},oe.ALLOWED_TAGS,He):U,M="ALLOWED_ATTR"in oe?Pe({},oe.ALLOWED_ATTR,He):$,Be="ALLOWED_NAMESPACES"in oe?Pe({},oe.ALLOWED_NAMESPACES,Zi):je,ge="ADD_URI_SAFE_ATTR"in oe?Pe(qs(_e),oe.ADD_URI_SAFE_ATTR,He):_e,re="ADD_DATA_URI_TAGS"in oe?Pe(qs(ae),oe.ADD_DATA_URI_TAGS,He):ae,W="FORBID_CONTENTS"in oe?Pe({},oe.FORBID_CONTENTS,He):se,le="FORBID_TAGS"in oe?Pe({},oe.FORBID_TAGS,He):{},ce="FORBID_ATTR"in oe?Pe({},oe.FORBID_ATTR,He):{},H="USE_PROFILES"in oe?oe.USE_PROFILES:!1,pe=oe.ALLOW_ARIA_ATTR!==!1,j=oe.ALLOW_DATA_ATTR!==!1,O=oe.ALLOW_UNKNOWN_PROTOCOLS||!1,ee=oe.ALLOW_SELF_CLOSE_IN_ATTR!==!1,te=oe.SAFE_FOR_TEMPLATES||!1,F=oe.WHOLE_DOCUMENT||!1,y=oe.RETURN_DOM||!1,P=oe.RETURN_DOM_FRAGMENT||!1,K=oe.RETURN_TRUSTED_TYPE||!1,Y=oe.FORCE_BODY||!1,D=oe.SANITIZE_DOM!==!1,B=oe.SANITIZE_NAMED_PROPS||!1,Z=oe.KEEP_CONTENT!==!1,z=oe.IN_PLACE||!1,ie=oe.ALLOWED_URI_REGEXP||ac,Se=oe.NAMESPACE||Ae,ne=oe.CUSTOM_ELEMENT_HANDLING||{},oe.CUSTOM_ELEMENT_HANDLING&&ct(oe.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(ne.tagNameCheck=oe.CUSTOM_ELEMENT_HANDLING.tagNameCheck),oe.CUSTOM_ELEMENT_HANDLING&&ct(oe.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(ne.attributeNameCheck=oe.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),oe.CUSTOM_ELEMENT_HANDLING&&typeof oe.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(ne.allowCustomizedBuiltInElements=oe.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),te&&(j=!1),P&&(y=!0),H&&(T=Pe({},[...wa]),M=[],H.html===!0&&(Pe(T,ba),Pe(M,ya)),H.svg===!0&&(Pe(T,Xi),Pe(M,Qi),Pe(M,Xr)),H.svgFilters===!0&&(Pe(T,Ji),Pe(M,Qi),Pe(M,Xr)),H.mathMl===!0&&(Pe(T,Yi),Pe(M,Sa),Pe(M,Xr))),oe.ADD_TAGS&&(T===U&&(T=qs(T)),Pe(T,oe.ADD_TAGS,He)),oe.ADD_ATTR&&(M===$&&(M=qs(M)),Pe(M,oe.ADD_ATTR,He)),oe.ADD_URI_SAFE_ATTR&&Pe(ge,oe.ADD_URI_SAFE_ATTR,He),oe.FORBID_CONTENTS&&(W===se&&(W=qs(W)),Pe(W,oe.FORBID_CONTENTS,He)),Z&&(T["#text"]=!0),F&&Pe(T,["html","head","body"]),T.table&&(Pe(T,["tbody"]),delete le.tbody),oe.TRUSTED_TYPES_POLICY){if(typeof oe.TRUSTED_TYPES_POLICY.createHTML!="function")throw pr('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof oe.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw pr('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');l=oe.TRUSTED_TYPES_POLICY,v=l.createHTML("")}else l===void 0&&(l=s_(b,a)),l!==null&&typeof v=="string"&&(v=l.createHTML(""));xt&&xt(oe),yt=oe}},st=Pe({},["mi","mo","mn","ms","mtext"]),pt=Pe({},["foreignobject","desc","title","annotation-xml"]),Nt=Pe({},["title","style","font","a","script"]),rt=Pe({},Xi);Pe(rt,Ji),Pe(rt,Kp);const dt=Pe({},Yi);Pe(dt,Vp);const It=function(oe){let me=o(oe);(!me||!me.tagName)&&(me={namespaceURI:Se,tagName:"template"});const Ce=oi(oe.tagName),Je=oi(me.tagName);return Be[oe.namespaceURI]?oe.namespaceURI===De?me.namespaceURI===Ae?Ce==="svg":me.namespaceURI===xe?Ce==="svg"&&(Je==="annotation-xml"||st[Je]):!!rt[Ce]:oe.namespaceURI===xe?me.namespaceURI===Ae?Ce==="math":me.namespaceURI===De?Ce==="math"&&pt[Je]:!!dt[Ce]:oe.namespaceURI===Ae?me.namespaceURI===De&&!pt[Je]||me.namespaceURI===xe&&!st[Je]?!1:!dt[Ce]&&(Nt[Ce]||!rt[Ce]):!!($e==="application/xhtml+xml"&&Be[oe.namespaceURI]):!1},ht=function(oe){dr(t.removed,{element:oe});try{oe.parentNode.removeChild(oe)}catch{oe.remove()}},nt=function(oe,me){try{dr(t.removed,{attribute:me.getAttributeNode(oe),from:me})}catch{dr(t.removed,{attribute:null,from:me})}if(me.removeAttribute(oe),oe==="is"&&!M[oe])if(y||P)try{ht(me)}catch{}else try{me.setAttribute(oe,"")}catch{}},ms=function(oe){let me=null,Ce=null;if(Y)oe="<remove></remove>"+oe;else{const gt=Up(oe,/^[\r\n\t ]+/);Ce=gt&&gt[0]}$e==="application/xhtml+xml"&&Se===Ae&&(oe='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+oe+"</body></html>");const Je=l?l.createHTML(oe):oe;if(Se===Ae)try{me=new g().parseFromString(Je,$e)}catch{}if(!me||!me.documentElement){me=S.createDocument(Se,"template",null);try{me.documentElement.innerHTML=Ee?v:Je}catch{}}const _t=me.body||me.documentElement;return oe&&Ce&&_t.insertBefore(s.createTextNode(Ce),_t.childNodes[0]||null),Se===Ae?C.call(me,F?"html":"body")[0]:F?me.documentElement:_t},Ct=function(oe){return x.call(oe.ownerDocument||oe,oe,p.SHOW_ELEMENT|p.SHOW_COMMENT|p.SHOW_TEXT,null)},Bt=function(oe){return oe instanceof d&&(typeof oe.nodeName!="string"||typeof oe.textContent!="string"||typeof oe.removeChild!="function"||!(oe.attributes instanceof _)||typeof oe.removeAttribute!="function"||typeof oe.setAttribute!="function"||typeof oe.namespaceURI!="string"||typeof oe.insertBefore!="function"||typeof oe.hasChildNodes!="function")},ks=function(oe){return typeof r=="function"&&oe instanceof r},Pt=function(oe,me,Ce){N[oe]&&Gr(N[oe],Je=>{Je.call(t,me,Ce,yt)})},ao=function(oe){let me=null;if(Pt("beforeSanitizeElements",oe,null),Bt(oe))return ht(oe),!0;const Ce=He(oe.nodeName);if(Pt("uponSanitizeElement",oe,{tagName:Ce,allowedTags:T}),oe.hasChildNodes()&&!ks(oe.firstElementChild)&&$t(/<[/\w]/g,oe.innerHTML)&&$t(/<[/\w]/g,oe.textContent))return ht(oe),!0;if(!T[Ce]||le[Ce]){if(!le[Ce]&&co(Ce)&&(ne.tagNameCheck instanceof RegExp&&$t(ne.tagNameCheck,Ce)||ne.tagNameCheck instanceof Function&&ne.tagNameCheck(Ce)))return!1;if(Z&&!W[Ce]){const Je=o(oe)||oe.parentNode,_t=h(oe)||oe.childNodes;if(_t&&Je){const gt=_t.length;for(let kt=gt-1;kt>=0;--kt)Je.insertBefore(m(_t[kt],!0),c(oe))}}return ht(oe),!0}return oe instanceof n&&!It(oe)||(Ce==="noscript"||Ce==="noembed"||Ce==="noframes")&&$t(/<\/no(script|embed|frames)/i,oe.innerHTML)?(ht(oe),!0):(te&&oe.nodeType===3&&(me=oe.textContent,Gr([G,L,I],Je=>{me=fr(me,Je," ")}),oe.textContent!==me&&(dr(t.removed,{element:oe.cloneNode()}),oe.textContent=me)),Pt("afterSanitizeElements",oe,null),!1)},lo=function(oe,me,Ce){if(D&&(me==="id"||me==="name")&&(Ce in s||Ce in Mt))return!1;if(!(j&&!ce[me]&&$t(E,me))){if(!(pe&&$t(X,me))){if(!M[me]||ce[me]){if(!(co(oe)&&(ne.tagNameCheck instanceof RegExp&&$t(ne.tagNameCheck,oe)||ne.tagNameCheck instanceof Function&&ne.tagNameCheck(oe))&&(ne.attributeNameCheck instanceof RegExp&&$t(ne.attributeNameCheck,me)||ne.attributeNameCheck instanceof Function&&ne.attributeNameCheck(me))||me==="is"&&ne.allowCustomizedBuiltInElements&&(ne.tagNameCheck instanceof RegExp&&$t(ne.tagNameCheck,Ce)||ne.tagNameCheck instanceof Function&&ne.tagNameCheck(Ce))))return!1}else if(!ge[me]){if(!$t(ie,fr(Ce,J,""))){if(!((me==="src"||me==="xlink:href"||me==="href")&&oe!=="script"&&jp(Ce,"data:")===0&&re[oe])){if(!(O&&!$t(Q,fr(Ce,J,"")))){if(Ce)return!1}}}}}}return!0},co=function(oe){return oe.indexOf("-")>0},ho=function(oe){Pt("beforeSanitizeAttributes",oe,null);const{attributes:me}=oe;if(!me)return;const Ce={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:M};let Je=me.length;for(;Je--;){const _t=me[Je],{name:gt,namespaceURI:kt,value:Es}=_t,cr=He(gt);let Et=gt==="value"?Es:Wp(Es);if(Ce.attrName=cr,Ce.attrValue=Et,Ce.keepAttr=!0,Ce.forceKeepAttr=void 0,Pt("uponSanitizeAttribute",oe,Ce),Et=Ce.attrValue,Ce.forceKeepAttr||(nt(gt,oe),!Ce.keepAttr))continue;if(!ee&&$t(/\/>/i,Et)){nt(gt,oe);continue}te&&Gr([G,L,I],fo=>{Et=fr(Et,fo," ")});const uo=He(oe.nodeName);if(lo(uo,cr,Et)){if(B&&(cr==="id"||cr==="name")&&(nt(gt,oe),Et=V+Et),l&&typeof b=="object"&&typeof b.getAttributeType=="function"&&!kt)switch(b.getAttributeType(uo,cr)){case"TrustedHTML":{Et=l.createHTML(Et);break}case"TrustedScriptURL":{Et=l.createScriptURL(Et);break}}try{kt?oe.setAttributeNS(kt,gt,Et):oe.setAttribute(gt,Et),va(t.removed)}catch{}}}Pt("afterSanitizeAttributes",oe,null)},$c=function ke(oe){let me=null;const Ce=Ct(oe);for(Pt("beforeSanitizeShadowDOM",oe,null);me=Ce.nextNode();)Pt("uponSanitizeShadowNode",me,null),!ao(me)&&(me.content instanceof u&&ke(me.content),ho(me));Pt("afterSanitizeShadowDOM",oe,null)};return t.sanitize=function(ke){let oe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},me=null,Ce=null,Je=null,_t=null;if(Ee=!ke,Ee&&(ke="<!-->"),typeof ke!="string"&&!ks(ke))if(typeof ke.toString=="function"){if(ke=ke.toString(),typeof ke!="string")throw pr("dirty is not a string, aborting")}else throw pr("toString is not a function");if(!t.isSupported)return ke;if(q||Ne(oe),t.removed=[],typeof ke=="string"&&(z=!1),z){if(ke.nodeName){const Es=He(ke.nodeName);if(!T[Es]||le[Es])throw pr("root node is forbidden and cannot be sanitized in-place")}}else if(ke instanceof r)me=ms("<!---->"),Ce=me.ownerDocument.importNode(ke,!0),Ce.nodeType===1&&Ce.nodeName==="BODY"||Ce.nodeName==="HTML"?me=Ce:me.appendChild(Ce);else{if(!y&&!te&&!F&&ke.indexOf("<")===-1)return l&&K?l.createHTML(ke):ke;if(me=ms(ke),!me)return y?null:K?v:""}me&&Y&&ht(me.firstChild);const gt=Ct(z?ke:me);for(;Je=gt.nextNode();)ao(Je)||(Je.content instanceof u&&$c(Je.content),ho(Je));if(z)return ke;if(y){if(P)for(_t=k.call(me.ownerDocument);me.firstChild;)_t.appendChild(me.firstChild);else _t=me;return(M.shadowroot||M.shadowrootmode)&&(_t=A.call(i,_t,!0)),_t}let kt=F?me.outerHTML:me.innerHTML;return F&&T["!doctype"]&&me.ownerDocument&&me.ownerDocument.doctype&&me.ownerDocument.doctype.name&&$t(lc,me.ownerDocument.doctype.name)&&(kt="<!DOCTYPE "+me.ownerDocument.doctype.name+`>
`+kt),te&&Gr([G,L,I],Es=>{kt=fr(kt,Es," ")}),l&&K?l.createHTML(kt):kt},t.setConfig=function(){let ke=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Ne(ke),q=!0},t.clearConfig=function(){yt=null,q=!1},t.isValidAttribute=function(ke,oe,me){yt||Ne({});const Ce=He(ke),Je=He(oe);return lo(Ce,Je,me)},t.addHook=function(ke,oe){typeof oe=="function"&&(N[ke]=N[ke]||[],dr(N[ke],oe))},t.removeHook=function(ke){if(N[ke])return va(N[ke])},t.removeHooks=function(ke){N[ke]&&(N[ke]=[])},t.removeAllHooks=function(){N={}},t}var r_=cc();const i_={class:"max-w-4xl mx-auto px-4 md:px-6 lg:px-12 py-4 md:py-6 lg:py-10 min-h-[100%] flex flex-col"},n_={class:"bg-white rounded-2xl shadow-sm border border-slate-100 p-4 md:p-6 lg:p-8 flex-grow overflow-hidden"},o_={class:"mb-6 pb-6 border-b border-slate-100 flex flex-col gap-4"},a_={class:"relative mb-4 w-full md:w-auto"},l_={class:"text-4xl md:text-5xl font-extrabold text-slate-900 tracking-tight leading-normal whitespace-pre-wrap break-words break-all block",title:""},c_={class:"flex flex-col gap-3 text-sm text-slate-500 font-medium"},h_={class:"flex items-center gap-2"},u_={class:"flex items-center gap-2"},d_={class:"flex items-center gap-2"},f_=R("span",{class:"w-1 h-1 rounded-full bg-slate-300"},null,-1),p_={key:0,class:"mb-4 pb-3 border-b border-slate-100"},__={class:"flex flex-wrap gap-2 mb-4"},g_=R("span",{class:"w-px h-6 bg-slate-200 mx-1"},null,-1),m_=R("span",{class:"w-px h-6 bg-slate-200 mx-1"},null,-1),v_=R("span",{class:"w-px h-6 bg-slate-200 mx-1"},null,-1),b_={class:"flex flex-col sm:flex-row justify-between items-center gap-4"},w_={class:"flex items-center gap-2 text-slate-500"},y_=R("span",{class:"font-medium"},"",-1),S_={key:0,class:"text-xs text-rose-500 bg-rose-50 px-2 py-0.5 rounded-full"},x_={class:"flex items-center gap-3"},C_=["disabled"],k_={key:1,class:"mb-6 text-right"},E_={class:"flex items-center gap-3 justify-end"},R_={key:2},A_=["innerHTML"],T_={class:"mt-10 pt-6 border-t border-slate-100 text-center"},D_={key:0,class:"text-slate-400 italic text-sm"},L_={key:1,class:"text-sm text-slate-500"},O_=ut({__name:"MarkdownViewer",props:{file:{},className:{},isEditMode:{type:Boolean}},emits:["update-content","toggle-edit-mode","update-title","export-file"],setup(e,{emit:t}){const s=e,i=fe(s.file.content),a=fe(null),u=fe(!1);Bs(()=>s.file,o=>{i.value=o.content},{immediate:!0}),Bs(()=>s.isEditMode,o=>{o&&(i.value=s.file.content,d.value=s.file.content)});const f=async()=>{let o=s.file.name;!o.endsWith(".md")&&!o.endsWith(".markdown")&&!o.endsWith(".txt")&&(o+=".md");try{if("showSaveFilePicker"in window){const l=new Blob([s.file.content],{type:"text/markdown;charset=utf-8"}),S=await(await window.showSaveFilePicker({suggestedName:o,types:[{description:"Markdown",accept:{"text/markdown":[".md",".markdown"],"text/plain":[".txt"]}}]})).createWritable();await S.write(l),await S.close(),t("export-file",s.file)}else{const l=document.createElement("a"),v=URL.createObjectURL(new Blob([s.file.content],{type:"text/markdown;charset=utf-8"}));l.href=v,l.download=o,l.style.display="none",document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(v),t("export-file",s.file)}}catch(l){console.error(":",l)}},r=()=>{t("update-content",s.file.id,i.value),u.value=!1,t("toggle-edit-mode")},n=o=>{if(!a.value)return;const l=a.value,v=l.selectionStart,S=l.selectionEnd,x=i.value.substring(v,S);let k="",C=v;switch(o){case"h1":k=`# ${x||""}`,C=v+2+(x?x.length:2);break;case"h2":k=`## ${x||""}`,C=v+3+(x?x.length:4);break;case"quote":k=`> ${x||""}`,C=v+2+(x?x.length:4);break;case"bullet":k=`- ${x||""}`,C=v+2+(x?x.length:2);break;case"numbered":k=`1. ${x||""}`,C=v+3+(x?x.length:2);break;case"bold":k=`**${x||""}**`,C=v+2+(x?x.length:4);break;case"italic":k=`*${x||""}*`,C=v+1+(x?x.length:3);break;case"code":k=`\`${x||""}\``,C=v+1+(x?x.length:2);break;case"link":k=`[${x||""}](https://)`,C=v+(x?x.length+3:10);break;case"image":k=`![${x||""}](https://)`,C=v+(x?x.length+4:11);break;case"table":k=`| 1 | 2 |
| --- | --- |
| 1 | 2 |`,C=v+k.length;break;default:return}i.value=i.value.substring(0,v)+k+i.value.substring(S),l.focus(),setTimeout(()=>{l.setSelectionRange(C,C)},0),u.value=!0},p=()=>{i.value=s.file.content,t("toggle-edit-mode")};let _=null;const d=fe(s.file.content),g=()=>{u.value=!0,_&&clearTimeout(_),_=setTimeout(()=>{i.value!==d.value&&(t("update-content",s.file.id,i.value),d.value=i.value,u.value=!1)},3e3)};Mr(()=>{_&&clearTimeout(_)});const b=Ue(()=>{const o=Ge.parse(s.file.content);return r_.sanitize(o)}),w=Ue(()=>s.file.content.trim().split(/\s+/).length),m=Ue(()=>Math.max(1,Math.ceil(w.value/200))),c=Ue(()=>new Date(s.file.lastModified).toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"})),h=Ue(()=>s.file.name.replace(/\.(md|markdown|txt)$/i,""));return(o,l)=>(ue(),de("div",{class:Te(["h-full w-full overflow-y-auto bg-gradient-to-b from-brand-50 to-white",o.className])},[R("div",i_,[R("div",n_,[R("div",o_,[R("div",a_,[R("div",null,[R("h1",l_,we(h.value),1)])]),R("div",c_,[R("div",h_,[be(ve(Cf),{class:"w-4 h-4"}),R("span",null,we(c.value),1)]),R("div",u_,[be(ve(Jn),{class:"w-4 h-4"}),R("span",null,we(m.value)+" min read",1)]),R("div",d_,[f_,R("span",null,we(w.value)+" words",1)])])]),o.isEditMode?(ue(),de("div",p_,[R("div",__,[R("button",{onClick:l[0]||(l[0]=v=>n("h1")),class:"p-2 rounded hover:bg-slate-100",title:" 1"},[be(ve(Of),{class:"w-4 h-4"})]),R("button",{onClick:l[1]||(l[1]=v=>n("h2")),class:"p-2 rounded hover:bg-slate-100",title:" 2"},[be(ve(Mf),{class:"w-4 h-4"})]),g_,R("button",{onClick:l[2]||(l[2]=v=>n("quote")),class:"p-2 rounded hover:bg-slate-100",title:""},[be(ve(Nf),{class:"w-4 h-4"})]),R("button",{onClick:l[3]||(l[3]=v=>n("bullet")),class:"p-2 rounded hover:bg-slate-100",title:""},[be(ve($f),{class:"w-4 h-4"})]),R("button",{onClick:l[4]||(l[4]=v=>n("numbered")),class:"p-2 rounded hover:bg-slate-100",title:""},[be(ve(Pf),{class:"w-4 h-4"})]),m_,R("button",{onClick:l[5]||(l[5]=v=>n("bold")),class:"p-2 rounded hover:bg-slate-100",title:""},[be(ve(Sf),{class:"w-4 h-4"})]),R("button",{onClick:l[6]||(l[6]=v=>n("italic")),class:"p-2 rounded hover:bg-slate-100",title:""},[be(ve(If),{class:"w-4 h-4"})]),R("button",{onClick:l[7]||(l[7]=v=>n("code")),class:"p-2 rounded hover:bg-slate-100",title:""},[be(ve(Jl),{class:"w-4 h-4"})]),v_,R("button",{onClick:l[8]||(l[8]=v=>n("link")),class:"p-2 rounded hover:bg-slate-100",title:""},[be(ve(Bf),{class:"w-4 h-4"})]),R("button",{onClick:l[9]||(l[9]=v=>n("image")),class:"p-2 rounded hover:bg-slate-100",title:""},[be(ve(Qn),{class:"w-4 h-4"})]),R("button",{onClick:l[10]||(l[10]=v=>n("table")),class:"p-2 rounded hover:bg-slate-100",title:""},[be(ve(Wf),{class:"w-4 h-4"})])]),R("div",b_,[R("div",w_,[be(ve(ua),{class:"w-4 h-4"}),y_,u.value?(ue(),de("span",S_,"")):Oe("",!0)]),R("div",x_,[R("button",{onClick:p,class:"px-4 py-2 rounded-lg border border-slate-200 text-slate-600 hover:bg-slate-50 transition-all duration-200 transform hover:-translate-y-0.5",disabled:!o.isEditMode},[be(ve(qf),{class:"w-4 h-4 mr-1 inline"}),We("  ")],8,C_),R("button",{onClick:r,class:"px-4 py-2 rounded-lg bg-brand-600 text-white hover:bg-brand-700 transition-all duration-200 transform hover:-translate-y-0.5 shadow-sm hover:shadow"},[be(ve(jf),{class:"w-4 h-4 mr-1 inline"}),We("  ")])])])])):(ue(),de("div",k_,[R("div",E_,[R("button",{onClick:l[11]||(l[11]=v=>t("toggle-edit-mode")),class:"px-4 py-2 rounded-lg bg-slate-100 text-slate-700 hover:bg-slate-200 transition-all duration-200 transform hover:-translate-y-0.5 flex items-center gap-2 shadow-sm"},[be(ve(ua),{class:"w-4 h-4"}),We("  ")]),R("button",{onClick:f,class:"px-4 py-2 rounded-lg border border-slate-200 text-slate-600 hover:bg-slate-50 transition-all duration-200 transform hover:-translate-y-0.5 flex items-center gap-2 shadow-sm"},[be(ve(bi),{class:"w-4 h-4"}),We("  ")])])])),o.isEditMode?(ue(),de("div",R_,[Ze(R("textarea",{ref_key:"textareaRef",ref:a,"onUpdate:modelValue":l[12]||(l[12]=v=>i.value=v),onInput:g,class:"w-full min-h-[60vh] max-h-[calc(100vh-350px)] p-5 rounded-lg border border-slate-200 bg-white focus:outline-none focus:ring-2 focus:ring-brand-500 focus:border-transparent text-slate-800 font-mono text-sm resize-none transition-all shadow-sm overflow-y-auto word-break-break-all whitespace-pre-wrap",placeholder:"Markdown...",spellcheck:"false",autocomplete:"off",autocorrect:"off",autocapitalize:"off"},null,544),[[Ye,i.value]])])):(ue(),de("article",{key:3,class:"prose prose-slate prose-lg max-w-none prose-headings:font-bold prose-h1:text-3xl prose-h2:text-2xl prose-a:no-underline hover:prose-a:underline prose-img:rounded-xl prose-img:shadow-lg overflow-x-hidden break-words",innerHTML:b.value},null,8,A_)),R("div",T_,[o.isEditMode?(ue(),de("div",L_,we(i.value.length)+"  | "+we(i.value.trim().split(/\s+/).length)+"  ",1)):(ue(),de("p",D_,"End of document"))])])])],2))}}),M_={class:"flex flex-col items-center justify-center min-h-[100vh] h-full text-center p-8 bg-white/50 backdrop-blur-sm animate-fade-in overflow-y-auto"},I_={class:"w-24 h-24 bg-brand-50 rounded-full flex items-center justify-center mb-6 shadow-sm"},B_=R("h2",{class:"text-3xl font-bold text-slate-800 mb-3"},"Welcome to ZenReader",-1),P_=R("p",{class:"text-slate-500 max-w-md mb-8 leading-relaxed"}," A minimalist space to read your Markdown files. Select a file from the history or open a new one to get started. ",-1),$_=R("span",{class:"font-semibold text-lg"},"Open Markdown File",-1),F_=Ir('<div class="mt-12 grid grid-cols-3 gap-6 text-sm text-slate-400"><div class="flex flex-col items-center gap-2"><div class="w-2 h-2 rounded-full bg-slate-300"></div><span>Local Storage</span></div><div class="flex flex-col items-center gap-2"><div class="w-2 h-2 rounded-full bg-slate-300"></div><span>Syntax Highlighting</span></div><div class="flex flex-col items-center gap-2"><div class="w-2 h-2 rounded-full bg-slate-300"></div><span>Clean Typography</span></div></div>',1),H_=ut({__name:"EmptyState",emits:["upload-trigger"],setup(e,{emit:t}){return(s,i)=>(ue(),de("div",M_,[R("div",I_,[be(ve(Yn),{class:"w-10 h-10 text-brand-500"})]),B_,P_,R("button",{onClick:i[0]||(i[0]=a=>t("upload-trigger")),class:"group relative flex items-center gap-3 px-8 py-4 bg-brand-600 hover:bg-brand-500 text-white rounded-xl shadow-lg hover:shadow-brand-500/25 transition-all duration-300 transform hover:-translate-y-1"},[be(ve(sr),{class:"w-5 h-5 group-hover:scale-110 transition-transform"}),$_]),F_]))}}),N_={class:"flex min-h-screen h-screen w-full bg-gray-50 font-sans"},z_={class:"flex-1 relative flex flex-col min-w-0 transition-all duration-300"},U_=R("span",{class:"hidden md:inline"},"",-1),j_={class:"flex-1 overflow-hidden"},W_={key:0,class:"h-full"},q_=ut({__name:"Reader",setup(e){const t=fe([]),s=fe(null),i=fe(!0),a=()=>Math.random().toString(36).substr(2,9);fs(()=>{const c=localStorage.getItem("zenreader_files");if(c)try{const h=JSON.parse(c);t.value=h,h.length>0&&(s.value=h[0].id)}catch(h){console.error("Failed to parse saved files",h)}window.innerWidth<768&&(i.value=!1)}),Bs(t,c=>{localStorage.setItem("zenreader_files",JSON.stringify(c))},{deep:!0});const u=async c=>{const h=c.target,o=h.files;if(!o||o.length===0)return;const l=Array.from(o),v=k=>new Promise((C,A)=>{const N=new FileReader;N.onload=G=>{var L;return C((L=G.target)==null?void 0:L.result)},N.onerror=G=>A(G),N.readAsText(k)}),x=(await Promise.all(l.map(v))).map((k,C)=>({id:a(),name:l[C].name,content:k,lastModified:Date.now()}));t.value=[...x,...t.value],s.value=x[0].id,window.innerWidth<768&&(i.value=!1),h.value=""},f=c=>{s.value=c,window.innerWidth<768&&(i.value=!1)},r=c=>{t.value=t.value.filter(h=>h.id!==c),s.value===c&&(s.value=null)},n=Ue(()=>t.value.find(c=>c.id===s.value)||null),p=fe(!1),_=(c,h)=>{const o=t.value.findIndex(l=>l.id===c);o!==-1&&(t.value[o]={...t.value[o],content:h,lastModified:Date.now()})},d=c=>{var h;if(n){const o=t.value.findIndex(l=>l.id===n.id);if(o!==-1){const l=((h=n.name.match(/\.(md|markdown|txt)$/i))==null?void 0:h[0])||"",v=l?`${c}${l}`:c;t.value[o]={...n,name:v,lastModified:Date.now()}}}},g=()=>{p.value=!p.value},b=(c,h)=>{const o=t.value.findIndex(l=>l.id===c);o!==-1&&(t.value[o]={...t.value[o],name:h,lastModified:Date.now()})},w=()=>{const c=document.getElementById("global-upload-trigger");c&&c.click()},m=()=>{i.value=!i.value};return(c,h)=>(ue(),de("div",N_,[R("input",{id:"global-upload-trigger",type:"file",onChange:u,accept:".md,.markdown,.txt",multiple:"",class:"hidden"},null,32),be(Dp,{files:t.value,"active-file-id":s.value,"is-open":i.value,onSelectFile:f,onUpload:u,onDeleteFile:r,onToggle:m,onRenameFile:b},null,8,["files","active-file-id","is-open"]),R("main",z_,[i.value?Oe("",!0):(ue(),de("button",{key:0,onClick:h[0]||(h[0]=o=>i.value=!0),class:"absolute top-4 left-4 z-30 p-2 bg-white/80 backdrop-blur rounded-lg shadow-sm border border-slate-200 text-slate-600 hover:text-brand-600 transition-colors md:hidden"},[be(ve(Yl),{class:"w-6 h-6"})])),be(ve(Qt),{to:"/",class:"absolute top-4 right-4 z-30 flex items-center gap-2 px-3 py-2 bg-white/80 backdrop-blur rounded-lg shadow-sm border border-slate-200 text-slate-600 hover:text-brand-600 transition-colors","aria-label":""},{default:Yt(()=>[be(ve(gs),{class:"w-5 h-5"}),U_]),_:1}),R("div",j_,[n.value?(ue(),de("div",W_,[(ue(),Hs(O_,{key:n.value.id,file:n.value,"is-edit-mode":p.value,onUpdateContent:_,onToggleEditMode:g,onUpdateTitle:d,class:"animate-fade-in h-full w-full overflow-y-auto overflow-x-hidden"},null,8,["file","is-edit-mode"]))])):(ue(),Hs(H_,{key:1,onUploadTrigger:w}))])])]))}}),K_={class:"bg-white rounded-2xl border border-slate-200 shadow-sm overflow-auto min-h-[100%] max-h-[calc(100vh-300px)]"},V_={class:"grid min-w-full",style:{"grid-template-columns":"40px 24px 1fr"}},G_={class:"bg-slate-50 border-r border-slate-200"},Z_={class:"bg-slate-50 border-r border-slate-200"},X_=["onClick"],J_=ut({__name:"JsonTree",props:{data:{}},setup(e,{expose:t}){const s=e;let i=0;const a=(_,d)=>{const g=++i;if(d===null)return{id:g,type:"null",key:_,value:null};if(Array.isArray(d))return{id:g,type:"array",key:_,children:d.map(w=>a(void 0,w)),collapsed:!1};const b=typeof d;if(b==="object"){const w=Object.keys(d).map(m=>a(m,d[m]));return{id:g,type:"object",key:_,children:w,collapsed:!1}}return b==="string"?{id:g,type:"string",key:_,value:d}:b==="number"?{id:g,type:"number",key:_,value:d}:b==="boolean"?{id:g,type:"boolean",key:_,value:d}:{id:g,type:"null",key:_,value:null}},u=fe(a(void 0,s.data)),f=_=>{const d=g=>g.id===_?((g.type==="object"||g.type==="array")&&(g.collapsed=!g.collapsed),!0):g.children?g.children.some(d):!1;d(u.value)},r=_=>{const d=g=>{var b;(g.type==="object"||g.type==="array")&&(g.collapsed=_),(b=g.children)==null||b.forEach(d)};d(u.value)};t({expandAll:()=>r(!1),collapseAll:()=>r(!0)});const n=Ue(()=>{const _=[],d=(w,m,c,h)=>{_.push({id:c,depth:w,text:m,canToggle:h})},g=w=>w.type==="string"?'"'+String(w.value)+'"':w.type==="number"||w.type==="boolean"?String(w.value):w.type==="null"?"null":"",b=(w,m,c,h=!0)=>{if(w.type==="object"){const o=w.key&&h?'"'+w.key+'": ':"";d(m,o+"{",w.id,!0),!w.collapsed&&w.children&&w.children.forEach((l,v)=>b(l,m+1,v===w.children.length-1)),d(m,"}"+(c?"":","),w.id,!0)}else if(w.type==="array"){const o=w.key&&h?'"'+w.key+'": ':"";d(m,o+"[",w.id,!0),!w.collapsed&&w.children&&w.children.forEach((l,v)=>b(l,m+1,v===w.children.length-1,!1)),d(m,"]"+(c?"":","),w.id,!0)}else{const o=w.key?'"'+w.key+'": ':"";d(m,o+g(w)+(c?"":","),w.id,!1)}};return b(u.value,0,!0),_}),p=_=>/^".*":\s*$/.test(_)?"text-slate-800":/^\{|\}|\[|\]/.test(_)?"text-slate-700":/^".*"(,)?$/.test(_)?"text-emerald-700":/^(true|false)(,)?$/.test(_)?"text-purple-700":/^(null)(,)?$/.test(_)?"text-gray-500":/^-?\d+(\.\d+)?(,)?$/.test(_)?"text-orange-700":"text-slate-800";return(_,d)=>(ue(),de("div",K_,[R("div",V_,[R("div",G_,[(ue(!0),de(Qe,null,Gt(n.value,(g,b)=>(ue(),de("div",{key:g.id+"-"+b,class:"px-2 text-slate-400 tabular-nums text-sm h-7 leading-7"},we(b+1),1))),128))]),R("div",Z_,[(ue(!0),de(Qe,null,Gt(n.value,g=>(ue(),de("div",{key:g.id+"-a",class:"h-7 leading-7 flex items-center justify-center"},[g.canToggle?(ue(),de("button",{key:0,onClick:b=>f(g.id),class:"text-slate-500 hover:text-brand-600"},"  ",8,X_)):Oe("",!0)]))),128))]),R("div",null,[(ue(!0),de(Qe,null,Gt(n.value,g=>(ue(),de("div",{key:g.id+"-c",class:"h-7 leading-7"},[R("span",{style:At({marginLeft:g.depth*20+"px"}),class:Te([p(g.text),"font-mono text-sm whitespace-pre-wrap break-words"])},we(g.text),7)]))),128))])])]))}}),Y_={class:"min-h-[100vh] bg-gray-50"},Q_={class:"max-w-6xl mx-auto px-3 md:px-4 lg:px-6 py-3 md:py-4 lg:py-6 min-h-[100%] flex flex-col"},eg={class:"flex items-center justify-between mb-6"},tg=R("h2",{class:"text-2xl font-bold text-slate-900"},"JSON ",-1),sg=R("span",{class:"hidden md:inline"},"",-1),rg={class:"grid md:grid-cols-2 gap-6 flex-grow"},ig={class:"bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden min-h-[40vh] sm:min-h-[50vh]"},ng={class:"bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden min-h-[40vh] sm:min-h-[50vh] max-h-[calc(100vh-320px)]"},og={key:1,class:"p-4 sm:p-8 text-slate-400 text-center min-h-[40vh] sm:min-h-[50vh] max-h-[calc(100vh-320px)] overflow-y-auto"},ag=ut({__name:"JsonTool",setup(e){const t=fe(""),s=fe(null),i=fe(null),a=fe(null),u=()=>{try{i.value=JSON.parse(t.value),s.value={type:"success",msg:"JSON "}}catch{i.value=null,s.value={type:"error",msg:"JSON "}}},f=()=>{try{const p=JSON.parse(t.value);t.value=JSON.stringify(p,null,2),i.value=p,s.value={type:"success",msg:""}}catch{s.value={type:"error",msg:" JSON"}}},r=()=>{var p;return(p=a.value)==null?void 0:p.expandAll()},n=()=>{var p;return(p=a.value)==null?void 0:p.collapseAll()};return(p,_)=>(ue(),de("div",Y_,[R("div",Q_,[R("div",eg,[tg,be(ve(Qt),{to:"/",class:"flex items-center gap-2 px-3 py-2 bg-white/80 backdrop-blur rounded-lg shadow-sm border border-slate-200 text-slate-600 hover:text-brand-600"},{default:Yt(()=>[be(ve(gs),{class:"w-5 h-5"}),sg]),_:1})]),R("div",{class:"bg-white rounded-2xl border border-slate-200 shadow-sm p-4 md:p-6 mb-6"},[R("div",{class:"flex flex-wrap gap-2 sm:gap-3"},[R("button",{onClick:u,class:"px-4 py-2 bg-slate-900 hover:bg-slate-800 text-white rounded-lg"},""),R("button",{onClick:f,class:"px-4 py-2 bg-brand-600 hover:bg-brand-500 text-white rounded-lg"},""),R("button",{onClick:r,class:"px-4 py-2 bg-white border border-slate-200 text-slate-700 rounded-lg"},""),R("button",{onClick:n,class:"px-4 py-2 bg-white border border-slate-200 text-slate-700 rounded-lg"},"")])]),s.value?(ue(),de("div",{key:0,class:Te([s.value.type==="success"?"bg-green-50 text-green-700 border-green-200":"bg-red-50 text-red-700 border-red-200","mb-4 border rounded-lg px-4 py-3"])},we(s.value.msg),3)):Oe("",!0),R("div",rg,[R("div",ig,[Ze(R("textarea",{"onUpdate:modelValue":_[0]||(_[0]=d=>t.value=d),placeholder:" JSON",class:"w-full min-h-[40vh] sm:min-h-[50vh] max-h-[calc(100vh-320px)] p-4 font-mono text-sm outline-none resize-none overflow-y-auto whitespace-pre-wrap break-words",spellcheck:"false"},null,512),[[Ye,t.value]])]),R("div",ng,[i.value!==null?(ue(),Hs(J_,{key:0,data:i.value,ref_key:"treeRef",ref:a},null,8,["data"])):(ue(),de("div",og,"  JSON  "))])])])]))}}),lg={class:"min-h-[100vh] bg-gray-50"},cg={class:"max-w-6xl mx-auto px-3 md:px-4 lg:px-6 py-3 md:py-4 lg:py-6 min-h-[100%] flex flex-col"},hg={class:"flex items-center justify-between mb-6"},ug={class:"text-2xl font-bold text-slate-900 flex items-center gap-2"},dg=R("span",{class:"hidden md:inline"},"",-1),fg={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-3 sm:gap-4 lg:gap-6 mb-6"},pg={class:"bg-white rounded-2xl border border-slate-200 shadow-sm p-6"},_g=R("div",{class:"text-slate-400 text-sm mb-1"},"",-1),gg={class:"text-lg sm:text-xl font-semibold text-slate-900 break-words"},mg={class:"bg-white rounded-2xl border border-slate-200 shadow-sm p-6"},vg=R("div",{class:"text-slate-400 text-sm mb-1"},"",-1),bg={class:"text-base font-semibold text-slate-900 break-words"},wg={class:"bg-white rounded-2xl border border-slate-200 shadow-sm p-6"},yg=R("div",{class:"text-slate-400 text-sm mb-1"},"",-1),Sg={class:"text-base font-semibold text-slate-900 break-words"},xg={class:"bg-white rounded-2xl border border-slate-200 shadow-sm p-6"},Cg=R("div",{class:"text-slate-400 text-sm mb-1"},"",-1),kg={class:"text-base font-semibold text-slate-900 break-words"},Eg={class:"bg-white rounded-2xl border border-slate-200 shadow-sm p-6"},Rg=R("div",{class:"text-slate-400 text-sm mb-1"},"",-1),Ag={class:"text-base font-semibold text-slate-900 break-words"},Tg={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4 lg:gap-6 mb-6"},Dg={class:"bg-white rounded-2xl border border-slate-200 shadow-sm p-6"},Lg=R("div",{class:"text-slate-400 text-sm mb-1"},"",-1),Og={class:"text-base font-semibold text-slate-900 break-words"},Mg={class:"bg-white rounded-2xl border border-slate-200 shadow-sm p-6"},Ig=R("div",{class:"text-slate-400 text-sm mb-1"},"LocalTime",-1),Bg={class:"text-base font-semibold text-slate-900 break-words"},Pg={class:"bg-white rounded-2xl border border-slate-200 shadow-sm p-6"},$g=R("div",{class:"text-slate-400 text-sm mb-1"},"(13)",-1),Fg={class:"font-mono text-base text-slate-900 break-all"},Hg={class:"bg-white rounded-2xl border border-slate-200 shadow-sm p-6"},Ng=R("div",{class:"text-slate-400 text-sm mb-1"},"(10)",-1),zg={class:"font-mono text-base text-slate-900 break-all"},Ug={class:"grid md:grid-cols-2 gap-3 sm:gap-4 lg:gap-6 flex-grow"},jg={class:"bg-white rounded-2xl border border-slate-200 shadow-sm p-6"},Wg=R("div",{class:"text-slate-900 font-semibold mb-4"},"  ",-1),qg={class:"flex items-center gap-3 mb-4"},Kg={class:"space-y-4"},Vg=R("div",{class:"text-slate-400 text-xs mb-1"},"",-1),Gg={class:"font-mono text-sm text-slate-700 break-words"},Zg=R("div",{class:"text-slate-400 text-xs mb-1"},"",-1),Xg={class:"font-mono text-sm text-slate-700 break-words"},Jg=R("div",{class:"text-slate-400 text-xs mb-1"},"LocalTime",-1),Yg={class:"font-mono text-sm text-slate-700 break-words"},Qg={class:"bg-white rounded-2xl border border-slate-200 shadow-sm p-6"},em=R("div",{class:"text-slate-900 font-semibold mb-4"},"  13",-1),tm={class:"flex items-center gap-3 mb-3"},sm={class:"font-mono text-sm text-slate-700 mb-6 max-h-[calc(100vh-500px)] overflow-y-auto whitespace-pre-wrap break-words"},rm={class:"flex items-center gap-3 mb-3"},im={class:"font-mono text-sm text-slate-700 max-h-[calc(100vh-500px)] overflow-y-auto whitespace-pre-wrap break-words"},nm=ut({__name:"TimestampTool",setup(e){const t=fe(""),s=fe(""),i=fe(""),a=fe(Date.now()),u=Ue(()=>Math.floor(a.value/1e3));let f=null;const r=fe(""),n=fe(""),p=fe(""),_=fe(""),d=Q=>String(Q).padStart(2,"0"),g=Q=>`${Q.getFullYear()}-${d(Q.getMonth()+1)}-${d(Q.getDate())} ${d(Q.getHours())}:${d(Q.getMinutes())}:${d(Q.getSeconds())}`,b=(Q,J)=>{const ie=new Date(Q),T=ie.getTime()+ie.getTimezoneOffset()*6e4;return new Date(T+36e5*J)},w=(Q,J)=>`${g(Q)} (${J})`,m=Q=>{const J=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];return`${["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][Q.getDay()]} ${J[Q.getMonth()]} ${d(Q.getDate())} ${Q.getFullYear()} ${d(Q.getHours())}:${d(Q.getMinutes())}:${d(Q.getSeconds())} GMT${Q.getTimezoneOffset()>0?"-":"+"}${d(Math.floor(Math.abs(Q.getTimezoneOffset())/60))}${d(Math.abs(Q.getTimezoneOffset())%60)}`},c=Q=>`${Q.getFullYear()}-${d(Q.getMonth()+1)}-${d(Q.getDate())} ${d(Q.getHours())}:${d(Q.getMinutes())}:${d(Q.getSeconds())}.${String(Q.getMilliseconds()).padStart(3,"0")}`,h=()=>{const Q=Date.now();a.value=Q;const J=new Date(Q);t.value=`${g(J)}`,s.value=`${m(J)}`,i.value=`${c(J)}`,r.value=w(b(Q,8),"UTC+8"),n.value=w(b(Q,0),"UTC0"),p.value=w(b(Q,-5),"UTC-5"),_.value=w(b(Q,-8),"UTC-8")};fs(()=>{h(),f=window.setInterval(h,1e3)}),Mr(()=>{f&&window.clearInterval(f)});const o=fe(""),l=fe(null),v=fe(""),S=fe(""),x=fe(""),k=()=>{const Q=o.value.trim();if(!/^\d+$/.test(Q)){l.value={type:"error",msg:""},v.value="",S.value="",x.value="";return}let J;if(Q.length===13){const ie=Number(Q);J=new Date(ie)}else if(Q.length===10){const ie=Number(Q);J=new Date(ie*1e3)}else{l.value={type:"error",msg:" 10  13 "},v.value="",S.value="",x.value="";return}v.value=`${g(J)}`,S.value=`${m(J)}`,x.value=`${c(J)}`,l.value={type:"success",msg:""}},C=fe(""),A=fe(null),N=fe(""),G=fe(""),L=fe(null),I=fe(""),E=()=>{const Q=C.value.trim();if(!Q){A.value={type:"error",msg:""},N.value="";return}let J=new Date(Q);if(isNaN(J.getTime())){const ie=Q.match(/^(\d{4})[-\/]?(\d{2})[-\/]?(\d{2})(?:[ T](\d{2}):(\d{2})(?::(\d{2}))?)?$/);if(ie){const T=Number(ie[1]),U=Number(ie[2]),M=Number(ie[3]),$=Number(ie[4]??"0"),ne=Number(ie[5]??"0"),le=Number(ie[6]??"0");J=new Date(T,U-1,M,$,ne,le)}}if(isNaN(J.getTime())){A.value={type:"error",msg:""},N.value="";return}N.value=String(J.getTime()),A.value={type:"success",msg:""}},X=()=>{const Q=G.value.trim();if(!Q){L.value={type:"error",msg:""},I.value="";return}const J=new Date(Q);if(isNaN(J.getTime())){L.value={type:"error",msg:""},I.value="";return}I.value=String(J.getTime()),L.value={type:"success",msg:""}};return(Q,J)=>(ue(),de("div",lg,[R("div",cg,[R("div",hg,[R("h2",ug,[be(ve(Jn),{class:"w-5 h-5"}),We(" ")]),be(ve(Qt),{to:"/",class:"flex items-center gap-2 px-3 py-2 bg-white/80 backdrop-blur rounded-lg shadow-sm border border-slate-200 text-slate-600 hover:text-brand-600"},{default:Yt(()=>[be(ve(gs),{class:"w-5 h-5"}),dg]),_:1})]),R("div",fg,[R("div",pg,[_g,R("div",gg,we(t.value),1)]),R("div",mg,[vg,R("div",bg,we(r.value),1)]),R("div",wg,[yg,R("div",Sg,we(n.value),1)]),R("div",xg,[Cg,R("div",kg,we(p.value),1)]),R("div",Eg,[Rg,R("div",Ag,we(_.value),1)])]),R("div",Tg,[R("div",Dg,[Lg,R("div",Og,we(s.value),1)]),R("div",Mg,[Ig,R("div",Bg,we(i.value),1)]),R("div",Pg,[$g,R("div",Fg,we(a.value),1)]),R("div",Hg,[Ng,R("div",zg,we(u.value),1)])]),R("div",Ug,[R("div",jg,[Wg,R("div",qg,[Ze(R("input",{"onUpdate:modelValue":J[0]||(J[0]=ie=>o.value=ie),placeholder:" 10  13 ",class:"flex-1 px-4 py-2 rounded-lg border border-slate-200 shadow-sm font-mono text-sm outline-none"},null,512),[[Ye,o.value]]),R("button",{onClick:k,class:"px-4 py-2 bg-brand-600 hover:bg-brand-500 text-white rounded-lg"},"")]),l.value?(ue(),de("div",{key:0,class:Te([l.value.type==="success"?"bg-green-50 text-green-700 border-green-200":"bg-red-50 text-red-700 border-red-200","mb-4 border rounded-lg px-4 py-3"])},we(l.value.msg),3)):Oe("",!0),R("div",Kg,[R("div",null,[Vg,R("div",Gg,we(v.value),1)]),R("div",null,[Zg,R("div",Xg,we(S.value),1)]),R("div",null,[Jg,R("div",Yg,we(x.value),1)])])]),R("div",Qg,[em,R("div",tm,[Ze(R("input",{"onUpdate:modelValue":J[1]||(J[1]=ie=>C.value=ie),type:"text",placeholder:" 2025-11-25 12:34:56  ISO ",class:"flex-1 px-4 py-2 rounded-lg border border-slate-200 shadow-sm outline-none"},null,512),[[Ye,C.value]]),R("button",{onClick:E,class:"px-4 py-2 bg-brand-600 hover:bg-brand-500 text-white rounded-lg"},"")]),A.value?(ue(),de("div",{key:0,class:Te([A.value.type==="success"?"bg-green-50 text-green-700 border-green-200":"bg-red-50 text-red-700 border-red-200","mb-4 border rounded-lg px-4 py-3"])},we(A.value.msg),3)):Oe("",!0),R("div",sm,we(N.value),1),R("div",rm,[Ze(R("input",{"onUpdate:modelValue":J[2]||(J[2]=ie=>G.value=ie),type:"datetime-local",step:"1",class:"flex-1 px-4 py-2 rounded-lg border border-slate-200 shadow-sm outline-none"},null,512),[[Ye,G.value]]),R("button",{onClick:X,class:"px-4 py-2 bg-slate-900 hover:bg-slate-800 text-white rounded-lg"},"")]),L.value?(ue(),de("div",{key:1,class:Te([L.value.type==="success"?"bg-green-50 text-green-700 border-green-200":"bg-red-50 text-red-700 border-red-200","mb-4 border rounded-lg px-4 py-3"])},we(L.value.msg),3)):Oe("",!0),R("div",im,we(I.value),1)])])])]))}}),om={class:"min-h-[100vh] bg-gray-50 p-4 md:p-6 lg:p-8"},am={class:"max-w-4xl mx-auto min-h-[100%] flex flex-col"},lm={class:"mb-8 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},cm=R("div",null,[R("h1",{class:"text-3xl sm:text-4xl font-bold text-slate-900 tracking-tight"},""),R("p",{class:"text-slate-600 text-lg mt-1"},"")],-1),hm=R("span",{class:"hidden md:inline"},"",-1),um={class:"bg-white rounded-2xl shadow-md border border-slate-200 p-4 md:p-6 lg:p-8 flex-grow overflow-hidden"},dm={class:"mb-8"},fm={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 mb-3"},pm=R("label",{class:"block text-sm font-semibold text-slate-700"},"",-1),_m={for:"file-upload",class:"flex items-center gap-2 px-3 py-2 text-sm text-brand-600 hover:text-brand-700 hover:bg-brand-50 rounded-lg cursor-pointer transition-colors"},gm={class:"mt-2 text-xs text-slate-400 flex gap-4"},mm={class:"mb-8"},vm=R("h3",{class:"text-sm font-semibold text-slate-700 mb-3"},"",-1),bm={class:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-4 min-h-[14vh] max-h-[calc(100vh-550px)] overflow-y-auto pr-2"},wm=["onClick"],ym={class:"text-lg sm:text-xl font-bold font-mono"},Sm={class:"text-xs sm:text-sm font-medium"},xm={class:"mb-6"},Cm=R("label",{class:"block text-sm font-semibold text-slate-700 mb-3"},"",-1),km={class:"relative"},Em=["value"],Rm={class:"absolute top-3 right-3 flex gap-2"},Am={class:"flex flex-wrap items-center justify-between gap-4 pt-4 border-t border-slate-100"},Tm=R("div",{class:"text-sm text-slate-500"},"    ",-1),Dm=ut({__name:"CaseConverter",setup(e){const t=fe(""),s=fe("lower"),i=fe(!1),a=[{value:"upper",label:"",icon:"AB"},{value:"lower",label:"",icon:"ab"},{value:"title",label:"",icon:"Ab"},{value:"sentence",label:"",icon:"Abc"},{value:"camel",label:"",icon:"aB"},{value:"pascal",label:"",icon:"Ab"},{value:"snake",label:"",icon:"a_b"},{value:"kebab",label:"",icon:"a-b"},{value:"constant",label:"",icon:"A_B"}],u=(w,m)=>{if(!w)return"";switch(m){case"upper":return w.toUpperCase();case"lower":return w.toLowerCase();case"title":return w.toLowerCase().replace(/\b\w/g,c=>c.toUpperCase());case"sentence":return w.toLowerCase().replace(/(^\s*\w|[.!?]\s*\w)/g,c=>c.toUpperCase());case"camel":return w.toLowerCase().replace(/[^a-zA-Z0-9]+(.)/g,(c,h)=>h.toUpperCase()).replace(/^./,c=>c.toLowerCase());case"pascal":return w.toLowerCase().replace(/[^a-zA-Z0-9]+(.)/g,(c,h)=>h.toUpperCase()).replace(/^./,c=>c.toUpperCase());case"snake":return w.toLowerCase().replace(/[^a-zA-Z0-9]+/g,"_");case"kebab":return w.toLowerCase().replace(/[^a-zA-Z0-9]+/g,"-");case"constant":return w.toUpperCase().replace(/[^a-zA-Z0-9]+/g,"_");default:return w}},f=Ue(()=>u(t.value,s.value)),r=Ue(()=>t.value.length),n=Ue(()=>t.value.trim().split(/\s+/).filter(Boolean).length),p=Ue(()=>t.value.split(`
`).length),_=async()=>{try{await navigator.clipboard.writeText(f.value),i.value=!0,setTimeout(()=>i.value=!1,2e3)}catch(w){console.error(":",w)}},d=()=>{t.value=""},g=()=>{t.value=f.value},b=w=>{var c;const m=(c=w.target.files)==null?void 0:c[0];if(m&&m.type.includes("text")){const h=new FileReader;h.onload=o=>{var l,v;t.value=((v=(l=o.target)==null?void 0:l.result)==null?void 0:v.toString())||""},h.readAsText(m)}};return(w,m)=>(ue(),de("div",om,[R("div",am,[R("div",lm,[cm,be(ve(Qt),{to:"/",class:"flex items-center gap-2 px-3 py-2 bg-white/80 backdrop-blur rounded-lg shadow-sm border border-slate-200 text-slate-600 hover:text-brand-600 transition-colors","aria-label":""},{default:Yt(()=>[be(ve(gs),{class:"w-5 h-5"}),hm]),_:1})]),R("div",um,[R("div",dm,[R("div",fm,[pm,R("input",{type:"file",onChange:b,accept:".txt,.md,.log,.json,.xml,.yaml,.yml,.csv",class:"hidden",id:"file-upload"},null,32),R("label",_m,[be(ve(sr),{class:"w-4 h-4"}),We("  ")])]),Ze(R("textarea",{"onUpdate:modelValue":m[0]||(m[0]=c=>t.value=c),rows:"8",placeholder:"...",class:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-brand-500 focus:border-brand-500 outline-none resize-none font-mono text-sm bg-slate-50 min-h-[24vh] max-h-[calc(100vh-450px)] overflow-y-auto whitespace-pre-wrap break-words shadow-sm transition-all duration-200"},null,512),[[Ye,t.value]]),R("div",gm,[R("span",null,": "+we(r.value),1),R("span",null,": "+we(n.value),1),R("span",null,": "+we(p.value),1)])]),R("div",mm,[vm,R("div",bm,[(ue(),de(Qe,null,Gt(a,c=>R("button",{key:c.value,onClick:h=>s.value=c.value,class:Te(["group flex flex-col items-center justify-center gap-2 px-4 py-4 rounded-xl border-2 transition-all duration-200 hover:shadow-sm",s.value===c.value?"border-brand-500 bg-brand-50 text-brand-700 shadow-sm":"border-slate-200 hover:border-slate-300 hover:bg-slate-50 text-slate-600"])},[R("span",ym,we(c.icon),1),R("span",Sm,we(c.label),1)],10,wm)),64))])]),R("div",xm,[Cm,R("div",km,[R("textarea",{value:f.value,readonly:"",rows:"8",placeholder:"...",class:"w-full px-4 py-3 border border-slate-200 rounded-xl bg-slate-50 font-mono text-sm resize-none pr-24 min-h-[24vh] max-h-[calc(100vh-450px)] overflow-y-auto whitespace-pre-wrap break-words shadow-sm transition-all duration-200"},null,8,Em),R("div",Rm,[R("button",{onClick:_,class:Te(["px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200",i.value?"bg-green-100 text-green-700 shadow-sm":"bg-white border border-slate-200 text-slate-600 hover:bg-slate-50 hover:shadow-sm"])},[(ue(),Hs(kl(i.value?ve(kf):ve(Rf)),{class:"w-4 h-4"}))],2),R("button",{onClick:g,class:"px-3 py-2 bg-white border border-slate-200 text-slate-600 rounded-lg text-sm font-medium transition-all duration-200 hover:bg-slate-50 hover:shadow-sm",title:""},[be(ve(Uf),{class:"w-4 h-4"})])])])]),R("div",Am,[Tm,R("button",{onClick:d,class:"flex items-center gap-2 px-4 py-2 text-sm text-red-600 hover:text-red-700 hover:bg-red-50 rounded-lg transition-all duration-200"},[be(ve(eo),{class:"w-4 h-4"}),We("  ")])])])])]))}}),Lm={class:"min-h-screen bg-gray-50"},Om={class:"max-w-6xl mx-auto px-6 py-8"},Mm={class:"mb-6 relative"},Im=R("span",{class:"hidden md:inline"},"",-1),Bm={class:"text-2xl font-bold text-slate-900 flex items-center gap-2"},Pm=R("p",{class:"text-slate-600 mt-1"}," Java  Java ",-1),$m={class:"grid md:grid-cols-2 gap-6"},Fm={class:"bg-white rounded-2xl border border-slate-200 shadow-sm p-6"},Hm={class:"flex items-center gap-3 mb-3"},Nm=R("label",{class:"text-sm font-semibold text-slate-700"},"",-1),zm={class:"space-y-6"},Um={class:"bg-white rounded-2xl border border-slate-200 shadow-sm p-6"},jm=R("div",{class:"text-sm font-semibold text-slate-700 mb-2"},"",-1),Wm={class:"w-full h-[160px] p-4 font-mono text-sm bg-slate-50 rounded-xl overflow-auto whitespace-pre-wrap break-words"},qm={class:"bg-white rounded-2xl border border-slate-200 shadow-sm p-6"},Km=R("div",{class:"text-sm font-semibold text-slate-700 mb-2"},"Java ",-1),Vm={class:"w-full h-[160px] p-4 font-mono text-sm bg-slate-50 rounded-xl overflow-auto whitespace-pre-wrap break-words"},Gm={class:"bg-white rounded-2xl border border-slate-200 shadow-sm p-6"},Zm=R("div",{class:"text-sm font-semibold text-slate-700 mb-2"},"Java ",-1),Xm={class:"w-full h-[160px] p-4 font-mono text-sm bg-slate-50 rounded-xl overflow-auto whitespace-pre-wrap break-words"},Jm=ut({__name:"StringAssembler",setup(e){const t=fe(""),s=fe("result"),i=fe(null),a=fe(""),u=fe(""),f=fe(""),r=()=>{const _=t.value.match(/\bString\s+(\w+)\s*=\s*/);_&&(s.value=_[1])},n=_=>{try{return JSON.parse('"'+_.replace(/"/g,'\\"')+'"')}catch{return _}},p=()=>{try{r();const _=[],d=/"([^"\\]|\\.)*"/g;let g;for(;(g=d.exec(t.value))!==null;){const m=g[0].slice(1,-1);_.push(n(m))}const b=_.join("");a.value=b,i.value={type:"success",msg:""},u.value=`String ${s.value} = """
${b}
""";`;const w=b.replace(/\\/g,"\\\\").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t").replace(/"/g,'\\"');f.value=`String ${s.value} = "${w}";`}catch{i.value={type:"error",msg:""}}};return(_,d)=>(ue(),de("div",Lm,[R("div",Om,[R("div",Mm,[be(ve(Qt),{to:"/",class:"absolute top-4 right-4 z-30 flex items-center gap-2 px-3 py-2 bg-white/80 backdrop-blur rounded-lg shadow-sm border border-slate-200 text-slate-600 hover:text-brand-600 transition-colors"},{default:Yt(()=>[be(ve(gs),{class:"w-5 h-5"}),Im]),_:1}),R("h2",Bm,[be(ve(Ql),{class:"w-5 h-5"}),We(" ")]),Pm]),R("div",$m,[R("div",Fm,[R("div",Hm,[Nm,Ze(R("input",{"onUpdate:modelValue":d[0]||(d[0]=g=>s.value=g),class:"px-3 py-2 border border-slate-200 rounded-lg text-sm w-40"},null,512),[[Ye,s.value]]),R("button",{onClick:p,class:"ml-auto px-4 py-2 bg-brand-600 hover:bg-brand-500 text-white rounded-lg"},"")]),Ze(R("textarea",{"onUpdate:modelValue":d[1]||(d[1]=g=>t.value=g),placeholder:"Java",class:"w-full h-[360px] p-4 font-mono text-sm outline-none resize-none border border-slate-200 rounded-xl bg-slate-50 overflow-auto whitespace-pre-wrap break-words"},null,512),[[Ye,t.value]]),i.value?(ue(),de("div",{key:0,class:Te([i.value.type==="success"?"bg-green-50 text-green-700 border-green-200":"bg-red-50 text-red-700 border-red-200","mt-3 border rounded-lg px-4 py-3"])},we(i.value.msg),3)):Oe("",!0)]),R("div",zm,[R("div",Um,[jm,R("pre",Wm,we(a.value),1)]),R("div",qm,[Km,R("pre",Vm,we(u.value),1)]),R("div",Gm,[Zm,R("pre",Xm,we(f.value),1)])])])])]))}});var Jr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ym(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Yr(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var en={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/var Ca;function Qm(){return Ca||(Ca=1,(function(e,t){(function(s){e.exports=s()})(function(){return(function s(i,a,u){function f(p,_){if(!a[p]){if(!i[p]){var d=typeof Yr=="function"&&Yr;if(!_&&d)return d(p,!0);if(r)return r(p,!0);var g=new Error("Cannot find module '"+p+"'");throw g.code="MODULE_NOT_FOUND",g}var b=a[p]={exports:{}};i[p][0].call(b.exports,function(w){var m=i[p][1][w];return f(m||w)},b,b.exports,s,i,a,u)}return a[p].exports}for(var r=typeof Yr=="function"&&Yr,n=0;n<u.length;n++)f(u[n]);return f})({1:[function(s,i,a){var u=s("./utils"),f=s("./support"),r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";a.encode=function(n){for(var p,_,d,g,b,w,m,c=[],h=0,o=n.length,l=o,v=u.getTypeOf(n)!=="string";h<n.length;)l=o-h,d=v?(p=n[h++],_=h<o?n[h++]:0,h<o?n[h++]:0):(p=n.charCodeAt(h++),_=h<o?n.charCodeAt(h++):0,h<o?n.charCodeAt(h++):0),g=p>>2,b=(3&p)<<4|_>>4,w=1<l?(15&_)<<2|d>>6:64,m=2<l?63&d:64,c.push(r.charAt(g)+r.charAt(b)+r.charAt(w)+r.charAt(m));return c.join("")},a.decode=function(n){var p,_,d,g,b,w,m=0,c=0,h="data:";if(n.substr(0,h.length)===h)throw new Error("Invalid base64 input, it looks like a data url.");var o,l=3*(n=n.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(n.charAt(n.length-1)===r.charAt(64)&&l--,n.charAt(n.length-2)===r.charAt(64)&&l--,l%1!=0)throw new Error("Invalid base64 input, bad content length.");for(o=f.uint8array?new Uint8Array(0|l):new Array(0|l);m<n.length;)p=r.indexOf(n.charAt(m++))<<2|(g=r.indexOf(n.charAt(m++)))>>4,_=(15&g)<<4|(b=r.indexOf(n.charAt(m++)))>>2,d=(3&b)<<6|(w=r.indexOf(n.charAt(m++))),o[c++]=p,b!==64&&(o[c++]=_),w!==64&&(o[c++]=d);return o}},{"./support":30,"./utils":32}],2:[function(s,i,a){var u=s("./external"),f=s("./stream/DataWorker"),r=s("./stream/Crc32Probe"),n=s("./stream/DataLengthProbe");function p(_,d,g,b,w){this.compressedSize=_,this.uncompressedSize=d,this.crc32=g,this.compression=b,this.compressedContent=w}p.prototype={getContentWorker:function(){var _=new f(u.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new n("data_length")),d=this;return _.on("end",function(){if(this.streamInfo.data_length!==d.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),_},getCompressedWorker:function(){return new f(u.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},p.createWorkerFrom=function(_,d,g){return _.pipe(new r).pipe(new n("uncompressedSize")).pipe(d.compressWorker(g)).pipe(new n("compressedSize")).withStreamInfo("compression",d)},i.exports=p},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(s,i,a){var u=s("./stream/GenericWorker");a.STORE={magic:"\0\0",compressWorker:function(){return new u("STORE compression")},uncompressWorker:function(){return new u("STORE decompression")}},a.DEFLATE=s("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(s,i,a){var u=s("./utils"),f=(function(){for(var r,n=[],p=0;p<256;p++){r=p;for(var _=0;_<8;_++)r=1&r?3988292384^r>>>1:r>>>1;n[p]=r}return n})();i.exports=function(r,n){return r!==void 0&&r.length?u.getTypeOf(r)!=="string"?(function(p,_,d,g){var b=f,w=g+d;p^=-1;for(var m=g;m<w;m++)p=p>>>8^b[255&(p^_[m])];return-1^p})(0|n,r,r.length,0):(function(p,_,d,g){var b=f,w=g+d;p^=-1;for(var m=g;m<w;m++)p=p>>>8^b[255&(p^_.charCodeAt(m))];return-1^p})(0|n,r,r.length,0):0}},{"./utils":32}],5:[function(s,i,a){a.base64=!1,a.binary=!1,a.dir=!1,a.createFolders=!0,a.date=null,a.compression=null,a.compressionOptions=null,a.comment=null,a.unixPermissions=null,a.dosPermissions=null},{}],6:[function(s,i,a){var u=null;u=typeof Promise<"u"?Promise:s("lie"),i.exports={Promise:u}},{lie:37}],7:[function(s,i,a){var u=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",f=s("pako"),r=s("./utils"),n=s("./stream/GenericWorker"),p=u?"uint8array":"array";function _(d,g){n.call(this,"FlateWorker/"+d),this._pako=null,this._pakoAction=d,this._pakoOptions=g,this.meta={}}a.magic="\b\0",r.inherits(_,n),_.prototype.processChunk=function(d){this.meta=d.meta,this._pako===null&&this._createPako(),this._pako.push(r.transformTo(p,d.data),!1)},_.prototype.flush=function(){n.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},_.prototype.cleanUp=function(){n.prototype.cleanUp.call(this),this._pako=null},_.prototype._createPako=function(){this._pako=new f[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var d=this;this._pako.onData=function(g){d.push({data:g,meta:d.meta})}},a.compressWorker=function(d){return new _("Deflate",d)},a.uncompressWorker=function(){return new _("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(s,i,a){function u(b,w){var m,c="";for(m=0;m<w;m++)c+=String.fromCharCode(255&b),b>>>=8;return c}function f(b,w,m,c,h,o){var l,v,S=b.file,x=b.compression,k=o!==p.utf8encode,C=r.transformTo("string",o(S.name)),A=r.transformTo("string",p.utf8encode(S.name)),N=S.comment,G=r.transformTo("string",o(N)),L=r.transformTo("string",p.utf8encode(N)),I=A.length!==S.name.length,E=L.length!==N.length,X="",Q="",J="",ie=S.dir,T=S.date,U={crc32:0,compressedSize:0,uncompressedSize:0};w&&!m||(U.crc32=b.crc32,U.compressedSize=b.compressedSize,U.uncompressedSize=b.uncompressedSize);var M=0;w&&(M|=8),k||!I&&!E||(M|=2048);var $=0,ne=0;ie&&($|=16),h==="UNIX"?(ne=798,$|=(function(ce,pe){var j=ce;return ce||(j=pe?16893:33204),(65535&j)<<16})(S.unixPermissions,ie)):(ne=20,$|=(function(ce){return 63&(ce||0)})(S.dosPermissions)),l=T.getUTCHours(),l<<=6,l|=T.getUTCMinutes(),l<<=5,l|=T.getUTCSeconds()/2,v=T.getUTCFullYear()-1980,v<<=4,v|=T.getUTCMonth()+1,v<<=5,v|=T.getUTCDate(),I&&(Q=u(1,1)+u(_(C),4)+A,X+="up"+u(Q.length,2)+Q),E&&(J=u(1,1)+u(_(G),4)+L,X+="uc"+u(J.length,2)+J);var le="";return le+=`
\0`,le+=u(M,2),le+=x.magic,le+=u(l,2),le+=u(v,2),le+=u(U.crc32,4),le+=u(U.compressedSize,4),le+=u(U.uncompressedSize,4),le+=u(C.length,2),le+=u(X.length,2),{fileRecord:d.LOCAL_FILE_HEADER+le+C+X,dirRecord:d.CENTRAL_FILE_HEADER+u(ne,2)+le+u(G.length,2)+"\0\0\0\0"+u($,4)+u(c,4)+C+X+G}}var r=s("../utils"),n=s("../stream/GenericWorker"),p=s("../utf8"),_=s("../crc32"),d=s("../signature");function g(b,w,m,c){n.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=w,this.zipPlatform=m,this.encodeFileName=c,this.streamFiles=b,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}r.inherits(g,n),g.prototype.push=function(b){var w=b.meta.percent||0,m=this.entriesCount,c=this._sources.length;this.accumulate?this.contentBuffer.push(b):(this.bytesWritten+=b.data.length,n.prototype.push.call(this,{data:b.data,meta:{currentFile:this.currentFile,percent:m?(w+100*(m-c-1))/m:100}}))},g.prototype.openedSource=function(b){this.currentSourceOffset=this.bytesWritten,this.currentFile=b.file.name;var w=this.streamFiles&&!b.file.dir;if(w){var m=f(b,w,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:m.fileRecord,meta:{percent:0}})}else this.accumulate=!0},g.prototype.closedSource=function(b){this.accumulate=!1;var w=this.streamFiles&&!b.file.dir,m=f(b,w,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(m.dirRecord),w)this.push({data:(function(c){return d.DATA_DESCRIPTOR+u(c.crc32,4)+u(c.compressedSize,4)+u(c.uncompressedSize,4)})(b),meta:{percent:100}});else for(this.push({data:m.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},g.prototype.flush=function(){for(var b=this.bytesWritten,w=0;w<this.dirRecords.length;w++)this.push({data:this.dirRecords[w],meta:{percent:100}});var m=this.bytesWritten-b,c=(function(h,o,l,v,S){var x=r.transformTo("string",S(v));return d.CENTRAL_DIRECTORY_END+"\0\0\0\0"+u(h,2)+u(h,2)+u(o,4)+u(l,4)+u(x.length,2)+x})(this.dirRecords.length,m,b,this.zipComment,this.encodeFileName);this.push({data:c,meta:{percent:100}})},g.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},g.prototype.registerPrevious=function(b){this._sources.push(b);var w=this;return b.on("data",function(m){w.processChunk(m)}),b.on("end",function(){w.closedSource(w.previous.streamInfo),w._sources.length?w.prepareNextSource():w.end()}),b.on("error",function(m){w.error(m)}),this},g.prototype.resume=function(){return!!n.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},g.prototype.error=function(b){var w=this._sources;if(!n.prototype.error.call(this,b))return!1;for(var m=0;m<w.length;m++)try{w[m].error(b)}catch{}return!0},g.prototype.lock=function(){n.prototype.lock.call(this);for(var b=this._sources,w=0;w<b.length;w++)b[w].lock()},i.exports=g},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(s,i,a){var u=s("../compressions"),f=s("./ZipFileWorker");a.generateWorker=function(r,n,p){var _=new f(n.streamFiles,p,n.platform,n.encodeFileName),d=0;try{r.forEach(function(g,b){d++;var w=(function(o,l){var v=o||l,S=u[v];if(!S)throw new Error(v+" is not a valid compression method !");return S})(b.options.compression,n.compression),m=b.options.compressionOptions||n.compressionOptions||{},c=b.dir,h=b.date;b._compressWorker(w,m).withStreamInfo("file",{name:g,dir:c,date:h,comment:b.comment||"",unixPermissions:b.unixPermissions,dosPermissions:b.dosPermissions}).pipe(_)}),_.entriesCount=d}catch(g){_.error(g)}return _}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(s,i,a){function u(){if(!(this instanceof u))return new u;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var f=new u;for(var r in this)typeof this[r]!="function"&&(f[r]=this[r]);return f}}(u.prototype=s("./object")).loadAsync=s("./load"),u.support=s("./support"),u.defaults=s("./defaults"),u.version="3.10.1",u.loadAsync=function(f,r){return new u().loadAsync(f,r)},u.external=s("./external"),i.exports=u},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(s,i,a){var u=s("./utils"),f=s("./external"),r=s("./utf8"),n=s("./zipEntries"),p=s("./stream/Crc32Probe"),_=s("./nodejsUtils");function d(g){return new f.Promise(function(b,w){var m=g.decompressed.getContentWorker().pipe(new p);m.on("error",function(c){w(c)}).on("end",function(){m.streamInfo.crc32!==g.decompressed.crc32?w(new Error("Corrupted zip : CRC32 mismatch")):b()}).resume()})}i.exports=function(g,b){var w=this;return b=u.extend(b||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:r.utf8decode}),_.isNode&&_.isStream(g)?f.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):u.prepareContent("the loaded zip file",g,!0,b.optimizedBinaryString,b.base64).then(function(m){var c=new n(b);return c.load(m),c}).then(function(m){var c=[f.Promise.resolve(m)],h=m.files;if(b.checkCRC32)for(var o=0;o<h.length;o++)c.push(d(h[o]));return f.Promise.all(c)}).then(function(m){for(var c=m.shift(),h=c.files,o=0;o<h.length;o++){var l=h[o],v=l.fileNameStr,S=u.resolve(l.fileNameStr);w.file(S,l.decompressed,{binary:!0,optimizedBinaryString:!0,date:l.date,dir:l.dir,comment:l.fileCommentStr.length?l.fileCommentStr:null,unixPermissions:l.unixPermissions,dosPermissions:l.dosPermissions,createFolders:b.createFolders}),l.dir||(w.file(S).unsafeOriginalName=v)}return c.zipComment.length&&(w.comment=c.zipComment),w})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(s,i,a){var u=s("../utils"),f=s("../stream/GenericWorker");function r(n,p){f.call(this,"Nodejs stream input adapter for "+n),this._upstreamEnded=!1,this._bindStream(p)}u.inherits(r,f),r.prototype._bindStream=function(n){var p=this;(this._stream=n).pause(),n.on("data",function(_){p.push({data:_,meta:{percent:0}})}).on("error",function(_){p.isPaused?this.generatedError=_:p.error(_)}).on("end",function(){p.isPaused?p._upstreamEnded=!0:p.end()})},r.prototype.pause=function(){return!!f.prototype.pause.call(this)&&(this._stream.pause(),!0)},r.prototype.resume=function(){return!!f.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},i.exports=r},{"../stream/GenericWorker":28,"../utils":32}],13:[function(s,i,a){var u=s("readable-stream").Readable;function f(r,n,p){u.call(this,n),this._helper=r;var _=this;r.on("data",function(d,g){_.push(d)||_._helper.pause(),p&&p(g)}).on("error",function(d){_.emit("error",d)}).on("end",function(){_.push(null)})}s("../utils").inherits(f,u),f.prototype._read=function(){this._helper.resume()},i.exports=f},{"../utils":32,"readable-stream":16}],14:[function(s,i,a){i.exports={isNode:typeof Buffer<"u",newBufferFrom:function(u,f){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(u,f);if(typeof u=="number")throw new Error('The "data" argument must not be a number');return new Buffer(u,f)},allocBuffer:function(u){if(Buffer.alloc)return Buffer.alloc(u);var f=new Buffer(u);return f.fill(0),f},isBuffer:function(u){return Buffer.isBuffer(u)},isStream:function(u){return u&&typeof u.on=="function"&&typeof u.pause=="function"&&typeof u.resume=="function"}}},{}],15:[function(s,i,a){function u(S,x,k){var C,A=r.getTypeOf(x),N=r.extend(k||{},_);N.date=N.date||new Date,N.compression!==null&&(N.compression=N.compression.toUpperCase()),typeof N.unixPermissions=="string"&&(N.unixPermissions=parseInt(N.unixPermissions,8)),N.unixPermissions&&16384&N.unixPermissions&&(N.dir=!0),N.dosPermissions&&16&N.dosPermissions&&(N.dir=!0),N.dir&&(S=h(S)),N.createFolders&&(C=c(S))&&o.call(this,C,!0);var G=A==="string"&&N.binary===!1&&N.base64===!1;k&&k.binary!==void 0||(N.binary=!G),(x instanceof d&&x.uncompressedSize===0||N.dir||!x||x.length===0)&&(N.base64=!1,N.binary=!0,x="",N.compression="STORE",A="string");var L=null;L=x instanceof d||x instanceof n?x:w.isNode&&w.isStream(x)?new m(S,x):r.prepareContent(S,x,N.binary,N.optimizedBinaryString,N.base64);var I=new g(S,L,N);this.files[S]=I}var f=s("./utf8"),r=s("./utils"),n=s("./stream/GenericWorker"),p=s("./stream/StreamHelper"),_=s("./defaults"),d=s("./compressedObject"),g=s("./zipObject"),b=s("./generate"),w=s("./nodejsUtils"),m=s("./nodejs/NodejsStreamInputAdapter"),c=function(S){S.slice(-1)==="/"&&(S=S.substring(0,S.length-1));var x=S.lastIndexOf("/");return 0<x?S.substring(0,x):""},h=function(S){return S.slice(-1)!=="/"&&(S+="/"),S},o=function(S,x){return x=x!==void 0?x:_.createFolders,S=h(S),this.files[S]||u.call(this,S,null,{dir:!0,createFolders:x}),this.files[S]};function l(S){return Object.prototype.toString.call(S)==="[object RegExp]"}var v={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(S){var x,k,C;for(x in this.files)C=this.files[x],(k=x.slice(this.root.length,x.length))&&x.slice(0,this.root.length)===this.root&&S(k,C)},filter:function(S){var x=[];return this.forEach(function(k,C){S(k,C)&&x.push(C)}),x},file:function(S,x,k){if(arguments.length!==1)return S=this.root+S,u.call(this,S,x,k),this;if(l(S)){var C=S;return this.filter(function(N,G){return!G.dir&&C.test(N)})}var A=this.files[this.root+S];return A&&!A.dir?A:null},folder:function(S){if(!S)return this;if(l(S))return this.filter(function(A,N){return N.dir&&S.test(A)});var x=this.root+S,k=o.call(this,x),C=this.clone();return C.root=k.name,C},remove:function(S){S=this.root+S;var x=this.files[S];if(x||(S.slice(-1)!=="/"&&(S+="/"),x=this.files[S]),x&&!x.dir)delete this.files[S];else for(var k=this.filter(function(A,N){return N.name.slice(0,S.length)===S}),C=0;C<k.length;C++)delete this.files[k[C].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(S){var x,k={};try{if((k=r.extend(S||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:f.utf8encode})).type=k.type.toLowerCase(),k.compression=k.compression.toUpperCase(),k.type==="binarystring"&&(k.type="string"),!k.type)throw new Error("No output type specified.");r.checkSupport(k.type),k.platform!=="darwin"&&k.platform!=="freebsd"&&k.platform!=="linux"&&k.platform!=="sunos"||(k.platform="UNIX"),k.platform==="win32"&&(k.platform="DOS");var C=k.comment||this.comment||"";x=b.generateWorker(this,k,C)}catch(A){(x=new n("error")).error(A)}return new p(x,k.type||"string",k.mimeType)},generateAsync:function(S,x){return this.generateInternalStream(S).accumulate(x)},generateNodeStream:function(S,x){return(S=S||{}).type||(S.type="nodebuffer"),this.generateInternalStream(S).toNodejsStream(x)}};i.exports=v},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(s,i,a){i.exports=s("stream")},{stream:void 0}],17:[function(s,i,a){var u=s("./DataReader");function f(r){u.call(this,r);for(var n=0;n<this.data.length;n++)r[n]=255&r[n]}s("../utils").inherits(f,u),f.prototype.byteAt=function(r){return this.data[this.zero+r]},f.prototype.lastIndexOfSignature=function(r){for(var n=r.charCodeAt(0),p=r.charCodeAt(1),_=r.charCodeAt(2),d=r.charCodeAt(3),g=this.length-4;0<=g;--g)if(this.data[g]===n&&this.data[g+1]===p&&this.data[g+2]===_&&this.data[g+3]===d)return g-this.zero;return-1},f.prototype.readAndCheckSignature=function(r){var n=r.charCodeAt(0),p=r.charCodeAt(1),_=r.charCodeAt(2),d=r.charCodeAt(3),g=this.readData(4);return n===g[0]&&p===g[1]&&_===g[2]&&d===g[3]},f.prototype.readData=function(r){if(this.checkOffset(r),r===0)return[];var n=this.data.slice(this.zero+this.index,this.zero+this.index+r);return this.index+=r,n},i.exports=f},{"../utils":32,"./DataReader":18}],18:[function(s,i,a){var u=s("../utils");function f(r){this.data=r,this.length=r.length,this.index=0,this.zero=0}f.prototype={checkOffset:function(r){this.checkIndex(this.index+r)},checkIndex:function(r){if(this.length<this.zero+r||r<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+r+"). Corrupted zip ?")},setIndex:function(r){this.checkIndex(r),this.index=r},skip:function(r){this.setIndex(this.index+r)},byteAt:function(){},readInt:function(r){var n,p=0;for(this.checkOffset(r),n=this.index+r-1;n>=this.index;n--)p=(p<<8)+this.byteAt(n);return this.index+=r,p},readString:function(r){return u.transformTo("string",this.readData(r))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var r=this.readInt(4);return new Date(Date.UTC(1980+(r>>25&127),(r>>21&15)-1,r>>16&31,r>>11&31,r>>5&63,(31&r)<<1))}},i.exports=f},{"../utils":32}],19:[function(s,i,a){var u=s("./Uint8ArrayReader");function f(r){u.call(this,r)}s("../utils").inherits(f,u),f.prototype.readData=function(r){this.checkOffset(r);var n=this.data.slice(this.zero+this.index,this.zero+this.index+r);return this.index+=r,n},i.exports=f},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(s,i,a){var u=s("./DataReader");function f(r){u.call(this,r)}s("../utils").inherits(f,u),f.prototype.byteAt=function(r){return this.data.charCodeAt(this.zero+r)},f.prototype.lastIndexOfSignature=function(r){return this.data.lastIndexOf(r)-this.zero},f.prototype.readAndCheckSignature=function(r){return r===this.readData(4)},f.prototype.readData=function(r){this.checkOffset(r);var n=this.data.slice(this.zero+this.index,this.zero+this.index+r);return this.index+=r,n},i.exports=f},{"../utils":32,"./DataReader":18}],21:[function(s,i,a){var u=s("./ArrayReader");function f(r){u.call(this,r)}s("../utils").inherits(f,u),f.prototype.readData=function(r){if(this.checkOffset(r),r===0)return new Uint8Array(0);var n=this.data.subarray(this.zero+this.index,this.zero+this.index+r);return this.index+=r,n},i.exports=f},{"../utils":32,"./ArrayReader":17}],22:[function(s,i,a){var u=s("../utils"),f=s("../support"),r=s("./ArrayReader"),n=s("./StringReader"),p=s("./NodeBufferReader"),_=s("./Uint8ArrayReader");i.exports=function(d){var g=u.getTypeOf(d);return u.checkSupport(g),g!=="string"||f.uint8array?g==="nodebuffer"?new p(d):f.uint8array?new _(u.transformTo("uint8array",d)):new r(u.transformTo("array",d)):new n(d)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(s,i,a){a.LOCAL_FILE_HEADER="PK",a.CENTRAL_FILE_HEADER="PK",a.CENTRAL_DIRECTORY_END="PK",a.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",a.ZIP64_CENTRAL_DIRECTORY_END="PK",a.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(s,i,a){var u=s("./GenericWorker"),f=s("../utils");function r(n){u.call(this,"ConvertWorker to "+n),this.destType=n}f.inherits(r,u),r.prototype.processChunk=function(n){this.push({data:f.transformTo(this.destType,n.data),meta:n.meta})},i.exports=r},{"../utils":32,"./GenericWorker":28}],25:[function(s,i,a){var u=s("./GenericWorker"),f=s("../crc32");function r(){u.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}s("../utils").inherits(r,u),r.prototype.processChunk=function(n){this.streamInfo.crc32=f(n.data,this.streamInfo.crc32||0),this.push(n)},i.exports=r},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(s,i,a){var u=s("../utils"),f=s("./GenericWorker");function r(n){f.call(this,"DataLengthProbe for "+n),this.propName=n,this.withStreamInfo(n,0)}u.inherits(r,f),r.prototype.processChunk=function(n){if(n){var p=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=p+n.data.length}f.prototype.processChunk.call(this,n)},i.exports=r},{"../utils":32,"./GenericWorker":28}],27:[function(s,i,a){var u=s("../utils"),f=s("./GenericWorker");function r(n){f.call(this,"DataWorker");var p=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,n.then(function(_){p.dataIsReady=!0,p.data=_,p.max=_&&_.length||0,p.type=u.getTypeOf(_),p.isPaused||p._tickAndRepeat()},function(_){p.error(_)})}u.inherits(r,f),r.prototype.cleanUp=function(){f.prototype.cleanUp.call(this),this.data=null},r.prototype.resume=function(){return!!f.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,u.delay(this._tickAndRepeat,[],this)),!0)},r.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(u.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},r.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var n=null,p=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":n=this.data.substring(this.index,p);break;case"uint8array":n=this.data.subarray(this.index,p);break;case"array":case"nodebuffer":n=this.data.slice(this.index,p)}return this.index=p,this.push({data:n,meta:{percent:this.max?this.index/this.max*100:0}})},i.exports=r},{"../utils":32,"./GenericWorker":28}],28:[function(s,i,a){function u(f){this.name=f||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}u.prototype={push:function(f){this.emit("data",f)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(f){this.emit("error",f)}return!0},error:function(f){return!this.isFinished&&(this.isPaused?this.generatedError=f:(this.isFinished=!0,this.emit("error",f),this.previous&&this.previous.error(f),this.cleanUp()),!0)},on:function(f,r){return this._listeners[f].push(r),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(f,r){if(this._listeners[f])for(var n=0;n<this._listeners[f].length;n++)this._listeners[f][n].call(this,r)},pipe:function(f){return f.registerPrevious(this)},registerPrevious:function(f){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=f.streamInfo,this.mergeStreamInfo(),this.previous=f;var r=this;return f.on("data",function(n){r.processChunk(n)}),f.on("end",function(){r.end()}),f.on("error",function(n){r.error(n)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var f=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),f=!0),this.previous&&this.previous.resume(),!f},flush:function(){},processChunk:function(f){this.push(f)},withStreamInfo:function(f,r){return this.extraStreamInfo[f]=r,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var f in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,f)&&(this.streamInfo[f]=this.extraStreamInfo[f])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var f="Worker "+this.name;return this.previous?this.previous+" -> "+f:f}},i.exports=u},{}],29:[function(s,i,a){var u=s("../utils"),f=s("./ConvertWorker"),r=s("./GenericWorker"),n=s("../base64"),p=s("../support"),_=s("../external"),d=null;if(p.nodestream)try{d=s("../nodejs/NodejsStreamOutputAdapter")}catch{}function g(w,m){return new _.Promise(function(c,h){var o=[],l=w._internalType,v=w._outputType,S=w._mimeType;w.on("data",function(x,k){o.push(x),m&&m(k)}).on("error",function(x){o=[],h(x)}).on("end",function(){try{var x=(function(k,C,A){switch(k){case"blob":return u.newBlob(u.transformTo("arraybuffer",C),A);case"base64":return n.encode(C);default:return u.transformTo(k,C)}})(v,(function(k,C){var A,N=0,G=null,L=0;for(A=0;A<C.length;A++)L+=C[A].length;switch(k){case"string":return C.join("");case"array":return Array.prototype.concat.apply([],C);case"uint8array":for(G=new Uint8Array(L),A=0;A<C.length;A++)G.set(C[A],N),N+=C[A].length;return G;case"nodebuffer":return Buffer.concat(C);default:throw new Error("concat : unsupported type '"+k+"'")}})(l,o),S);c(x)}catch(k){h(k)}o=[]}).resume()})}function b(w,m,c){var h=m;switch(m){case"blob":case"arraybuffer":h="uint8array";break;case"base64":h="string"}try{this._internalType=h,this._outputType=m,this._mimeType=c,u.checkSupport(h),this._worker=w.pipe(new f(h)),w.lock()}catch(o){this._worker=new r("error"),this._worker.error(o)}}b.prototype={accumulate:function(w){return g(this,w)},on:function(w,m){var c=this;return w==="data"?this._worker.on(w,function(h){m.call(c,h.data,h.meta)}):this._worker.on(w,function(){u.delay(m,arguments,c)}),this},resume:function(){return u.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(w){if(u.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new d(this,{objectMode:this._outputType!=="nodebuffer"},w)}},i.exports=b},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(s,i,a){if(a.base64=!0,a.array=!0,a.string=!0,a.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",a.nodebuffer=typeof Buffer<"u",a.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")a.blob=!1;else{var u=new ArrayBuffer(0);try{a.blob=new Blob([u],{type:"application/zip"}).size===0}catch{try{var f=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);f.append(u),a.blob=f.getBlob("application/zip").size===0}catch{a.blob=!1}}}try{a.nodestream=!!s("readable-stream").Readable}catch{a.nodestream=!1}},{"readable-stream":16}],31:[function(s,i,a){for(var u=s("./utils"),f=s("./support"),r=s("./nodejsUtils"),n=s("./stream/GenericWorker"),p=new Array(256),_=0;_<256;_++)p[_]=252<=_?6:248<=_?5:240<=_?4:224<=_?3:192<=_?2:1;p[254]=p[254]=1;function d(){n.call(this,"utf-8 decode"),this.leftOver=null}function g(){n.call(this,"utf-8 encode")}a.utf8encode=function(b){return f.nodebuffer?r.newBufferFrom(b,"utf-8"):(function(w){var m,c,h,o,l,v=w.length,S=0;for(o=0;o<v;o++)(64512&(c=w.charCodeAt(o)))==55296&&o+1<v&&(64512&(h=w.charCodeAt(o+1)))==56320&&(c=65536+(c-55296<<10)+(h-56320),o++),S+=c<128?1:c<2048?2:c<65536?3:4;for(m=f.uint8array?new Uint8Array(S):new Array(S),o=l=0;l<S;o++)(64512&(c=w.charCodeAt(o)))==55296&&o+1<v&&(64512&(h=w.charCodeAt(o+1)))==56320&&(c=65536+(c-55296<<10)+(h-56320),o++),c<128?m[l++]=c:(c<2048?m[l++]=192|c>>>6:(c<65536?m[l++]=224|c>>>12:(m[l++]=240|c>>>18,m[l++]=128|c>>>12&63),m[l++]=128|c>>>6&63),m[l++]=128|63&c);return m})(b)},a.utf8decode=function(b){return f.nodebuffer?u.transformTo("nodebuffer",b).toString("utf-8"):(function(w){var m,c,h,o,l=w.length,v=new Array(2*l);for(m=c=0;m<l;)if((h=w[m++])<128)v[c++]=h;else if(4<(o=p[h]))v[c++]=65533,m+=o-1;else{for(h&=o===2?31:o===3?15:7;1<o&&m<l;)h=h<<6|63&w[m++],o--;1<o?v[c++]=65533:h<65536?v[c++]=h:(h-=65536,v[c++]=55296|h>>10&1023,v[c++]=56320|1023&h)}return v.length!==c&&(v.subarray?v=v.subarray(0,c):v.length=c),u.applyFromCharCode(v)})(b=u.transformTo(f.uint8array?"uint8array":"array",b))},u.inherits(d,n),d.prototype.processChunk=function(b){var w=u.transformTo(f.uint8array?"uint8array":"array",b.data);if(this.leftOver&&this.leftOver.length){if(f.uint8array){var m=w;(w=new Uint8Array(m.length+this.leftOver.length)).set(this.leftOver,0),w.set(m,this.leftOver.length)}else w=this.leftOver.concat(w);this.leftOver=null}var c=(function(o,l){var v;for((l=l||o.length)>o.length&&(l=o.length),v=l-1;0<=v&&(192&o[v])==128;)v--;return v<0||v===0?l:v+p[o[v]]>l?v:l})(w),h=w;c!==w.length&&(f.uint8array?(h=w.subarray(0,c),this.leftOver=w.subarray(c,w.length)):(h=w.slice(0,c),this.leftOver=w.slice(c,w.length))),this.push({data:a.utf8decode(h),meta:b.meta})},d.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:a.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},a.Utf8DecodeWorker=d,u.inherits(g,n),g.prototype.processChunk=function(b){this.push({data:a.utf8encode(b.data),meta:b.meta})},a.Utf8EncodeWorker=g},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(s,i,a){var u=s("./support"),f=s("./base64"),r=s("./nodejsUtils"),n=s("./external");function p(m){return m}function _(m,c){for(var h=0;h<m.length;++h)c[h]=255&m.charCodeAt(h);return c}s("setimmediate"),a.newBlob=function(m,c){a.checkSupport("blob");try{return new Blob([m],{type:c})}catch{try{var h=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return h.append(m),h.getBlob(c)}catch{throw new Error("Bug : can't construct the Blob.")}}};var d={stringifyByChunk:function(m,c,h){var o=[],l=0,v=m.length;if(v<=h)return String.fromCharCode.apply(null,m);for(;l<v;)c==="array"||c==="nodebuffer"?o.push(String.fromCharCode.apply(null,m.slice(l,Math.min(l+h,v)))):o.push(String.fromCharCode.apply(null,m.subarray(l,Math.min(l+h,v)))),l+=h;return o.join("")},stringifyByChar:function(m){for(var c="",h=0;h<m.length;h++)c+=String.fromCharCode(m[h]);return c},applyCanBeUsed:{uint8array:(function(){try{return u.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}})(),nodebuffer:(function(){try{return u.nodebuffer&&String.fromCharCode.apply(null,r.allocBuffer(1)).length===1}catch{return!1}})()}};function g(m){var c=65536,h=a.getTypeOf(m),o=!0;if(h==="uint8array"?o=d.applyCanBeUsed.uint8array:h==="nodebuffer"&&(o=d.applyCanBeUsed.nodebuffer),o)for(;1<c;)try{return d.stringifyByChunk(m,h,c)}catch{c=Math.floor(c/2)}return d.stringifyByChar(m)}function b(m,c){for(var h=0;h<m.length;h++)c[h]=m[h];return c}a.applyFromCharCode=g;var w={};w.string={string:p,array:function(m){return _(m,new Array(m.length))},arraybuffer:function(m){return w.string.uint8array(m).buffer},uint8array:function(m){return _(m,new Uint8Array(m.length))},nodebuffer:function(m){return _(m,r.allocBuffer(m.length))}},w.array={string:g,array:p,arraybuffer:function(m){return new Uint8Array(m).buffer},uint8array:function(m){return new Uint8Array(m)},nodebuffer:function(m){return r.newBufferFrom(m)}},w.arraybuffer={string:function(m){return g(new Uint8Array(m))},array:function(m){return b(new Uint8Array(m),new Array(m.byteLength))},arraybuffer:p,uint8array:function(m){return new Uint8Array(m)},nodebuffer:function(m){return r.newBufferFrom(new Uint8Array(m))}},w.uint8array={string:g,array:function(m){return b(m,new Array(m.length))},arraybuffer:function(m){return m.buffer},uint8array:p,nodebuffer:function(m){return r.newBufferFrom(m)}},w.nodebuffer={string:g,array:function(m){return b(m,new Array(m.length))},arraybuffer:function(m){return w.nodebuffer.uint8array(m).buffer},uint8array:function(m){return b(m,new Uint8Array(m.length))},nodebuffer:p},a.transformTo=function(m,c){if(c=c||"",!m)return c;a.checkSupport(m);var h=a.getTypeOf(c);return w[h][m](c)},a.resolve=function(m){for(var c=m.split("/"),h=[],o=0;o<c.length;o++){var l=c[o];l==="."||l===""&&o!==0&&o!==c.length-1||(l===".."?h.pop():h.push(l))}return h.join("/")},a.getTypeOf=function(m){return typeof m=="string"?"string":Object.prototype.toString.call(m)==="[object Array]"?"array":u.nodebuffer&&r.isBuffer(m)?"nodebuffer":u.uint8array&&m instanceof Uint8Array?"uint8array":u.arraybuffer&&m instanceof ArrayBuffer?"arraybuffer":void 0},a.checkSupport=function(m){if(!u[m.toLowerCase()])throw new Error(m+" is not supported by this platform")},a.MAX_VALUE_16BITS=65535,a.MAX_VALUE_32BITS=-1,a.pretty=function(m){var c,h,o="";for(h=0;h<(m||"").length;h++)o+="\\x"+((c=m.charCodeAt(h))<16?"0":"")+c.toString(16).toUpperCase();return o},a.delay=function(m,c,h){setImmediate(function(){m.apply(h||null,c||[])})},a.inherits=function(m,c){function h(){}h.prototype=c.prototype,m.prototype=new h},a.extend=function(){var m,c,h={};for(m=0;m<arguments.length;m++)for(c in arguments[m])Object.prototype.hasOwnProperty.call(arguments[m],c)&&h[c]===void 0&&(h[c]=arguments[m][c]);return h},a.prepareContent=function(m,c,h,o,l){return n.Promise.resolve(c).then(function(v){return u.blob&&(v instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(v))!==-1)&&typeof FileReader<"u"?new n.Promise(function(S,x){var k=new FileReader;k.onload=function(C){S(C.target.result)},k.onerror=function(C){x(C.target.error)},k.readAsArrayBuffer(v)}):v}).then(function(v){var S=a.getTypeOf(v);return S?(S==="arraybuffer"?v=a.transformTo("uint8array",v):S==="string"&&(l?v=f.decode(v):h&&o!==!0&&(v=(function(x){return _(x,u.uint8array?new Uint8Array(x.length):new Array(x.length))})(v))),v):n.Promise.reject(new Error("Can't read the data of '"+m+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(s,i,a){var u=s("./reader/readerFor"),f=s("./utils"),r=s("./signature"),n=s("./zipEntry"),p=s("./support");function _(d){this.files=[],this.loadOptions=d}_.prototype={checkSignature:function(d){if(!this.reader.readAndCheckSignature(d)){this.reader.index-=4;var g=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+f.pretty(g)+", expected "+f.pretty(d)+")")}},isSignature:function(d,g){var b=this.reader.index;this.reader.setIndex(d);var w=this.reader.readString(4)===g;return this.reader.setIndex(b),w},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var d=this.reader.readData(this.zipCommentLength),g=p.uint8array?"uint8array":"array",b=f.transformTo(g,d);this.zipComment=this.loadOptions.decodeFileName(b)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var d,g,b,w=this.zip64EndOfCentralSize-44;0<w;)d=this.reader.readInt(2),g=this.reader.readInt(4),b=this.reader.readData(g),this.zip64ExtensibleData[d]={id:d,length:g,value:b}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var d,g;for(d=0;d<this.files.length;d++)g=this.files[d],this.reader.setIndex(g.localHeaderOffset),this.checkSignature(r.LOCAL_FILE_HEADER),g.readLocalPart(this.reader),g.handleUTF8(),g.processAttributes()},readCentralDir:function(){var d;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(r.CENTRAL_FILE_HEADER);)(d=new n({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(d);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var d=this.reader.lastIndexOfSignature(r.CENTRAL_DIRECTORY_END);if(d<0)throw this.isSignature(0,r.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(d);var g=d;if(this.checkSignature(r.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===f.MAX_VALUE_16BITS||this.diskWithCentralDirStart===f.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===f.MAX_VALUE_16BITS||this.centralDirRecords===f.MAX_VALUE_16BITS||this.centralDirSize===f.MAX_VALUE_32BITS||this.centralDirOffset===f.MAX_VALUE_32BITS){if(this.zip64=!0,(d=this.reader.lastIndexOfSignature(r.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(d),this.checkSignature(r.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,r.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(r.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(r.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var b=this.centralDirOffset+this.centralDirSize;this.zip64&&(b+=20,b+=12+this.zip64EndOfCentralSize);var w=g-b;if(0<w)this.isSignature(g,r.CENTRAL_FILE_HEADER)||(this.reader.zero=w);else if(w<0)throw new Error("Corrupted zip: missing "+Math.abs(w)+" bytes.")},prepareReader:function(d){this.reader=u(d)},load:function(d){this.prepareReader(d),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},i.exports=_},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(s,i,a){var u=s("./reader/readerFor"),f=s("./utils"),r=s("./compressedObject"),n=s("./crc32"),p=s("./utf8"),_=s("./compressions"),d=s("./support");function g(b,w){this.options=b,this.loadOptions=w}g.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(b){var w,m;if(b.skip(22),this.fileNameLength=b.readInt(2),m=b.readInt(2),this.fileName=b.readData(this.fileNameLength),b.skip(m),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((w=(function(c){for(var h in _)if(Object.prototype.hasOwnProperty.call(_,h)&&_[h].magic===c)return _[h];return null})(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+f.pretty(this.compressionMethod)+" unknown (inner file : "+f.transformTo("string",this.fileName)+")");this.decompressed=new r(this.compressedSize,this.uncompressedSize,this.crc32,w,b.readData(this.compressedSize))},readCentralPart:function(b){this.versionMadeBy=b.readInt(2),b.skip(2),this.bitFlag=b.readInt(2),this.compressionMethod=b.readString(2),this.date=b.readDate(),this.crc32=b.readInt(4),this.compressedSize=b.readInt(4),this.uncompressedSize=b.readInt(4);var w=b.readInt(2);if(this.extraFieldsLength=b.readInt(2),this.fileCommentLength=b.readInt(2),this.diskNumberStart=b.readInt(2),this.internalFileAttributes=b.readInt(2),this.externalFileAttributes=b.readInt(4),this.localHeaderOffset=b.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");b.skip(w),this.readExtraFields(b),this.parseZIP64ExtraField(b),this.fileComment=b.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var b=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),b==0&&(this.dosPermissions=63&this.externalFileAttributes),b==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var b=u(this.extraFields[1].value);this.uncompressedSize===f.MAX_VALUE_32BITS&&(this.uncompressedSize=b.readInt(8)),this.compressedSize===f.MAX_VALUE_32BITS&&(this.compressedSize=b.readInt(8)),this.localHeaderOffset===f.MAX_VALUE_32BITS&&(this.localHeaderOffset=b.readInt(8)),this.diskNumberStart===f.MAX_VALUE_32BITS&&(this.diskNumberStart=b.readInt(4))}},readExtraFields:function(b){var w,m,c,h=b.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});b.index+4<h;)w=b.readInt(2),m=b.readInt(2),c=b.readData(m),this.extraFields[w]={id:w,length:m,value:c};b.setIndex(h)},handleUTF8:function(){var b=d.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=p.utf8decode(this.fileName),this.fileCommentStr=p.utf8decode(this.fileComment);else{var w=this.findExtraFieldUnicodePath();if(w!==null)this.fileNameStr=w;else{var m=f.transformTo(b,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(m)}var c=this.findExtraFieldUnicodeComment();if(c!==null)this.fileCommentStr=c;else{var h=f.transformTo(b,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(h)}}},findExtraFieldUnicodePath:function(){var b=this.extraFields[28789];if(b){var w=u(b.value);return w.readInt(1)!==1||n(this.fileName)!==w.readInt(4)?null:p.utf8decode(w.readData(b.length-5))}return null},findExtraFieldUnicodeComment:function(){var b=this.extraFields[25461];if(b){var w=u(b.value);return w.readInt(1)!==1||n(this.fileComment)!==w.readInt(4)?null:p.utf8decode(w.readData(b.length-5))}return null}},i.exports=g},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(s,i,a){function u(w,m,c){this.name=w,this.dir=c.dir,this.date=c.date,this.comment=c.comment,this.unixPermissions=c.unixPermissions,this.dosPermissions=c.dosPermissions,this._data=m,this._dataBinary=c.binary,this.options={compression:c.compression,compressionOptions:c.compressionOptions}}var f=s("./stream/StreamHelper"),r=s("./stream/DataWorker"),n=s("./utf8"),p=s("./compressedObject"),_=s("./stream/GenericWorker");u.prototype={internalStream:function(w){var m=null,c="string";try{if(!w)throw new Error("No output type specified.");var h=(c=w.toLowerCase())==="string"||c==="text";c!=="binarystring"&&c!=="text"||(c="string"),m=this._decompressWorker();var o=!this._dataBinary;o&&!h&&(m=m.pipe(new n.Utf8EncodeWorker)),!o&&h&&(m=m.pipe(new n.Utf8DecodeWorker))}catch(l){(m=new _("error")).error(l)}return new f(m,c,"")},async:function(w,m){return this.internalStream(w).accumulate(m)},nodeStream:function(w,m){return this.internalStream(w||"nodebuffer").toNodejsStream(m)},_compressWorker:function(w,m){if(this._data instanceof p&&this._data.compression.magic===w.magic)return this._data.getCompressedWorker();var c=this._decompressWorker();return this._dataBinary||(c=c.pipe(new n.Utf8EncodeWorker)),p.createWorkerFrom(c,w,m)},_decompressWorker:function(){return this._data instanceof p?this._data.getContentWorker():this._data instanceof _?this._data:new r(this._data)}};for(var d=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],g=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},b=0;b<d.length;b++)u.prototype[d[b]]=g;i.exports=u},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(s,i,a){(function(u){var f,r,n=u.MutationObserver||u.WebKitMutationObserver;if(n){var p=0,_=new n(w),d=u.document.createTextNode("");_.observe(d,{characterData:!0}),f=function(){d.data=p=++p%2}}else if(u.setImmediate||u.MessageChannel===void 0)f="document"in u&&"onreadystatechange"in u.document.createElement("script")?function(){var m=u.document.createElement("script");m.onreadystatechange=function(){w(),m.onreadystatechange=null,m.parentNode.removeChild(m),m=null},u.document.documentElement.appendChild(m)}:function(){setTimeout(w,0)};else{var g=new u.MessageChannel;g.port1.onmessage=w,f=function(){g.port2.postMessage(0)}}var b=[];function w(){var m,c;r=!0;for(var h=b.length;h;){for(c=b,b=[],m=-1;++m<h;)c[m]();h=b.length}r=!1}i.exports=function(m){b.push(m)!==1||r||f()}}).call(this,typeof Jr<"u"?Jr:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(s,i,a){var u=s("immediate");function f(){}var r={},n=["REJECTED"],p=["FULFILLED"],_=["PENDING"];function d(h){if(typeof h!="function")throw new TypeError("resolver must be a function");this.state=_,this.queue=[],this.outcome=void 0,h!==f&&m(this,h)}function g(h,o,l){this.promise=h,typeof o=="function"&&(this.onFulfilled=o,this.callFulfilled=this.otherCallFulfilled),typeof l=="function"&&(this.onRejected=l,this.callRejected=this.otherCallRejected)}function b(h,o,l){u(function(){var v;try{v=o(l)}catch(S){return r.reject(h,S)}v===h?r.reject(h,new TypeError("Cannot resolve promise with itself")):r.resolve(h,v)})}function w(h){var o=h&&h.then;if(h&&(typeof h=="object"||typeof h=="function")&&typeof o=="function")return function(){o.apply(h,arguments)}}function m(h,o){var l=!1;function v(k){l||(l=!0,r.reject(h,k))}function S(k){l||(l=!0,r.resolve(h,k))}var x=c(function(){o(S,v)});x.status==="error"&&v(x.value)}function c(h,o){var l={};try{l.value=h(o),l.status="success"}catch(v){l.status="error",l.value=v}return l}(i.exports=d).prototype.finally=function(h){if(typeof h!="function")return this;var o=this.constructor;return this.then(function(l){return o.resolve(h()).then(function(){return l})},function(l){return o.resolve(h()).then(function(){throw l})})},d.prototype.catch=function(h){return this.then(null,h)},d.prototype.then=function(h,o){if(typeof h!="function"&&this.state===p||typeof o!="function"&&this.state===n)return this;var l=new this.constructor(f);return this.state!==_?b(l,this.state===p?h:o,this.outcome):this.queue.push(new g(l,h,o)),l},g.prototype.callFulfilled=function(h){r.resolve(this.promise,h)},g.prototype.otherCallFulfilled=function(h){b(this.promise,this.onFulfilled,h)},g.prototype.callRejected=function(h){r.reject(this.promise,h)},g.prototype.otherCallRejected=function(h){b(this.promise,this.onRejected,h)},r.resolve=function(h,o){var l=c(w,o);if(l.status==="error")return r.reject(h,l.value);var v=l.value;if(v)m(h,v);else{h.state=p,h.outcome=o;for(var S=-1,x=h.queue.length;++S<x;)h.queue[S].callFulfilled(o)}return h},r.reject=function(h,o){h.state=n,h.outcome=o;for(var l=-1,v=h.queue.length;++l<v;)h.queue[l].callRejected(o);return h},d.resolve=function(h){return h instanceof this?h:r.resolve(new this(f),h)},d.reject=function(h){var o=new this(f);return r.reject(o,h)},d.all=function(h){var o=this;if(Object.prototype.toString.call(h)!=="[object Array]")return this.reject(new TypeError("must be an array"));var l=h.length,v=!1;if(!l)return this.resolve([]);for(var S=new Array(l),x=0,k=-1,C=new this(f);++k<l;)A(h[k],k);return C;function A(N,G){o.resolve(N).then(function(L){S[G]=L,++x!==l||v||(v=!0,r.resolve(C,S))},function(L){v||(v=!0,r.reject(C,L))})}},d.race=function(h){var o=this;if(Object.prototype.toString.call(h)!=="[object Array]")return this.reject(new TypeError("must be an array"));var l=h.length,v=!1;if(!l)return this.resolve([]);for(var S=-1,x=new this(f);++S<l;)k=h[S],o.resolve(k).then(function(C){v||(v=!0,r.resolve(x,C))},function(C){v||(v=!0,r.reject(x,C))});var k;return x}},{immediate:36}],38:[function(s,i,a){var u={};(0,s("./lib/utils/common").assign)(u,s("./lib/deflate"),s("./lib/inflate"),s("./lib/zlib/constants")),i.exports=u},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(s,i,a){var u=s("./zlib/deflate"),f=s("./utils/common"),r=s("./utils/strings"),n=s("./zlib/messages"),p=s("./zlib/zstream"),_=Object.prototype.toString,d=0,g=-1,b=0,w=8;function m(h){if(!(this instanceof m))return new m(h);this.options=f.assign({level:g,method:w,chunkSize:16384,windowBits:15,memLevel:8,strategy:b,to:""},h||{});var o=this.options;o.raw&&0<o.windowBits?o.windowBits=-o.windowBits:o.gzip&&0<o.windowBits&&o.windowBits<16&&(o.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new p,this.strm.avail_out=0;var l=u.deflateInit2(this.strm,o.level,o.method,o.windowBits,o.memLevel,o.strategy);if(l!==d)throw new Error(n[l]);if(o.header&&u.deflateSetHeader(this.strm,o.header),o.dictionary){var v;if(v=typeof o.dictionary=="string"?r.string2buf(o.dictionary):_.call(o.dictionary)==="[object ArrayBuffer]"?new Uint8Array(o.dictionary):o.dictionary,(l=u.deflateSetDictionary(this.strm,v))!==d)throw new Error(n[l]);this._dict_set=!0}}function c(h,o){var l=new m(o);if(l.push(h,!0),l.err)throw l.msg||n[l.err];return l.result}m.prototype.push=function(h,o){var l,v,S=this.strm,x=this.options.chunkSize;if(this.ended)return!1;v=o===~~o?o:o===!0?4:0,typeof h=="string"?S.input=r.string2buf(h):_.call(h)==="[object ArrayBuffer]"?S.input=new Uint8Array(h):S.input=h,S.next_in=0,S.avail_in=S.input.length;do{if(S.avail_out===0&&(S.output=new f.Buf8(x),S.next_out=0,S.avail_out=x),(l=u.deflate(S,v))!==1&&l!==d)return this.onEnd(l),!(this.ended=!0);S.avail_out!==0&&(S.avail_in!==0||v!==4&&v!==2)||(this.options.to==="string"?this.onData(r.buf2binstring(f.shrinkBuf(S.output,S.next_out))):this.onData(f.shrinkBuf(S.output,S.next_out)))}while((0<S.avail_in||S.avail_out===0)&&l!==1);return v===4?(l=u.deflateEnd(this.strm),this.onEnd(l),this.ended=!0,l===d):v!==2||(this.onEnd(d),!(S.avail_out=0))},m.prototype.onData=function(h){this.chunks.push(h)},m.prototype.onEnd=function(h){h===d&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=f.flattenChunks(this.chunks)),this.chunks=[],this.err=h,this.msg=this.strm.msg},a.Deflate=m,a.deflate=c,a.deflateRaw=function(h,o){return(o=o||{}).raw=!0,c(h,o)},a.gzip=function(h,o){return(o=o||{}).gzip=!0,c(h,o)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(s,i,a){var u=s("./zlib/inflate"),f=s("./utils/common"),r=s("./utils/strings"),n=s("./zlib/constants"),p=s("./zlib/messages"),_=s("./zlib/zstream"),d=s("./zlib/gzheader"),g=Object.prototype.toString;function b(m){if(!(this instanceof b))return new b(m);this.options=f.assign({chunkSize:16384,windowBits:0,to:""},m||{});var c=this.options;c.raw&&0<=c.windowBits&&c.windowBits<16&&(c.windowBits=-c.windowBits,c.windowBits===0&&(c.windowBits=-15)),!(0<=c.windowBits&&c.windowBits<16)||m&&m.windowBits||(c.windowBits+=32),15<c.windowBits&&c.windowBits<48&&(15&c.windowBits)==0&&(c.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new _,this.strm.avail_out=0;var h=u.inflateInit2(this.strm,c.windowBits);if(h!==n.Z_OK)throw new Error(p[h]);this.header=new d,u.inflateGetHeader(this.strm,this.header)}function w(m,c){var h=new b(c);if(h.push(m,!0),h.err)throw h.msg||p[h.err];return h.result}b.prototype.push=function(m,c){var h,o,l,v,S,x,k=this.strm,C=this.options.chunkSize,A=this.options.dictionary,N=!1;if(this.ended)return!1;o=c===~~c?c:c===!0?n.Z_FINISH:n.Z_NO_FLUSH,typeof m=="string"?k.input=r.binstring2buf(m):g.call(m)==="[object ArrayBuffer]"?k.input=new Uint8Array(m):k.input=m,k.next_in=0,k.avail_in=k.input.length;do{if(k.avail_out===0&&(k.output=new f.Buf8(C),k.next_out=0,k.avail_out=C),(h=u.inflate(k,n.Z_NO_FLUSH))===n.Z_NEED_DICT&&A&&(x=typeof A=="string"?r.string2buf(A):g.call(A)==="[object ArrayBuffer]"?new Uint8Array(A):A,h=u.inflateSetDictionary(this.strm,x)),h===n.Z_BUF_ERROR&&N===!0&&(h=n.Z_OK,N=!1),h!==n.Z_STREAM_END&&h!==n.Z_OK)return this.onEnd(h),!(this.ended=!0);k.next_out&&(k.avail_out!==0&&h!==n.Z_STREAM_END&&(k.avail_in!==0||o!==n.Z_FINISH&&o!==n.Z_SYNC_FLUSH)||(this.options.to==="string"?(l=r.utf8border(k.output,k.next_out),v=k.next_out-l,S=r.buf2string(k.output,l),k.next_out=v,k.avail_out=C-v,v&&f.arraySet(k.output,k.output,l,v,0),this.onData(S)):this.onData(f.shrinkBuf(k.output,k.next_out)))),k.avail_in===0&&k.avail_out===0&&(N=!0)}while((0<k.avail_in||k.avail_out===0)&&h!==n.Z_STREAM_END);return h===n.Z_STREAM_END&&(o=n.Z_FINISH),o===n.Z_FINISH?(h=u.inflateEnd(this.strm),this.onEnd(h),this.ended=!0,h===n.Z_OK):o!==n.Z_SYNC_FLUSH||(this.onEnd(n.Z_OK),!(k.avail_out=0))},b.prototype.onData=function(m){this.chunks.push(m)},b.prototype.onEnd=function(m){m===n.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=f.flattenChunks(this.chunks)),this.chunks=[],this.err=m,this.msg=this.strm.msg},a.Inflate=b,a.inflate=w,a.inflateRaw=function(m,c){return(c=c||{}).raw=!0,w(m,c)},a.ungzip=w},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(s,i,a){var u=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";a.assign=function(n){for(var p=Array.prototype.slice.call(arguments,1);p.length;){var _=p.shift();if(_){if(typeof _!="object")throw new TypeError(_+"must be non-object");for(var d in _)_.hasOwnProperty(d)&&(n[d]=_[d])}}return n},a.shrinkBuf=function(n,p){return n.length===p?n:n.subarray?n.subarray(0,p):(n.length=p,n)};var f={arraySet:function(n,p,_,d,g){if(p.subarray&&n.subarray)n.set(p.subarray(_,_+d),g);else for(var b=0;b<d;b++)n[g+b]=p[_+b]},flattenChunks:function(n){var p,_,d,g,b,w;for(p=d=0,_=n.length;p<_;p++)d+=n[p].length;for(w=new Uint8Array(d),p=g=0,_=n.length;p<_;p++)b=n[p],w.set(b,g),g+=b.length;return w}},r={arraySet:function(n,p,_,d,g){for(var b=0;b<d;b++)n[g+b]=p[_+b]},flattenChunks:function(n){return[].concat.apply([],n)}};a.setTyped=function(n){n?(a.Buf8=Uint8Array,a.Buf16=Uint16Array,a.Buf32=Int32Array,a.assign(a,f)):(a.Buf8=Array,a.Buf16=Array,a.Buf32=Array,a.assign(a,r))},a.setTyped(u)},{}],42:[function(s,i,a){var u=s("./common"),f=!0,r=!0;try{String.fromCharCode.apply(null,[0])}catch{f=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{r=!1}for(var n=new u.Buf8(256),p=0;p<256;p++)n[p]=252<=p?6:248<=p?5:240<=p?4:224<=p?3:192<=p?2:1;function _(d,g){if(g<65537&&(d.subarray&&r||!d.subarray&&f))return String.fromCharCode.apply(null,u.shrinkBuf(d,g));for(var b="",w=0;w<g;w++)b+=String.fromCharCode(d[w]);return b}n[254]=n[254]=1,a.string2buf=function(d){var g,b,w,m,c,h=d.length,o=0;for(m=0;m<h;m++)(64512&(b=d.charCodeAt(m)))==55296&&m+1<h&&(64512&(w=d.charCodeAt(m+1)))==56320&&(b=65536+(b-55296<<10)+(w-56320),m++),o+=b<128?1:b<2048?2:b<65536?3:4;for(g=new u.Buf8(o),m=c=0;c<o;m++)(64512&(b=d.charCodeAt(m)))==55296&&m+1<h&&(64512&(w=d.charCodeAt(m+1)))==56320&&(b=65536+(b-55296<<10)+(w-56320),m++),b<128?g[c++]=b:(b<2048?g[c++]=192|b>>>6:(b<65536?g[c++]=224|b>>>12:(g[c++]=240|b>>>18,g[c++]=128|b>>>12&63),g[c++]=128|b>>>6&63),g[c++]=128|63&b);return g},a.buf2binstring=function(d){return _(d,d.length)},a.binstring2buf=function(d){for(var g=new u.Buf8(d.length),b=0,w=g.length;b<w;b++)g[b]=d.charCodeAt(b);return g},a.buf2string=function(d,g){var b,w,m,c,h=g||d.length,o=new Array(2*h);for(b=w=0;b<h;)if((m=d[b++])<128)o[w++]=m;else if(4<(c=n[m]))o[w++]=65533,b+=c-1;else{for(m&=c===2?31:c===3?15:7;1<c&&b<h;)m=m<<6|63&d[b++],c--;1<c?o[w++]=65533:m<65536?o[w++]=m:(m-=65536,o[w++]=55296|m>>10&1023,o[w++]=56320|1023&m)}return _(o,w)},a.utf8border=function(d,g){var b;for((g=g||d.length)>d.length&&(g=d.length),b=g-1;0<=b&&(192&d[b])==128;)b--;return b<0||b===0?g:b+n[d[b]]>g?b:g}},{"./common":41}],43:[function(s,i,a){i.exports=function(u,f,r,n){for(var p=65535&u|0,_=u>>>16&65535|0,d=0;r!==0;){for(r-=d=2e3<r?2e3:r;_=_+(p=p+f[n++]|0)|0,--d;);p%=65521,_%=65521}return p|_<<16|0}},{}],44:[function(s,i,a){i.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(s,i,a){var u=(function(){for(var f,r=[],n=0;n<256;n++){f=n;for(var p=0;p<8;p++)f=1&f?3988292384^f>>>1:f>>>1;r[n]=f}return r})();i.exports=function(f,r,n,p){var _=u,d=p+n;f^=-1;for(var g=p;g<d;g++)f=f>>>8^_[255&(f^r[g])];return-1^f}},{}],46:[function(s,i,a){var u,f=s("../utils/common"),r=s("./trees"),n=s("./adler32"),p=s("./crc32"),_=s("./messages"),d=0,g=4,b=0,w=-2,m=-1,c=4,h=2,o=8,l=9,v=286,S=30,x=19,k=2*v+1,C=15,A=3,N=258,G=N+A+1,L=42,I=113,E=1,X=2,Q=3,J=4;function ie(y,P){return y.msg=_[P],P}function T(y){return(y<<1)-(4<y?9:0)}function U(y){for(var P=y.length;0<=--P;)y[P]=0}function M(y){var P=y.state,K=P.pending;K>y.avail_out&&(K=y.avail_out),K!==0&&(f.arraySet(y.output,P.pending_buf,P.pending_out,K,y.next_out),y.next_out+=K,P.pending_out+=K,y.total_out+=K,y.avail_out-=K,P.pending-=K,P.pending===0&&(P.pending_out=0))}function $(y,P){r._tr_flush_block(y,0<=y.block_start?y.block_start:-1,y.strstart-y.block_start,P),y.block_start=y.strstart,M(y.strm)}function ne(y,P){y.pending_buf[y.pending++]=P}function le(y,P){y.pending_buf[y.pending++]=P>>>8&255,y.pending_buf[y.pending++]=255&P}function ce(y,P){var K,D,B=y.max_chain_length,V=y.strstart,Z=y.prev_length,z=y.nice_match,H=y.strstart>y.w_size-G?y.strstart-(y.w_size-G):0,W=y.window,se=y.w_mask,re=y.prev,ae=y.strstart+N,ge=W[V+Z-1],_e=W[V+Z];y.prev_length>=y.good_match&&(B>>=2),z>y.lookahead&&(z=y.lookahead);do if(W[(K=P)+Z]===_e&&W[K+Z-1]===ge&&W[K]===W[V]&&W[++K]===W[V+1]){V+=2,K++;do;while(W[++V]===W[++K]&&W[++V]===W[++K]&&W[++V]===W[++K]&&W[++V]===W[++K]&&W[++V]===W[++K]&&W[++V]===W[++K]&&W[++V]===W[++K]&&W[++V]===W[++K]&&V<ae);if(D=N-(ae-V),V=ae-N,Z<D){if(y.match_start=P,z<=(Z=D))break;ge=W[V+Z-1],_e=W[V+Z]}}while((P=re[P&se])>H&&--B!=0);return Z<=y.lookahead?Z:y.lookahead}function pe(y){var P,K,D,B,V,Z,z,H,W,se,re=y.w_size;do{if(B=y.window_size-y.lookahead-y.strstart,y.strstart>=re+(re-G)){for(f.arraySet(y.window,y.window,re,re,0),y.match_start-=re,y.strstart-=re,y.block_start-=re,P=K=y.hash_size;D=y.head[--P],y.head[P]=re<=D?D-re:0,--K;);for(P=K=re;D=y.prev[--P],y.prev[P]=re<=D?D-re:0,--K;);B+=re}if(y.strm.avail_in===0)break;if(Z=y.strm,z=y.window,H=y.strstart+y.lookahead,W=B,se=void 0,se=Z.avail_in,W<se&&(se=W),K=se===0?0:(Z.avail_in-=se,f.arraySet(z,Z.input,Z.next_in,se,H),Z.state.wrap===1?Z.adler=n(Z.adler,z,se,H):Z.state.wrap===2&&(Z.adler=p(Z.adler,z,se,H)),Z.next_in+=se,Z.total_in+=se,se),y.lookahead+=K,y.lookahead+y.insert>=A)for(V=y.strstart-y.insert,y.ins_h=y.window[V],y.ins_h=(y.ins_h<<y.hash_shift^y.window[V+1])&y.hash_mask;y.insert&&(y.ins_h=(y.ins_h<<y.hash_shift^y.window[V+A-1])&y.hash_mask,y.prev[V&y.w_mask]=y.head[y.ins_h],y.head[y.ins_h]=V,V++,y.insert--,!(y.lookahead+y.insert<A)););}while(y.lookahead<G&&y.strm.avail_in!==0)}function j(y,P){for(var K,D;;){if(y.lookahead<G){if(pe(y),y.lookahead<G&&P===d)return E;if(y.lookahead===0)break}if(K=0,y.lookahead>=A&&(y.ins_h=(y.ins_h<<y.hash_shift^y.window[y.strstart+A-1])&y.hash_mask,K=y.prev[y.strstart&y.w_mask]=y.head[y.ins_h],y.head[y.ins_h]=y.strstart),K!==0&&y.strstart-K<=y.w_size-G&&(y.match_length=ce(y,K)),y.match_length>=A)if(D=r._tr_tally(y,y.strstart-y.match_start,y.match_length-A),y.lookahead-=y.match_length,y.match_length<=y.max_lazy_match&&y.lookahead>=A){for(y.match_length--;y.strstart++,y.ins_h=(y.ins_h<<y.hash_shift^y.window[y.strstart+A-1])&y.hash_mask,K=y.prev[y.strstart&y.w_mask]=y.head[y.ins_h],y.head[y.ins_h]=y.strstart,--y.match_length!=0;);y.strstart++}else y.strstart+=y.match_length,y.match_length=0,y.ins_h=y.window[y.strstart],y.ins_h=(y.ins_h<<y.hash_shift^y.window[y.strstart+1])&y.hash_mask;else D=r._tr_tally(y,0,y.window[y.strstart]),y.lookahead--,y.strstart++;if(D&&($(y,!1),y.strm.avail_out===0))return E}return y.insert=y.strstart<A-1?y.strstart:A-1,P===g?($(y,!0),y.strm.avail_out===0?Q:J):y.last_lit&&($(y,!1),y.strm.avail_out===0)?E:X}function O(y,P){for(var K,D,B;;){if(y.lookahead<G){if(pe(y),y.lookahead<G&&P===d)return E;if(y.lookahead===0)break}if(K=0,y.lookahead>=A&&(y.ins_h=(y.ins_h<<y.hash_shift^y.window[y.strstart+A-1])&y.hash_mask,K=y.prev[y.strstart&y.w_mask]=y.head[y.ins_h],y.head[y.ins_h]=y.strstart),y.prev_length=y.match_length,y.prev_match=y.match_start,y.match_length=A-1,K!==0&&y.prev_length<y.max_lazy_match&&y.strstart-K<=y.w_size-G&&(y.match_length=ce(y,K),y.match_length<=5&&(y.strategy===1||y.match_length===A&&4096<y.strstart-y.match_start)&&(y.match_length=A-1)),y.prev_length>=A&&y.match_length<=y.prev_length){for(B=y.strstart+y.lookahead-A,D=r._tr_tally(y,y.strstart-1-y.prev_match,y.prev_length-A),y.lookahead-=y.prev_length-1,y.prev_length-=2;++y.strstart<=B&&(y.ins_h=(y.ins_h<<y.hash_shift^y.window[y.strstart+A-1])&y.hash_mask,K=y.prev[y.strstart&y.w_mask]=y.head[y.ins_h],y.head[y.ins_h]=y.strstart),--y.prev_length!=0;);if(y.match_available=0,y.match_length=A-1,y.strstart++,D&&($(y,!1),y.strm.avail_out===0))return E}else if(y.match_available){if((D=r._tr_tally(y,0,y.window[y.strstart-1]))&&$(y,!1),y.strstart++,y.lookahead--,y.strm.avail_out===0)return E}else y.match_available=1,y.strstart++,y.lookahead--}return y.match_available&&(D=r._tr_tally(y,0,y.window[y.strstart-1]),y.match_available=0),y.insert=y.strstart<A-1?y.strstart:A-1,P===g?($(y,!0),y.strm.avail_out===0?Q:J):y.last_lit&&($(y,!1),y.strm.avail_out===0)?E:X}function ee(y,P,K,D,B){this.good_length=y,this.max_lazy=P,this.nice_length=K,this.max_chain=D,this.func=B}function te(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=o,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new f.Buf16(2*k),this.dyn_dtree=new f.Buf16(2*(2*S+1)),this.bl_tree=new f.Buf16(2*(2*x+1)),U(this.dyn_ltree),U(this.dyn_dtree),U(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new f.Buf16(C+1),this.heap=new f.Buf16(2*v+1),U(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new f.Buf16(2*v+1),U(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function F(y){var P;return y&&y.state?(y.total_in=y.total_out=0,y.data_type=h,(P=y.state).pending=0,P.pending_out=0,P.wrap<0&&(P.wrap=-P.wrap),P.status=P.wrap?L:I,y.adler=P.wrap===2?0:1,P.last_flush=d,r._tr_init(P),b):ie(y,w)}function q(y){var P=F(y);return P===b&&(function(K){K.window_size=2*K.w_size,U(K.head),K.max_lazy_match=u[K.level].max_lazy,K.good_match=u[K.level].good_length,K.nice_match=u[K.level].nice_length,K.max_chain_length=u[K.level].max_chain,K.strstart=0,K.block_start=0,K.lookahead=0,K.insert=0,K.match_length=K.prev_length=A-1,K.match_available=0,K.ins_h=0})(y.state),P}function Y(y,P,K,D,B,V){if(!y)return w;var Z=1;if(P===m&&(P=6),D<0?(Z=0,D=-D):15<D&&(Z=2,D-=16),B<1||l<B||K!==o||D<8||15<D||P<0||9<P||V<0||c<V)return ie(y,w);D===8&&(D=9);var z=new te;return(y.state=z).strm=y,z.wrap=Z,z.gzhead=null,z.w_bits=D,z.w_size=1<<z.w_bits,z.w_mask=z.w_size-1,z.hash_bits=B+7,z.hash_size=1<<z.hash_bits,z.hash_mask=z.hash_size-1,z.hash_shift=~~((z.hash_bits+A-1)/A),z.window=new f.Buf8(2*z.w_size),z.head=new f.Buf16(z.hash_size),z.prev=new f.Buf16(z.w_size),z.lit_bufsize=1<<B+6,z.pending_buf_size=4*z.lit_bufsize,z.pending_buf=new f.Buf8(z.pending_buf_size),z.d_buf=1*z.lit_bufsize,z.l_buf=3*z.lit_bufsize,z.level=P,z.strategy=V,z.method=K,q(y)}u=[new ee(0,0,0,0,function(y,P){var K=65535;for(K>y.pending_buf_size-5&&(K=y.pending_buf_size-5);;){if(y.lookahead<=1){if(pe(y),y.lookahead===0&&P===d)return E;if(y.lookahead===0)break}y.strstart+=y.lookahead,y.lookahead=0;var D=y.block_start+K;if((y.strstart===0||y.strstart>=D)&&(y.lookahead=y.strstart-D,y.strstart=D,$(y,!1),y.strm.avail_out===0)||y.strstart-y.block_start>=y.w_size-G&&($(y,!1),y.strm.avail_out===0))return E}return y.insert=0,P===g?($(y,!0),y.strm.avail_out===0?Q:J):(y.strstart>y.block_start&&($(y,!1),y.strm.avail_out),E)}),new ee(4,4,8,4,j),new ee(4,5,16,8,j),new ee(4,6,32,32,j),new ee(4,4,16,16,O),new ee(8,16,32,32,O),new ee(8,16,128,128,O),new ee(8,32,128,256,O),new ee(32,128,258,1024,O),new ee(32,258,258,4096,O)],a.deflateInit=function(y,P){return Y(y,P,o,15,8,0)},a.deflateInit2=Y,a.deflateReset=q,a.deflateResetKeep=F,a.deflateSetHeader=function(y,P){return y&&y.state?y.state.wrap!==2?w:(y.state.gzhead=P,b):w},a.deflate=function(y,P){var K,D,B,V;if(!y||!y.state||5<P||P<0)return y?ie(y,w):w;if(D=y.state,!y.output||!y.input&&y.avail_in!==0||D.status===666&&P!==g)return ie(y,y.avail_out===0?-5:w);if(D.strm=y,K=D.last_flush,D.last_flush=P,D.status===L)if(D.wrap===2)y.adler=0,ne(D,31),ne(D,139),ne(D,8),D.gzhead?(ne(D,(D.gzhead.text?1:0)+(D.gzhead.hcrc?2:0)+(D.gzhead.extra?4:0)+(D.gzhead.name?8:0)+(D.gzhead.comment?16:0)),ne(D,255&D.gzhead.time),ne(D,D.gzhead.time>>8&255),ne(D,D.gzhead.time>>16&255),ne(D,D.gzhead.time>>24&255),ne(D,D.level===9?2:2<=D.strategy||D.level<2?4:0),ne(D,255&D.gzhead.os),D.gzhead.extra&&D.gzhead.extra.length&&(ne(D,255&D.gzhead.extra.length),ne(D,D.gzhead.extra.length>>8&255)),D.gzhead.hcrc&&(y.adler=p(y.adler,D.pending_buf,D.pending,0)),D.gzindex=0,D.status=69):(ne(D,0),ne(D,0),ne(D,0),ne(D,0),ne(D,0),ne(D,D.level===9?2:2<=D.strategy||D.level<2?4:0),ne(D,3),D.status=I);else{var Z=o+(D.w_bits-8<<4)<<8;Z|=(2<=D.strategy||D.level<2?0:D.level<6?1:D.level===6?2:3)<<6,D.strstart!==0&&(Z|=32),Z+=31-Z%31,D.status=I,le(D,Z),D.strstart!==0&&(le(D,y.adler>>>16),le(D,65535&y.adler)),y.adler=1}if(D.status===69)if(D.gzhead.extra){for(B=D.pending;D.gzindex<(65535&D.gzhead.extra.length)&&(D.pending!==D.pending_buf_size||(D.gzhead.hcrc&&D.pending>B&&(y.adler=p(y.adler,D.pending_buf,D.pending-B,B)),M(y),B=D.pending,D.pending!==D.pending_buf_size));)ne(D,255&D.gzhead.extra[D.gzindex]),D.gzindex++;D.gzhead.hcrc&&D.pending>B&&(y.adler=p(y.adler,D.pending_buf,D.pending-B,B)),D.gzindex===D.gzhead.extra.length&&(D.gzindex=0,D.status=73)}else D.status=73;if(D.status===73)if(D.gzhead.name){B=D.pending;do{if(D.pending===D.pending_buf_size&&(D.gzhead.hcrc&&D.pending>B&&(y.adler=p(y.adler,D.pending_buf,D.pending-B,B)),M(y),B=D.pending,D.pending===D.pending_buf_size)){V=1;break}V=D.gzindex<D.gzhead.name.length?255&D.gzhead.name.charCodeAt(D.gzindex++):0,ne(D,V)}while(V!==0);D.gzhead.hcrc&&D.pending>B&&(y.adler=p(y.adler,D.pending_buf,D.pending-B,B)),V===0&&(D.gzindex=0,D.status=91)}else D.status=91;if(D.status===91)if(D.gzhead.comment){B=D.pending;do{if(D.pending===D.pending_buf_size&&(D.gzhead.hcrc&&D.pending>B&&(y.adler=p(y.adler,D.pending_buf,D.pending-B,B)),M(y),B=D.pending,D.pending===D.pending_buf_size)){V=1;break}V=D.gzindex<D.gzhead.comment.length?255&D.gzhead.comment.charCodeAt(D.gzindex++):0,ne(D,V)}while(V!==0);D.gzhead.hcrc&&D.pending>B&&(y.adler=p(y.adler,D.pending_buf,D.pending-B,B)),V===0&&(D.status=103)}else D.status=103;if(D.status===103&&(D.gzhead.hcrc?(D.pending+2>D.pending_buf_size&&M(y),D.pending+2<=D.pending_buf_size&&(ne(D,255&y.adler),ne(D,y.adler>>8&255),y.adler=0,D.status=I)):D.status=I),D.pending!==0){if(M(y),y.avail_out===0)return D.last_flush=-1,b}else if(y.avail_in===0&&T(P)<=T(K)&&P!==g)return ie(y,-5);if(D.status===666&&y.avail_in!==0)return ie(y,-5);if(y.avail_in!==0||D.lookahead!==0||P!==d&&D.status!==666){var z=D.strategy===2?(function(H,W){for(var se;;){if(H.lookahead===0&&(pe(H),H.lookahead===0)){if(W===d)return E;break}if(H.match_length=0,se=r._tr_tally(H,0,H.window[H.strstart]),H.lookahead--,H.strstart++,se&&($(H,!1),H.strm.avail_out===0))return E}return H.insert=0,W===g?($(H,!0),H.strm.avail_out===0?Q:J):H.last_lit&&($(H,!1),H.strm.avail_out===0)?E:X})(D,P):D.strategy===3?(function(H,W){for(var se,re,ae,ge,_e=H.window;;){if(H.lookahead<=N){if(pe(H),H.lookahead<=N&&W===d)return E;if(H.lookahead===0)break}if(H.match_length=0,H.lookahead>=A&&0<H.strstart&&(re=_e[ae=H.strstart-1])===_e[++ae]&&re===_e[++ae]&&re===_e[++ae]){ge=H.strstart+N;do;while(re===_e[++ae]&&re===_e[++ae]&&re===_e[++ae]&&re===_e[++ae]&&re===_e[++ae]&&re===_e[++ae]&&re===_e[++ae]&&re===_e[++ae]&&ae<ge);H.match_length=N-(ge-ae),H.match_length>H.lookahead&&(H.match_length=H.lookahead)}if(H.match_length>=A?(se=r._tr_tally(H,1,H.match_length-A),H.lookahead-=H.match_length,H.strstart+=H.match_length,H.match_length=0):(se=r._tr_tally(H,0,H.window[H.strstart]),H.lookahead--,H.strstart++),se&&($(H,!1),H.strm.avail_out===0))return E}return H.insert=0,W===g?($(H,!0),H.strm.avail_out===0?Q:J):H.last_lit&&($(H,!1),H.strm.avail_out===0)?E:X})(D,P):u[D.level].func(D,P);if(z!==Q&&z!==J||(D.status=666),z===E||z===Q)return y.avail_out===0&&(D.last_flush=-1),b;if(z===X&&(P===1?r._tr_align(D):P!==5&&(r._tr_stored_block(D,0,0,!1),P===3&&(U(D.head),D.lookahead===0&&(D.strstart=0,D.block_start=0,D.insert=0))),M(y),y.avail_out===0))return D.last_flush=-1,b}return P!==g?b:D.wrap<=0?1:(D.wrap===2?(ne(D,255&y.adler),ne(D,y.adler>>8&255),ne(D,y.adler>>16&255),ne(D,y.adler>>24&255),ne(D,255&y.total_in),ne(D,y.total_in>>8&255),ne(D,y.total_in>>16&255),ne(D,y.total_in>>24&255)):(le(D,y.adler>>>16),le(D,65535&y.adler)),M(y),0<D.wrap&&(D.wrap=-D.wrap),D.pending!==0?b:1)},a.deflateEnd=function(y){var P;return y&&y.state?(P=y.state.status)!==L&&P!==69&&P!==73&&P!==91&&P!==103&&P!==I&&P!==666?ie(y,w):(y.state=null,P===I?ie(y,-3):b):w},a.deflateSetDictionary=function(y,P){var K,D,B,V,Z,z,H,W,se=P.length;if(!y||!y.state||(V=(K=y.state).wrap)===2||V===1&&K.status!==L||K.lookahead)return w;for(V===1&&(y.adler=n(y.adler,P,se,0)),K.wrap=0,se>=K.w_size&&(V===0&&(U(K.head),K.strstart=0,K.block_start=0,K.insert=0),W=new f.Buf8(K.w_size),f.arraySet(W,P,se-K.w_size,K.w_size,0),P=W,se=K.w_size),Z=y.avail_in,z=y.next_in,H=y.input,y.avail_in=se,y.next_in=0,y.input=P,pe(K);K.lookahead>=A;){for(D=K.strstart,B=K.lookahead-(A-1);K.ins_h=(K.ins_h<<K.hash_shift^K.window[D+A-1])&K.hash_mask,K.prev[D&K.w_mask]=K.head[K.ins_h],K.head[K.ins_h]=D,D++,--B;);K.strstart=D,K.lookahead=A-1,pe(K)}return K.strstart+=K.lookahead,K.block_start=K.strstart,K.insert=K.lookahead,K.lookahead=0,K.match_length=K.prev_length=A-1,K.match_available=0,y.next_in=z,y.input=H,y.avail_in=Z,K.wrap=V,b},a.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(s,i,a){i.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(s,i,a){i.exports=function(u,f){var r,n,p,_,d,g,b,w,m,c,h,o,l,v,S,x,k,C,A,N,G,L,I,E,X;r=u.state,n=u.next_in,E=u.input,p=n+(u.avail_in-5),_=u.next_out,X=u.output,d=_-(f-u.avail_out),g=_+(u.avail_out-257),b=r.dmax,w=r.wsize,m=r.whave,c=r.wnext,h=r.window,o=r.hold,l=r.bits,v=r.lencode,S=r.distcode,x=(1<<r.lenbits)-1,k=(1<<r.distbits)-1;e:do{l<15&&(o+=E[n++]<<l,l+=8,o+=E[n++]<<l,l+=8),C=v[o&x];t:for(;;){if(o>>>=A=C>>>24,l-=A,(A=C>>>16&255)===0)X[_++]=65535&C;else{if(!(16&A)){if((64&A)==0){C=v[(65535&C)+(o&(1<<A)-1)];continue t}if(32&A){r.mode=12;break e}u.msg="invalid literal/length code",r.mode=30;break e}N=65535&C,(A&=15)&&(l<A&&(o+=E[n++]<<l,l+=8),N+=o&(1<<A)-1,o>>>=A,l-=A),l<15&&(o+=E[n++]<<l,l+=8,o+=E[n++]<<l,l+=8),C=S[o&k];s:for(;;){if(o>>>=A=C>>>24,l-=A,!(16&(A=C>>>16&255))){if((64&A)==0){C=S[(65535&C)+(o&(1<<A)-1)];continue s}u.msg="invalid distance code",r.mode=30;break e}if(G=65535&C,l<(A&=15)&&(o+=E[n++]<<l,(l+=8)<A&&(o+=E[n++]<<l,l+=8)),b<(G+=o&(1<<A)-1)){u.msg="invalid distance too far back",r.mode=30;break e}if(o>>>=A,l-=A,(A=_-d)<G){if(m<(A=G-A)&&r.sane){u.msg="invalid distance too far back",r.mode=30;break e}if(I=h,(L=0)===c){if(L+=w-A,A<N){for(N-=A;X[_++]=h[L++],--A;);L=_-G,I=X}}else if(c<A){if(L+=w+c-A,(A-=c)<N){for(N-=A;X[_++]=h[L++],--A;);if(L=0,c<N){for(N-=A=c;X[_++]=h[L++],--A;);L=_-G,I=X}}}else if(L+=c-A,A<N){for(N-=A;X[_++]=h[L++],--A;);L=_-G,I=X}for(;2<N;)X[_++]=I[L++],X[_++]=I[L++],X[_++]=I[L++],N-=3;N&&(X[_++]=I[L++],1<N&&(X[_++]=I[L++]))}else{for(L=_-G;X[_++]=X[L++],X[_++]=X[L++],X[_++]=X[L++],2<(N-=3););N&&(X[_++]=X[L++],1<N&&(X[_++]=X[L++]))}break}}break}}while(n<p&&_<g);n-=N=l>>3,o&=(1<<(l-=N<<3))-1,u.next_in=n,u.next_out=_,u.avail_in=n<p?p-n+5:5-(n-p),u.avail_out=_<g?g-_+257:257-(_-g),r.hold=o,r.bits=l}},{}],49:[function(s,i,a){var u=s("../utils/common"),f=s("./adler32"),r=s("./crc32"),n=s("./inffast"),p=s("./inftrees"),_=1,d=2,g=0,b=-2,w=1,m=852,c=592;function h(L){return(L>>>24&255)+(L>>>8&65280)+((65280&L)<<8)+((255&L)<<24)}function o(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new u.Buf16(320),this.work=new u.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function l(L){var I;return L&&L.state?(I=L.state,L.total_in=L.total_out=I.total=0,L.msg="",I.wrap&&(L.adler=1&I.wrap),I.mode=w,I.last=0,I.havedict=0,I.dmax=32768,I.head=null,I.hold=0,I.bits=0,I.lencode=I.lendyn=new u.Buf32(m),I.distcode=I.distdyn=new u.Buf32(c),I.sane=1,I.back=-1,g):b}function v(L){var I;return L&&L.state?((I=L.state).wsize=0,I.whave=0,I.wnext=0,l(L)):b}function S(L,I){var E,X;return L&&L.state?(X=L.state,I<0?(E=0,I=-I):(E=1+(I>>4),I<48&&(I&=15)),I&&(I<8||15<I)?b:(X.window!==null&&X.wbits!==I&&(X.window=null),X.wrap=E,X.wbits=I,v(L))):b}function x(L,I){var E,X;return L?(X=new o,(L.state=X).window=null,(E=S(L,I))!==g&&(L.state=null),E):b}var k,C,A=!0;function N(L){if(A){var I;for(k=new u.Buf32(512),C=new u.Buf32(32),I=0;I<144;)L.lens[I++]=8;for(;I<256;)L.lens[I++]=9;for(;I<280;)L.lens[I++]=7;for(;I<288;)L.lens[I++]=8;for(p(_,L.lens,0,288,k,0,L.work,{bits:9}),I=0;I<32;)L.lens[I++]=5;p(d,L.lens,0,32,C,0,L.work,{bits:5}),A=!1}L.lencode=k,L.lenbits=9,L.distcode=C,L.distbits=5}function G(L,I,E,X){var Q,J=L.state;return J.window===null&&(J.wsize=1<<J.wbits,J.wnext=0,J.whave=0,J.window=new u.Buf8(J.wsize)),X>=J.wsize?(u.arraySet(J.window,I,E-J.wsize,J.wsize,0),J.wnext=0,J.whave=J.wsize):(X<(Q=J.wsize-J.wnext)&&(Q=X),u.arraySet(J.window,I,E-X,Q,J.wnext),(X-=Q)?(u.arraySet(J.window,I,E-X,X,0),J.wnext=X,J.whave=J.wsize):(J.wnext+=Q,J.wnext===J.wsize&&(J.wnext=0),J.whave<J.wsize&&(J.whave+=Q))),0}a.inflateReset=v,a.inflateReset2=S,a.inflateResetKeep=l,a.inflateInit=function(L){return x(L,15)},a.inflateInit2=x,a.inflate=function(L,I){var E,X,Q,J,ie,T,U,M,$,ne,le,ce,pe,j,O,ee,te,F,q,Y,y,P,K,D,B=0,V=new u.Buf8(4),Z=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!L||!L.state||!L.output||!L.input&&L.avail_in!==0)return b;(E=L.state).mode===12&&(E.mode=13),ie=L.next_out,Q=L.output,U=L.avail_out,J=L.next_in,X=L.input,T=L.avail_in,M=E.hold,$=E.bits,ne=T,le=U,P=g;e:for(;;)switch(E.mode){case w:if(E.wrap===0){E.mode=13;break}for(;$<16;){if(T===0)break e;T--,M+=X[J++]<<$,$+=8}if(2&E.wrap&&M===35615){V[E.check=0]=255&M,V[1]=M>>>8&255,E.check=r(E.check,V,2,0),$=M=0,E.mode=2;break}if(E.flags=0,E.head&&(E.head.done=!1),!(1&E.wrap)||(((255&M)<<8)+(M>>8))%31){L.msg="incorrect header check",E.mode=30;break}if((15&M)!=8){L.msg="unknown compression method",E.mode=30;break}if($-=4,y=8+(15&(M>>>=4)),E.wbits===0)E.wbits=y;else if(y>E.wbits){L.msg="invalid window size",E.mode=30;break}E.dmax=1<<y,L.adler=E.check=1,E.mode=512&M?10:12,$=M=0;break;case 2:for(;$<16;){if(T===0)break e;T--,M+=X[J++]<<$,$+=8}if(E.flags=M,(255&E.flags)!=8){L.msg="unknown compression method",E.mode=30;break}if(57344&E.flags){L.msg="unknown header flags set",E.mode=30;break}E.head&&(E.head.text=M>>8&1),512&E.flags&&(V[0]=255&M,V[1]=M>>>8&255,E.check=r(E.check,V,2,0)),$=M=0,E.mode=3;case 3:for(;$<32;){if(T===0)break e;T--,M+=X[J++]<<$,$+=8}E.head&&(E.head.time=M),512&E.flags&&(V[0]=255&M,V[1]=M>>>8&255,V[2]=M>>>16&255,V[3]=M>>>24&255,E.check=r(E.check,V,4,0)),$=M=0,E.mode=4;case 4:for(;$<16;){if(T===0)break e;T--,M+=X[J++]<<$,$+=8}E.head&&(E.head.xflags=255&M,E.head.os=M>>8),512&E.flags&&(V[0]=255&M,V[1]=M>>>8&255,E.check=r(E.check,V,2,0)),$=M=0,E.mode=5;case 5:if(1024&E.flags){for(;$<16;){if(T===0)break e;T--,M+=X[J++]<<$,$+=8}E.length=M,E.head&&(E.head.extra_len=M),512&E.flags&&(V[0]=255&M,V[1]=M>>>8&255,E.check=r(E.check,V,2,0)),$=M=0}else E.head&&(E.head.extra=null);E.mode=6;case 6:if(1024&E.flags&&(T<(ce=E.length)&&(ce=T),ce&&(E.head&&(y=E.head.extra_len-E.length,E.head.extra||(E.head.extra=new Array(E.head.extra_len)),u.arraySet(E.head.extra,X,J,ce,y)),512&E.flags&&(E.check=r(E.check,X,ce,J)),T-=ce,J+=ce,E.length-=ce),E.length))break e;E.length=0,E.mode=7;case 7:if(2048&E.flags){if(T===0)break e;for(ce=0;y=X[J+ce++],E.head&&y&&E.length<65536&&(E.head.name+=String.fromCharCode(y)),y&&ce<T;);if(512&E.flags&&(E.check=r(E.check,X,ce,J)),T-=ce,J+=ce,y)break e}else E.head&&(E.head.name=null);E.length=0,E.mode=8;case 8:if(4096&E.flags){if(T===0)break e;for(ce=0;y=X[J+ce++],E.head&&y&&E.length<65536&&(E.head.comment+=String.fromCharCode(y)),y&&ce<T;);if(512&E.flags&&(E.check=r(E.check,X,ce,J)),T-=ce,J+=ce,y)break e}else E.head&&(E.head.comment=null);E.mode=9;case 9:if(512&E.flags){for(;$<16;){if(T===0)break e;T--,M+=X[J++]<<$,$+=8}if(M!==(65535&E.check)){L.msg="header crc mismatch",E.mode=30;break}$=M=0}E.head&&(E.head.hcrc=E.flags>>9&1,E.head.done=!0),L.adler=E.check=0,E.mode=12;break;case 10:for(;$<32;){if(T===0)break e;T--,M+=X[J++]<<$,$+=8}L.adler=E.check=h(M),$=M=0,E.mode=11;case 11:if(E.havedict===0)return L.next_out=ie,L.avail_out=U,L.next_in=J,L.avail_in=T,E.hold=M,E.bits=$,2;L.adler=E.check=1,E.mode=12;case 12:if(I===5||I===6)break e;case 13:if(E.last){M>>>=7&$,$-=7&$,E.mode=27;break}for(;$<3;){if(T===0)break e;T--,M+=X[J++]<<$,$+=8}switch(E.last=1&M,$-=1,3&(M>>>=1)){case 0:E.mode=14;break;case 1:if(N(E),E.mode=20,I!==6)break;M>>>=2,$-=2;break e;case 2:E.mode=17;break;case 3:L.msg="invalid block type",E.mode=30}M>>>=2,$-=2;break;case 14:for(M>>>=7&$,$-=7&$;$<32;){if(T===0)break e;T--,M+=X[J++]<<$,$+=8}if((65535&M)!=(M>>>16^65535)){L.msg="invalid stored block lengths",E.mode=30;break}if(E.length=65535&M,$=M=0,E.mode=15,I===6)break e;case 15:E.mode=16;case 16:if(ce=E.length){if(T<ce&&(ce=T),U<ce&&(ce=U),ce===0)break e;u.arraySet(Q,X,J,ce,ie),T-=ce,J+=ce,U-=ce,ie+=ce,E.length-=ce;break}E.mode=12;break;case 17:for(;$<14;){if(T===0)break e;T--,M+=X[J++]<<$,$+=8}if(E.nlen=257+(31&M),M>>>=5,$-=5,E.ndist=1+(31&M),M>>>=5,$-=5,E.ncode=4+(15&M),M>>>=4,$-=4,286<E.nlen||30<E.ndist){L.msg="too many length or distance symbols",E.mode=30;break}E.have=0,E.mode=18;case 18:for(;E.have<E.ncode;){for(;$<3;){if(T===0)break e;T--,M+=X[J++]<<$,$+=8}E.lens[Z[E.have++]]=7&M,M>>>=3,$-=3}for(;E.have<19;)E.lens[Z[E.have++]]=0;if(E.lencode=E.lendyn,E.lenbits=7,K={bits:E.lenbits},P=p(0,E.lens,0,19,E.lencode,0,E.work,K),E.lenbits=K.bits,P){L.msg="invalid code lengths set",E.mode=30;break}E.have=0,E.mode=19;case 19:for(;E.have<E.nlen+E.ndist;){for(;ee=(B=E.lencode[M&(1<<E.lenbits)-1])>>>16&255,te=65535&B,!((O=B>>>24)<=$);){if(T===0)break e;T--,M+=X[J++]<<$,$+=8}if(te<16)M>>>=O,$-=O,E.lens[E.have++]=te;else{if(te===16){for(D=O+2;$<D;){if(T===0)break e;T--,M+=X[J++]<<$,$+=8}if(M>>>=O,$-=O,E.have===0){L.msg="invalid bit length repeat",E.mode=30;break}y=E.lens[E.have-1],ce=3+(3&M),M>>>=2,$-=2}else if(te===17){for(D=O+3;$<D;){if(T===0)break e;T--,M+=X[J++]<<$,$+=8}$-=O,y=0,ce=3+(7&(M>>>=O)),M>>>=3,$-=3}else{for(D=O+7;$<D;){if(T===0)break e;T--,M+=X[J++]<<$,$+=8}$-=O,y=0,ce=11+(127&(M>>>=O)),M>>>=7,$-=7}if(E.have+ce>E.nlen+E.ndist){L.msg="invalid bit length repeat",E.mode=30;break}for(;ce--;)E.lens[E.have++]=y}}if(E.mode===30)break;if(E.lens[256]===0){L.msg="invalid code -- missing end-of-block",E.mode=30;break}if(E.lenbits=9,K={bits:E.lenbits},P=p(_,E.lens,0,E.nlen,E.lencode,0,E.work,K),E.lenbits=K.bits,P){L.msg="invalid literal/lengths set",E.mode=30;break}if(E.distbits=6,E.distcode=E.distdyn,K={bits:E.distbits},P=p(d,E.lens,E.nlen,E.ndist,E.distcode,0,E.work,K),E.distbits=K.bits,P){L.msg="invalid distances set",E.mode=30;break}if(E.mode=20,I===6)break e;case 20:E.mode=21;case 21:if(6<=T&&258<=U){L.next_out=ie,L.avail_out=U,L.next_in=J,L.avail_in=T,E.hold=M,E.bits=$,n(L,le),ie=L.next_out,Q=L.output,U=L.avail_out,J=L.next_in,X=L.input,T=L.avail_in,M=E.hold,$=E.bits,E.mode===12&&(E.back=-1);break}for(E.back=0;ee=(B=E.lencode[M&(1<<E.lenbits)-1])>>>16&255,te=65535&B,!((O=B>>>24)<=$);){if(T===0)break e;T--,M+=X[J++]<<$,$+=8}if(ee&&(240&ee)==0){for(F=O,q=ee,Y=te;ee=(B=E.lencode[Y+((M&(1<<F+q)-1)>>F)])>>>16&255,te=65535&B,!(F+(O=B>>>24)<=$);){if(T===0)break e;T--,M+=X[J++]<<$,$+=8}M>>>=F,$-=F,E.back+=F}if(M>>>=O,$-=O,E.back+=O,E.length=te,ee===0){E.mode=26;break}if(32&ee){E.back=-1,E.mode=12;break}if(64&ee){L.msg="invalid literal/length code",E.mode=30;break}E.extra=15&ee,E.mode=22;case 22:if(E.extra){for(D=E.extra;$<D;){if(T===0)break e;T--,M+=X[J++]<<$,$+=8}E.length+=M&(1<<E.extra)-1,M>>>=E.extra,$-=E.extra,E.back+=E.extra}E.was=E.length,E.mode=23;case 23:for(;ee=(B=E.distcode[M&(1<<E.distbits)-1])>>>16&255,te=65535&B,!((O=B>>>24)<=$);){if(T===0)break e;T--,M+=X[J++]<<$,$+=8}if((240&ee)==0){for(F=O,q=ee,Y=te;ee=(B=E.distcode[Y+((M&(1<<F+q)-1)>>F)])>>>16&255,te=65535&B,!(F+(O=B>>>24)<=$);){if(T===0)break e;T--,M+=X[J++]<<$,$+=8}M>>>=F,$-=F,E.back+=F}if(M>>>=O,$-=O,E.back+=O,64&ee){L.msg="invalid distance code",E.mode=30;break}E.offset=te,E.extra=15&ee,E.mode=24;case 24:if(E.extra){for(D=E.extra;$<D;){if(T===0)break e;T--,M+=X[J++]<<$,$+=8}E.offset+=M&(1<<E.extra)-1,M>>>=E.extra,$-=E.extra,E.back+=E.extra}if(E.offset>E.dmax){L.msg="invalid distance too far back",E.mode=30;break}E.mode=25;case 25:if(U===0)break e;if(ce=le-U,E.offset>ce){if((ce=E.offset-ce)>E.whave&&E.sane){L.msg="invalid distance too far back",E.mode=30;break}pe=ce>E.wnext?(ce-=E.wnext,E.wsize-ce):E.wnext-ce,ce>E.length&&(ce=E.length),j=E.window}else j=Q,pe=ie-E.offset,ce=E.length;for(U<ce&&(ce=U),U-=ce,E.length-=ce;Q[ie++]=j[pe++],--ce;);E.length===0&&(E.mode=21);break;case 26:if(U===0)break e;Q[ie++]=E.length,U--,E.mode=21;break;case 27:if(E.wrap){for(;$<32;){if(T===0)break e;T--,M|=X[J++]<<$,$+=8}if(le-=U,L.total_out+=le,E.total+=le,le&&(L.adler=E.check=E.flags?r(E.check,Q,le,ie-le):f(E.check,Q,le,ie-le)),le=U,(E.flags?M:h(M))!==E.check){L.msg="incorrect data check",E.mode=30;break}$=M=0}E.mode=28;case 28:if(E.wrap&&E.flags){for(;$<32;){if(T===0)break e;T--,M+=X[J++]<<$,$+=8}if(M!==(4294967295&E.total)){L.msg="incorrect length check",E.mode=30;break}$=M=0}E.mode=29;case 29:P=1;break e;case 30:P=-3;break e;case 31:return-4;case 32:default:return b}return L.next_out=ie,L.avail_out=U,L.next_in=J,L.avail_in=T,E.hold=M,E.bits=$,(E.wsize||le!==L.avail_out&&E.mode<30&&(E.mode<27||I!==4))&&G(L,L.output,L.next_out,le-L.avail_out)?(E.mode=31,-4):(ne-=L.avail_in,le-=L.avail_out,L.total_in+=ne,L.total_out+=le,E.total+=le,E.wrap&&le&&(L.adler=E.check=E.flags?r(E.check,Q,le,L.next_out-le):f(E.check,Q,le,L.next_out-le)),L.data_type=E.bits+(E.last?64:0)+(E.mode===12?128:0)+(E.mode===20||E.mode===15?256:0),(ne==0&&le===0||I===4)&&P===g&&(P=-5),P)},a.inflateEnd=function(L){if(!L||!L.state)return b;var I=L.state;return I.window&&(I.window=null),L.state=null,g},a.inflateGetHeader=function(L,I){var E;return L&&L.state?(2&(E=L.state).wrap)==0?b:((E.head=I).done=!1,g):b},a.inflateSetDictionary=function(L,I){var E,X=I.length;return L&&L.state?(E=L.state).wrap!==0&&E.mode!==11?b:E.mode===11&&f(1,I,X,0)!==E.check?-3:G(L,I,X,X)?(E.mode=31,-4):(E.havedict=1,g):b},a.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(s,i,a){var u=s("../utils/common"),f=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],r=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],n=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],p=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];i.exports=function(_,d,g,b,w,m,c,h){var o,l,v,S,x,k,C,A,N,G=h.bits,L=0,I=0,E=0,X=0,Q=0,J=0,ie=0,T=0,U=0,M=0,$=null,ne=0,le=new u.Buf16(16),ce=new u.Buf16(16),pe=null,j=0;for(L=0;L<=15;L++)le[L]=0;for(I=0;I<b;I++)le[d[g+I]]++;for(Q=G,X=15;1<=X&&le[X]===0;X--);if(X<Q&&(Q=X),X===0)return w[m++]=20971520,w[m++]=20971520,h.bits=1,0;for(E=1;E<X&&le[E]===0;E++);for(Q<E&&(Q=E),L=T=1;L<=15;L++)if(T<<=1,(T-=le[L])<0)return-1;if(0<T&&(_===0||X!==1))return-1;for(ce[1]=0,L=1;L<15;L++)ce[L+1]=ce[L]+le[L];for(I=0;I<b;I++)d[g+I]!==0&&(c[ce[d[g+I]]++]=I);if(k=_===0?($=pe=c,19):_===1?($=f,ne-=257,pe=r,j-=257,256):($=n,pe=p,-1),L=E,x=m,ie=I=M=0,v=-1,S=(U=1<<(J=Q))-1,_===1&&852<U||_===2&&592<U)return 1;for(;;){for(C=L-ie,N=c[I]<k?(A=0,c[I]):c[I]>k?(A=pe[j+c[I]],$[ne+c[I]]):(A=96,0),o=1<<L-ie,E=l=1<<J;w[x+(M>>ie)+(l-=o)]=C<<24|A<<16|N|0,l!==0;);for(o=1<<L-1;M&o;)o>>=1;if(o!==0?(M&=o-1,M+=o):M=0,I++,--le[L]==0){if(L===X)break;L=d[g+c[I]]}if(Q<L&&(M&S)!==v){for(ie===0&&(ie=Q),x+=E,T=1<<(J=L-ie);J+ie<X&&!((T-=le[J+ie])<=0);)J++,T<<=1;if(U+=1<<J,_===1&&852<U||_===2&&592<U)return 1;w[v=M&S]=Q<<24|J<<16|x-m|0}}return M!==0&&(w[x+M]=L-ie<<24|64<<16|0),h.bits=Q,0}},{"../utils/common":41}],51:[function(s,i,a){i.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(s,i,a){var u=s("../utils/common"),f=0,r=1;function n(B){for(var V=B.length;0<=--V;)B[V]=0}var p=0,_=29,d=256,g=d+1+_,b=30,w=19,m=2*g+1,c=15,h=16,o=7,l=256,v=16,S=17,x=18,k=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],C=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],A=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],N=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],G=new Array(2*(g+2));n(G);var L=new Array(2*b);n(L);var I=new Array(512);n(I);var E=new Array(256);n(E);var X=new Array(_);n(X);var Q,J,ie,T=new Array(b);function U(B,V,Z,z,H){this.static_tree=B,this.extra_bits=V,this.extra_base=Z,this.elems=z,this.max_length=H,this.has_stree=B&&B.length}function M(B,V){this.dyn_tree=B,this.max_code=0,this.stat_desc=V}function $(B){return B<256?I[B]:I[256+(B>>>7)]}function ne(B,V){B.pending_buf[B.pending++]=255&V,B.pending_buf[B.pending++]=V>>>8&255}function le(B,V,Z){B.bi_valid>h-Z?(B.bi_buf|=V<<B.bi_valid&65535,ne(B,B.bi_buf),B.bi_buf=V>>h-B.bi_valid,B.bi_valid+=Z-h):(B.bi_buf|=V<<B.bi_valid&65535,B.bi_valid+=Z)}function ce(B,V,Z){le(B,Z[2*V],Z[2*V+1])}function pe(B,V){for(var Z=0;Z|=1&B,B>>>=1,Z<<=1,0<--V;);return Z>>>1}function j(B,V,Z){var z,H,W=new Array(c+1),se=0;for(z=1;z<=c;z++)W[z]=se=se+Z[z-1]<<1;for(H=0;H<=V;H++){var re=B[2*H+1];re!==0&&(B[2*H]=pe(W[re]++,re))}}function O(B){var V;for(V=0;V<g;V++)B.dyn_ltree[2*V]=0;for(V=0;V<b;V++)B.dyn_dtree[2*V]=0;for(V=0;V<w;V++)B.bl_tree[2*V]=0;B.dyn_ltree[2*l]=1,B.opt_len=B.static_len=0,B.last_lit=B.matches=0}function ee(B){8<B.bi_valid?ne(B,B.bi_buf):0<B.bi_valid&&(B.pending_buf[B.pending++]=B.bi_buf),B.bi_buf=0,B.bi_valid=0}function te(B,V,Z,z){var H=2*V,W=2*Z;return B[H]<B[W]||B[H]===B[W]&&z[V]<=z[Z]}function F(B,V,Z){for(var z=B.heap[Z],H=Z<<1;H<=B.heap_len&&(H<B.heap_len&&te(V,B.heap[H+1],B.heap[H],B.depth)&&H++,!te(V,z,B.heap[H],B.depth));)B.heap[Z]=B.heap[H],Z=H,H<<=1;B.heap[Z]=z}function q(B,V,Z){var z,H,W,se,re=0;if(B.last_lit!==0)for(;z=B.pending_buf[B.d_buf+2*re]<<8|B.pending_buf[B.d_buf+2*re+1],H=B.pending_buf[B.l_buf+re],re++,z===0?ce(B,H,V):(ce(B,(W=E[H])+d+1,V),(se=k[W])!==0&&le(B,H-=X[W],se),ce(B,W=$(--z),Z),(se=C[W])!==0&&le(B,z-=T[W],se)),re<B.last_lit;);ce(B,l,V)}function Y(B,V){var Z,z,H,W=V.dyn_tree,se=V.stat_desc.static_tree,re=V.stat_desc.has_stree,ae=V.stat_desc.elems,ge=-1;for(B.heap_len=0,B.heap_max=m,Z=0;Z<ae;Z++)W[2*Z]!==0?(B.heap[++B.heap_len]=ge=Z,B.depth[Z]=0):W[2*Z+1]=0;for(;B.heap_len<2;)W[2*(H=B.heap[++B.heap_len]=ge<2?++ge:0)]=1,B.depth[H]=0,B.opt_len--,re&&(B.static_len-=se[2*H+1]);for(V.max_code=ge,Z=B.heap_len>>1;1<=Z;Z--)F(B,W,Z);for(H=ae;Z=B.heap[1],B.heap[1]=B.heap[B.heap_len--],F(B,W,1),z=B.heap[1],B.heap[--B.heap_max]=Z,B.heap[--B.heap_max]=z,W[2*H]=W[2*Z]+W[2*z],B.depth[H]=(B.depth[Z]>=B.depth[z]?B.depth[Z]:B.depth[z])+1,W[2*Z+1]=W[2*z+1]=H,B.heap[1]=H++,F(B,W,1),2<=B.heap_len;);B.heap[--B.heap_max]=B.heap[1],(function(_e,xe){var De,Ae,Se,Ee,Be,je,$e=xe.dyn_tree,it=xe.max_code,at=xe.stat_desc.static_tree,He=xe.stat_desc.has_stree,yt=xe.stat_desc.extra_bits,Mt=xe.stat_desc.extra_base,ct=xe.stat_desc.max_length,Ne=0;for(Ee=0;Ee<=c;Ee++)_e.bl_count[Ee]=0;for($e[2*_e.heap[_e.heap_max]+1]=0,De=_e.heap_max+1;De<m;De++)ct<(Ee=$e[2*$e[2*(Ae=_e.heap[De])+1]+1]+1)&&(Ee=ct,Ne++),$e[2*Ae+1]=Ee,it<Ae||(_e.bl_count[Ee]++,Be=0,Mt<=Ae&&(Be=yt[Ae-Mt]),je=$e[2*Ae],_e.opt_len+=je*(Ee+Be),He&&(_e.static_len+=je*(at[2*Ae+1]+Be)));if(Ne!==0){do{for(Ee=ct-1;_e.bl_count[Ee]===0;)Ee--;_e.bl_count[Ee]--,_e.bl_count[Ee+1]+=2,_e.bl_count[ct]--,Ne-=2}while(0<Ne);for(Ee=ct;Ee!==0;Ee--)for(Ae=_e.bl_count[Ee];Ae!==0;)it<(Se=_e.heap[--De])||($e[2*Se+1]!==Ee&&(_e.opt_len+=(Ee-$e[2*Se+1])*$e[2*Se],$e[2*Se+1]=Ee),Ae--)}})(B,V),j(W,ge,B.bl_count)}function y(B,V,Z){var z,H,W=-1,se=V[1],re=0,ae=7,ge=4;for(se===0&&(ae=138,ge=3),V[2*(Z+1)+1]=65535,z=0;z<=Z;z++)H=se,se=V[2*(z+1)+1],++re<ae&&H===se||(re<ge?B.bl_tree[2*H]+=re:H!==0?(H!==W&&B.bl_tree[2*H]++,B.bl_tree[2*v]++):re<=10?B.bl_tree[2*S]++:B.bl_tree[2*x]++,W=H,ge=(re=0)===se?(ae=138,3):H===se?(ae=6,3):(ae=7,4))}function P(B,V,Z){var z,H,W=-1,se=V[1],re=0,ae=7,ge=4;for(se===0&&(ae=138,ge=3),z=0;z<=Z;z++)if(H=se,se=V[2*(z+1)+1],!(++re<ae&&H===se)){if(re<ge)for(;ce(B,H,B.bl_tree),--re!=0;);else H!==0?(H!==W&&(ce(B,H,B.bl_tree),re--),ce(B,v,B.bl_tree),le(B,re-3,2)):re<=10?(ce(B,S,B.bl_tree),le(B,re-3,3)):(ce(B,x,B.bl_tree),le(B,re-11,7));W=H,ge=(re=0)===se?(ae=138,3):H===se?(ae=6,3):(ae=7,4)}}n(T);var K=!1;function D(B,V,Z,z){le(B,(p<<1)+(z?1:0),3),(function(H,W,se,re){ee(H),ne(H,se),ne(H,~se),u.arraySet(H.pending_buf,H.window,W,se,H.pending),H.pending+=se})(B,V,Z)}a._tr_init=function(B){K||((function(){var V,Z,z,H,W,se=new Array(c+1);for(H=z=0;H<_-1;H++)for(X[H]=z,V=0;V<1<<k[H];V++)E[z++]=H;for(E[z-1]=H,H=W=0;H<16;H++)for(T[H]=W,V=0;V<1<<C[H];V++)I[W++]=H;for(W>>=7;H<b;H++)for(T[H]=W<<7,V=0;V<1<<C[H]-7;V++)I[256+W++]=H;for(Z=0;Z<=c;Z++)se[Z]=0;for(V=0;V<=143;)G[2*V+1]=8,V++,se[8]++;for(;V<=255;)G[2*V+1]=9,V++,se[9]++;for(;V<=279;)G[2*V+1]=7,V++,se[7]++;for(;V<=287;)G[2*V+1]=8,V++,se[8]++;for(j(G,g+1,se),V=0;V<b;V++)L[2*V+1]=5,L[2*V]=pe(V,5);Q=new U(G,k,d+1,g,c),J=new U(L,C,0,b,c),ie=new U(new Array(0),A,0,w,o)})(),K=!0),B.l_desc=new M(B.dyn_ltree,Q),B.d_desc=new M(B.dyn_dtree,J),B.bl_desc=new M(B.bl_tree,ie),B.bi_buf=0,B.bi_valid=0,O(B)},a._tr_stored_block=D,a._tr_flush_block=function(B,V,Z,z){var H,W,se=0;0<B.level?(B.strm.data_type===2&&(B.strm.data_type=(function(re){var ae,ge=4093624447;for(ae=0;ae<=31;ae++,ge>>>=1)if(1&ge&&re.dyn_ltree[2*ae]!==0)return f;if(re.dyn_ltree[18]!==0||re.dyn_ltree[20]!==0||re.dyn_ltree[26]!==0)return r;for(ae=32;ae<d;ae++)if(re.dyn_ltree[2*ae]!==0)return r;return f})(B)),Y(B,B.l_desc),Y(B,B.d_desc),se=(function(re){var ae;for(y(re,re.dyn_ltree,re.l_desc.max_code),y(re,re.dyn_dtree,re.d_desc.max_code),Y(re,re.bl_desc),ae=w-1;3<=ae&&re.bl_tree[2*N[ae]+1]===0;ae--);return re.opt_len+=3*(ae+1)+5+5+4,ae})(B),H=B.opt_len+3+7>>>3,(W=B.static_len+3+7>>>3)<=H&&(H=W)):H=W=Z+5,Z+4<=H&&V!==-1?D(B,V,Z,z):B.strategy===4||W===H?(le(B,2+(z?1:0),3),q(B,G,L)):(le(B,4+(z?1:0),3),(function(re,ae,ge,_e){var xe;for(le(re,ae-257,5),le(re,ge-1,5),le(re,_e-4,4),xe=0;xe<_e;xe++)le(re,re.bl_tree[2*N[xe]+1],3);P(re,re.dyn_ltree,ae-1),P(re,re.dyn_dtree,ge-1)})(B,B.l_desc.max_code+1,B.d_desc.max_code+1,se+1),q(B,B.dyn_ltree,B.dyn_dtree)),O(B),z&&ee(B)},a._tr_tally=function(B,V,Z){return B.pending_buf[B.d_buf+2*B.last_lit]=V>>>8&255,B.pending_buf[B.d_buf+2*B.last_lit+1]=255&V,B.pending_buf[B.l_buf+B.last_lit]=255&Z,B.last_lit++,V===0?B.dyn_ltree[2*Z]++:(B.matches++,V--,B.dyn_ltree[2*(E[Z]+d+1)]++,B.dyn_dtree[2*$(V)]++),B.last_lit===B.lit_bufsize-1},a._tr_align=function(B){le(B,2,3),ce(B,l,G),(function(V){V.bi_valid===16?(ne(V,V.bi_buf),V.bi_buf=0,V.bi_valid=0):8<=V.bi_valid&&(V.pending_buf[V.pending++]=255&V.bi_buf,V.bi_buf>>=8,V.bi_valid-=8)})(B)}},{"../utils/common":41}],53:[function(s,i,a){i.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(s,i,a){(function(u){(function(f,r){if(!f.setImmediate){var n,p,_,d,g=1,b={},w=!1,m=f.document,c=Object.getPrototypeOf&&Object.getPrototypeOf(f);c=c&&c.setTimeout?c:f,n={}.toString.call(f.process)==="[object process]"?function(v){process.nextTick(function(){o(v)})}:(function(){if(f.postMessage&&!f.importScripts){var v=!0,S=f.onmessage;return f.onmessage=function(){v=!1},f.postMessage("","*"),f.onmessage=S,v}})()?(d="setImmediate$"+Math.random()+"$",f.addEventListener?f.addEventListener("message",l,!1):f.attachEvent("onmessage",l),function(v){f.postMessage(d+v,"*")}):f.MessageChannel?((_=new MessageChannel).port1.onmessage=function(v){o(v.data)},function(v){_.port2.postMessage(v)}):m&&"onreadystatechange"in m.createElement("script")?(p=m.documentElement,function(v){var S=m.createElement("script");S.onreadystatechange=function(){o(v),S.onreadystatechange=null,p.removeChild(S),S=null},p.appendChild(S)}):function(v){setTimeout(o,0,v)},c.setImmediate=function(v){typeof v!="function"&&(v=new Function(""+v));for(var S=new Array(arguments.length-1),x=0;x<S.length;x++)S[x]=arguments[x+1];var k={callback:v,args:S};return b[g]=k,n(g),g++},c.clearImmediate=h}function h(v){delete b[v]}function o(v){if(w)setTimeout(o,0,v);else{var S=b[v];if(S){w=!0;try{(function(x){var k=x.callback,C=x.args;switch(C.length){case 0:k();break;case 1:k(C[0]);break;case 2:k(C[0],C[1]);break;case 3:k(C[0],C[1],C[2]);break;default:k.apply(r,C)}})(S)}finally{h(v),w=!1}}}}function l(v){v.source===f&&typeof v.data=="string"&&v.data.indexOf(d)===0&&o(+v.data.slice(d.length))}})(typeof self>"u"?u===void 0?this:u:self)}).call(this,typeof Jr<"u"?Jr:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(en)),en.exports}var e0=Qm();const Rn=Ym(e0),t0={class:"min-h-screen bg-gray-50"},s0={class:"max-w-6xl mx-auto px-6 py-8"},r0={class:"mb-6 relative"},i0=R("span",{class:"hidden md:inline"},"",-1),n0={class:"text-2xl font-bold text-slate-900 flex items-center gap-2"},o0=R("p",{class:"text-slate-600 mt-1"},"",-1),a0={class:"bg-white rounded-2xl border border-slate-200 shadow-sm p-6 mb-6"},l0={class:"flex flex-wrap items-center gap-3"},c0={for:"img-upload",class:"flex items-center gap-2 px-4 py-2 bg-slate-900 hover:bg-slate-800 text-white rounded-lg cursor-pointer"},h0={for:"zip-upload",class:"flex items-center gap-2 px-4 py-2 bg-slate-900/80 hover:bg-slate-800 text-white rounded-lg cursor-pointer"},u0={class:"relative mb-8"},d0=R("div",{class:"absolute inset-0 bg-gradient-to-r from-blue-50 via-indigo-50 to-purple-50 rounded-3xl opacity-60"},null,-1),f0=R("div",{class:"absolute inset-0 bg-gradient-to-br from-brand-400/10 via-transparent to-brand-600/10 rounded-3xl"},null,-1),p0={class:"relative flex justify-center items-center py-8 px-6"},_0=R("div",{class:"absolute inset-0 bg-gradient-to-r from-white/20 via-white/10 to-white/20 rounded-2xl opacity-0 group-hover:opacity-100 transition-opacity duration-300"},null,-1),g0={class:"relative z-10 flex items-center justify-center w-10 h-10 bg-white/20 rounded-xl group-hover:bg-white/30 transition-colors duration-300"},m0=R("span",{class:"relative z-10 flex items-center gap-3"},"   ",-1),v0={class:"relative z-10 flex items-center justify-center w-10 h-10 bg-white/20 rounded-xl group-hover:bg-white/30 transition-colors duration-300"},b0=R("div",{class:"absolute -top-1 -right-1 w-3 h-3 bg-yellow-400 rounded-full animate-ping"},null,-1),w0=R("div",{class:"absolute -bottom-1 -left-1 w-2 h-2 bg-blue-400 rounded-full animate-pulse"},null,-1),y0=R("div",{class:"absolute -bottom-2 left-1/2 transform -translate-x-1/2 text-xs text-slate-500 bg-white/80 px-3 py-1 rounded-full shadow-sm"},"  ",-1),S0={key:0,class:"mt-6"},x0={class:"bg-white rounded-2xl border border-slate-200 shadow-sm p-6"},C0={class:"flex items-center justify-between mb-4"},k0=R("div",{class:"text-sm font-semibold text-slate-700"},"",-1),E0={class:"text-xs text-slate-500"},R0={class:"bg-slate-50 rounded-lg p-4 mb-4"},A0={class:"flex items-center justify-between mb-2"},T0=R("span",{class:"text-sm font-medium text-slate-700"},"",-1),D0={class:"text-sm text-slate-600"},L0={class:"w-full bg-slate-200 rounded-full h-2"},O0={class:"flex gap-4 mt-2 text-xs"},M0={class:"text-green-600"},I0={class:"text-amber-600"},B0={class:"text-red-600"},P0={class:"text-slate-500"},$0={class:"space-y-3"},F0={class:"flex gap-2"},H0=["onClick"],N0=["src"],z0=R("div",{class:"absolute inset-0 bg-black/0 group-hover:bg-black/10 transition-colors flex items-center justify-center"},[R("span",{class:"text-white text-sm bg-black/50 px-2 py-1 rounded opacity-0 group-hover:opacity-100"},"")],-1),U0=["onClick"],j0=["src"],W0=R("div",{class:"absolute inset-0 bg-black/0 group-hover:bg-black/10 transition-colors flex items-center justify-center"},[R("span",{class:"text-white text-sm bg-black/50 px-2 py-1 rounded opacity-0 group-hover:opacity-100"},"")],-1),q0={class:"flex-1 min-w-0"},K0={class:"text-sm font-medium text-slate-800 truncate"},V0={class:"flex items-center gap-2 mt-1 mb-2"},G0={key:0,class:"text-xs text-slate-500"},Z0={key:1,class:"text-xs text-red-500"},X0={key:0,class:"w-full bg-slate-200 rounded-full h-1.5 mb-2"},J0=R("div",{class:"bg-amber-500 h-1.5 rounded-full transition-all duration-300 animate-pulse",style:{width:"60%"}},null,-1),Y0=[J0],Q0={class:"flex gap-1"},ev=["onClick"],tv=["onClick"],sv=["onClick"],rv=["onClick","disabled"],iv=["onClick"],nv=["onClick"],ov={key:1,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50"},av={class:"bg-white rounded-2xl shadow-lg w-[90vw] max-w-4xl p-4"},lv={class:"flex items-center justify-between mb-3"},cv=R("div",{class:"text-sm font-semibold text-slate-700"},"",-1),hv={class:"flex items-center gap-2"},uv={key:0,class:"grid md:grid-cols-2 gap-4"},dv={class:"rounded-xl border border-slate-200 overflow-hidden"},fv=["src"],pv={class:"rounded-xl border border-slate-200 overflow-hidden"},_v=["src"],gv={key:1,class:"relative w-full"},mv={class:"relative overflow-hidden rounded-xl border border-slate-200"},vv=["src"],bv=["src"],wv={key:2,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50"},yv={class:"bg-white rounded-2xl shadow-lg w-[90vw] max-w-4xl p-6"},Sv={class:"flex items-center justify-between mb-4"},xv=R("div",{class:"text-lg font-semibold text-slate-700"},"",-1),Cv={class:"mb-4"},kv=R("p",{class:"text-slate-600 mb-4"},"",-1),Ev={class:"grid grid-cols-2 gap-4"},Rv=R("label",{class:"text-sm text-slate-600"},"X",-1),Av=R("label",{class:"text-sm text-slate-600"},"Y",-1),Tv=R("label",{class:"text-sm text-slate-600"},"",-1),Dv=R("label",{class:"text-sm text-slate-600"},"",-1),Lv={class:"flex justify-end gap-3"},Ov={key:3,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50"},Mv={class:"bg-white rounded-2xl shadow-lg w-[90vw] max-w-4xl p-6"},Iv={class:"flex items-center justify-between mb-4"},Bv={class:"text-lg font-semibold text-slate-700"},Pv={class:"mb-4"},$v=R("p",{class:"text-slate-600 mb-4"},"",-1),Fv={class:"grid grid-cols-2 gap-4"},Hv=R("label",{class:"text-sm text-slate-600"},"X",-1),Nv=R("label",{class:"text-sm text-slate-600"},"Y",-1),zv=R("label",{class:"text-sm text-slate-600"},"",-1),Uv=R("label",{class:"text-sm text-slate-600"},"",-1),jv={class:"flex justify-end gap-3"},Wv="220f559f00abe3a002d2e6c6802e72d5",qv="https://api.imgbb.com/1/upload",Kv=ut({__name:"ImageTools",setup(e){const t=fe([]),s=fe(null),i=fe("manual"),a=fe("bottom-right"),u=qt({x:50,y:50,w:200,h:80}),f=async y=>{try{const P=new FormData;P.append("image",y);const D=await(await fetch(`${qv}?expiration=600&key=${Wv}`,{method:"POST",body:P})).json();return D.success===!0&&D.status===200&&D.data&&D.data.url?D.data.url:(console.error("ImgBB upload failed:",D),null)}catch(P){return console.error("Error uploading to ImgBB:",P),null}},r=async y=>{console.log(` ${y.length} ImgBB...`);for(let P=0;P<y.length;P++){const K=y[P];console.log(` ${P+1}/${y.length} : ${K.name}`);try{const D=await f(K.file);D?(K.url=D,console.log(` ${K.name} `)):console.warn(` ${K.name} URL`)}catch(D){console.error(` ${K.name} :`,D)}}console.log("")},n=Ue(()=>t.value.filter(y=>y.status==="processed"&&y.processedUrl).length),p=Ue(()=>t.value.filter(y=>y.status==="error").length),_=Ue(()=>t.value.filter(y=>y.status==="pending").length),d=Ue(()=>t.value.filter(y=>y.status==="processing").length),g=Ue(()=>n.value+p.value),b=y=>y.status==="processed"&&y.processedUrl?"":y.status==="processing"?"":y.status==="error"?"":"",w=async y=>{y.status="pending",y.error=void 0,s.value=y.id,await N()},m=async y=>{const P=y.target,K=Array.from(P.files||[]);if(!K.length)return;const D=K.filter(Z=>/\.zip$/i.test(Z.name)),V=K.filter(Z=>/^image\//.test(Z.type)).map(Z=>({id:Math.random().toString(36).slice(2),file:Z,name:Z.name,type:Z.type,url:URL.createObjectURL(Z),status:"pending"}));t.value=[...V,...t.value],s.value=V[0].id,P.value="";for(const Z of D)await Q(Z);V.length>0&&await r(V)},c=()=>t.value.find(y=>y.id===s.value)||null,h=async y=>{const P=await new Promise((B,V)=>{const Z=document.createElement("img");Z.onload=()=>B(Z),Z.onerror=V,Z.src=y.url}),K=document.createElement("canvas");K.width=P.naturalWidth,K.height=P.naturalHeight,K.getContext("2d").drawImage(P,0,0),y.canvas=K},o=async()=>{const y=c();y&&(y.canvas||await h(y))},l=fe(2),v=fe(3),S=fe("smart");fe(null);const x=qt({x:1,y:1}),k=async()=>{await o();const y=c();if(!y||!y.canvas)return;const P=y.canvas.getContext("2d"),{x:K,y:D,w:B,h:V}=u,Z=Math.max(0,Math.floor(K/(x.x||1))),z=Math.max(0,Math.floor(D/(x.y||1))),H=Math.max(1,Math.floor(B/(x.x||1))),W=Math.max(1,Math.floor(V/(x.y||1)));if(S.value==="copy"){P.save(),P.globalAlpha=.95,P.filter=`blur(${l.value}px)`;const se=(ge,_e,xe,De)=>{const Ae=document.createElement("canvas");Ae.width=Math.max(1,xe),Ae.height=Math.max(1,De),Ae.getContext("2d").drawImage(y.canvas,ge,_e,Math.max(1,xe),Math.max(1,De),0,0,Ae.width,Ae.height);const Ee=document.createElement("canvas");Ee.width=H,Ee.height=W;const Be=Ee.getContext("2d");return Be.imageSmoothingEnabled=!0,Be.drawImage(Ae,0,0,H,W),Ee},re=se(Z,Math.max(0,z-W),H,Math.min(W,z)),ae=se(Math.max(0,Z-H),z,Math.min(H,Z),W);re.width&&re.height?P.drawImage(re,Z,z):ae.width&&ae.height&&P.drawImage(ae,Z,z),P.restore()}else if(S.value==="smooth"){const se=document.createElement("canvas");se.width=H,se.height=W;const re=se.getContext("2d"),ae=Math.max(5,Math.floor(Math.min(H,W)*.1));let ge=0,_e=0,xe=0,De=0;try{const Se=P.getImageData(Math.max(0,Z-ae),Math.max(0,z-ae),H+2*ae,ae).data,Ee=P.getImageData(Math.max(0,Z-ae),Math.min(y.canvas.height-ae,z+W),H+2*ae,ae).data,Be=P.getImageData(Math.max(0,Z-ae),Math.max(0,z-ae),ae,W+2*ae).data,je=P.getImageData(Math.min(y.canvas.width-ae,Z+H),Math.max(0,z-ae),ae,W+2*ae).data,$e=[...Se,...Ee,...Be,...je];for(let it=0;it<$e.length;it+=4)ge+=$e[it],_e+=$e[it+1],xe+=$e[it+2],De++}catch{}De>0&&(re.fillStyle=`rgb(${ge/De},${_e/De},${xe/De})`,re.fillRect(0,0,H,W));const Ae=Math.max(1,l.value*2);for(let Se=0;Se<H*W*.01;Se++){const Ee=Math.floor(Math.random()*H),Be=Math.floor(Math.random()*W),je=Math.max(1,Math.random()*Ae),$e=Math.max(0,Math.min(y.canvas.width-1,Z+Ee+(Math.random()-.5)*ae*2)),it=Math.max(0,Math.min(y.canvas.height-1,z+Be+(Math.random()-.5)*ae*2));try{const at=P.getImageData($e,it,1,1).data;re.fillStyle=`rgba(${at[0]},${at[1]},${at[2]},0.3)`,re.fillRect(Ee,Be,je,je)}catch{}}P.save(),P.beginPath(),P.rect(Z,z,H,W),P.clip(),P.drawImage(se,Z,z),l.value>0&&(P.filter=`blur(${l.value}px)`,P.drawImage(se,Z,z)),P.restore()}else await A();await I(y)},C=async()=>{await o();const y=c();if(!y||!y.canvas)return;const P=y.canvas;P.getContext("2d");const K=24;let D=0,B=0,V=Math.floor(P.width*.25),Z=Math.floor(P.height*.15);a.value.includes("right")?D=P.width-V-K:D=K,a.value.includes("bottom")?B=P.height-Z-K:B=K,u.x=D,u.y=B,u.w=V,u.h=Z,await k()},A=async()=>{await o();const y=c();if(!y||!y.canvas)return;const P=y.canvas.getContext("2d"),{x:K,y:D,w:B,h:V}=u,Z=Math.max(0,Math.floor(K/(x.x||1))),z=Math.max(0,Math.floor(D/(x.y||1))),H=Math.max(1,Math.floor(B/(x.x||1))),W=Math.max(1,Math.floor(V/(x.y||1))),se=document.createElement("canvas");se.width=H,se.height=W;const re=se.getContext("2d"),ae=Math.max(5,Math.floor(Math.min(H,W)*.15)),ge=[],_e={top:[],bottom:[],left:[],right:[]};try{const Ne=P.getImageData(Math.max(0,Z-ae),Math.max(0,z-ae),H+2*ae,ae),st=P.getImageData(Math.max(0,Z-ae),Math.min(y.canvas.height-ae,z+W),H+2*ae,ae),pt=P.getImageData(Math.max(0,Z-ae),Math.max(0,z-ae),ae,W+2*ae),Nt=P.getImageData(Math.min(y.canvas.width-ae,Z+H),Math.max(0,z-ae),ae,W+2*ae);ge.push(...Ne.data,...st.data,...pt.data,...Nt.data);const rt=(dt,It)=>{const ht=dt.data;for(let nt=0;nt<ht.length;nt+=4)_e[It].push({r:ht[nt],g:ht[nt+1],b:ht[nt+2]})};rt(Ne,"top"),rt(st,"bottom"),rt(pt,"left"),rt(Nt,"right")}catch{}let xe=0,De=0,Ae=0,Se=0;for(let Ne=0;Ne<ge.length;Ne+=4)xe+=ge[Ne],De+=ge[Ne+1],Ae+=ge[Ne+2],Se++;Se>0&&(re.fillStyle=`rgb(${xe/Se},${De/Se},${Ae/Se})`,re.fillRect(0,0,H,W));const Ee=Math.max(8,Math.floor(Math.min(H,W)/(v.value+1))),Be=Math.max(H,W)*2,je=(Ne,st,pt,Nt,rt)=>{try{const dt=P.getImageData(Ne,st,rt,rt),It=P.getImageData(pt,Nt,rt,rt);let ht=0;for(let nt=0;nt<dt.data.length;nt+=4){const ms=dt.data[nt]-It.data[nt],Ct=dt.data[nt+1]-It.data[nt+1],Bt=dt.data[nt+2]-It.data[nt+2];ht+=Math.sqrt(ms*ms+Ct*Ct+Bt*Bt)}return ht/(rt*rt)}catch{return 1/0}},$e=(Ne,st,pt)=>{let Nt=0,rt=0,dt=1/0;const It=v.value*20+10;for(let ht=0;ht<It;ht++){const nt=Math.random()*Math.PI*2,ms=Math.random()*Be,Ct=Math.floor(Z+Math.cos(nt)*ms),Bt=Math.floor(z+Math.sin(nt)*ms);if(Ct>=0&&Bt>=0&&Ct+pt<y.canvas.width&&Bt+pt<y.canvas.height&&(Ct+pt<Z||Ct>Z+H||Bt+pt<z||Bt>z+W)){let ks=0;if(st===0&&_e.top.length>0){const Pt=Math.max(0,z-ae);ks+=je(Ct,Bt,Ct,Pt,pt)}if(Ne===0&&_e.left.length>0){const Pt=Math.max(0,Z-ae);ks+=je(Ct,Bt,Pt,Bt,pt)}ks<dt&&(dt=ks,Nt=Ct,rt=Bt)}}return{x:Nt,y:rt,score:dt}},it=v.value+1;for(let Ne=0;Ne<it;Ne++){const st=Math.max(4,Ee-Ne*2),pt=Math.ceil(H*W/(st*st))*(Ne+1);for(let Nt=0;Nt<pt;Nt++){const rt=Math.floor(Math.random()*(H-st)),dt=Math.floor(Math.random()*(W-st)),It=$e(rt,dt,st);It.score<1e3&&(re.globalAlpha=.3+Ne*.2,re.drawImage(y.canvas,It.x,It.y,st,st,rt,dt,st,st))}}re.globalAlpha=1;const at=document.createElement("canvas");at.width=H,at.height=W;const He=at.getContext("2d"),yt=He.createRadialGradient(H/2,W/2,0,H/2,W/2,Math.min(H,W)/2);yt.addColorStop(0,"rgba(255,255,255,1)"),yt.addColorStop(1,"rgba(255,255,255,0)"),He.fillStyle=yt,He.fillRect(0,0,H,W);const Mt=document.createElement("canvas");Mt.width=H,Mt.height=W;const ct=Mt.getContext("2d");if(ct.drawImage(se,0,0),ct.globalCompositeOperation="destination-in",ct.drawImage(at,0,0),ct.globalCompositeOperation="source-over",l.value>0){const Ne=document.createElement("canvas");Ne.width=H,Ne.height=W;const st=Ne.getContext("2d");st.filter=`blur(${l.value*.5}px)`,st.drawImage(Mt,0,0),ct.globalAlpha=.7,ct.drawImage(Ne,0,0),ct.globalAlpha=1}P.save(),P.beginPath(),P.rect(Z,z,H,W),P.clip(),P.drawImage(Mt,Z,z),P.restore(),await I(y)},N=async()=>{const y=c();if(y)try{y.status="processing",y.error=void 0,i.value==="manual"?await k():i.value==="corner"?await C():await A(),y.status="processed"}catch(P){y.status="error",y.error=P instanceof Error?P.message:""}},G=async()=>{for(const y of t.value)s.value=y.id,await N()},L=y=>/\.png$/i.test(y)?"image/png":/\.jpe?g$/i.test(y)?"image/jpeg":/\.webp$/i.test(y)?"image/webp":/\.bmp$/i.test(y)?"image/bmp":"image/png",I=async y=>{const P=y.type||L(y.name),K=await new Promise(D=>y.canvas.toBlob(B=>D(B),P,1));y.processedBlob=K,y.processedUrl=URL.createObjectURL(K)},E=async()=>{for(const y of t.value){const P=y.processedUrl||y.url,K=y.processedBlob?y.name.replace(/\.[^.]+$/,"")+"_processed"+(y.type.includes("png")?".png":y.type.includes("jpeg")?".jpg":y.type.includes("webp")?".webp":".png"):y.name,D=document.createElement("a");D.href=P,D.download=K,document.body.appendChild(D),D.click(),D.remove()}},X=async()=>{const y=new Rn;for(const D of t.value)D.processedBlob?y.file(D.name.replace(/\.[^.]+$/,"")+"_processed"+(D.type.includes("png")?".png":D.type.includes("jpeg")?".jpg":D.type.includes("webp")?".webp":".png"),D.processedBlob):y.file(D.name,D.file);const P=await y.generateAsync({type:"blob"}),K=document.createElement("a");K.href=URL.createObjectURL(P),K.download="images_processed.zip",document.body.appendChild(K),K.click(),K.remove()},Q=async y=>{const P=await Rn.loadAsync(await y.arrayBuffer()),K=[],D=/\.(png|jpe?g|webp|bmp)$/i,B=[];P.forEach((Z,z)=>{!z.dir&&D.test(Z)&&B.push(z.async("blob").then(H=>{K.push({name:Z.split("/").pop()||Z,blob:H})}))}),await Promise.all(B);const V=K.map(({name:Z,blob:z})=>{const H=L(Z),W=new File([z],Z,{type:H});return{id:Math.random().toString(36).slice(2),file:W,name:Z,type:H,url:URL.createObjectURL(W),status:"pending"}});t.value=[...V,...t.value],!s.value&&V.length&&(s.value=V[0].id),V.length>0&&await r(V)},J=fe(!1),ie=fe("side"),T=fe(null),U=()=>t.value.find(y=>y.id===T.value)||c(),M=y=>{T.value=y.id,J.value=!0,ie.value="side"},$=y=>{const P=document.createElement("a");P.href=y.url,P.download=y.name,document.body.appendChild(P),P.click(),P.remove()},ne=y=>{if(!y.processedUrl)return;const P=document.createElement("a");P.href=y.processedUrl;const K=y.name.replace(/\.[^.]+$/,"")+"_processed"+(y.type.includes("png")?".png":y.type.includes("jpeg")?".jpg":y.type.includes("webp")?".webp":".png");P.download=K,document.body.appendChild(P),P.click(),P.remove()},le=y=>{t.value=t.value.filter(P=>P.id!==y.id)},ce=async y=>{s.value=y,await o(),i.value==="manual"&&(F.value=!0)},pe=()=>{for(const y of t.value)s.value=y.id,u.x=q.x,u.y=q.y,u.w=q.w,u.h=q.h;te.value=!1},j=y=>{s.value=y.id,Y.x=u.x,Y.y=u.y,Y.w=u.w,Y.h=u.h,F.value=!0},O=()=>{u.x=Y.x,u.y=Y.y,u.w=Y.w,u.h=Y.h,F.value=!1};fe(!1);const ee=fe(50),te=fe(!1),F=fe(!1),q=qt({x:50,y:50,w:200,h:80}),Y=qt({x:50,y:50,w:200,h:80});return(y,P)=>{var K,D,B,V,Z,z,H;return ue(),de("div",t0,[R("div",s0,[R("div",r0,[be(ve(Qt),{to:"/",class:"absolute top-4 right-4 z-30 flex items-center gap-2 px-3 py-2 bg-white/80 backdrop-blur rounded-lg shadow-sm border border-slate-200 text-slate-600 hover:text-brand-600"},{default:Yt(()=>[be(ve(gs),{class:"w-5 h-5"}),i0]),_:1}),R("h2",n0,[be(ve(Qn),{class:"w-5 h-5"}),We(" ")]),o0]),R("div",a0,[R("div",l0,[R("input",{id:"img-upload",type:"file",accept:"image/*",multiple:"",class:"hidden",onChange:m},null,32),R("label",c0,[be(ve(sr),{class:"w-4 h-4"}),We(" ")]),R("input",{id:"zip-upload",type:"file",accept:".zip",class:"hidden",onChange:m},null,32),R("label",h0,[be(ve(sr),{class:"w-4 h-4"}),We("  ZIP")]),R("button",{onClick:E,class:"px-4 py-2 bg-white border border-slate-200 text-slate-700 rounded-lg"},[be(ve(bi),{class:"w-4 h-4 inline"}),We(" ")]),R("button",{onClick:X,class:"px-4 py-2 bg-white border border-slate-200 text-slate-700 rounded-lg"},[be(ve(bi),{class:"w-4 h-4 inline"}),We("  ZIP")])])]),R("div",u0,[d0,f0,R("div",p0,[R("button",{onClick:G,class:"group relative px-16 py-5 bg-gradient-to-r from-brand-600 via-brand-700 to-brand-800 hover:from-brand-700 hover:via-brand-800 hover:to-brand-900 text-white rounded-2xl text-2xl font-extrabold shadow-xl hover:shadow-2xl transform hover:scale-110 transition-all duration-500 ease-out flex items-center gap-4 border border-brand-300/50 hover:border-brand-200/80 backdrop-blur-sm"},[_0,R("div",g0,[be(ve(da),{class:"w-6 h-6 group-hover:animate-pulse"})]),m0,R("div",v0,[be(ve(da),{class:"w-6 h-6 group-hover:animate-pulse"})]),b0,w0]),y0])]),t.value.length?(ue(),de("div",S0,[R("div",x0,[R("div",C0,[k0,R("div",E0," "+we(t.value.length)+" ",1)]),R("div",R0,[R("div",A0,[T0,R("span",D0,we(g.value)+"/"+we(t.value.length)+" ",1)]),R("div",L0,[R("div",{class:"bg-brand-600 h-2 rounded-full transition-all duration-300",style:At({width:g.value/t.value.length*100+"%"})},null,4)]),R("div",O0,[R("span",M0," : "+we(n.value),1),R("span",I0," : "+we(d.value),1),R("span",B0," : "+we(p.value),1),R("span",P0," : "+we(_.value),1)])]),R("div",$0,[(ue(!0),de(Qe,null,Gt(t.value,W=>(ue(),de("div",{key:W.id,class:"flex items-center gap-3 p-3 border border-slate-200 rounded-lg hover:border-brand-200"},[R("div",F0,[R("div",{class:"relative group cursor-pointer",onClick:se=>ce(W.id)},[R("img",{src:W.url,class:"w-14 h-10 object-cover rounded border"},null,8,N0),z0],8,H0),W.processedUrl?(ue(),de("div",{key:0,class:"relative group cursor-pointer",onClick:se=>ce(W.id)},[R("img",{src:W.processedUrl,class:"w-14 h-10 object-cover rounded border"},null,8,j0),W0],8,U0)):Oe("",!0)]),R("div",q0,[R("div",K0,we(W.name),1),R("div",V0,[R("span",{class:Te(["text-sm px-2 py-0.5 rounded font-medium",{"bg-green-100 text-green-700":W.status==="processed"&&W.processedUrl,"bg-red-100 text-red-700":W.status==="error","bg-amber-100 text-amber-700":W.status==="processing","bg-slate-100 text-slate-600":W.status==="pending"}])},we(b(W)),3),W.status==="processing"?(ue(),de("span",G0,"...")):Oe("",!0),W.error?(ue(),de("span",Z0,": "+we(W.error),1)):Oe("",!0)]),W.status==="processing"?(ue(),de("div",X0,Y0)):Oe("",!0),R("div",Q0,[R("button",{onClick:se=>M(W),class:"px-2 py-1 bg-slate-100 hover:bg-slate-200 text-slate-700 rounded text-xs"},"",8,ev),i.value==="manual"&&W.status!=="processing"?(ue(),de("button",{key:0,onClick:se=>j(W),class:"px-2 py-1 bg-slate-100 hover:bg-slate-200 text-slate-700 rounded text-xs"},"",8,tv)):Oe("",!0),R("button",{onClick:se=>$(W),class:"px-2 py-1 bg-white border border-slate-200 text-slate-700 rounded text-xs"},"",8,sv),R("button",{onClick:se=>ne(W),disabled:!W.processedUrl,class:"px-2 py-1 bg-white border border-slate-200 text-slate-700 rounded text-xs disabled:opacity-50"},"",8,rv),W.status==="error"?(ue(),de("button",{key:1,onClick:se=>w(W),class:"px-2 py-1 bg-blue-100 hover:bg-blue-200 text-blue-700 rounded text-xs"},"",8,iv)):Oe("",!0)])]),R("button",{onClick:se=>le(W),class:"px-2 py-1 bg-red-50 hover:bg-red-100 text-red-600 rounded text-xs"},"",8,nv)]))),128))])])])):Oe("",!0),J.value?(ue(),de("div",ov,[R("div",av,[R("div",lv,[cv,R("div",hv,[R("button",{class:"px-3 py-1.5 text-sm bg-slate-100 hover:bg-slate-200 rounded-lg",onClick:P[0]||(P[0]=W=>ie.value="side")},""),R("button",{class:"px-3 py-1.5 text-sm bg-slate-100 hover:bg-slate-200 rounded-lg",onClick:P[1]||(P[1]=W=>ie.value="slider")},""),R("button",{class:"px-3 py-1.5 text-sm bg-slate-100 hover:bg-slate-200 rounded-lg",onClick:P[2]||(P[2]=W=>J.value=!1)},"")])]),ie.value==="side"?(ue(),de("div",uv,[R("div",dv,[R("img",{src:(K=U())==null?void 0:K.url,class:"w-full max-h-[70vh] object-contain"},null,8,fv)]),R("div",pv,[R("img",{src:((D=U())==null?void 0:D.processedUrl)||((B=U())==null?void 0:B.url),class:"w-full max-h-[70vh] object-contain"},null,8,_v)])])):(ue(),de("div",gv,[R("div",mv,[R("img",{src:(V=U())==null?void 0:V.url,class:"w-full max-h-[70vh] object-contain"},null,8,vv),R("img",{src:((Z=U())==null?void 0:Z.processedUrl)||((z=U())==null?void 0:z.url),class:"w-full max-h-[70vh] object-contain absolute inset-0",style:At({clipPath:"inset(0 "+(100-ee.value)+"% 0 0)"})},null,12,bv),Ze(R("input",{type:"range",min:"0",max:"100","onUpdate:modelValue":P[3]||(P[3]=W=>ee.value=W),class:"absolute bottom-3 left-1/2 -translate-x-1/2 w-1/2"},null,512),[[Ye,ee.value]])])]))])])):Oe("",!0),te.value?(ue(),de("div",wv,[R("div",yv,[R("div",Sv,[xv,R("button",{onClick:P[4]||(P[4]=W=>te.value=!1),class:"px-3 py-1.5 text-sm bg-slate-100 hover:bg-slate-200 rounded-lg"},"")]),R("div",Cv,[kv,R("div",Ev,[R("div",null,[Rv,Ze(R("input",{type:"number","onUpdate:modelValue":P[5]||(P[5]=W=>q.x=W),class:"w-full px-3 py-2 border border-slate-200 rounded-lg"},null,512),[[Ye,q.x]])]),R("div",null,[Av,Ze(R("input",{type:"number","onUpdate:modelValue":P[6]||(P[6]=W=>q.y=W),class:"w-full px-3 py-2 border border-slate-200 rounded-lg"},null,512),[[Ye,q.y]])]),R("div",null,[Tv,Ze(R("input",{type:"number","onUpdate:modelValue":P[7]||(P[7]=W=>q.w=W),class:"w-full px-3 py-2 border border-slate-200 rounded-lg"},null,512),[[Ye,q.w]])]),R("div",null,[Dv,Ze(R("input",{type:"number","onUpdate:modelValue":P[8]||(P[8]=W=>q.h=W),class:"w-full px-3 py-2 border border-slate-200 rounded-lg"},null,512),[[Ye,q.h]])])])]),R("div",Lv,[R("button",{onClick:P[9]||(P[9]=W=>te.value=!1),class:"px-4 py-2 bg-white border border-slate-200 text-slate-700 rounded-lg"},""),R("button",{onClick:pe,class:"px-4 py-2 bg-brand-600 hover:bg-brand-500 text-white rounded-lg"},"")])])])):Oe("",!0),F.value?(ue(),de("div",Ov,[R("div",Mv,[R("div",Iv,[R("div",Bv," - "+we((H=c())==null?void 0:H.name),1),R("button",{onClick:P[10]||(P[10]=W=>F.value=!1),class:"px-3 py-1.5 text-sm bg-slate-100 hover:bg-slate-200 rounded-lg"},"")]),R("div",Pv,[$v,R("div",Fv,[R("div",null,[Hv,Ze(R("input",{type:"number","onUpdate:modelValue":P[11]||(P[11]=W=>Y.x=W),class:"w-full px-3 py-2 border border-slate-200 rounded-lg"},null,512),[[Ye,Y.x]])]),R("div",null,[Nv,Ze(R("input",{type:"number","onUpdate:modelValue":P[12]||(P[12]=W=>Y.y=W),class:"w-full px-3 py-2 border border-slate-200 rounded-lg"},null,512),[[Ye,Y.y]])]),R("div",null,[zv,Ze(R("input",{type:"number","onUpdate:modelValue":P[13]||(P[13]=W=>Y.w=W),class:"w-full px-3 py-2 border border-slate-200 rounded-lg"},null,512),[[Ye,Y.w]])]),R("div",null,[Uv,Ze(R("input",{type:"number","onUpdate:modelValue":P[14]||(P[14]=W=>Y.h=W),class:"w-full px-3 py-2 border border-slate-200 rounded-lg"},null,512),[[Ye,Y.h]])])])]),R("div",jv,[R("button",{onClick:P[15]||(P[15]=W=>F.value=!1),class:"px-4 py-2 bg-white border border-slate-200 text-slate-700 rounded-lg"},""),R("button",{onClick:O,class:"px-4 py-2 bg-brand-600 hover:bg-brand-500 text-white rounded-lg"},"")])])])):Oe("",!0)])])}}}),hs=e=>(vl("data-v-419c0ac2"),e=e(),bl(),e),Vv={key:0,class:"fixed top-4 left-4 right-4 z-20 flex items-center justify-between"},Gv={class:"flex items-center gap-1"},Zv=["disabled"],Xv={class:"flex items-center gap-2"},Jv={key:0,class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24"},Yv=hs(()=>R("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"},null,-1)),Qv=hs(()=>R("circle",{cx:"12",cy:"12",r:"4",fill:"white"},null,-1)),eb=[Yv,Qv],tb={key:1,class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24"},sb=hs(()=>R("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"},null,-1)),rb=hs(()=>R("circle",{cx:"12",cy:"12",r:"4",fill:"black"},null,-1)),ib=[sb,rb],nb={class:"text-xs"},ob={class:"text-sm"},ab={class:"text-center"},lb=["onMousedown","onClick"],cb=["src"],hb={key:0,class:"absolute -bottom-6 left-0 bg-black/70 text-white text-xs px-2 py-1 rounded whitespace-nowrap"},ub=hs(()=>R("div",{class:"font-medium mb-1"},":",-1)),db=hs(()=>R("div",null,"Ctrl+A:  | Delete:  | Esc: ",-1)),fb=hs(()=>R("div",null,"Ctrl+:  | : ",-1)),pb=hs(()=>R("div",{class:"mt-1"},"F2: ",-1)),_b=[ub,db,fb,pb],gb={key:1,class:"absolute inset-0 flex items-center justify-center pointer-events-none"},mb=hs(()=>R("p",{class:"text-xl font-medium"},"",-1)),vb=hs(()=>R("p",{class:"text-sm mt-2"}," JPGPNGGIFWebP  ZIP ",-1)),bb=ut({__name:"ImageToolsNew",setup(e){const t=fe([]),s=fe(),i=fe(new Set),a=fe(!1),u=fe(1),f=fe({x:0,y:0}),r=fe(!0),n=qt({width:2e3,height:1200,backgroundColor:r.value?"#000000":"#f8fafc",gridSize:50,showGrid:!1,snapToGrid:!1}),p=fe(!1),_=fe();fs(async()=>{"showDirectoryPicker"in window&&(p.value=!0)});const d=async()=>{if("showDirectoryPicker"in window)try{const z=await window.showDirectoryPicker();await L(z)}catch{console.log("")}},g=qt({isDragging:!1,draggedItem:null,startPos:{x:0,y:0},startImagePos:{x:0,y:0},isDragged:!1,selectedImagesStartPos:new Map}),b=fe(!1),w=fe({x:0,y:0}),m=fe({x:0,y:0}),c=fe(!0),h=fe("select"),o=qt({isSelecting:!1,startX:0,startY:0,currentX:0,currentY:0});fs(()=>{l()});const l=()=>{var z;h.value="select",b.value=!1,(z=s.value)==null||z.classList.remove("cursor-grab","cursor-grabbing"),window.removeEventListener("mousedown",K),window.removeEventListener("mousemove",y),window.removeEventListener("mouseup",D)},v=()=>{var z;h.value="move",b.value=!0,(z=s.value)==null||z.classList.add("cursor-grab"),window.addEventListener("mousedown",K,{passive:!1}),window.addEventListener("mouseup",D)},S=()=>{r.value=!r.value,n.backgroundColor=r.value?"#000000":"#f8fafc"},x=Xl(),k=()=>{x.push("/")},C=z=>{z.key==="Delete"&&i.value.size>0&&le(),z.key==="Escape"&&$(),z.key==="a"&&z.ctrlKey&&(z.preventDefault(),ne()),z.key==="F2"&&(z.preventDefault(),P())},A=async(z,H)=>{const W=Array.from(z);for(const se of W)se.type.startsWith("image/")?await N(se,H):se.name.endsWith(".zip")&&await G(se)},N=async(z,H)=>{var De;const W=URL.createObjectURL(z),se=Math.random().toString(36).slice(2),re=new Image;await new Promise((Ae,Se)=>{re.onload=Ae,re.onerror=Se,re.src=W});const ae=Math.min(120,Math.max(50,re.width/8));let ge=Math.random()*(n.width-ae),_e=Math.random()*(n.height-ae);if(H){ge=H.x-ae/2,_e=H.y-ae/2;const Ae=window.innerWidth/u.value,Se=window.innerHeight/u.value,Ee=(De=s.value)==null?void 0:De.getBoundingClientRect(),Be=Ee?Ee.left/u.value:0,je=Ee?Ee.top/u.value:0,$e=Math.max(n.width,Ae-Be)-ae,it=Math.max(n.height,Se-je)-ae,at=-Be,He=-je;ge=Math.max(at,Math.min($e,ge)),_e=Math.max(He,Math.min(it,_e))}const xe={id:se,file:z,name:z.name,type:z.type,url:W,position:{id:se,x:ge,y:_e,width:ae,height:ae*(re.height/re.width),rotation:0,scale:1,zIndex:Date.now()},isSelected:!1,isDragging:!1};t.value.push(xe)},G=async z=>{const W=await new Rn().loadAsync(z),se=[];for(const[re,ae]of Object.entries(W.files))if(!ae.dir&&ae.name.match(/\.(jpg|jpeg|png|gif|webp|bmp)$/i)){const ge=await ae.async("blob"),_e=new File([ge],ae.name,{type:"image/*"});se.push(_e)}await A(se)},L=async z=>{const H=[];for await(const[W,se]of z.entries())if(se.kind==="file"&&W.match(/\.(jpg|jpeg|png|gif|webp|bmp)$/i)){const re=await se.getFile();H.push(re)}await A(H)},I=z=>{z.preventDefault(),a.value=!0},E=z=>{var H;z.preventDefault(),(H=s.value)!=null&&H.contains(z.relatedTarget)||(a.value=!1)},X=async z=>{var se,re;z.preventDefault(),a.value=!1;const H=Array.from(((se=z.dataTransfer)==null?void 0:se.files)||[]),W=(re=s.value)==null?void 0:re.getBoundingClientRect();if(W){const ae=(z.clientX-W.left)/u.value,ge=(z.clientY-W.top)/u.value;await A(H,{x:ae,y:ge})}else await A(H)},Q=z=>{var re;if(h.value!=="select"||b.value||z.target.closest(".image-item"))return;z.preventDefault();const H=(re=s.value)==null?void 0:re.getBoundingClientRect();if(!H)return;const W=(z.clientX-H.left)/u.value-f.value.x/u.value,se=(z.clientY-H.top)/u.value-f.value.y/u.value;o.isSelecting=!0,o.startX=W,o.startY=se,o.currentX=W,o.currentY=se,window.addEventListener("mousemove",J,{passive:!1}),window.addEventListener("mouseup",ie)},J=z=>{var W;if(!o.isSelecting)return;z.preventDefault();const H=(W=s.value)==null?void 0:W.getBoundingClientRect();H&&(o.currentX=(z.clientX-H.left)/u.value-f.value.x/u.value,o.currentY=(z.clientY-H.top)/u.value-f.value.y/u.value)},ie=z=>{if(!o.isSelecting)return;z.preventDefault();const H={x:Math.min(o.startX,o.currentX),y:Math.min(o.startY,o.currentY),width:Math.abs(o.currentX-o.startX),height:Math.abs(o.currentY-o.startY)};T(H),o.isSelecting=!1,window.removeEventListener("mousemove",J),window.removeEventListener("mouseup",ie)},T=z=>{$(),t.value.forEach(H=>{const W={x:H.position.x,y:H.position.y,width:H.position.width,height:H.position.height};U(W,z)&&(H.isSelected=!0,i.value.add(H.id))})},U=(z,H)=>z.x<H.x+H.width&&z.x+z.width>H.x&&z.y<H.y+H.height&&z.y+z.height>H.y,M=(z,H)=>{H.ctrlKey||H.metaKey?(z.isSelected=!z.isSelected,z.isSelected?i.value.add(z.id):i.value.delete(z.id)):($(),z.isSelected=!0,i.value.add(z.id))},$=()=>{t.value.forEach(z=>{z.isSelected=!1}),i.value.clear()},ne=()=>{t.value.forEach(z=>{z.isSelected=!0}),i.value=new Set(t.value.map(z=>z.id))},le=()=>{t.value=t.value.filter(z=>!i.value.has(z.id)),i.value.clear()},ce=(z,H)=>{if(b.value){H.preventDefault(),H.stopPropagation();return}H.preventDefault();const W=H.ctrlKey||H.metaKey||i.value.size>1;!z.isSelected&&!W&&($(),z.isSelected=!0,i.value.add(z.id)),g.isDragging=!0,g.draggedItem=z,g.startPos={x:H.clientX,y:H.clientY},g.startImagePos={x:z.position.x,y:z.position.y},g.isDragged=!1,i.value.size>1?(g.selectedImagesStartPos=new Map,t.value.forEach(se=>{se.isSelected&&(g.selectedImagesStartPos.set(se.id,{x:se.position.x,y:se.position.y}),se.isDragging=!0,se.position.zIndex=Date.now())})):(z.isDragging=!0,z.position.zIndex=Date.now()),H.target instanceof HTMLElement&&(H.target.style.willChange="transform"),window.addEventListener("mousemove",ee,{passive:!1}),window.addEventListener("mouseup",F)};let pe=null,j=0,O=0;const ee=z=>{z.preventDefault(),g.isDragging&&(j=z.clientX,O=z.clientY,pe&&cancelAnimationFrame(pe),pe=requestAnimationFrame(()=>{var se;const H=(j-g.startPos.x)/u.value,W=(O-g.startPos.y)/u.value;if(i.value.size>1&&g.selectedImagesStartPos.size>0)t.value.forEach(re=>{var ae;if(re.isSelected&&g.selectedImagesStartPos.has(re.id)){const ge=g.selectedImagesStartPos.get(re.id);let _e=ge.x+H,xe=ge.y+W;const De=window.innerWidth/u.value,Ae=window.innerHeight/u.value,Se=(ae=s.value)==null?void 0:ae.getBoundingClientRect(),Ee=Se?Se.left/u.value:0,Be=Se?Se.top/u.value:0,je=Math.max(n.width,De-Ee)-re.position.width,$e=Math.max(n.height,Ae-Be)-re.position.height,it=-Ee,at=-Be;if(_e=Math.max(it,Math.min(je,_e)),xe=Math.max(at,Math.min($e,xe)),n.snapToGrid){const He=n.gridSize,yt=8,Mt=Math.round(_e/He)*He;Math.abs(_e-Mt)<yt&&(_e=_e+(Mt-_e)*.3);const ct=Math.round(xe/He)*He;Math.abs(xe-ct)<yt&&(xe=xe+(ct-xe)*.3)}re.position.x=_e,re.position.y=xe}});else if(g.draggedItem){let re=g.startImagePos.x+H,ae=g.startImagePos.y+W;const ge=window.innerWidth/u.value,_e=window.innerHeight/u.value,xe=(se=s.value)==null?void 0:se.getBoundingClientRect(),De=xe?xe.left/u.value:0,Ae=xe?xe.top/u.value:0,Se=Math.max(n.width,ge-De)-g.draggedItem.position.width,Ee=Math.max(n.height,_e-Ae)-g.draggedItem.position.height,Be=-De,je=-Ae;if(re=Math.max(Be,Math.min(Se,re)),ae=Math.max(je,Math.min(Ee,ae)),n.snapToGrid){const $e=n.gridSize,it=8,at=Math.round(re/$e)*$e;Math.abs(re-at)<it&&(re=re+(at-re)*.3);const He=Math.round(ae/$e)*$e;Math.abs(ae-He)<it&&(ae=ae+(He-ae)*.3)}g.draggedItem.position.x=re,g.draggedItem.position.y=ae,g.isDragged=!0}}))},te=z=>{var Ee;const H=z.position.width,W=z.position.height,se=window.innerWidth/u.value,re=window.innerHeight/u.value,ae=(Ee=s.value)==null?void 0:Ee.getBoundingClientRect(),ge=ae?ae.left/u.value:0,_e=ae?ae.top/u.value:0,xe=Math.max(n.width,se-ge)-H,De=Math.max(n.height,re-_e)-W,Ae=-ge,Se=-_e;z.position.x=Math.max(Ae,Math.min(xe,z.position.x)),z.position.y=Math.max(Se,Math.min(De,z.position.y))},F=z=>{pe&&(cancelAnimationFrame(pe),pe=null),i.value.size>1?(t.value.forEach(H=>{H.isSelected&&(H.isDragging=!1,te(H))}),g.selectedImagesStartPos.clear()):g.draggedItem&&(te(g.draggedItem),g.draggedItem.isDragging=!1,z&&z.target instanceof HTMLElement&&(z.target.style.willChange="")),g.isDragging=!1,g.draggedItem=null,g.isDragged=!1,window.removeEventListener("mousemove",ee),window.removeEventListener("mouseup",F)},q=()=>{u.value=Math.min(u.value+.1,3)},Y=()=>{u.value=Math.max(u.value-.1,.1)},y=z=>{if(!b.value||!w.value)return;z.preventDefault();const H=z.clientX-w.value.x,W=z.clientY-w.value.y;f.value.x=m.value.x+H,f.value.y=m.value.y+W},P=()=>{b.value?l():v()},K=z=>{b.value&&(z.preventDefault(),z.stopPropagation(),w.value={x:z.clientX,y:z.clientY},m.value={x:f.value.x,y:f.value.y},window.addEventListener("mousemove",y,{passive:!1}))},D=()=>{window.removeEventListener("mousemove",y)},B=()=>{u.value=1,f.value={x:0,y:0}},V=z=>{if(z.preventDefault(),z.ctrlKey){const H=z.deltaY>0?-.1:.1;u.value=Math.max(.1,Math.min(3,u.value+H))}else f.value.x-=z.deltaX*.5,f.value.y-=z.deltaY*.5},Z=async()=>{const z=document.createElement("canvas");z.width=n.width,z.height=n.height;const H=z.getContext("2d");H.fillStyle=r.value?"#000000":"#f8fafc",H.fillRect(0,0,z.width,z.height);const W=[...t.value].sort((se,re)=>se.position.zIndex-re.position.zIndex);for(const se of W){const re=new Image;await new Promise(ae=>{re.onload=ae,re.src=se.url}),H.save(),H.translate(se.position.x+se.position.width/2,se.position.y+se.position.height/2),H.rotate(se.position.rotation*Math.PI/180),H.drawImage(re,-se.position.width/2,-se.position.height/2,se.position.width,se.position.height),H.restore()}z.toBlob(se=>{if(se){const re=URL.createObjectURL(se),ae=document.createElement("a");ae.href=re,ae.download="canvas-export.png",ae.click(),URL.revokeObjectURL(re)}})};return fs(()=>{window.addEventListener("keydown",C)}),fs(()=>()=>{window.removeEventListener("keydown",C)}),(z,H)=>(ue(),de("div",{class:Te([r.value?"bg-black":"bg-slate-50","h-screen relative overflow-hidden"])},[c.value?(ue(),de("div",Vv,[R("div",{class:Te([r.value?"bg-slate-800 border-slate-700":"bg-white border-slate-200","rounded-xl shadow-lg border p-2 flex items-center gap-2 transition-colors duration-300"])},[R("div",{class:Te([r.value?"border-slate-600":"border-slate-200","flex items-center gap-1 border-r pr-2"])},[R("button",{onClick:k,class:Te([r.value?"hover:bg-gray-800 text-white":"hover:bg-slate-100 text-slate-800","p-2 rounded-lg transition-colors"]),title:""},[be(ve(gs),{class:"w-4 h-4"})],2),R("input",{ref_key:"fileInputRef",ref:_,type:"file",multiple:"",accept:"image/*,.zip",class:"hidden",onChange:H[0]||(H[0]=W=>A(W.target.files))},null,544),R("button",{onClick:H[1]||(H[1]=W=>{var se;return(se=_.value)==null?void 0:se.click()}),class:Te([r.value?"hover:bg-gray-800 text-white":"hover:bg-slate-100 text-slate-800","p-2 rounded-lg transition-colors"]),title:""},[be(ve(sr),{class:"w-4 h-4"})],2),p.value?(ue(),de("button",{key:0,onClick:d,class:Te([r.value?"hover:bg-gray-800 text-white":"hover:bg-slate-100 text-slate-800","p-2 rounded-lg transition-colors"]),title:""},[be(ve(Tf),{class:"w-4 h-4"})],2)):Oe("",!0),R("button",{onClick:Z,class:Te([r.value?"hover:bg-gray-800 text-white":"hover:bg-slate-100 text-slate-800","p-2 rounded-lg transition-colors"]),title:""},[be(ve(bi),{class:"w-4 h-4"})],2)],2),R("div",{class:Te([r.value?"border-slate-600":"border-slate-200","flex items-center gap-1 border-r pr-2"])},[R("button",{onClick:Y,class:Te([r.value?"hover:bg-slate-700 text-white":"hover:bg-slate-100 text-slate-800","p-2 rounded-lg transition-colors"])},[be(ve(Vf),{class:"w-4 h-4"})],2),R("span",{class:Te([r.value?"text-white":"text-slate-800","px-2 text-sm min-w-[3rem] text-center"])},we(Math.round(u.value*100))+"% ",3),R("button",{onClick:q,class:Te([r.value?"hover:bg-slate-700 text-white":"hover:bg-slate-100 text-slate-800","p-2 rounded-lg transition-colors"])},[be(ve(Kf),{class:"w-4 h-4"})],2),R("button",{onClick:B,class:Te([r.value?"hover:bg-slate-700 text-white":"hover:bg-slate-100 text-slate-800","p-2 rounded-lg transition-colors"]),title:""},[be(ve(zf),{class:"w-4 h-4"})],2)],2),R("div",Gv,[R("button",{onClick:ne,class:Te([r.value?"hover:bg-slate-700 text-white":"hover:bg-slate-100 text-slate-800","p-2 rounded-lg transition-colors"]),title:""},"  ",2),R("button",{onClick:$,class:Te([r.value?"hover:bg-slate-700 text-white":"hover:bg-slate-100 text-slate-800","p-2 rounded-lg transition-colors"]),title:""},"  ",2),R("button",{onClick:le,disabled:i.value.size===0,class:Te([[r.value?"hover:bg-slate-700 text-white":"hover:bg-slate-100 text-slate-800",i.value.size===0?"opacity-50 cursor-not-allowed":""],"p-2 rounded-lg transition-colors"]),title:""},[be(ve(eo),{class:"w-4 h-4"})],10,Zv)])],2),R("div",{class:Te([r.value?"bg-gray-900 text-white border-slate-700":"bg-white text-slate-800 border-slate-200","rounded-xl shadow-lg border p-2 flex items-center gap-2 transition-colors duration-300"])},[R("button",{onClick:S,class:Te([r.value?"bg-gray-800 text-white hover:bg-gray-700":"bg-white text-slate-800 hover:bg-slate-50","p-2 rounded-lg border transition-colors shadow-sm"]),title:"/"},[R("div",Xv,[r.value?(ue(),de("svg",Jv,eb)):(ue(),de("svg",tb,ib)),R("span",nb,we(r.value?"":""),1)])],2),R("button",{onClick:v,class:Te([[b.value?r.value?"bg-blue-600 text-white":"bg-blue-500 text-white":r.value?"hover:bg-gray-800 text-white":"hover:bg-slate-100 text-slate-800"],"p-3 rounded-lg transition-colors border-2"]),style:At({borderColor:b.value?r.value?"#2563eb":"#3b82f6":"transparent"}),title:""},[be(ve(Df),{class:"w-5 h-5"})],6),R("button",{onClick:l,class:Te([[h.value==="select"?r.value?"bg-blue-600 text-white":"bg-blue-500 text-white":r.value?"hover:bg-gray-800 text-white":"hover:bg-slate-100 text-slate-800"],"p-3 rounded-lg transition-colors border-2"]),style:At({borderColor:h.value==="select"?r.value?"#2563eb":"#3b82f6":"transparent"}),title:""},[be(ve(Ff),{class:"w-5 h-5"})],6)],2),R("div",{class:Te([r.value?"bg-gray-900 text-white border-gray-700":"bg-white text-slate-800 border-slate-200","rounded-xl shadow-lg border px-4 py-2 transition-colors duration-300"])},[R("div",ob," : "+we(t.value.length)+" | : "+we(i.value.size),1)],2)])):Oe("",!0),R("div",{ref_key:"panelRef",ref:s,class:Te(["absolute inset-0 overflow-hidden",[r.value?"bg-black":"bg-slate-50",g.isDragging?"cursor-grabbing":""]]),onDragover:I,onDragleave:E,onDrop:X,onWheel:V},[R("div",{class:"relative",style:At({transform:`translate(${f.value.x}px, ${f.value.y}px) scale(${u.value})`,transformOrigin:"0 0"})},[R("div",{class:Te([r.value?"bg-black":"bg-slate-50","absolute inset-0 transition-colors duration-300"])},null,2),n.showGrid?(ue(),de("div",{key:0,class:"absolute inset-0 opacity-20",style:At({backgroundImage:r.value?`
              linear-gradient(to right, #6b7280 1px, transparent 1px),
              linear-gradient(to bottom, #6b7280 1px, transparent 1px)
            `:`
              linear-gradient(to right, #e2e8f0 1px, transparent 1px),
              linear-gradient(to bottom, #e2e8f0 1px, transparent 1px)
            `,backgroundSize:`${n.gridSize}px ${n.gridSize}px`})},null,4)):Oe("",!0),a.value?(ue(),de("div",{key:1,class:Te(["absolute inset-0 bg-brand-500/10 border-2 border-dashed border-brand-500 flex items-center justify-center z-10",{"bg-slate-500/20":r.value}])},[R("div",{class:Te([r.value?"bg-gray-900 text-white border-gray-700":"bg-white text-slate-800 border-brand-200","rounded-lg p-6 shadow-lg border"])},[R("div",ab,[be(ve(sr),{class:"w-12 h-12 text-brand-500 mx-auto mb-2"}),R("p",{class:Te([r.value?"text-white":"text-brand-700","text-lg font-semibold"])},"",2),R("p",{class:Te([r.value?"text-slate-300":"text-brand-600","text-sm"])}," JPGPNGGIFWebP ",2)])],2)],2)):Oe("",!0),R("div",{class:"relative panel-container",style:At({width:n.width+"px",height:n.height+"px"}),onMousedown:Q},[o.isSelecting?(ue(),de("div",{key:0,class:"absolute border-2 border-blue-500 bg-blue-200/20 pointer-events-none z-50",style:At({left:Math.min(o.startX,o.currentX)+"px",top:Math.min(o.startY,o.currentY)+"px",width:Math.abs(o.currentX-o.startX)+"px",height:Math.abs(o.currentY-o.startY)+"px"})},null,4)):Oe("",!0),(ue(!0),de(Qe,null,Gt(t.value,W=>(ue(),de("div",{key:W.id,class:Te(["absolute cursor-move select-none image-item",{"ring-2 ring-brand-500 ring-offset-2":W.isSelected,"ring-2 ring-amber-400 ring-offset-2":W.isDragging,"hover:shadow-lg transition-shadow":!W.isDragging,"is-dragging":W.isDragging,"optimized-element":!0}]),style:At({left:W.position.x+"px",top:W.position.y+"px",width:W.position.width+"px",height:W.position.height+"px",transform:`rotate(${W.position.rotation}deg) scale(${W.position.scale})`,transformOrigin:"center",zIndex:W.position.zIndex,willChange:W.isDragging?"transform":"auto"}),onMousedown:se=>ce(W,se),onClick:se=>M(W,se)},[R("img",{src:W.url,class:"w-full h-full object-cover rounded-xl shadow-md pointer-events-none",draggable:"false"},null,8,cb),W.isSelected?(ue(),de("div",hb,we(W.name),1)):Oe("",!0)],46,lb))),128))],36)],4)],34),R("div",{class:Te([r.value?"bg-gray-900/90 text-white border-gray-700":"bg-white/90 text-slate-600 border-slate-200","fixed bottom-4 left-4 backdrop-blur-sm rounded-lg p-3 text-xs border transition-colors duration-300"])},_b,2),t.value.length===0&&!a.value?(ue(),de("div",gb,[R("div",{class:Te([(r.value,"text-slate-400"),"text-center"])},[be(ve(Af),{class:"w-16 h-16 mx-auto mb-4 opacity-50"}),mb,vb],2)])):Oe("",!0)],2))}}),hc=(e,t)=>{const s=e.__vccOpts||e;for(const[i,a]of t)s[i]=a;return s},wb=hc(bb,[["__scopeId","data-v-419c0ac2"]]),yb={class:"min-h-screen bg-gradient-to-b from-brand-50 to-white"},Sb={class:"max-w-4xl mx-auto px-4 py-8"},xb={class:"flex items-center justify-between mb-8"},Cb=R("div",{class:"text-center flex-1"},[R("h1",{class:"text-3xl font-bold text-slate-900 mb-2"},"BASE64"),R("p",{class:"text-slate-600"},"BASE64")],-1),kb=R("span",{class:"hidden md:inline"},"",-1),Eb={class:"bg-white rounded-xl shadow-sm border border-slate-200 p-6 mb-6"},Rb=Ir('<div class="w-16 h-16 mx-auto mb-4 bg-brand-100 rounded-full flex items-center justify-center"><svg class="w-8 h-8 text-brand-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg></div><h3 class="text-lg font-semibold text-slate-900 mb-2"></h3><p class="text-slate-500 text-sm"> JPGPNGGIFWEBP </p>',3),Ab={key:0,class:"mt-6"},Tb=R("h4",{class:"text-sm font-medium text-slate-700 mb-3"},"",-1),Db={class:"flex flex-col md:flex-row gap-6"},Lb={class:"flex-1"},Ob=["src"],Mb={class:"flex-1"},Ib={class:"text-sm text-slate-600 space-y-2"},Bb=R("span",{class:"font-medium"},"",-1),Pb=R("span",{class:"font-medium"},"",-1),$b=R("span",{class:"font-medium"},"",-1),Fb={key:0,class:"bg-white rounded-xl shadow-sm border border-slate-200 p-6"},Hb={class:"flex items-center justify-between mb-4"},Nb=R("h3",{class:"text-lg font-semibold text-slate-900"},"BASE64",-1),zb={key:0,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Ub=R("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"},null,-1),jb=[Ub],Wb={key:1,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},qb=R("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1),Kb=[qb],Vb={class:"relative"},Gb={class:"absolute top-2 right-2 text-xs text-slate-500 bg-white px-2 py-1 rounded"},Zb=R("div",{class:"mt-3 text-xs text-slate-500"},"  ",-1),Xb={key:1,class:"bg-white rounded-xl shadow-sm border border-slate-200 p-6"},Jb=Ir('<h3 class="text-lg font-semibold text-slate-900 mb-4"></h3><div class="space-y-3 text-slate-600"><div class="flex items-start gap-3"><div class="w-6 h-6 bg-brand-100 text-brand-600 rounded-full flex items-center justify-center text-sm font-medium">1</div><p></p></div><div class="flex items-start gap-3"><div class="w-6 h-6 bg-brand-100 text-brand-600 rounded-full flex items-center justify-center text-sm font-medium">2</div><p>BASE64</p></div><div class="flex items-start gap-3"><div class="w-6 h-6 bg-brand-100 text-brand-600 rounded-full flex items-center justify-center text-sm font-medium">3</div><p>BASE64</p></div></div>',2),Yb=[Jb],Qb=ut({__name:"ImageToBase64",setup(e){const t=fe(),s=fe(),i=fe(!1),a=fe(""),u=fe(""),f=fe(""),r=fe(""),n=fe(0),p=fe(0),_=fe(!1),d=h=>{const o=h.target;o.files&&o.files[0]&&b(o.files[0])},g=h=>{h.preventDefault(),i.value=!1,h.dataTransfer&&h.dataTransfer.files[0]&&b(h.dataTransfer.files[0])},b=h=>{if(!h.type.startsWith("image/")){alert("");return}f.value=h.name,r.value=w(h.size);const o=new FileReader;o.onload=l=>{var x;const v=(x=l.target)==null?void 0:x.result;a.value=v,u.value=v;const S=new Image;S.onload=()=>{n.value=S.width,p.value=S.height},S.src=v},o.readAsDataURL(h)},w=h=>{if(h===0)return"0 Bytes";const o=1024,l=["Bytes","KB","MB","GB"],v=Math.floor(Math.log(h)/Math.log(o));return parseFloat((h/Math.pow(o,v)).toFixed(2))+" "+l[v]},m=async()=>{var h;try{await navigator.clipboard.writeText(u.value),_.value=!0,setTimeout(()=>{_.value=!1},2e3)}catch{(h=s.value)==null||h.select(),document.execCommand("copy"),_.value=!0,setTimeout(()=>{_.value=!1},2e3)}},c=()=>{var h;(h=s.value)==null||h.select()};return fs(()=>{}),(h,o)=>(ue(),de("div",yb,[R("div",Sb,[R("div",xb,[Cb,be(ve(Qt),{to:"/",class:"flex items-center gap-2 px-3 py-2 bg-white/80 backdrop-blur rounded-lg shadow-sm border border-slate-200 text-slate-600 hover:text-brand-600"},{default:Yt(()=>[be(ve(gs),{class:"w-5 h-5"}),kb]),_:1})]),R("div",Eb,[R("div",{class:Te(["border-2 border-dashed border-slate-300 rounded-lg p-8 text-center cursor-pointer hover:border-brand-300 transition-colors",{"border-brand-400 bg-brand-50":i.value}]),onDragover:o[0]||(o[0]=wr(l=>i.value=!0,["prevent"])),onDragleave:o[1]||(o[1]=l=>i.value=!1),onDrop:g,onClick:o[2]||(o[2]=l=>h.$refs.fileInput.click())},[R("input",{ref_key:"fileInput",ref:t,type:"file",accept:"image/*",class:"hidden",onChange:d},null,544),Rb],34),a.value?(ue(),de("div",Ab,[Tb,R("div",Db,[R("div",Lb,[R("img",{src:a.value,class:"max-w-full max-h-64 rounded-lg border border-slate-200",alt:""},null,8,Ob)]),R("div",Mb,[R("div",Ib,[R("div",null,[Bb,We(we(f.value),1)]),R("div",null,[Pb,We(we(r.value),1)]),R("div",null,[$b,We(we(n.value)+"  "+we(p.value)+" ",1)])])])])])):Oe("",!0)]),u.value?(ue(),de("div",Fb,[R("div",Hb,[Nb,R("button",{onClick:m,class:Te(["flex items-center gap-2 px-4 py-2 bg-brand-500 text-white rounded-lg hover:bg-brand-600 transition-colors",{"bg-green-500":_.value}])},[_.value?(ue(),de("svg",Wb,Kb)):(ue(),de("svg",zb,jb)),We(" "+we(_.value?"":""),1)],2)]),R("div",Vb,[Ze(R("textarea",{ref_key:"base64Textarea",ref:s,"onUpdate:modelValue":o[3]||(o[3]=l=>u.value=l),readonly:"",class:"w-full h-40 p-3 border border-slate-300 rounded-lg bg-slate-50 text-sm font-mono resize-none",onClick:c},null,512),[[Ye,u.value]]),R("div",Gb,we(u.value.length)+"  ",1)]),Zb])):(ue(),de("div",Xb,Yb))])]))}});function uc(e,t){return function(){return e.apply(t,arguments)}}const{toString:e1}=Object.prototype,{getPrototypeOf:ro}=Object,{iterator:$i,toStringTag:dc}=Symbol,Fi=(e=>t=>{const s=e1.call(t);return e[s]||(e[s]=s.slice(8,-1).toLowerCase())})(Object.create(null)),es=e=>(e=e.toLowerCase(),t=>Fi(t)===e),Hi=e=>t=>typeof t===e,{isArray:ar}=Array,rr=Hi("undefined");function Br(e){return e!==null&&!rr(e)&&e.constructor!==null&&!rr(e.constructor)&&Tt(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const fc=es("ArrayBuffer");function t1(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&fc(e.buffer),t}const s1=Hi("string"),Tt=Hi("function"),pc=Hi("number"),Pr=e=>e!==null&&typeof e=="object",r1=e=>e===!0||e===!1,ai=e=>{if(Fi(e)!=="object")return!1;const t=ro(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(dc in e)&&!($i in e)},i1=e=>{if(!Pr(e)||Br(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},n1=es("Date"),o1=es("File"),a1=es("Blob"),l1=es("FileList"),c1=e=>Pr(e)&&Tt(e.pipe),h1=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Tt(e.append)&&((t=Fi(e))==="formdata"||t==="object"&&Tt(e.toString)&&e.toString()==="[object FormData]"))},u1=es("URLSearchParams"),[d1,f1,p1,_1]=["ReadableStream","Request","Response","Headers"].map(es),g1=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function $r(e,t,{allOwnKeys:s=!1}={}){if(e===null||typeof e>"u")return;let i,a;if(typeof e!="object"&&(e=[e]),ar(e))for(i=0,a=e.length;i<a;i++)t.call(null,e[i],i,e);else{if(Br(e))return;const u=s?Object.getOwnPropertyNames(e):Object.keys(e),f=u.length;let r;for(i=0;i<f;i++)r=u[i],t.call(null,e[r],r,e)}}function _c(e,t){if(Br(e))return null;t=t.toLowerCase();const s=Object.keys(e);let i=s.length,a;for(;i-- >0;)if(a=s[i],t===a.toLowerCase())return a;return null}const Ms=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,gc=e=>!rr(e)&&e!==Ms;function An(){const{caseless:e,skipUndefined:t}=gc(this)&&this||{},s={},i=(a,u)=>{const f=e&&_c(s,u)||u;ai(s[f])&&ai(a)?s[f]=An(s[f],a):ai(a)?s[f]=An({},a):ar(a)?s[f]=a.slice():(!t||!rr(a))&&(s[f]=a)};for(let a=0,u=arguments.length;a<u;a++)arguments[a]&&$r(arguments[a],i);return s}const m1=(e,t,s,{allOwnKeys:i}={})=>($r(t,(a,u)=>{s&&Tt(a)?e[u]=uc(a,s):e[u]=a},{allOwnKeys:i}),e),v1=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),b1=(e,t,s,i)=>{e.prototype=Object.create(t.prototype,i),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),s&&Object.assign(e.prototype,s)},w1=(e,t,s,i)=>{let a,u,f;const r={};if(t=t||{},e==null)return t;do{for(a=Object.getOwnPropertyNames(e),u=a.length;u-- >0;)f=a[u],(!i||i(f,e,t))&&!r[f]&&(t[f]=e[f],r[f]=!0);e=s!==!1&&ro(e)}while(e&&(!s||s(e,t))&&e!==Object.prototype);return t},y1=(e,t,s)=>{e=String(e),(s===void 0||s>e.length)&&(s=e.length),s-=t.length;const i=e.indexOf(t,s);return i!==-1&&i===s},S1=e=>{if(!e)return null;if(ar(e))return e;let t=e.length;if(!pc(t))return null;const s=new Array(t);for(;t-- >0;)s[t]=e[t];return s},x1=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&ro(Uint8Array)),C1=(e,t)=>{const i=(e&&e[$i]).call(e);let a;for(;(a=i.next())&&!a.done;){const u=a.value;t.call(e,u[0],u[1])}},k1=(e,t)=>{let s;const i=[];for(;(s=e.exec(t))!==null;)i.push(s);return i},E1=es("HTMLFormElement"),R1=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(s,i,a){return i.toUpperCase()+a}),ka=(({hasOwnProperty:e})=>(t,s)=>e.call(t,s))(Object.prototype),A1=es("RegExp"),mc=(e,t)=>{const s=Object.getOwnPropertyDescriptors(e),i={};$r(s,(a,u)=>{let f;(f=t(a,u,e))!==!1&&(i[u]=f||a)}),Object.defineProperties(e,i)},T1=e=>{mc(e,(t,s)=>{if(Tt(e)&&["arguments","caller","callee"].indexOf(s)!==-1)return!1;const i=e[s];if(Tt(i)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+s+"'")})}})},D1=(e,t)=>{const s={},i=a=>{a.forEach(u=>{s[u]=!0})};return ar(e)?i(e):i(String(e).split(t)),s},L1=()=>{},O1=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function M1(e){return!!(e&&Tt(e.append)&&e[dc]==="FormData"&&e[$i])}const I1=e=>{const t=new Array(10),s=(i,a)=>{if(Pr(i)){if(t.indexOf(i)>=0)return;if(Br(i))return i;if(!("toJSON"in i)){t[a]=i;const u=ar(i)?[]:{};return $r(i,(f,r)=>{const n=s(f,a+1);!rr(n)&&(u[r]=n)}),t[a]=void 0,u}}return i};return s(e,0)},B1=es("AsyncFunction"),P1=e=>e&&(Pr(e)||Tt(e))&&Tt(e.then)&&Tt(e.catch),vc=((e,t)=>e?setImmediate:t?((s,i)=>(Ms.addEventListener("message",({source:a,data:u})=>{a===Ms&&u===s&&i.length&&i.shift()()},!1),a=>{i.push(a),Ms.postMessage(s,"*")}))(`axios@${Math.random()}`,[]):s=>setTimeout(s))(typeof setImmediate=="function",Tt(Ms.postMessage)),$1=typeof queueMicrotask<"u"?queueMicrotask.bind(Ms):typeof process<"u"&&process.nextTick||vc,F1=e=>e!=null&&Tt(e[$i]),he={isArray:ar,isArrayBuffer:fc,isBuffer:Br,isFormData:h1,isArrayBufferView:t1,isString:s1,isNumber:pc,isBoolean:r1,isObject:Pr,isPlainObject:ai,isEmptyObject:i1,isReadableStream:d1,isRequest:f1,isResponse:p1,isHeaders:_1,isUndefined:rr,isDate:n1,isFile:o1,isBlob:a1,isRegExp:A1,isFunction:Tt,isStream:c1,isURLSearchParams:u1,isTypedArray:x1,isFileList:l1,forEach:$r,merge:An,extend:m1,trim:g1,stripBOM:v1,inherits:b1,toFlatObject:w1,kindOf:Fi,kindOfTest:es,endsWith:y1,toArray:S1,forEachEntry:C1,matchAll:k1,isHTMLForm:E1,hasOwnProperty:ka,hasOwnProp:ka,reduceDescriptors:mc,freezeMethods:T1,toObjectSet:D1,toCamelCase:R1,noop:L1,toFiniteNumber:O1,findKey:_c,global:Ms,isContextDefined:gc,isSpecCompliantForm:M1,toJSONObject:I1,isAsyncFn:B1,isThenable:P1,setImmediate:vc,asap:$1,isIterable:F1};function Me(e,t,s,i,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),s&&(this.config=s),i&&(this.request=i),a&&(this.response=a,this.status=a.status?a.status:null)}he.inherits(Me,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:he.toJSONObject(this.config),code:this.code,status:this.status}}});const bc=Me.prototype,wc={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{wc[e]={value:e}});Object.defineProperties(Me,wc);Object.defineProperty(bc,"isAxiosError",{value:!0});Me.from=(e,t,s,i,a,u)=>{const f=Object.create(bc);he.toFlatObject(e,f,function(_){return _!==Error.prototype},p=>p!=="isAxiosError");const r=e&&e.message?e.message:"Error",n=t==null&&e?e.code:t;return Me.call(f,r,n,s,i,a),e&&f.cause==null&&Object.defineProperty(f,"cause",{value:e,configurable:!0}),f.name=e&&e.name||"Error",u&&Object.assign(f,u),f};const H1=null;function Tn(e){return he.isPlainObject(e)||he.isArray(e)}function yc(e){return he.endsWith(e,"[]")?e.slice(0,-2):e}function Ea(e,t,s){return e?e.concat(t).map(function(a,u){return a=yc(a),!s&&u?"["+a+"]":a}).join(s?".":""):t}function N1(e){return he.isArray(e)&&!e.some(Tn)}const z1=he.toFlatObject(he,{},null,function(t){return/^is[A-Z]/.test(t)});function Ni(e,t,s){if(!he.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,s=he.toFlatObject(s,{metaTokens:!0,dots:!1,indexes:!1},!1,function(m,c){return!he.isUndefined(c[m])});const i=s.metaTokens,a=s.visitor||_,u=s.dots,f=s.indexes,n=(s.Blob||typeof Blob<"u"&&Blob)&&he.isSpecCompliantForm(t);if(!he.isFunction(a))throw new TypeError("visitor must be a function");function p(w){if(w===null)return"";if(he.isDate(w))return w.toISOString();if(he.isBoolean(w))return w.toString();if(!n&&he.isBlob(w))throw new Me("Blob is not supported. Use a Buffer instead.");return he.isArrayBuffer(w)||he.isTypedArray(w)?n&&typeof Blob=="function"?new Blob([w]):Buffer.from(w):w}function _(w,m,c){let h=w;if(w&&!c&&typeof w=="object"){if(he.endsWith(m,"{}"))m=i?m:m.slice(0,-2),w=JSON.stringify(w);else if(he.isArray(w)&&N1(w)||(he.isFileList(w)||he.endsWith(m,"[]"))&&(h=he.toArray(w)))return m=yc(m),h.forEach(function(l,v){!(he.isUndefined(l)||l===null)&&t.append(f===!0?Ea([m],v,u):f===null?m:m+"[]",p(l))}),!1}return Tn(w)?!0:(t.append(Ea(c,m,u),p(w)),!1)}const d=[],g=Object.assign(z1,{defaultVisitor:_,convertValue:p,isVisitable:Tn});function b(w,m){if(!he.isUndefined(w)){if(d.indexOf(w)!==-1)throw Error("Circular reference detected in "+m.join("."));d.push(w),he.forEach(w,function(h,o){(!(he.isUndefined(h)||h===null)&&a.call(t,h,he.isString(o)?o.trim():o,m,g))===!0&&b(h,m?m.concat(o):[o])}),d.pop()}}if(!he.isObject(e))throw new TypeError("data must be an object");return b(e),t}function Ra(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(i){return t[i]})}function io(e,t){this._pairs=[],e&&Ni(e,this,t)}const Sc=io.prototype;Sc.append=function(t,s){this._pairs.push([t,s])};Sc.toString=function(t){const s=t?function(i){return t.call(this,i,Ra)}:Ra;return this._pairs.map(function(a){return s(a[0])+"="+s(a[1])},"").join("&")};function U1(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function xc(e,t,s){if(!t)return e;const i=s&&s.encode||U1;he.isFunction(s)&&(s={serialize:s});const a=s&&s.serialize;let u;if(a?u=a(t,s):u=he.isURLSearchParams(t)?t.toString():new io(t,s).toString(i),u){const f=e.indexOf("#");f!==-1&&(e=e.slice(0,f)),e+=(e.indexOf("?")===-1?"?":"&")+u}return e}class Aa{constructor(){this.handlers=[]}use(t,s,i){return this.handlers.push({fulfilled:t,rejected:s,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){he.forEach(this.handlers,function(i){i!==null&&t(i)})}}const Cc={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},j1=typeof URLSearchParams<"u"?URLSearchParams:io,W1=typeof FormData<"u"?FormData:null,q1=typeof Blob<"u"?Blob:null,K1={isBrowser:!0,classes:{URLSearchParams:j1,FormData:W1,Blob:q1},protocols:["http","https","file","blob","url","data"]},no=typeof window<"u"&&typeof document<"u",Dn=typeof navigator=="object"&&navigator||void 0,V1=no&&(!Dn||["ReactNative","NativeScript","NS"].indexOf(Dn.product)<0),G1=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Z1=no&&window.location.href||"http://localhost",X1=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:no,hasStandardBrowserEnv:V1,hasStandardBrowserWebWorkerEnv:G1,navigator:Dn,origin:Z1},Symbol.toStringTag,{value:"Module"})),vt={...X1,...K1};function J1(e,t){return Ni(e,new vt.classes.URLSearchParams,{visitor:function(s,i,a,u){return vt.isNode&&he.isBuffer(s)?(this.append(i,s.toString("base64")),!1):u.defaultVisitor.apply(this,arguments)},...t})}function Y1(e){return he.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function Q1(e){const t={},s=Object.keys(e);let i;const a=s.length;let u;for(i=0;i<a;i++)u=s[i],t[u]=e[u];return t}function kc(e){function t(s,i,a,u){let f=s[u++];if(f==="__proto__")return!0;const r=Number.isFinite(+f),n=u>=s.length;return f=!f&&he.isArray(a)?a.length:f,n?(he.hasOwnProp(a,f)?a[f]=[a[f],i]:a[f]=i,!r):((!a[f]||!he.isObject(a[f]))&&(a[f]=[]),t(s,i,a[f],u)&&he.isArray(a[f])&&(a[f]=Q1(a[f])),!r)}if(he.isFormData(e)&&he.isFunction(e.entries)){const s={};return he.forEachEntry(e,(i,a)=>{t(Y1(i),a,s,0)}),s}return null}function ew(e,t,s){if(he.isString(e))try{return(t||JSON.parse)(e),he.trim(e)}catch(i){if(i.name!=="SyntaxError")throw i}return(s||JSON.stringify)(e)}const Fr={transitional:Cc,adapter:["xhr","http","fetch"],transformRequest:[function(t,s){const i=s.getContentType()||"",a=i.indexOf("application/json")>-1,u=he.isObject(t);if(u&&he.isHTMLForm(t)&&(t=new FormData(t)),he.isFormData(t))return a?JSON.stringify(kc(t)):t;if(he.isArrayBuffer(t)||he.isBuffer(t)||he.isStream(t)||he.isFile(t)||he.isBlob(t)||he.isReadableStream(t))return t;if(he.isArrayBufferView(t))return t.buffer;if(he.isURLSearchParams(t))return s.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let r;if(u){if(i.indexOf("application/x-www-form-urlencoded")>-1)return J1(t,this.formSerializer).toString();if((r=he.isFileList(t))||i.indexOf("multipart/form-data")>-1){const n=this.env&&this.env.FormData;return Ni(r?{"files[]":t}:t,n&&new n,this.formSerializer)}}return u||a?(s.setContentType("application/json",!1),ew(t)):t}],transformResponse:[function(t){const s=this.transitional||Fr.transitional,i=s&&s.forcedJSONParsing,a=this.responseType==="json";if(he.isResponse(t)||he.isReadableStream(t))return t;if(t&&he.isString(t)&&(i&&!this.responseType||a)){const f=!(s&&s.silentJSONParsing)&&a;try{return JSON.parse(t,this.parseReviver)}catch(r){if(f)throw r.name==="SyntaxError"?Me.from(r,Me.ERR_BAD_RESPONSE,this,null,this.response):r}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:vt.classes.FormData,Blob:vt.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};he.forEach(["delete","get","head","post","put","patch"],e=>{Fr.headers[e]={}});const tw=he.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),sw=e=>{const t={};let s,i,a;return e&&e.split(`
`).forEach(function(f){a=f.indexOf(":"),s=f.substring(0,a).trim().toLowerCase(),i=f.substring(a+1).trim(),!(!s||t[s]&&tw[s])&&(s==="set-cookie"?t[s]?t[s].push(i):t[s]=[i]:t[s]=t[s]?t[s]+", "+i:i)}),t},Ta=Symbol("internals");function _r(e){return e&&String(e).trim().toLowerCase()}function li(e){return e===!1||e==null?e:he.isArray(e)?e.map(li):String(e)}function rw(e){const t=Object.create(null),s=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=s.exec(e);)t[i[1]]=i[2];return t}const iw=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function tn(e,t,s,i,a){if(he.isFunction(i))return i.call(this,t,s);if(a&&(t=s),!!he.isString(t)){if(he.isString(i))return t.indexOf(i)!==-1;if(he.isRegExp(i))return i.test(t)}}function nw(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,s,i)=>s.toUpperCase()+i)}function ow(e,t){const s=he.toCamelCase(" "+t);["get","set","has"].forEach(i=>{Object.defineProperty(e,i+s,{value:function(a,u,f){return this[i].call(this,t,a,u,f)},configurable:!0})})}let Dt=class{constructor(t){t&&this.set(t)}set(t,s,i){const a=this;function u(r,n,p){const _=_r(n);if(!_)throw new Error("header name must be a non-empty string");const d=he.findKey(a,_);(!d||a[d]===void 0||p===!0||p===void 0&&a[d]!==!1)&&(a[d||n]=li(r))}const f=(r,n)=>he.forEach(r,(p,_)=>u(p,_,n));if(he.isPlainObject(t)||t instanceof this.constructor)f(t,s);else if(he.isString(t)&&(t=t.trim())&&!iw(t))f(sw(t),s);else if(he.isObject(t)&&he.isIterable(t)){let r={},n,p;for(const _ of t){if(!he.isArray(_))throw TypeError("Object iterator must return a key-value pair");r[p=_[0]]=(n=r[p])?he.isArray(n)?[...n,_[1]]:[n,_[1]]:_[1]}f(r,s)}else t!=null&&u(s,t,i);return this}get(t,s){if(t=_r(t),t){const i=he.findKey(this,t);if(i){const a=this[i];if(!s)return a;if(s===!0)return rw(a);if(he.isFunction(s))return s.call(this,a,i);if(he.isRegExp(s))return s.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,s){if(t=_r(t),t){const i=he.findKey(this,t);return!!(i&&this[i]!==void 0&&(!s||tn(this,this[i],i,s)))}return!1}delete(t,s){const i=this;let a=!1;function u(f){if(f=_r(f),f){const r=he.findKey(i,f);r&&(!s||tn(i,i[r],r,s))&&(delete i[r],a=!0)}}return he.isArray(t)?t.forEach(u):u(t),a}clear(t){const s=Object.keys(this);let i=s.length,a=!1;for(;i--;){const u=s[i];(!t||tn(this,this[u],u,t,!0))&&(delete this[u],a=!0)}return a}normalize(t){const s=this,i={};return he.forEach(this,(a,u)=>{const f=he.findKey(i,u);if(f){s[f]=li(a),delete s[u];return}const r=t?nw(u):String(u).trim();r!==u&&delete s[u],s[r]=li(a),i[r]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const s=Object.create(null);return he.forEach(this,(i,a)=>{i!=null&&i!==!1&&(s[a]=t&&he.isArray(i)?i.join(", "):i)}),s}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,s])=>t+": "+s).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...s){const i=new this(t);return s.forEach(a=>i.set(a)),i}static accessor(t){const i=(this[Ta]=this[Ta]={accessors:{}}).accessors,a=this.prototype;function u(f){const r=_r(f);i[r]||(ow(a,f),i[r]=!0)}return he.isArray(t)?t.forEach(u):u(t),this}};Dt.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);he.reduceDescriptors(Dt.prototype,({value:e},t)=>{let s=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(i){this[s]=i}}});he.freezeMethods(Dt);function sn(e,t){const s=this||Fr,i=t||s,a=Dt.from(i.headers);let u=i.data;return he.forEach(e,function(r){u=r.call(s,u,a.normalize(),t?t.status:void 0)}),a.normalize(),u}function Ec(e){return!!(e&&e.__CANCEL__)}function lr(e,t,s){Me.call(this,e??"canceled",Me.ERR_CANCELED,t,s),this.name="CanceledError"}he.inherits(lr,Me,{__CANCEL__:!0});function Rc(e,t,s){const i=s.config.validateStatus;!s.status||!i||i(s.status)?e(s):t(new Me("Request failed with status code "+s.status,[Me.ERR_BAD_REQUEST,Me.ERR_BAD_RESPONSE][Math.floor(s.status/100)-4],s.config,s.request,s))}function aw(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function lw(e,t){e=e||10;const s=new Array(e),i=new Array(e);let a=0,u=0,f;return t=t!==void 0?t:1e3,function(n){const p=Date.now(),_=i[u];f||(f=p),s[a]=n,i[a]=p;let d=u,g=0;for(;d!==a;)g+=s[d++],d=d%e;if(a=(a+1)%e,a===u&&(u=(u+1)%e),p-f<t)return;const b=_&&p-_;return b?Math.round(g*1e3/b):void 0}}function cw(e,t){let s=0,i=1e3/t,a,u;const f=(p,_=Date.now())=>{s=_,a=null,u&&(clearTimeout(u),u=null),e(...p)};return[(...p)=>{const _=Date.now(),d=_-s;d>=i?f(p,_):(a=p,u||(u=setTimeout(()=>{u=null,f(a)},i-d)))},()=>a&&f(a)]}const xi=(e,t,s=3)=>{let i=0;const a=lw(50,250);return cw(u=>{const f=u.loaded,r=u.lengthComputable?u.total:void 0,n=f-i,p=a(n),_=f<=r;i=f;const d={loaded:f,total:r,progress:r?f/r:void 0,bytes:n,rate:p||void 0,estimated:p&&r&&_?(r-f)/p:void 0,event:u,lengthComputable:r!=null,[t?"download":"upload"]:!0};e(d)},s)},Da=(e,t)=>{const s=e!=null;return[i=>t[0]({lengthComputable:s,total:e,loaded:i}),t[1]]},La=e=>(...t)=>he.asap(()=>e(...t)),hw=vt.hasStandardBrowserEnv?((e,t)=>s=>(s=new URL(s,vt.origin),e.protocol===s.protocol&&e.host===s.host&&(t||e.port===s.port)))(new URL(vt.origin),vt.navigator&&/(msie|trident)/i.test(vt.navigator.userAgent)):()=>!0,uw=vt.hasStandardBrowserEnv?{write(e,t,s,i,a,u,f){if(typeof document>"u")return;const r=[`${e}=${encodeURIComponent(t)}`];he.isNumber(s)&&r.push(`expires=${new Date(s).toUTCString()}`),he.isString(i)&&r.push(`path=${i}`),he.isString(a)&&r.push(`domain=${a}`),u===!0&&r.push("secure"),he.isString(f)&&r.push(`SameSite=${f}`),document.cookie=r.join("; ")},read(e){if(typeof document>"u")return null;const t=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function dw(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function fw(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function Ac(e,t,s){let i=!dw(t);return e&&(i||s==!1)?fw(e,t):t}const Oa=e=>e instanceof Dt?{...e}:e;function zs(e,t){t=t||{};const s={};function i(p,_,d,g){return he.isPlainObject(p)&&he.isPlainObject(_)?he.merge.call({caseless:g},p,_):he.isPlainObject(_)?he.merge({},_):he.isArray(_)?_.slice():_}function a(p,_,d,g){if(he.isUndefined(_)){if(!he.isUndefined(p))return i(void 0,p,d,g)}else return i(p,_,d,g)}function u(p,_){if(!he.isUndefined(_))return i(void 0,_)}function f(p,_){if(he.isUndefined(_)){if(!he.isUndefined(p))return i(void 0,p)}else return i(void 0,_)}function r(p,_,d){if(d in t)return i(p,_);if(d in e)return i(void 0,p)}const n={url:u,method:u,data:u,baseURL:f,transformRequest:f,transformResponse:f,paramsSerializer:f,timeout:f,timeoutMessage:f,withCredentials:f,withXSRFToken:f,adapter:f,responseType:f,xsrfCookieName:f,xsrfHeaderName:f,onUploadProgress:f,onDownloadProgress:f,decompress:f,maxContentLength:f,maxBodyLength:f,beforeRedirect:f,transport:f,httpAgent:f,httpsAgent:f,cancelToken:f,socketPath:f,responseEncoding:f,validateStatus:r,headers:(p,_,d)=>a(Oa(p),Oa(_),d,!0)};return he.forEach(Object.keys({...e,...t}),function(_){const d=n[_]||a,g=d(e[_],t[_],_);he.isUndefined(g)&&d!==r||(s[_]=g)}),s}const Tc=e=>{const t=zs({},e);let{data:s,withXSRFToken:i,xsrfHeaderName:a,xsrfCookieName:u,headers:f,auth:r}=t;if(t.headers=f=Dt.from(f),t.url=xc(Ac(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),r&&f.set("Authorization","Basic "+btoa((r.username||"")+":"+(r.password?unescape(encodeURIComponent(r.password)):""))),he.isFormData(s)){if(vt.hasStandardBrowserEnv||vt.hasStandardBrowserWebWorkerEnv)f.setContentType(void 0);else if(he.isFunction(s.getHeaders)){const n=s.getHeaders(),p=["content-type","content-length"];Object.entries(n).forEach(([_,d])=>{p.includes(_.toLowerCase())&&f.set(_,d)})}}if(vt.hasStandardBrowserEnv&&(i&&he.isFunction(i)&&(i=i(t)),i||i!==!1&&hw(t.url))){const n=a&&u&&uw.read(u);n&&f.set(a,n)}return t},pw=typeof XMLHttpRequest<"u",_w=pw&&function(e){return new Promise(function(s,i){const a=Tc(e);let u=a.data;const f=Dt.from(a.headers).normalize();let{responseType:r,onUploadProgress:n,onDownloadProgress:p}=a,_,d,g,b,w;function m(){b&&b(),w&&w(),a.cancelToken&&a.cancelToken.unsubscribe(_),a.signal&&a.signal.removeEventListener("abort",_)}let c=new XMLHttpRequest;c.open(a.method.toUpperCase(),a.url,!0),c.timeout=a.timeout;function h(){if(!c)return;const l=Dt.from("getAllResponseHeaders"in c&&c.getAllResponseHeaders()),S={data:!r||r==="text"||r==="json"?c.responseText:c.response,status:c.status,statusText:c.statusText,headers:l,config:e,request:c};Rc(function(k){s(k),m()},function(k){i(k),m()},S),c=null}"onloadend"in c?c.onloadend=h:c.onreadystatechange=function(){!c||c.readyState!==4||c.status===0&&!(c.responseURL&&c.responseURL.indexOf("file:")===0)||setTimeout(h)},c.onabort=function(){c&&(i(new Me("Request aborted",Me.ECONNABORTED,e,c)),c=null)},c.onerror=function(v){const S=v&&v.message?v.message:"Network Error",x=new Me(S,Me.ERR_NETWORK,e,c);x.event=v||null,i(x),c=null},c.ontimeout=function(){let v=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const S=a.transitional||Cc;a.timeoutErrorMessage&&(v=a.timeoutErrorMessage),i(new Me(v,S.clarifyTimeoutError?Me.ETIMEDOUT:Me.ECONNABORTED,e,c)),c=null},u===void 0&&f.setContentType(null),"setRequestHeader"in c&&he.forEach(f.toJSON(),function(v,S){c.setRequestHeader(S,v)}),he.isUndefined(a.withCredentials)||(c.withCredentials=!!a.withCredentials),r&&r!=="json"&&(c.responseType=a.responseType),p&&([g,w]=xi(p,!0),c.addEventListener("progress",g)),n&&c.upload&&([d,b]=xi(n),c.upload.addEventListener("progress",d),c.upload.addEventListener("loadend",b)),(a.cancelToken||a.signal)&&(_=l=>{c&&(i(!l||l.type?new lr(null,e,c):l),c.abort(),c=null)},a.cancelToken&&a.cancelToken.subscribe(_),a.signal&&(a.signal.aborted?_():a.signal.addEventListener("abort",_)));const o=aw(a.url);if(o&&vt.protocols.indexOf(o)===-1){i(new Me("Unsupported protocol "+o+":",Me.ERR_BAD_REQUEST,e));return}c.send(u||null)})},gw=(e,t)=>{const{length:s}=e=e?e.filter(Boolean):[];if(t||s){let i=new AbortController,a;const u=function(p){if(!a){a=!0,r();const _=p instanceof Error?p:this.reason;i.abort(_ instanceof Me?_:new lr(_ instanceof Error?_.message:_))}};let f=t&&setTimeout(()=>{f=null,u(new Me(`timeout ${t} of ms exceeded`,Me.ETIMEDOUT))},t);const r=()=>{e&&(f&&clearTimeout(f),f=null,e.forEach(p=>{p.unsubscribe?p.unsubscribe(u):p.removeEventListener("abort",u)}),e=null)};e.forEach(p=>p.addEventListener("abort",u));const{signal:n}=i;return n.unsubscribe=()=>he.asap(r),n}},mw=function*(e,t){let s=e.byteLength;if(s<t){yield e;return}let i=0,a;for(;i<s;)a=i+t,yield e.slice(i,a),i=a},vw=async function*(e,t){for await(const s of bw(e))yield*mw(s,t)},bw=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:s,value:i}=await t.read();if(s)break;yield i}}finally{await t.cancel()}},Ma=(e,t,s,i)=>{const a=vw(e,t);let u=0,f,r=n=>{f||(f=!0,i&&i(n))};return new ReadableStream({async pull(n){try{const{done:p,value:_}=await a.next();if(p){r(),n.close();return}let d=_.byteLength;if(s){let g=u+=d;s(g)}n.enqueue(new Uint8Array(_))}catch(p){throw r(p),p}},cancel(n){return r(n),a.return()}},{highWaterMark:2})},Ia=64*1024,{isFunction:Qr}=he,ww=(({Request:e,Response:t})=>({Request:e,Response:t}))(he.global),{ReadableStream:Ba,TextEncoder:Pa}=he.global,$a=(e,...t)=>{try{return!!e(...t)}catch{return!1}},yw=e=>{e=he.merge.call({skipUndefined:!0},ww,e);const{fetch:t,Request:s,Response:i}=e,a=t?Qr(t):typeof fetch=="function",u=Qr(s),f=Qr(i);if(!a)return!1;const r=a&&Qr(Ba),n=a&&(typeof Pa=="function"?(w=>m=>w.encode(m))(new Pa):async w=>new Uint8Array(await new s(w).arrayBuffer())),p=u&&r&&$a(()=>{let w=!1;const m=new s(vt.origin,{body:new Ba,method:"POST",get duplex(){return w=!0,"half"}}).headers.has("Content-Type");return w&&!m}),_=f&&r&&$a(()=>he.isReadableStream(new i("").body)),d={stream:_&&(w=>w.body)};a&&["text","arrayBuffer","blob","formData","stream"].forEach(w=>{!d[w]&&(d[w]=(m,c)=>{let h=m&&m[w];if(h)return h.call(m);throw new Me(`Response type '${w}' is not supported`,Me.ERR_NOT_SUPPORT,c)})});const g=async w=>{if(w==null)return 0;if(he.isBlob(w))return w.size;if(he.isSpecCompliantForm(w))return(await new s(vt.origin,{method:"POST",body:w}).arrayBuffer()).byteLength;if(he.isArrayBufferView(w)||he.isArrayBuffer(w))return w.byteLength;if(he.isURLSearchParams(w)&&(w=w+""),he.isString(w))return(await n(w)).byteLength},b=async(w,m)=>{const c=he.toFiniteNumber(w.getContentLength());return c??g(m)};return async w=>{let{url:m,method:c,data:h,signal:o,cancelToken:l,timeout:v,onDownloadProgress:S,onUploadProgress:x,responseType:k,headers:C,withCredentials:A="same-origin",fetchOptions:N}=Tc(w),G=t||fetch;k=k?(k+"").toLowerCase():"text";let L=gw([o,l&&l.toAbortSignal()],v),I=null;const E=L&&L.unsubscribe&&(()=>{L.unsubscribe()});let X;try{if(x&&p&&c!=="get"&&c!=="head"&&(X=await b(C,h))!==0){let M=new s(m,{method:"POST",body:h,duplex:"half"}),$;if(he.isFormData(h)&&($=M.headers.get("content-type"))&&C.setContentType($),M.body){const[ne,le]=Da(X,xi(La(x)));h=Ma(M.body,Ia,ne,le)}}he.isString(A)||(A=A?"include":"omit");const Q=u&&"credentials"in s.prototype,J={...N,signal:L,method:c.toUpperCase(),headers:C.normalize().toJSON(),body:h,duplex:"half",credentials:Q?A:void 0};I=u&&new s(m,J);let ie=await(u?G(I,N):G(m,J));const T=_&&(k==="stream"||k==="response");if(_&&(S||T&&E)){const M={};["status","statusText","headers"].forEach(ce=>{M[ce]=ie[ce]});const $=he.toFiniteNumber(ie.headers.get("content-length")),[ne,le]=S&&Da($,xi(La(S),!0))||[];ie=new i(Ma(ie.body,Ia,ne,()=>{le&&le(),E&&E()}),M)}k=k||"text";let U=await d[he.findKey(d,k)||"text"](ie,w);return!T&&E&&E(),await new Promise((M,$)=>{Rc(M,$,{data:U,headers:Dt.from(ie.headers),status:ie.status,statusText:ie.statusText,config:w,request:I})})}catch(Q){throw E&&E(),Q&&Q.name==="TypeError"&&/Load failed|fetch/i.test(Q.message)?Object.assign(new Me("Network Error",Me.ERR_NETWORK,w,I),{cause:Q.cause||Q}):Me.from(Q,Q&&Q.code,w,I)}}},Sw=new Map,Dc=e=>{let t=e&&e.env||{};const{fetch:s,Request:i,Response:a}=t,u=[i,a,s];let f=u.length,r=f,n,p,_=Sw;for(;r--;)n=u[r],p=_.get(n),p===void 0&&_.set(n,p=r?new Map:yw(t)),_=p;return p};Dc();const oo={http:H1,xhr:_w,fetch:{get:Dc}};he.forEach(oo,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const Fa=e=>`- ${e}`,xw=e=>he.isFunction(e)||e===null||e===!1;function Cw(e,t){e=he.isArray(e)?e:[e];const{length:s}=e;let i,a;const u={};for(let f=0;f<s;f++){i=e[f];let r;if(a=i,!xw(i)&&(a=oo[(r=String(i)).toLowerCase()],a===void 0))throw new Me(`Unknown adapter '${r}'`);if(a&&(he.isFunction(a)||(a=a.get(t))))break;u[r||"#"+f]=a}if(!a){const f=Object.entries(u).map(([n,p])=>`adapter ${n} `+(p===!1?"is not supported by the environment":"is not available in the build"));let r=s?f.length>1?`since :
`+f.map(Fa).join(`
`):" "+Fa(f[0]):"as no adapter specified";throw new Me("There is no suitable adapter to dispatch the request "+r,"ERR_NOT_SUPPORT")}return a}const Lc={getAdapter:Cw,adapters:oo};function rn(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new lr(null,e)}function Ha(e){return rn(e),e.headers=Dt.from(e.headers),e.data=sn.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Lc.getAdapter(e.adapter||Fr.adapter,e)(e).then(function(i){return rn(e),i.data=sn.call(e,e.transformResponse,i),i.headers=Dt.from(i.headers),i},function(i){return Ec(i)||(rn(e),i&&i.response&&(i.response.data=sn.call(e,e.transformResponse,i.response),i.response.headers=Dt.from(i.response.headers))),Promise.reject(i)})}const Oc="1.13.2",zi={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{zi[e]=function(i){return typeof i===e||"a"+(t<1?"n ":" ")+e}});const Na={};zi.transitional=function(t,s,i){function a(u,f){return"[Axios v"+Oc+"] Transitional option '"+u+"'"+f+(i?". "+i:"")}return(u,f,r)=>{if(t===!1)throw new Me(a(f," has been removed"+(s?" in "+s:"")),Me.ERR_DEPRECATED);return s&&!Na[f]&&(Na[f]=!0,console.warn(a(f," has been deprecated since v"+s+" and will be removed in the near future"))),t?t(u,f,r):!0}};zi.spelling=function(t){return(s,i)=>(console.warn(`${i} is likely a misspelling of ${t}`),!0)};function kw(e,t,s){if(typeof e!="object")throw new Me("options must be an object",Me.ERR_BAD_OPTION_VALUE);const i=Object.keys(e);let a=i.length;for(;a-- >0;){const u=i[a],f=t[u];if(f){const r=e[u],n=r===void 0||f(r,u,e);if(n!==!0)throw new Me("option "+u+" must be "+n,Me.ERR_BAD_OPTION_VALUE);continue}if(s!==!0)throw new Me("Unknown option "+u,Me.ERR_BAD_OPTION)}}const ci={assertOptions:kw,validators:zi},ss=ci.validators;let $s=class{constructor(t){this.defaults=t||{},this.interceptors={request:new Aa,response:new Aa}}async request(t,s){try{return await this._request(t,s)}catch(i){if(i instanceof Error){let a={};Error.captureStackTrace?Error.captureStackTrace(a):a=new Error;const u=a.stack?a.stack.replace(/^.+\n/,""):"";try{i.stack?u&&!String(i.stack).endsWith(u.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+u):i.stack=u}catch{}}throw i}}_request(t,s){typeof t=="string"?(s=s||{},s.url=t):s=t||{},s=zs(this.defaults,s);const{transitional:i,paramsSerializer:a,headers:u}=s;i!==void 0&&ci.assertOptions(i,{silentJSONParsing:ss.transitional(ss.boolean),forcedJSONParsing:ss.transitional(ss.boolean),clarifyTimeoutError:ss.transitional(ss.boolean)},!1),a!=null&&(he.isFunction(a)?s.paramsSerializer={serialize:a}:ci.assertOptions(a,{encode:ss.function,serialize:ss.function},!0)),s.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?s.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:s.allowAbsoluteUrls=!0),ci.assertOptions(s,{baseUrl:ss.spelling("baseURL"),withXsrfToken:ss.spelling("withXSRFToken")},!0),s.method=(s.method||this.defaults.method||"get").toLowerCase();let f=u&&he.merge(u.common,u[s.method]);u&&he.forEach(["delete","get","head","post","put","patch","common"],w=>{delete u[w]}),s.headers=Dt.concat(f,u);const r=[];let n=!0;this.interceptors.request.forEach(function(m){typeof m.runWhen=="function"&&m.runWhen(s)===!1||(n=n&&m.synchronous,r.unshift(m.fulfilled,m.rejected))});const p=[];this.interceptors.response.forEach(function(m){p.push(m.fulfilled,m.rejected)});let _,d=0,g;if(!n){const w=[Ha.bind(this),void 0];for(w.unshift(...r),w.push(...p),g=w.length,_=Promise.resolve(s);d<g;)_=_.then(w[d++],w[d++]);return _}g=r.length;let b=s;for(;d<g;){const w=r[d++],m=r[d++];try{b=w(b)}catch(c){m.call(this,c);break}}try{_=Ha.call(this,b)}catch(w){return Promise.reject(w)}for(d=0,g=p.length;d<g;)_=_.then(p[d++],p[d++]);return _}getUri(t){t=zs(this.defaults,t);const s=Ac(t.baseURL,t.url,t.allowAbsoluteUrls);return xc(s,t.params,t.paramsSerializer)}};he.forEach(["delete","get","head","options"],function(t){$s.prototype[t]=function(s,i){return this.request(zs(i||{},{method:t,url:s,data:(i||{}).data}))}});he.forEach(["post","put","patch"],function(t){function s(i){return function(u,f,r){return this.request(zs(r||{},{method:t,headers:i?{"Content-Type":"multipart/form-data"}:{},url:u,data:f}))}}$s.prototype[t]=s(),$s.prototype[t+"Form"]=s(!0)});let Ew=class Mc{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let s;this.promise=new Promise(function(u){s=u});const i=this;this.promise.then(a=>{if(!i._listeners)return;let u=i._listeners.length;for(;u-- >0;)i._listeners[u](a);i._listeners=null}),this.promise.then=a=>{let u;const f=new Promise(r=>{i.subscribe(r),u=r}).then(a);return f.cancel=function(){i.unsubscribe(u)},f},t(function(u,f,r){i.reason||(i.reason=new lr(u,f,r),s(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const s=this._listeners.indexOf(t);s!==-1&&this._listeners.splice(s,1)}toAbortSignal(){const t=new AbortController,s=i=>{t.abort(i)};return this.subscribe(s),t.signal.unsubscribe=()=>this.unsubscribe(s),t.signal}static source(){let t;return{token:new Mc(function(a){t=a}),cancel:t}}};function Rw(e){return function(s){return e.apply(null,s)}}function Aw(e){return he.isObject(e)&&e.isAxiosError===!0}const Ln={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(Ln).forEach(([e,t])=>{Ln[t]=e});function Ic(e){const t=new $s(e),s=uc($s.prototype.request,t);return he.extend(s,$s.prototype,t,{allOwnKeys:!0}),he.extend(s,t,null,{allOwnKeys:!0}),s.create=function(a){return Ic(zs(e,a))},s}const ot=Ic(Fr);ot.Axios=$s;ot.CanceledError=lr;ot.CancelToken=Ew;ot.isCancel=Ec;ot.VERSION=Oc;ot.toFormData=Ni;ot.AxiosError=Me;ot.Cancel=ot.CanceledError;ot.all=function(t){return Promise.all(t)};ot.spread=Rw;ot.isAxiosError=Aw;ot.mergeConfig=zs;ot.AxiosHeaders=Dt;ot.formToJSON=e=>kc(he.isHTMLForm(e)?new FormData(e):e);ot.getAdapter=Lc.getAdapter;ot.HttpStatusCode=Ln;ot.default=ot;const{Axios:bS,AxiosError:wS,CanceledError:yS,isCancel:SS,CancelToken:xS,VERSION:CS,all:kS,Cancel:ES,isAxiosError:RS,spread:AS,toFormData:TS,AxiosHeaders:DS,HttpStatusCode:LS,formToJSON:OS,getAdapter:MS,mergeConfig:IS}=ot,Ft=ot.create({baseURL:"/api",timeout:1e4,headers:{"Content-Type":"application/json"}});Ft.interceptors.request.use(e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>Promise.reject(e));Ft.interceptors.response.use(e=>e.data,e=>{if(e.response){const{status:t,data:s}=e.response;switch(t){case 401:localStorage.removeItem("token"),window.location.href="/login";break;case 403:console.error(":",(s==null?void 0:s.message)||"");break;case 404:console.error(":",(s==null?void 0:s.message)||"");break;case 500:console.error(":",(s==null?void 0:s.message)||"");break;default:console.error(":",(s==null?void 0:s.message)||"")}}else e.request?console.error(":",""):console.error(":",e.message);return Promise.reject(e)});const rs={getUserInfo:()=>Ft.get("/user/info"),getTools:e=>Ft.get("/tools",{params:e}),uploadFile:e=>{const t=new FormData;return t.append("file",e),Ft.post("/upload",t,{headers:{"Content-Type":"multipart/form-data"}})},convertText:(e,t)=>Ft.post("/convert/text",{text:e,type:t}),processJson:(e,t)=>Ft.post("/json/process",{json:e,action:t}),processImage:(e,t)=>Ft.post("/image/process",{imageData:e,operation:t}),async callGLMAPI(e,t=2e3){const s=await fetch("https://open.bigmodel.cn/api/paas/v4/chat/completions",{method:"POST",headers:{Authorization:"Bearer 00c2e8182184400788489142b6a92323.jOoPIDTX6p4nFxrk","Content-Type":"application/json",Accept:"*/*",Host:"open.bigmodel.cn",Connection:"keep-alive"},body:JSON.stringify({model:"glm-4.5-flash",messages:e,temperature:.7,max_tokens:t})});if(!s.ok)throw new Error(`GLM API error: ${s.status} ${s.statusText}`);const a=(await s.json()).choices[0].message;return a.reasoning_content||a.content},generateOutline:async e=>{const t=[{role:"system",content:"1.  2.  3.  4. "},{role:"user",content:`${e}`}];return await rs.callGLMAPI(t,2e3)},fixTruncatedJSON(e){let t=e.replace(/^```json|```$/g,"").trim();const s=(t.match(/\{/g)||[]).length,i=(t.match(/\}/g)||[]).length,a=(t.match(/\[/g)||[]).length,u=(t.match(/\]/g)||[]).length;for(let f=i;f<s;f++)t+="}";for(let f=u;f<a;f++)t+="]";return t=t.replace(/,\s*([}\]])/g,"$1"),t},ssh:{connect:e=>Ft.post("http://localhost:8001/ssh/connect",e),execute:(e,t)=>Ft.post("http://localhost:8001/ssh/execute",{connectionId:e,command:t}),disconnect:e=>Ft.post("http://localhost:8001/ssh/disconnect",{connectionId:e}),fileTransfer:e=>Ft.post("http://localhost:8001/ssh/file/transfer",e),getConnections:()=>Ft.get("http://localhost:8001/ssh/connections")},generate3DAction:async e=>{const t=[{role:"system",content:`3D3DJSONJSON1.  2.  3. 4. 
spine1, spine2, head, leftUpperArm, leftLowerArm, rightUpperArm, rightLowerArm, leftUpperLeg, leftLowerLeg, rightUpperLeg, rightLowerLeg
{"name":"","description":"","duration":2,"keyframes":[{"time":0,"joints":[{"name":"rightUpperArm","rotation":{"x":0,"y":0,"z":0},"position":{"x":0,"y":0,"z":0}}]}]}`},{role:"user",content:`3D${e}`}],s=await rs.callGLMAPI(t,3e3);try{let i=s.trim();i=i.replace(/^```json|```$/g,"").trim();const a=i.indexOf("{"),u=i.lastIndexOf("}");a!==-1&&u!==-1&&(i=i.substring(a,u+1));const f=rs.fixTruncatedJSON(i);return JSON.parse(f)}catch{throw new Error(`3D: ${s}`)}},generateChapterList:async e=>{const t=[{role:"system",content:'1.  2. JSON[{"title":"1","summary":""}]'},{role:"user",content:`${e}`}],s=await rs.callGLMAPI(t,1500);try{return JSON.parse(s)}catch(i){console.warn("JSONJSON:",i);try{const a=rs.fixTruncatedJSON(s);return JSON.parse(a)}catch{throw new Error(`: ${s}`)}}},generateChapterContent:async(e,t,s)=>{const i=[{role:"system",content:"1.  2.  3.  4. "},{role:"user",content:`

${e}

${t}
${s}`}];return await rs.callGLMAPI(i,3e3)},chatWithMistral:async e=>{const t=[{role:"system",content:""},{role:"user",content:e}];return await rs.callGLMAPI(t,4e3)}},Ot=e=>(vl("data-v-84b46aa1"),e=e(),bl(),e),Tw={class:"min-h-screen bg-gradient-to-br from-slate-900 to-slate-800 text-white"},Dw=Ot(()=>R("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[R("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})],-1)),Lw=[Dw],Ow=Ot(()=>R("h1",{class:"text-xl font-bold"},"AI",-1)),Mw=Ot(()=>R("div",{class:"text-sm text-slate-400"},"  ",-1)),Iw={class:"container mx-auto px-4 pt-24 pb-12"},Bw={class:"mb-8"},Pw={class:"bg-slate-800/50 rounded-xl shadow-lg border border-slate-700 p-6"},$w={class:"mb-4"},Fw=Ot(()=>R("label",{class:"block text-sm font-medium text-slate-300 mb-2"},"",-1)),Hw=["disabled"],Nw={class:"space-y-4"},zw={key:0,class:"space-y-2"},Uw={class:"flex items-center justify-between"},jw={class:"text-sm text-slate-300"},Ww={class:"w-full bg-slate-700 rounded-full h-2"},qw={class:"text-right text-sm text-slate-400"},Kw={class:"flex items-center justify-between"},Vw=["disabled"],Gw={key:0,class:"animate-spin -ml-1 mr-2 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Zw=Ot(()=>R("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1)),Xw=Ot(()=>R("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)),Jw=[Zw,Xw],Yw={key:0,class:"text-red-400 text-sm"},Qw={key:0,class:"space-y-6"},ey={class:"bg-slate-800/50 rounded-xl shadow-lg border border-slate-700 p-6"},ty={class:"flex items-center justify-between mb-4"},sy=Ot(()=>R("h2",{class:"text-xl font-bold"},"",-1)),ry=Ot(()=>R("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[R("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h12a2 2 0 002-2v-2m-6 12h8M10 10l8-8m0 0l-8-8m8 8H2"})],-1)),iy={class:"bg-slate-900/70 rounded-lg p-4 whitespace-pre-wrap text-slate-300"},ny={class:"space-y-4"},oy=Ot(()=>R("h2",{class:"text-xl font-bold"},"",-1)),ay=["onClick"],ly={class:"flex items-center gap-3"},cy=Ot(()=>R("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"},null,-1)),hy=[cy],uy={class:"font-semibold"},dy=["onClick"],fy=Ot(()=>R("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[R("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h12a2 2 0 002-2v-2m-6 12h8M10 10l8-8m0 0l-8-8m8 8H2"})],-1)),py={key:0,class:"p-4 bg-slate-900/70 border-t border-slate-700 whitespace-pre-wrap text-slate-300"},_y={key:1,class:"text-center py-16 text-slate-400"},gy=Ot(()=>R("svg",{class:"w-16 h-16 mx-auto mb-4 opacity-50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[R("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})],-1)),my=Ot(()=>R("h3",{class:"text-lg font-medium mb-2"},"",-1)),vy=Ot(()=>R("p",{class:"text-sm"},"",-1)),by=[gy,my,vy],wy=ut({__name:"ScriptWriter",setup(e){const t=Xl(),s=fe(""),i=fe(!1),a=fe(""),u=fe(0),f=fe(""),r=fe(!1),n=fe({outline:"",chapters:[]}),p=fe([]),_=fe(!1),d=()=>{r.value=!0,f.value="",i.value=!1},g=async()=>{if(!s.value.trim()){a.value="";return}i.value=!0,a.value="",_.value=!1,u.value=0,f.value="...",r.value=!1,n.value={outline:"",chapters:[]},p.value=[];try{f.value="...",u.value=10;const h=await rs.generateOutline(s.value);if(n.value.outline=h,r.value||(f.value="...",u.value=30,p.value=await rs.generateChapterList(h),r.value))return;f.value=`${p.value.length}...`;const o=p.value.length;for(let l=0;l<o;l++){if(r.value)return;const v=p.value[l];f.value=`${l+1}${v.title}...`,u.value=30+Math.round(l/o*60);const S=await rs.generateChapterContent(h,v.title,v.summary);n.value.chapters.push({id:(l+1).toString(),title:v.title,content:S,isExpanded:l===0})}if(r.value)return;f.value="",u.value=100}catch(h){r.value||(a.value="",f.value="",console.error(":",h))}finally{r.value||(i.value=!1)}},b=h=>{h.isExpanded=!h.isExpanded},w=()=>{const h=`${n.value.outline}

${n.value.chapters.map(o=>`${o.title}
${o.content}
`).join(`
`)}`;navigator.clipboard.writeText(h).then(()=>{_.value=!0,setTimeout(()=>{_.value=!1},2e3)}).catch(o=>{console.error(":",o)})},m=h=>{const o=`${h.title}
${h.content}`;navigator.clipboard.writeText(o).then(()=>{_.value=!0,setTimeout(()=>{_.value=!1},2e3)}).catch(l=>{console.error(":",l)})},c=()=>{t.push("/")};return(h,o)=>(ue(),de("div",Tw,[R("div",{class:"fixed top-0 left-0 right-0 z-50 bg-slate-900/80 backdrop-blur-md border-b border-slate-700"},[R("div",{class:"container mx-auto px-4 py-3 flex items-center justify-between"},[R("div",{class:"flex items-center gap-3"},[R("button",{onClick:c,class:"p-2 rounded-lg hover:bg-slate-700 transition-colors",title:""},Lw),Ow]),Mw])]),R("div",Iw,[R("div",Bw,[R("div",Pw,[R("div",$w,[Fw,Ze(R("textarea",{"onUpdate:modelValue":o[0]||(o[0]=l=>s.value=l),placeholder:"...",class:"w-full h-32 p-4 bg-slate-900 border border-slate-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none text-white",disabled:i.value},null,8,Hw),[[Ye,s.value]])]),R("div",Nw,[i.value?(ue(),de("div",zw,[R("div",Uw,[R("span",jw,we(f.value),1),R("button",{onClick:d,class:"px-3 py-1 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors text-sm"},"  ")]),R("div",Ww,[R("div",{class:"bg-blue-600 h-2 rounded-full transition-all duration-300 ease-out",style:At({width:u.value+"%"})},null,4)]),R("div",qw,we(u.value)+"% ",1)])):Oe("",!0),R("div",Kw,[R("button",{onClick:g,disabled:i.value||!s.value.trim(),class:"px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2"},[i.value?(ue(),de("svg",Gw,Jw)):Oe("",!0),We(" "+we(i.value?"...":""),1)],8,Vw),a.value?(ue(),de("div",Yw,we(a.value),1)):Oe("",!0)])])])]),n.value.chapters.length>0?(ue(),de("div",Qw,[R("div",ey,[R("div",ty,[sy,R("button",{onClick:w,class:"px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg transition-colors flex items-center gap-2 text-sm",title:""},[ry,We(" "+we(_.value?"":""),1)])]),R("div",iy,we(n.value.outline),1)]),R("div",ny,[oy,(ue(!0),de(Qe,null,Gt(n.value.chapters,l=>(ue(),de("div",{key:l.id,class:"bg-slate-800/50 rounded-xl shadow-lg border border-slate-700 overflow-hidden"},[R("div",{onClick:v=>b(l),class:"p-4 flex items-center justify-between cursor-pointer hover:bg-slate-700/50 transition-colors"},[R("div",ly,[(ue(),de("svg",{class:Te(["w-5 h-5 text-slate-400 transition-transform",{"rotate-90":l.isExpanded}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},hy,2)),R("h3",uy,we(l.title),1)]),R("button",{onClick:wr(v=>m(l),["stop"]),class:"px-3 py-1 bg-slate-700 hover:bg-slate-600 text-white rounded-lg transition-colors flex items-center gap-1 text-xs",title:""},[fy,We("  ")],8,dy)],8,ay),l.isExpanded?(ue(),de("div",py,we(l.content),1)):Oe("",!0)]))),128))])])):i.value?Oe("",!0):(ue(),de("div",_y,by))])]))}}),yy=hc(wy,[["__scopeId","data-v-84b46aa1"]]);var nn={exports:{}},za;function Sy(){return za||(za=1,(function(e,t){(function(s,i){e.exports=i()})(globalThis,(()=>(()=>{var s={4567:function(f,r,n){var p=this&&this.__decorate||function(o,l,v,S){var x,k=arguments.length,C=k<3?l:S===null?S=Object.getOwnPropertyDescriptor(l,v):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(o,l,v,S);else for(var A=o.length-1;A>=0;A--)(x=o[A])&&(C=(k<3?x(C):k>3?x(l,v,C):x(l,v))||C);return k>3&&C&&Object.defineProperty(l,v,C),C},_=this&&this.__param||function(o,l){return function(v,S){l(v,S,o)}};Object.defineProperty(r,"__esModule",{value:!0}),r.AccessibilityManager=void 0;const d=n(9042),g=n(9924),b=n(844),w=n(4725),m=n(2585),c=n(3656);let h=r.AccessibilityManager=class extends b.Disposable{constructor(o,l,v,S){super(),this._terminal=o,this._coreBrowserService=v,this._renderService=S,this._rowColumns=new WeakMap,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=this._coreBrowserService.mainDocument.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=this._coreBrowserService.mainDocument.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let x=0;x<this._terminal.rows;x++)this._rowElements[x]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[x]);if(this._topBoundaryFocusListener=x=>this._handleBoundaryFocus(x,0),this._bottomBoundaryFocusListener=x=>this._handleBoundaryFocus(x,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=this._coreBrowserService.mainDocument.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new g.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._terminal.onResize((x=>this._handleResize(x.rows)))),this.register(this._terminal.onRender((x=>this._refreshRows(x.start,x.end)))),this.register(this._terminal.onScroll((()=>this._refreshRows()))),this.register(this._terminal.onA11yChar((x=>this._handleChar(x)))),this.register(this._terminal.onLineFeed((()=>this._handleChar(`
`)))),this.register(this._terminal.onA11yTab((x=>this._handleTab(x)))),this.register(this._terminal.onKey((x=>this._handleKey(x.key)))),this.register(this._terminal.onBlur((()=>this._clearLiveRegion()))),this.register(this._renderService.onDimensionsChange((()=>this._refreshRowsDimensions()))),this.register((0,c.addDisposableDomListener)(document,"selectionchange",(()=>this._handleSelectionChange()))),this.register(this._coreBrowserService.onDprChange((()=>this._refreshRowsDimensions()))),this._refreshRows(),this.register((0,b.toDisposable)((()=>{this._accessibilityContainer.remove(),this._rowElements.length=0})))}_handleTab(o){for(let l=0;l<o;l++)this._handleChar(" ")}_handleChar(o){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==o&&(this._charsToAnnounce+=o):this._charsToAnnounce+=o,o===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=d.tooMuchOutput)))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0}_handleKey(o){this._clearLiveRegion(),new RegExp("\\p{Control}","u").test(o)||this._charsToConsume.push(o)}_refreshRows(o,l){this._liveRegionDebouncer.refresh(o,l,this._terminal.rows)}_renderRows(o,l){const v=this._terminal.buffer,S=v.lines.length.toString();for(let x=o;x<=l;x++){const k=v.lines.get(v.ydisp+x),C=[],A=(k==null?void 0:k.translateToString(!0,void 0,void 0,C))||"",N=(v.ydisp+x+1).toString(),G=this._rowElements[x];G&&(A.length===0?(G.innerText="",this._rowColumns.set(G,[0,1])):(G.textContent=A,this._rowColumns.set(G,C)),G.setAttribute("aria-posinset",N),G.setAttribute("aria-setsize",S))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(o,l){const v=o.target,S=this._rowElements[l===0?1:this._rowElements.length-2];if(v.getAttribute("aria-posinset")===(l===0?"1":`${this._terminal.buffer.lines.length}`)||o.relatedTarget!==S)return;let x,k;if(l===0?(x=v,k=this._rowElements.pop(),this._rowContainer.removeChild(k)):(x=this._rowElements.shift(),k=v,this._rowContainer.removeChild(x)),x.removeEventListener("focus",this._topBoundaryFocusListener),k.removeEventListener("focus",this._bottomBoundaryFocusListener),l===0){const C=this._createAccessibilityTreeNode();this._rowElements.unshift(C),this._rowContainer.insertAdjacentElement("afterbegin",C)}else{const C=this._createAccessibilityTreeNode();this._rowElements.push(C),this._rowContainer.appendChild(C)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(l===0?-1:1),this._rowElements[l===0?1:this._rowElements.length-2].focus(),o.preventDefault(),o.stopImmediatePropagation()}_handleSelectionChange(){var A;if(this._rowElements.length===0)return;const o=document.getSelection();if(!o)return;if(o.isCollapsed)return void(this._rowContainer.contains(o.anchorNode)&&this._terminal.clearSelection());if(!o.anchorNode||!o.focusNode)return void console.error("anchorNode and/or focusNode are null");let l={node:o.anchorNode,offset:o.anchorOffset},v={node:o.focusNode,offset:o.focusOffset};if((l.node.compareDocumentPosition(v.node)&Node.DOCUMENT_POSITION_PRECEDING||l.node===v.node&&l.offset>v.offset)&&([l,v]=[v,l]),l.node.compareDocumentPosition(this._rowElements[0])&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_FOLLOWING)&&(l={node:this._rowElements[0].childNodes[0],offset:0}),!this._rowContainer.contains(l.node))return;const S=this._rowElements.slice(-1)[0];if(v.node.compareDocumentPosition(S)&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_PRECEDING)&&(v={node:S,offset:((A=S.textContent)==null?void 0:A.length)??0}),!this._rowContainer.contains(v.node))return;const x=({node:N,offset:G})=>{const L=N instanceof Text?N.parentNode:N;let I=parseInt(L==null?void 0:L.getAttribute("aria-posinset"),10)-1;if(isNaN(I))return console.warn("row is invalid. Race condition?"),null;const E=this._rowColumns.get(L);if(!E)return console.warn("columns is null. Race condition?"),null;let X=G<E.length?E[G]:E.slice(-1)[0]+1;return X>=this._terminal.cols&&(++I,X=0),{row:I,column:X}},k=x(l),C=x(v);if(k&&C){if(k.row>C.row||k.row===C.row&&k.column>=C.column)throw new Error("invalid range");this._terminal.select(k.column,k.row,(C.row-k.row)*this._terminal.cols-k.column+C.column)}}_handleResize(o){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let l=this._rowContainer.children.length;l<this._terminal.rows;l++)this._rowElements[l]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[l]);for(;this._rowElements.length>o;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){const o=this._coreBrowserService.mainDocument.createElement("div");return o.setAttribute("role","listitem"),o.tabIndex=-1,this._refreshRowDimensions(o),o}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let o=0;o<this._terminal.rows;o++)this._refreshRowDimensions(this._rowElements[o])}}_refreshRowDimensions(o){o.style.height=`${this._renderService.dimensions.css.cell.height}px`}};r.AccessibilityManager=h=p([_(1,m.IInstantiationService),_(2,w.ICoreBrowserService),_(3,w.IRenderService)],h)},3614:(f,r)=>{function n(g){return g.replace(/\r?\n/g,"\r")}function p(g,b){return b?"\x1B[200~"+g+"\x1B[201~":g}function _(g,b,w,m){g=p(g=n(g),w.decPrivateModes.bracketedPasteMode&&m.rawOptions.ignoreBracketedPasteMode!==!0),w.triggerDataEvent(g,!0),b.value=""}function d(g,b,w){const m=w.getBoundingClientRect(),c=g.clientX-m.left-10,h=g.clientY-m.top-10;b.style.width="20px",b.style.height="20px",b.style.left=`${c}px`,b.style.top=`${h}px`,b.style.zIndex="1000",b.focus()}Object.defineProperty(r,"__esModule",{value:!0}),r.rightClickHandler=r.moveTextAreaUnderMouseCursor=r.paste=r.handlePasteEvent=r.copyHandler=r.bracketTextForPaste=r.prepareTextForTerminal=void 0,r.prepareTextForTerminal=n,r.bracketTextForPaste=p,r.copyHandler=function(g,b){g.clipboardData&&g.clipboardData.setData("text/plain",b.selectionText),g.preventDefault()},r.handlePasteEvent=function(g,b,w,m){g.stopPropagation(),g.clipboardData&&_(g.clipboardData.getData("text/plain"),b,w,m)},r.paste=_,r.moveTextAreaUnderMouseCursor=d,r.rightClickHandler=function(g,b,w,m,c){d(g,b,w),c&&m.rightClickSelect(g),b.value=m.selectionText,b.select()}},7239:(f,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.ColorContrastCache=void 0;const p=n(1505);r.ColorContrastCache=class{constructor(){this._color=new p.TwoKeyMap,this._css=new p.TwoKeyMap}setCss(_,d,g){this._css.set(_,d,g)}getCss(_,d){return this._css.get(_,d)}setColor(_,d,g){this._color.set(_,d,g)}getColor(_,d){return this._color.get(_,d)}clear(){this._color.clear(),this._css.clear()}}},3656:(f,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.addDisposableDomListener=void 0,r.addDisposableDomListener=function(n,p,_,d){n.addEventListener(p,_,d);let g=!1;return{dispose:()=>{g||(g=!0,n.removeEventListener(p,_,d))}}}},3551:function(f,r,n){var p=this&&this.__decorate||function(h,o,l,v){var S,x=arguments.length,k=x<3?o:v===null?v=Object.getOwnPropertyDescriptor(o,l):v;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(h,o,l,v);else for(var C=h.length-1;C>=0;C--)(S=h[C])&&(k=(x<3?S(k):x>3?S(o,l,k):S(o,l))||k);return x>3&&k&&Object.defineProperty(o,l,k),k},_=this&&this.__param||function(h,o){return function(l,v){o(l,v,h)}};Object.defineProperty(r,"__esModule",{value:!0}),r.Linkifier=void 0;const d=n(3656),g=n(8460),b=n(844),w=n(2585),m=n(4725);let c=r.Linkifier=class extends b.Disposable{get currentLink(){return this._currentLink}constructor(h,o,l,v,S){super(),this._element=h,this._mouseService=o,this._renderService=l,this._bufferService=v,this._linkProviderService=S,this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new g.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new g.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,b.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,b.toDisposable)((()=>{var x;this._lastMouseEvent=void 0,(x=this._activeProviderReplies)==null||x.clear()}))),this.register(this._bufferService.onResize((()=>{this._clearCurrentLink(),this._wasResized=!0}))),this.register((0,d.addDisposableDomListener)(this._element,"mouseleave",(()=>{this._isMouseOut=!0,this._clearCurrentLink()}))),this.register((0,d.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,d.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,d.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(h){this._lastMouseEvent=h;const o=this._positionFromMouseEvent(h,this._element,this._mouseService);if(!o)return;this._isMouseOut=!1;const l=h.composedPath();for(let v=0;v<l.length;v++){const S=l[v];if(S.classList.contains("xterm"))break;if(S.classList.contains("xterm-hover"))return}this._lastBufferCell&&o.x===this._lastBufferCell.x&&o.y===this._lastBufferCell.y||(this._handleHover(o),this._lastBufferCell=o)}_handleHover(h){if(this._activeLine!==h.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(h,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,h)||(this._clearCurrentLink(),this._askForLink(h,!0))}_askForLink(h,o){var v,S;this._activeProviderReplies&&o||((v=this._activeProviderReplies)==null||v.forEach((x=>{x==null||x.forEach((k=>{k.link.dispose&&k.link.dispose()}))})),this._activeProviderReplies=new Map,this._activeLine=h.y);let l=!1;for(const[x,k]of this._linkProviderService.linkProviders.entries())o?(S=this._activeProviderReplies)!=null&&S.get(x)&&(l=this._checkLinkProviderResult(x,h,l)):k.provideLinks(h.y,(C=>{var N,G;if(this._isMouseOut)return;const A=C==null?void 0:C.map((L=>({link:L})));(N=this._activeProviderReplies)==null||N.set(x,A),l=this._checkLinkProviderResult(x,h,l),((G=this._activeProviderReplies)==null?void 0:G.size)===this._linkProviderService.linkProviders.length&&this._removeIntersectingLinks(h.y,this._activeProviderReplies)}))}_removeIntersectingLinks(h,o){const l=new Set;for(let v=0;v<o.size;v++){const S=o.get(v);if(S)for(let x=0;x<S.length;x++){const k=S[x],C=k.link.range.start.y<h?0:k.link.range.start.x,A=k.link.range.end.y>h?this._bufferService.cols:k.link.range.end.x;for(let N=C;N<=A;N++){if(l.has(N)){S.splice(x--,1);break}l.add(N)}}}}_checkLinkProviderResult(h,o,l){var x;if(!this._activeProviderReplies)return l;const v=this._activeProviderReplies.get(h);let S=!1;for(let k=0;k<h;k++)this._activeProviderReplies.has(k)&&!this._activeProviderReplies.get(k)||(S=!0);if(!S&&v){const k=v.find((C=>this._linkAtPosition(C.link,o)));k&&(l=!0,this._handleNewLink(k))}if(this._activeProviderReplies.size===this._linkProviderService.linkProviders.length&&!l)for(let k=0;k<this._activeProviderReplies.size;k++){const C=(x=this._activeProviderReplies.get(k))==null?void 0:x.find((A=>this._linkAtPosition(A.link,o)));if(C){l=!0,this._handleNewLink(C);break}}return l}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(h){if(!this._currentLink)return;const o=this._positionFromMouseEvent(h,this._element,this._mouseService);o&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,o)&&this._currentLink.link.activate(h,this._currentLink.link.text)}_clearCurrentLink(h,o){this._currentLink&&this._lastMouseEvent&&(!h||!o||this._currentLink.link.range.start.y>=h&&this._currentLink.link.range.end.y<=o)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,b.disposeArray)(this._linkCacheDisposables))}_handleNewLink(h){if(!this._lastMouseEvent)return;const o=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);o&&this._linkAtPosition(h.link,o)&&(this._currentLink=h,this._currentLink.state={decorations:{underline:h.link.decorations===void 0||h.link.decorations.underline,pointerCursor:h.link.decorations===void 0||h.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,h.link,this._lastMouseEvent),h.link.decorations={},Object.defineProperties(h.link.decorations,{pointerCursor:{get:()=>{var l,v;return(v=(l=this._currentLink)==null?void 0:l.state)==null?void 0:v.decorations.pointerCursor},set:l=>{var v;(v=this._currentLink)!=null&&v.state&&this._currentLink.state.decorations.pointerCursor!==l&&(this._currentLink.state.decorations.pointerCursor=l,this._currentLink.state.isHovered&&this._element.classList.toggle("xterm-cursor-pointer",l))}},underline:{get:()=>{var l,v;return(v=(l=this._currentLink)==null?void 0:l.state)==null?void 0:v.decorations.underline},set:l=>{var v,S,x;(v=this._currentLink)!=null&&v.state&&((x=(S=this._currentLink)==null?void 0:S.state)==null?void 0:x.decorations.underline)!==l&&(this._currentLink.state.decorations.underline=l,this._currentLink.state.isHovered&&this._fireUnderlineEvent(h.link,l))}}}),this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange((l=>{if(!this._currentLink)return;const v=l.start===0?0:l.start+1+this._bufferService.buffer.ydisp,S=this._bufferService.buffer.ydisp+1+l.end;if(this._currentLink.link.range.start.y>=v&&this._currentLink.link.range.end.y<=S&&(this._clearCurrentLink(v,S),this._lastMouseEvent)){const x=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);x&&this._askForLink(x,!1)}}))))}_linkHover(h,o,l){var v;(v=this._currentLink)!=null&&v.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(o,!0),this._currentLink.state.decorations.pointerCursor&&h.classList.add("xterm-cursor-pointer")),o.hover&&o.hover(l,o.text)}_fireUnderlineEvent(h,o){const l=h.range,v=this._bufferService.buffer.ydisp,S=this._createLinkUnderlineEvent(l.start.x-1,l.start.y-v-1,l.end.x,l.end.y-v-1,void 0);(o?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(S)}_linkLeave(h,o,l){var v;(v=this._currentLink)!=null&&v.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(o,!1),this._currentLink.state.decorations.pointerCursor&&h.classList.remove("xterm-cursor-pointer")),o.leave&&o.leave(l,o.text)}_linkAtPosition(h,o){const l=h.range.start.y*this._bufferService.cols+h.range.start.x,v=h.range.end.y*this._bufferService.cols+h.range.end.x,S=o.y*this._bufferService.cols+o.x;return l<=S&&S<=v}_positionFromMouseEvent(h,o,l){const v=l.getCoords(h,o,this._bufferService.cols,this._bufferService.rows);if(v)return{x:v[0],y:v[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(h,o,l,v,S){return{x1:h,y1:o,x2:l,y2:v,cols:this._bufferService.cols,fg:S}}};r.Linkifier=c=p([_(1,m.IMouseService),_(2,m.IRenderService),_(3,w.IBufferService),_(4,m.ILinkProviderService)],c)},9042:(f,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.tooMuchOutput=r.promptLabel=void 0,r.promptLabel="Terminal input",r.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(f,r,n){var p=this&&this.__decorate||function(m,c,h,o){var l,v=arguments.length,S=v<3?c:o===null?o=Object.getOwnPropertyDescriptor(c,h):o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(m,c,h,o);else for(var x=m.length-1;x>=0;x--)(l=m[x])&&(S=(v<3?l(S):v>3?l(c,h,S):l(c,h))||S);return v>3&&S&&Object.defineProperty(c,h,S),S},_=this&&this.__param||function(m,c){return function(h,o){c(h,o,m)}};Object.defineProperty(r,"__esModule",{value:!0}),r.OscLinkProvider=void 0;const d=n(511),g=n(2585);let b=r.OscLinkProvider=class{constructor(m,c,h){this._bufferService=m,this._optionsService=c,this._oscLinkService=h}provideLinks(m,c){var A;const h=this._bufferService.buffer.lines.get(m-1);if(!h)return void c(void 0);const o=[],l=this._optionsService.rawOptions.linkHandler,v=new d.CellData,S=h.getTrimmedLength();let x=-1,k=-1,C=!1;for(let N=0;N<S;N++)if(k!==-1||h.hasContent(N)){if(h.loadCell(N,v),v.hasExtendedAttrs()&&v.extended.urlId){if(k===-1){k=N,x=v.extended.urlId;continue}C=v.extended.urlId!==x}else k!==-1&&(C=!0);if(C||k!==-1&&N===S-1){const G=(A=this._oscLinkService.getLinkData(x))==null?void 0:A.uri;if(G){const L={start:{x:k+1,y:m},end:{x:N+(C||N!==S-1?0:1),y:m}};let I=!1;if(!(l!=null&&l.allowNonHttpProtocols))try{const E=new URL(G);["http:","https:"].includes(E.protocol)||(I=!0)}catch{I=!0}I||o.push({text:G,range:L,activate:(E,X)=>l?l.activate(E,X,L):w(0,X),hover:(E,X)=>{var Q;return(Q=l==null?void 0:l.hover)==null?void 0:Q.call(l,E,X,L)},leave:(E,X)=>{var Q;return(Q=l==null?void 0:l.leave)==null?void 0:Q.call(l,E,X,L)}})}C=!1,v.hasExtendedAttrs()&&v.extended.urlId?(k=N,x=v.extended.urlId):(k=-1,x=-1)}}c(o)}};function w(m,c){if(confirm(`Do you want to navigate to ${c}?

WARNING: This link could potentially be dangerous`)){const h=window.open();if(h){try{h.opener=null}catch{}h.location.href=c}else console.warn("Opening link blocked as opener could not be cleared")}}r.OscLinkProvider=b=p([_(0,g.IBufferService),_(1,g.IOptionsService),_(2,g.IOscLinkService)],b)},6193:(f,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.RenderDebouncer=void 0,r.RenderDebouncer=class{constructor(n,p){this._renderCallback=n,this._coreBrowserService=p,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(n){return this._refreshCallbacks.push(n),this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame((()=>this._innerRefresh()))),this._animationFrame}refresh(n,p,_){this._rowCount=_,n=n!==void 0?n:0,p=p!==void 0?p:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,n):n,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,p):p,this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame((()=>this._innerRefresh())))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();const n=Math.max(this._rowStart,0),p=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(n,p),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(const n of this._refreshCallbacks)n(0);this._refreshCallbacks=[]}}},3236:(f,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.Terminal=void 0;const p=n(3614),_=n(3656),d=n(3551),g=n(9042),b=n(3730),w=n(1680),m=n(3107),c=n(5744),h=n(2950),o=n(1296),l=n(428),v=n(4269),S=n(5114),x=n(8934),k=n(3230),C=n(9312),A=n(4725),N=n(6731),G=n(8055),L=n(8969),I=n(8460),E=n(844),X=n(6114),Q=n(8437),J=n(2584),ie=n(7399),T=n(5941),U=n(9074),M=n(2585),$=n(5435),ne=n(4567),le=n(779);class ce extends L.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor(j={}){super(j),this.browser=X,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new E.MutableDisposable),this._onCursorMove=this.register(new I.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new I.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new I.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new I.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new I.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new I.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new I.EventEmitter),this._onBlur=this.register(new I.EventEmitter),this._onA11yCharEmitter=this.register(new I.EventEmitter),this._onA11yTabEmitter=this.register(new I.EventEmitter),this._onWillOpen=this.register(new I.EventEmitter),this._setup(),this._decorationService=this._instantiationService.createInstance(U.DecorationService),this._instantiationService.setService(M.IDecorationService,this._decorationService),this._linkProviderService=this._instantiationService.createInstance(le.LinkProviderService),this._instantiationService.setService(A.ILinkProviderService,this._linkProviderService),this._linkProviderService.registerLinkProvider(this._instantiationService.createInstance(b.OscLinkProvider)),this.register(this._inputHandler.onRequestBell((()=>this._onBell.fire()))),this.register(this._inputHandler.onRequestRefreshRows(((O,ee)=>this.refresh(O,ee)))),this.register(this._inputHandler.onRequestSendFocus((()=>this._reportFocus()))),this.register(this._inputHandler.onRequestReset((()=>this.reset()))),this.register(this._inputHandler.onRequestWindowsOptionsReport((O=>this._reportWindowsOptions(O)))),this.register(this._inputHandler.onColor((O=>this._handleColorEvent(O)))),this.register((0,I.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,I.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,I.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,I.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize((O=>this._afterResize(O.cols,O.rows)))),this.register((0,E.toDisposable)((()=>{var O,ee;this._customKeyEventHandler=void 0,(ee=(O=this.element)==null?void 0:O.parentNode)==null||ee.removeChild(this.element)})))}_handleColorEvent(j){if(this._themeService)for(const O of j){let ee,te="";switch(O.index){case 256:ee="foreground",te="10";break;case 257:ee="background",te="11";break;case 258:ee="cursor",te="12";break;default:ee="ansi",te="4;"+O.index}switch(O.type){case 0:const F=G.color.toColorRGB(ee==="ansi"?this._themeService.colors.ansi[O.index]:this._themeService.colors[ee]);this.coreService.triggerDataEvent(`${J.C0.ESC}]${te};${(0,T.toRgbString)(F)}${J.C1_ESCAPED.ST}`);break;case 1:if(ee==="ansi")this._themeService.modifyColors((q=>q.ansi[O.index]=G.channels.toColor(...O.color)));else{const q=ee;this._themeService.modifyColors((Y=>Y[q]=G.channels.toColor(...O.color)))}break;case 2:this._themeService.restoreColor(O.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(j){j?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(ne.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(j){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(J.C0.ESC+"[I"),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){var j;return(j=this.textarea)==null?void 0:j.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(J.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;const j=this.buffer.ybase+this.buffer.y,O=this.buffer.lines.get(j);if(!O)return;const ee=Math.min(this.buffer.x,this.cols-1),te=this._renderService.dimensions.css.cell.height,F=O.getWidth(ee),q=this._renderService.dimensions.css.cell.width*F,Y=this.buffer.y*this._renderService.dimensions.css.cell.height,y=ee*this._renderService.dimensions.css.cell.width;this.textarea.style.left=y+"px",this.textarea.style.top=Y+"px",this.textarea.style.width=q+"px",this.textarea.style.height=te+"px",this.textarea.style.lineHeight=te+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,_.addDisposableDomListener)(this.element,"copy",(O=>{this.hasSelection()&&(0,p.copyHandler)(O,this._selectionService)})));const j=O=>(0,p.handlePasteEvent)(O,this.textarea,this.coreService,this.optionsService);this.register((0,_.addDisposableDomListener)(this.textarea,"paste",j)),this.register((0,_.addDisposableDomListener)(this.element,"paste",j)),X.isFirefox?this.register((0,_.addDisposableDomListener)(this.element,"mousedown",(O=>{O.button===2&&(0,p.rightClickHandler)(O,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)}))):this.register((0,_.addDisposableDomListener)(this.element,"contextmenu",(O=>{(0,p.rightClickHandler)(O,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)}))),X.isLinux&&this.register((0,_.addDisposableDomListener)(this.element,"auxclick",(O=>{O.button===1&&(0,p.moveTextAreaUnderMouseCursor)(O,this.textarea,this.screenElement)})))}_bindKeys(){this.register((0,_.addDisposableDomListener)(this.textarea,"keyup",(j=>this._keyUp(j)),!0)),this.register((0,_.addDisposableDomListener)(this.textarea,"keydown",(j=>this._keyDown(j)),!0)),this.register((0,_.addDisposableDomListener)(this.textarea,"keypress",(j=>this._keyPress(j)),!0)),this.register((0,_.addDisposableDomListener)(this.textarea,"compositionstart",(()=>this._compositionHelper.compositionstart()))),this.register((0,_.addDisposableDomListener)(this.textarea,"compositionupdate",(j=>this._compositionHelper.compositionupdate(j)))),this.register((0,_.addDisposableDomListener)(this.textarea,"compositionend",(()=>this._compositionHelper.compositionend()))),this.register((0,_.addDisposableDomListener)(this.textarea,"input",(j=>this._inputEvent(j)),!0)),this.register(this.onRender((()=>this._compositionHelper.updateCompositionElements())))}open(j){var ee;if(!j)throw new Error("Terminal requires a parent element.");if(j.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),((ee=this.element)==null?void 0:ee.ownerDocument.defaultView)&&this._coreBrowserService)return void(this.element.ownerDocument.defaultView!==this._coreBrowserService.window&&(this._coreBrowserService.window=this.element.ownerDocument.defaultView));this._document=j.ownerDocument,this.options.documentOverride&&this.options.documentOverride instanceof Document&&(this._document=this.optionsService.rawOptions.documentOverride),this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),j.appendChild(this.element);const O=this._document.createDocumentFragment();this._viewportElement=this._document.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),O.appendChild(this._viewportElement),this._viewportScrollArea=this._document.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=this._document.createElement("div"),this.screenElement.classList.add("xterm-screen"),this.register((0,_.addDisposableDomListener)(this.screenElement,"mousemove",(te=>this.updateCursorStyle(te)))),this._helperContainer=this._document.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),O.appendChild(this.screenElement),this.textarea=this._document.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",g.promptLabel),X.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this.register(this._instantiationService.createInstance(S.CoreBrowserService,this.textarea,j.ownerDocument.defaultView??window,this._document??typeof window<"u"?window.document:null)),this._instantiationService.setService(A.ICoreBrowserService,this._coreBrowserService),this.register((0,_.addDisposableDomListener)(this.textarea,"focus",(te=>this._handleTextAreaFocus(te)))),this.register((0,_.addDisposableDomListener)(this.textarea,"blur",(()=>this._handleTextAreaBlur()))),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(l.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(A.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(N.ThemeService),this._instantiationService.setService(A.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(v.CharacterJoinerService),this._instantiationService.setService(A.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(k.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(A.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange((te=>this._onRender.fire(te)))),this.onResize((te=>this._renderService.resize(te.cols,te.rows))),this._compositionView=this._document.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(h.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this._mouseService=this._instantiationService.createInstance(x.MouseService),this._instantiationService.setService(A.IMouseService,this._mouseService),this.linkifier=this.register(this._instantiationService.createInstance(d.Linkifier,this.screenElement)),this.element.appendChild(O);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this.viewport=this._instantiationService.createInstance(w.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines((te=>this.scrollLines(te.amount,te.suppressScrollEvent,1))),this.register(this._inputHandler.onRequestSyncScrollBar((()=>this.viewport.syncScrollArea()))),this.register(this.viewport),this.register(this.onCursorMove((()=>{this._renderService.handleCursorMove(),this._syncTextArea()}))),this.register(this.onResize((()=>this._renderService.handleResize(this.cols,this.rows)))),this.register(this.onBlur((()=>this._renderService.handleBlur()))),this.register(this.onFocus((()=>this._renderService.handleFocus()))),this.register(this._renderService.onDimensionsChange((()=>this.viewport.syncScrollArea()))),this._selectionService=this.register(this._instantiationService.createInstance(C.SelectionService,this.element,this.screenElement,this.linkifier)),this._instantiationService.setService(A.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines((te=>this.scrollLines(te.amount,te.suppressScrollEvent)))),this.register(this._selectionService.onSelectionChange((()=>this._onSelectionChange.fire()))),this.register(this._selectionService.onRequestRedraw((te=>this._renderService.handleSelectionChanged(te.start,te.end,te.columnSelectMode)))),this.register(this._selectionService.onLinuxMouseSelection((te=>{this.textarea.value=te,this.textarea.focus(),this.textarea.select()}))),this.register(this._onScroll.event((te=>{this.viewport.syncScrollArea(),this._selectionService.refresh()}))),this.register((0,_.addDisposableDomListener)(this._viewportElement,"scroll",(()=>this._selectionService.refresh()))),this.register(this._instantiationService.createInstance(m.BufferDecorationRenderer,this.screenElement)),this.register((0,_.addDisposableDomListener)(this.element,"mousedown",(te=>this._selectionService.handleMouseDown(te)))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(ne.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",(te=>this._handleScreenReaderModeOptionChange(te)))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(c.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",(te=>{!this._overviewRulerRenderer&&te&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(c.OverviewRulerRenderer,this._viewportElement,this.screenElement)))})),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(o.DomRenderer,this,this._document,this.element,this.screenElement,this._viewportElement,this._helperContainer,this.linkifier)}bindMouse(){const j=this,O=this.element;function ee(q){const Y=j._mouseService.getMouseReportCoords(q,j.screenElement);if(!Y)return!1;let y,P;switch(q.overrideType||q.type){case"mousemove":P=32,q.buttons===void 0?(y=3,q.button!==void 0&&(y=q.button<3?q.button:3)):y=1&q.buttons?0:4&q.buttons?1:2&q.buttons?2:3;break;case"mouseup":P=0,y=q.button<3?q.button:3;break;case"mousedown":P=1,y=q.button<3?q.button:3;break;case"wheel":if(j._customWheelEventHandler&&j._customWheelEventHandler(q)===!1||j.viewport.getLinesScrolled(q)===0)return!1;P=q.deltaY<0?0:1,y=4;break;default:return!1}return!(P===void 0||y===void 0||y>4)&&j.coreMouseService.triggerMouseEvent({col:Y.col,row:Y.row,x:Y.x,y:Y.y,button:y,action:P,ctrl:q.ctrlKey,alt:q.altKey,shift:q.shiftKey})}const te={mouseup:null,wheel:null,mousedrag:null,mousemove:null},F={mouseup:q=>(ee(q),q.buttons||(this._document.removeEventListener("mouseup",te.mouseup),te.mousedrag&&this._document.removeEventListener("mousemove",te.mousedrag)),this.cancel(q)),wheel:q=>(ee(q),this.cancel(q,!0)),mousedrag:q=>{q.buttons&&ee(q)},mousemove:q=>{q.buttons||ee(q)}};this.register(this.coreMouseService.onProtocolChange((q=>{q?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(q)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&q?te.mousemove||(O.addEventListener("mousemove",F.mousemove),te.mousemove=F.mousemove):(O.removeEventListener("mousemove",te.mousemove),te.mousemove=null),16&q?te.wheel||(O.addEventListener("wheel",F.wheel,{passive:!1}),te.wheel=F.wheel):(O.removeEventListener("wheel",te.wheel),te.wheel=null),2&q?te.mouseup||(te.mouseup=F.mouseup):(this._document.removeEventListener("mouseup",te.mouseup),te.mouseup=null),4&q?te.mousedrag||(te.mousedrag=F.mousedrag):(this._document.removeEventListener("mousemove",te.mousedrag),te.mousedrag=null)}))),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,_.addDisposableDomListener)(O,"mousedown",(q=>{if(q.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(q))return ee(q),te.mouseup&&this._document.addEventListener("mouseup",te.mouseup),te.mousedrag&&this._document.addEventListener("mousemove",te.mousedrag),this.cancel(q)}))),this.register((0,_.addDisposableDomListener)(O,"wheel",(q=>{if(!te.wheel){if(this._customWheelEventHandler&&this._customWheelEventHandler(q)===!1)return!1;if(!this.buffer.hasScrollback){const Y=this.viewport.getLinesScrolled(q);if(Y===0)return;const y=J.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(q.deltaY<0?"A":"B");let P="";for(let K=0;K<Math.abs(Y);K++)P+=y;return this.coreService.triggerDataEvent(P,!0),this.cancel(q,!0)}return this.viewport.handleWheel(q)?this.cancel(q):void 0}}),{passive:!1})),this.register((0,_.addDisposableDomListener)(O,"touchstart",(q=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(q),this.cancel(q)}),{passive:!0})),this.register((0,_.addDisposableDomListener)(O,"touchmove",(q=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(q)?void 0:this.cancel(q)}),{passive:!1}))}refresh(j,O){var ee;(ee=this._renderService)==null||ee.refreshRows(j,O)}updateCursorStyle(j){var O;(O=this._selectionService)!=null&&O.shouldColumnSelect(j)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(j,O,ee=0){var te;ee===1?(super.scrollLines(j,O,ee),this.refresh(0,this.rows-1)):(te=this.viewport)==null||te.scrollLines(j)}paste(j){(0,p.paste)(j,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(j){this._customKeyEventHandler=j}attachCustomWheelEventHandler(j){this._customWheelEventHandler=j}registerLinkProvider(j){return this._linkProviderService.registerLinkProvider(j)}registerCharacterJoiner(j){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");const O=this._characterJoinerService.register(j);return this.refresh(0,this.rows-1),O}deregisterCharacterJoiner(j){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(j)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(j){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+j)}registerDecoration(j){return this._decorationService.registerDecoration(j)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(j,O,ee){this._selectionService.setSelection(j,O,ee)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){var j;(j=this._selectionService)==null||j.clearSelection()}selectAll(){var j;(j=this._selectionService)==null||j.selectAll()}selectLines(j,O){var ee;(ee=this._selectionService)==null||ee.selectLines(j,O)}_keyDown(j){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(j)===!1)return!1;const O=this.browser.isMac&&this.options.macOptionIsMeta&&j.altKey;if(!O&&!this._compositionHelper.keydown(j))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;O||j.key!=="Dead"&&j.key!=="AltGraph"||(this._unprocessedDeadKey=!0);const ee=(0,ie.evaluateKeyboardEvent)(j,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(j),ee.type===3||ee.type===2){const te=this.rows-1;return this.scrollLines(ee.type===2?-te:te),this.cancel(j,!0)}return ee.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,j)||(ee.cancel&&this.cancel(j,!0),!ee.key||!!(j.key&&!j.ctrlKey&&!j.altKey&&!j.metaKey&&j.key.length===1&&j.key.charCodeAt(0)>=65&&j.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(ee.key!==J.C0.ETX&&ee.key!==J.C0.CR||(this.textarea.value=""),this._onKey.fire({key:ee.key,domEvent:j}),this._showCursor(),this.coreService.triggerDataEvent(ee.key,!0),!this.optionsService.rawOptions.screenReaderMode||j.altKey||j.ctrlKey?this.cancel(j,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(j,O){const ee=j.isMac&&!this.options.macOptionIsMeta&&O.altKey&&!O.ctrlKey&&!O.metaKey||j.isWindows&&O.altKey&&O.ctrlKey&&!O.metaKey||j.isWindows&&O.getModifierState("AltGraph");return O.type==="keypress"?ee:ee&&(!O.keyCode||O.keyCode>47)}_keyUp(j){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(j)===!1||((function(O){return O.keyCode===16||O.keyCode===17||O.keyCode===18})(j)||this.focus(),this.updateCursorStyle(j),this._keyPressHandled=!1)}_keyPress(j){let O;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(j)===!1)return!1;if(this.cancel(j),j.charCode)O=j.charCode;else if(j.which===null||j.which===void 0)O=j.keyCode;else{if(j.which===0||j.charCode===0)return!1;O=j.which}return!(!O||(j.altKey||j.ctrlKey||j.metaKey)&&!this._isThirdLevelShift(this.browser,j)||(O=String.fromCharCode(O),this._onKey.fire({key:O,domEvent:j}),this._showCursor(),this.coreService.triggerDataEvent(O,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(j){if(j.data&&j.inputType==="insertText"&&(!j.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;const O=j.data;return this.coreService.triggerDataEvent(O,!0),this.cancel(j),!0}return!1}resize(j,O){j!==this.cols||O!==this.rows?super.resize(j,O):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(j,O){var ee,te;(ee=this._charSizeService)==null||ee.measure(),(te=this.viewport)==null||te.syncScrollArea(!0)}clear(){var j;if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let O=1;O<this.rows;O++)this.buffer.lines.push(this.buffer.getBlankLine(Q.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),(j=this.viewport)==null||j.reset(),this.refresh(0,this.rows-1)}}reset(){var O,ee;this.options.rows=this.rows,this.options.cols=this.cols;const j=this._customKeyEventHandler;this._setup(),super.reset(),(O=this._selectionService)==null||O.reset(),this._decorationService.reset(),(ee=this.viewport)==null||ee.reset(),this._customKeyEventHandler=j,this.refresh(0,this.rows-1)}clearTextureAtlas(){var j;(j=this._renderService)==null||j.clearTextureAtlas()}_reportFocus(){var j;(j=this.element)!=null&&j.classList.contains("focus")?this.coreService.triggerDataEvent(J.C0.ESC+"[I"):this.coreService.triggerDataEvent(J.C0.ESC+"[O")}_reportWindowsOptions(j){if(this._renderService)switch(j){case $.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:const O=this._renderService.dimensions.css.canvas.width.toFixed(0),ee=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${J.C0.ESC}[4;${ee};${O}t`);break;case $.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:const te=this._renderService.dimensions.css.cell.width.toFixed(0),F=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${J.C0.ESC}[6;${F};${te}t`)}}cancel(j,O){if(this.options.cancelEvents||O)return j.preventDefault(),j.stopPropagation(),!1}}r.Terminal=ce},9924:(f,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.TimeBasedDebouncer=void 0,r.TimeBasedDebouncer=class{constructor(n,p=1e3){this._renderCallback=n,this._debounceThresholdMS=p,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(n,p,_){this._rowCount=_,n=n!==void 0?n:0,p=p!==void 0?p:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,n):n,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,p):p;const d=Date.now();if(d-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=d,this._innerRefresh();else if(!this._additionalRefreshRequested){const g=d-this._lastRefreshMs,b=this._debounceThresholdMS-g;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout((()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0}),b)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;const n=Math.max(this._rowStart,0),p=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(n,p)}}},1680:function(f,r,n){var p=this&&this.__decorate||function(h,o,l,v){var S,x=arguments.length,k=x<3?o:v===null?v=Object.getOwnPropertyDescriptor(o,l):v;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(h,o,l,v);else for(var C=h.length-1;C>=0;C--)(S=h[C])&&(k=(x<3?S(k):x>3?S(o,l,k):S(o,l))||k);return x>3&&k&&Object.defineProperty(o,l,k),k},_=this&&this.__param||function(h,o){return function(l,v){o(l,v,h)}};Object.defineProperty(r,"__esModule",{value:!0}),r.Viewport=void 0;const d=n(3656),g=n(4725),b=n(8460),w=n(844),m=n(2585);let c=r.Viewport=class extends w.Disposable{constructor(h,o,l,v,S,x,k,C){super(),this._viewportElement=h,this._scrollArea=o,this._bufferService=l,this._optionsService=v,this._charSizeService=S,this._renderService=x,this._coreBrowserService=k,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new b.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,d.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate((A=>this._activeBuffer=A.activeBuffer))),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange((A=>this._renderDimensions=A))),this._handleThemeChange(C.colors),this.register(C.onChangeColors((A=>this._handleThemeChange(A)))),this.register(this._optionsService.onSpecificOptionChange("scrollback",(()=>this.syncScrollArea()))),setTimeout((()=>this.syncScrollArea()))}_handleThemeChange(h){this._viewportElement.style.backgroundColor=h.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame((()=>this.syncScrollArea()))}_refresh(h){if(h)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame((()=>this._innerRefresh())))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderDimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderDimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;const o=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderDimensions.css.canvas.height);this._lastRecordedBufferHeight!==o&&(this._lastRecordedBufferHeight=o,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}const h=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==h&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=h),this._refreshAnimationFrame=null}syncScrollArea(h=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(h);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(h)}_handleScroll(h){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});const o=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:o,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;const h=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(h*(this._smoothScrollState.target-this._smoothScrollState.origin)),h<1?this._coreBrowserService.window.requestAnimationFrame((()=>this._smoothScroll())):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(h,o){const l=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(o<0&&this._viewportElement.scrollTop!==0||o>0&&l<this._lastRecordedBufferHeight)||(h.cancelable&&h.preventDefault(),!1)}handleWheel(h){const o=this._getPixelsScrolled(h);return o!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+o:this._smoothScrollState.target+=o,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=o,this._bubbleScroll(h,o))}scrollLines(h){if(h!==0)if(this._optionsService.rawOptions.smoothScrollDuration){const o=h*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+o,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:h,suppressScrollEvent:!1})}_getPixelsScrolled(h){if(h.deltaY===0||h.shiftKey)return 0;let o=this._applyScrollModifier(h.deltaY,h);return h.deltaMode===WheelEvent.DOM_DELTA_LINE?o*=this._currentRowHeight:h.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(o*=this._currentRowHeight*this._bufferService.rows),o}getBufferElements(h,o){var C;let l,v="";const S=[],x=o??this._bufferService.buffer.lines.length,k=this._bufferService.buffer.lines;for(let A=h;A<x;A++){const N=k.get(A);if(!N)continue;const G=(C=k.get(A+1))==null?void 0:C.isWrapped;if(v+=N.translateToString(!G),!G||A===k.length-1){const L=document.createElement("div");L.textContent=v,S.push(L),v.length>0&&(l=L),v=""}}return{bufferElements:S,cursorElement:l}}getLinesScrolled(h){if(h.deltaY===0||h.shiftKey)return 0;let o=this._applyScrollModifier(h.deltaY,h);return h.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(o/=this._currentRowHeight+0,this._wheelPartialScroll+=o,o=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):h.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(o*=this._bufferService.rows),o}_applyScrollModifier(h,o){const l=this._optionsService.rawOptions.fastScrollModifier;return l==="alt"&&o.altKey||l==="ctrl"&&o.ctrlKey||l==="shift"&&o.shiftKey?h*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:h*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(h){this._lastTouchY=h.touches[0].pageY}handleTouchMove(h){const o=this._lastTouchY-h.touches[0].pageY;return this._lastTouchY=h.touches[0].pageY,o!==0&&(this._viewportElement.scrollTop+=o,this._bubbleScroll(h,o))}};r.Viewport=c=p([_(2,m.IBufferService),_(3,m.IOptionsService),_(4,g.ICharSizeService),_(5,g.IRenderService),_(6,g.ICoreBrowserService),_(7,g.IThemeService)],c)},3107:function(f,r,n){var p=this&&this.__decorate||function(m,c,h,o){var l,v=arguments.length,S=v<3?c:o===null?o=Object.getOwnPropertyDescriptor(c,h):o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(m,c,h,o);else for(var x=m.length-1;x>=0;x--)(l=m[x])&&(S=(v<3?l(S):v>3?l(c,h,S):l(c,h))||S);return v>3&&S&&Object.defineProperty(c,h,S),S},_=this&&this.__param||function(m,c){return function(h,o){c(h,o,m)}};Object.defineProperty(r,"__esModule",{value:!0}),r.BufferDecorationRenderer=void 0;const d=n(4725),g=n(844),b=n(2585);let w=r.BufferDecorationRenderer=class extends g.Disposable{constructor(m,c,h,o,l){super(),this._screenElement=m,this._bufferService=c,this._coreBrowserService=h,this._decorationService=o,this._renderService=l,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange((()=>this._doRefreshDecorations()))),this.register(this._renderService.onDimensionsChange((()=>{this._dimensionsChanged=!0,this._queueRefresh()}))),this.register(this._coreBrowserService.onDprChange((()=>this._queueRefresh()))),this.register(this._bufferService.buffers.onBufferActivate((()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt}))),this.register(this._decorationService.onDecorationRegistered((()=>this._queueRefresh()))),this.register(this._decorationService.onDecorationRemoved((v=>this._removeDecoration(v)))),this.register((0,g.toDisposable)((()=>{this._container.remove(),this._decorationElements.clear()})))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback((()=>{this._doRefreshDecorations(),this._animationFrame=void 0})))}_doRefreshDecorations(){for(const m of this._decorationService.decorations)this._renderDecoration(m);this._dimensionsChanged=!1}_renderDecoration(m){this._refreshStyle(m),this._dimensionsChanged&&this._refreshXPosition(m)}_createElement(m){var o;const c=this._coreBrowserService.mainDocument.createElement("div");c.classList.add("xterm-decoration"),c.classList.toggle("xterm-decoration-top-layer",((o=m==null?void 0:m.options)==null?void 0:o.layer)==="top"),c.style.width=`${Math.round((m.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,c.style.height=(m.options.height||1)*this._renderService.dimensions.css.cell.height+"px",c.style.top=(m.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",c.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;const h=m.options.x??0;return h&&h>this._bufferService.cols&&(c.style.display="none"),this._refreshXPosition(m,c),c}_refreshStyle(m){const c=m.marker.line-this._bufferService.buffers.active.ydisp;if(c<0||c>=this._bufferService.rows)m.element&&(m.element.style.display="none",m.onRenderEmitter.fire(m.element));else{let h=this._decorationElements.get(m);h||(h=this._createElement(m),m.element=h,this._decorationElements.set(m,h),this._container.appendChild(h),m.onDispose((()=>{this._decorationElements.delete(m),h.remove()}))),h.style.top=c*this._renderService.dimensions.css.cell.height+"px",h.style.display=this._altBufferIsActive?"none":"block",m.onRenderEmitter.fire(h)}}_refreshXPosition(m,c=m.element){if(!c)return;const h=m.options.x??0;(m.options.anchor||"left")==="right"?c.style.right=h?h*this._renderService.dimensions.css.cell.width+"px":"":c.style.left=h?h*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(m){var c;(c=this._decorationElements.get(m))==null||c.remove(),this._decorationElements.delete(m),m.dispose()}};r.BufferDecorationRenderer=w=p([_(1,b.IBufferService),_(2,d.ICoreBrowserService),_(3,b.IDecorationService),_(4,d.IRenderService)],w)},5871:(f,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.ColorZoneStore=void 0,r.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(n){if(n.options.overviewRulerOptions){for(const p of this._zones)if(p.color===n.options.overviewRulerOptions.color&&p.position===n.options.overviewRulerOptions.position){if(this._lineIntersectsZone(p,n.marker.line))return;if(this._lineAdjacentToZone(p,n.marker.line,n.options.overviewRulerOptions.position))return void this._addLineToZone(p,n.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=n.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=n.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=n.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=n.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:n.options.overviewRulerOptions.color,position:n.options.overviewRulerOptions.position,startBufferLine:n.marker.line,endBufferLine:n.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(n){this._linePadding=n}_lineIntersectsZone(n,p){return p>=n.startBufferLine&&p<=n.endBufferLine}_lineAdjacentToZone(n,p,_){return p>=n.startBufferLine-this._linePadding[_||"full"]&&p<=n.endBufferLine+this._linePadding[_||"full"]}_addLineToZone(n,p){n.startBufferLine=Math.min(n.startBufferLine,p),n.endBufferLine=Math.max(n.endBufferLine,p)}}},5744:function(f,r,n){var p=this&&this.__decorate||function(l,v,S,x){var k,C=arguments.length,A=C<3?v:x===null?x=Object.getOwnPropertyDescriptor(v,S):x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")A=Reflect.decorate(l,v,S,x);else for(var N=l.length-1;N>=0;N--)(k=l[N])&&(A=(C<3?k(A):C>3?k(v,S,A):k(v,S))||A);return C>3&&A&&Object.defineProperty(v,S,A),A},_=this&&this.__param||function(l,v){return function(S,x){v(S,x,l)}};Object.defineProperty(r,"__esModule",{value:!0}),r.OverviewRulerRenderer=void 0;const d=n(5871),g=n(4725),b=n(844),w=n(2585),m={full:0,left:0,center:0,right:0},c={full:0,left:0,center:0,right:0},h={full:0,left:0,center:0,right:0};let o=r.OverviewRulerRenderer=class extends b.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(l,v,S,x,k,C,A){var G;super(),this._viewportElement=l,this._screenElement=v,this._bufferService=S,this._decorationService=x,this._renderService=k,this._optionsService=C,this._coreBrowserService=A,this._colorZoneStore=new d.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=this._coreBrowserService.mainDocument.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),(G=this._viewportElement.parentElement)==null||G.insertBefore(this._canvas,this._viewportElement);const N=this._canvas.getContext("2d");if(!N)throw new Error("Ctx cannot be null");this._ctx=N,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,b.toDisposable)((()=>{var L;(L=this._canvas)==null||L.remove()})))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered((()=>this._queueRefresh(void 0,!0)))),this.register(this._decorationService.onDecorationRemoved((()=>this._queueRefresh(void 0,!0))))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange((()=>this._queueRefresh()))),this.register(this._bufferService.buffers.onBufferActivate((()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"}))),this.register(this._bufferService.onScroll((()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())})))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender((()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)}))),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",(()=>this._queueRefresh(!0)))),this.register(this._coreBrowserService.onDprChange((()=>this._queueRefresh(!0)))),this._queueRefresh(!0)}_refreshDrawConstants(){const l=Math.floor(this._canvas.width/3),v=Math.ceil(this._canvas.width/3);c.full=this._canvas.width,c.left=l,c.center=v,c.right=l,this._refreshDrawHeightConstants(),h.full=0,h.left=0,h.center=c.left,h.right=c.left+c.center}_refreshDrawHeightConstants(){m.full=Math.round(2*this._coreBrowserService.dpr);const l=this._canvas.height/this._bufferService.buffer.lines.length,v=Math.round(Math.max(Math.min(l,12),6)*this._coreBrowserService.dpr);m.left=v,m.center=v,m.right=v}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*m.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*m.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*m.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*m.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowserService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowserService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(const v of this._decorationService.decorations)this._colorZoneStore.addDecoration(v);this._ctx.lineWidth=1;const l=this._colorZoneStore.zones;for(const v of l)v.position!=="full"&&this._renderColorZone(v);for(const v of l)v.position==="full"&&this._renderColorZone(v);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(l){this._ctx.fillStyle=l.color,this._ctx.fillRect(h[l.position||"full"],Math.round((this._canvas.height-1)*(l.startBufferLine/this._bufferService.buffers.active.lines.length)-m[l.position||"full"]/2),c[l.position||"full"],Math.round((this._canvas.height-1)*((l.endBufferLine-l.startBufferLine)/this._bufferService.buffers.active.lines.length)+m[l.position||"full"]))}_queueRefresh(l,v){this._shouldUpdateDimensions=l||this._shouldUpdateDimensions,this._shouldUpdateAnchor=v||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame((()=>{this._refreshDecorations(),this._animationFrame=void 0})))}};r.OverviewRulerRenderer=o=p([_(2,w.IBufferService),_(3,w.IDecorationService),_(4,g.IRenderService),_(5,w.IOptionsService),_(6,g.ICoreBrowserService)],o)},2950:function(f,r,n){var p=this&&this.__decorate||function(m,c,h,o){var l,v=arguments.length,S=v<3?c:o===null?o=Object.getOwnPropertyDescriptor(c,h):o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(m,c,h,o);else for(var x=m.length-1;x>=0;x--)(l=m[x])&&(S=(v<3?l(S):v>3?l(c,h,S):l(c,h))||S);return v>3&&S&&Object.defineProperty(c,h,S),S},_=this&&this.__param||function(m,c){return function(h,o){c(h,o,m)}};Object.defineProperty(r,"__esModule",{value:!0}),r.CompositionHelper=void 0;const d=n(4725),g=n(2585),b=n(2584);let w=r.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(m,c,h,o,l,v){this._textarea=m,this._compositionView=c,this._bufferService=h,this._optionsService=o,this._coreService=l,this._renderService=v,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(m){this._compositionView.textContent=m.data,this.updateCompositionElements(),setTimeout((()=>{this._compositionPosition.end=this._textarea.value.length}),0)}compositionend(){this._finalizeComposition(!0)}keydown(m){if(this._isComposing||this._isSendingComposition){if(m.keyCode===229||m.keyCode===16||m.keyCode===17||m.keyCode===18)return!1;this._finalizeComposition(!1)}return m.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(m){if(this._compositionView.classList.remove("active"),this._isComposing=!1,m){const c={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout((()=>{if(this._isSendingComposition){let h;this._isSendingComposition=!1,c.start+=this._dataAlreadySent.length,h=this._isComposing?this._textarea.value.substring(c.start,c.end):this._textarea.value.substring(c.start),h.length>0&&this._coreService.triggerDataEvent(h,!0)}}),0)}else{this._isSendingComposition=!1;const c=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(c,!0)}}_handleAnyTextareaChanges(){const m=this._textarea.value;setTimeout((()=>{if(!this._isComposing){const c=this._textarea.value,h=c.replace(m,"");this._dataAlreadySent=h,c.length>m.length?this._coreService.triggerDataEvent(h,!0):c.length<m.length?this._coreService.triggerDataEvent(`${b.C0.DEL}`,!0):c.length===m.length&&c!==m&&this._coreService.triggerDataEvent(c,!0)}}),0)}updateCompositionElements(m){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){const c=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),h=this._renderService.dimensions.css.cell.height,o=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,l=c*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=l+"px",this._compositionView.style.top=o+"px",this._compositionView.style.height=h+"px",this._compositionView.style.lineHeight=h+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";const v=this._compositionView.getBoundingClientRect();this._textarea.style.left=l+"px",this._textarea.style.top=o+"px",this._textarea.style.width=Math.max(v.width,1)+"px",this._textarea.style.height=Math.max(v.height,1)+"px",this._textarea.style.lineHeight=v.height+"px"}m||setTimeout((()=>this.updateCompositionElements(!0)),0)}}};r.CompositionHelper=w=p([_(2,g.IBufferService),_(3,g.IOptionsService),_(4,g.ICoreService),_(5,d.IRenderService)],w)},9806:(f,r)=>{function n(p,_,d){const g=d.getBoundingClientRect(),b=p.getComputedStyle(d),w=parseInt(b.getPropertyValue("padding-left")),m=parseInt(b.getPropertyValue("padding-top"));return[_.clientX-g.left-w,_.clientY-g.top-m]}Object.defineProperty(r,"__esModule",{value:!0}),r.getCoords=r.getCoordsRelativeToElement=void 0,r.getCoordsRelativeToElement=n,r.getCoords=function(p,_,d,g,b,w,m,c,h){if(!w)return;const o=n(p,_,d);return o?(o[0]=Math.ceil((o[0]+(h?m/2:0))/m),o[1]=Math.ceil(o[1]/c),o[0]=Math.min(Math.max(o[0],1),g+(h?1:0)),o[1]=Math.min(Math.max(o[1],1),b),o):void 0}},9504:(f,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.moveToCellSequence=void 0;const p=n(2584);function _(c,h,o,l){const v=c-d(c,o),S=h-d(h,o),x=Math.abs(v-S)-(function(k,C,A){let N=0;const G=k-d(k,A),L=C-d(C,A);for(let I=0;I<Math.abs(G-L);I++){const E=g(k,C)==="A"?-1:1,X=A.buffer.lines.get(G+E*I);X!=null&&X.isWrapped&&N++}return N})(c,h,o);return m(x,w(g(c,h),l))}function d(c,h){let o=0,l=h.buffer.lines.get(c),v=l==null?void 0:l.isWrapped;for(;v&&c>=0&&c<h.rows;)o++,l=h.buffer.lines.get(--c),v=l==null?void 0:l.isWrapped;return o}function g(c,h){return c>h?"A":"B"}function b(c,h,o,l,v,S){let x=c,k=h,C="";for(;x!==o||k!==l;)x+=v?1:-1,v&&x>S.cols-1?(C+=S.buffer.translateBufferLineToString(k,!1,c,x),x=0,c=0,k++):!v&&x<0&&(C+=S.buffer.translateBufferLineToString(k,!1,0,c+1),x=S.cols-1,c=x,k--);return C+S.buffer.translateBufferLineToString(k,!1,c,x)}function w(c,h){const o=h?"O":"[";return p.C0.ESC+o+c}function m(c,h){c=Math.floor(c);let o="";for(let l=0;l<c;l++)o+=h;return o}r.moveToCellSequence=function(c,h,o,l){const v=o.buffer.x,S=o.buffer.y;if(!o.buffer.hasScrollback)return(function(C,A,N,G,L,I){return _(A,G,L,I).length===0?"":m(b(C,A,C,A-d(A,L),!1,L).length,w("D",I))})(v,S,0,h,o,l)+_(S,h,o,l)+(function(C,A,N,G,L,I){let E;E=_(A,G,L,I).length>0?G-d(G,L):A;const X=G,Q=(function(J,ie,T,U,M,$){let ne;return ne=_(T,U,M,$).length>0?U-d(U,M):ie,J<T&&ne<=U||J>=T&&ne<U?"C":"D"})(C,A,N,G,L,I);return m(b(C,E,N,X,Q==="C",L).length,w(Q,I))})(v,S,c,h,o,l);let x;if(S===h)return x=v>c?"D":"C",m(Math.abs(v-c),w(x,l));x=S>h?"D":"C";const k=Math.abs(S-h);return m((function(C,A){return A.cols-C})(S>h?c:v,o)+(k-1)*o.cols+1+((S>h?v:c)-1),w(x,l))}},1296:function(f,r,n){var p=this&&this.__decorate||function(I,E,X,Q){var J,ie=arguments.length,T=ie<3?E:Q===null?Q=Object.getOwnPropertyDescriptor(E,X):Q;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")T=Reflect.decorate(I,E,X,Q);else for(var U=I.length-1;U>=0;U--)(J=I[U])&&(T=(ie<3?J(T):ie>3?J(E,X,T):J(E,X))||T);return ie>3&&T&&Object.defineProperty(E,X,T),T},_=this&&this.__param||function(I,E){return function(X,Q){E(X,Q,I)}};Object.defineProperty(r,"__esModule",{value:!0}),r.DomRenderer=void 0;const d=n(3787),g=n(2550),b=n(2223),w=n(6171),m=n(6052),c=n(4725),h=n(8055),o=n(8460),l=n(844),v=n(2585),S="xterm-dom-renderer-owner-",x="xterm-rows",k="xterm-fg-",C="xterm-bg-",A="xterm-focus",N="xterm-selection";let G=1,L=r.DomRenderer=class extends l.Disposable{constructor(I,E,X,Q,J,ie,T,U,M,$,ne,le,ce){super(),this._terminal=I,this._document=E,this._element=X,this._screenElement=Q,this._viewportElement=J,this._helperContainer=ie,this._linkifier2=T,this._charSizeService=M,this._optionsService=$,this._bufferService=ne,this._coreBrowserService=le,this._themeService=ce,this._terminalClass=G++,this._rowElements=[],this._selectionRenderModel=(0,m.createSelectionRenderModel)(),this.onRequestRedraw=this.register(new o.EventEmitter).event,this._rowContainer=this._document.createElement("div"),this._rowContainer.classList.add(x),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=this._document.createElement("div"),this._selectionContainer.classList.add(N),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,w.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange((()=>this._handleOptionsChanged()))),this.register(this._themeService.onChangeColors((pe=>this._injectCss(pe)))),this._injectCss(this._themeService.colors),this._rowFactory=U.createInstance(d.DomRendererRowFactory,document),this._element.classList.add(S+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline((pe=>this._handleLinkHover(pe)))),this.register(this._linkifier2.onHideLinkUnderline((pe=>this._handleLinkLeave(pe)))),this.register((0,l.toDisposable)((()=>{this._element.classList.remove(S+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()}))),this._widthCache=new g.WidthCache(this._document,this._helperContainer),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){const I=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*I,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*I),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/I),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/I),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(const X of this._rowElements)X.style.width=`${this.dimensions.css.canvas.width}px`,X.style.height=`${this.dimensions.css.cell.height}px`,X.style.lineHeight=`${this.dimensions.css.cell.height}px`,X.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));const E=`${this._terminalSelector} .${x} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=E,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(I){this._themeStyleElement||(this._themeStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let E=`${this._terminalSelector} .${x} { color: ${I.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;E+=`${this._terminalSelector} .${x} .xterm-dim { color: ${h.color.multiplyOpacity(I.foreground,.5).css};}`,E+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`;const X=`blink_underline_${this._terminalClass}`,Q=`blink_bar_${this._terminalClass}`,J=`blink_block_${this._terminalClass}`;E+=`@keyframes ${X} { 50% {  border-bottom-style: hidden; }}`,E+=`@keyframes ${Q} { 50% {  box-shadow: none; }}`,E+=`@keyframes ${J} { 0% {  background-color: ${I.cursor.css};  color: ${I.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${I.cursor.css}; }}`,E+=`${this._terminalSelector} .${x}.${A} .xterm-cursor.xterm-cursor-blink.xterm-cursor-underline { animation: ${X} 1s step-end infinite;}${this._terminalSelector} .${x}.${A} .xterm-cursor.xterm-cursor-blink.xterm-cursor-bar { animation: ${Q} 1s step-end infinite;}${this._terminalSelector} .${x}.${A} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: ${J} 1s step-end infinite;}${this._terminalSelector} .${x} .xterm-cursor.xterm-cursor-block { background-color: ${I.cursor.css}; color: ${I.cursorAccent.css};}${this._terminalSelector} .${x} .xterm-cursor.xterm-cursor-block:not(.xterm-cursor-blink) { background-color: ${I.cursor.css} !important; color: ${I.cursorAccent.css} !important;}${this._terminalSelector} .${x} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${I.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${x} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${I.cursor.css} inset;}${this._terminalSelector} .${x} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${I.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,E+=`${this._terminalSelector} .${N} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${N} div { position: absolute; background-color: ${I.selectionBackgroundOpaque.css};}${this._terminalSelector} .${N} div { position: absolute; background-color: ${I.selectionInactiveBackgroundOpaque.css};}`;for(const[ie,T]of I.ansi.entries())E+=`${this._terminalSelector} .${k}${ie} { color: ${T.css}; }${this._terminalSelector} .${k}${ie}.xterm-dim { color: ${h.color.multiplyOpacity(T,.5).css}; }${this._terminalSelector} .${C}${ie} { background-color: ${T.css}; }`;E+=`${this._terminalSelector} .${k}${b.INVERTED_DEFAULT_COLOR} { color: ${h.color.opaque(I.background).css}; }${this._terminalSelector} .${k}${b.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${h.color.multiplyOpacity(h.color.opaque(I.background),.5).css}; }${this._terminalSelector} .${C}${b.INVERTED_DEFAULT_COLOR} { background-color: ${I.foreground.css}; }`,this._themeStyleElement.textContent=E}_setDefaultSpacing(){const I=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${I}px`,this._rowFactory.defaultSpacing=I}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(I,E){for(let X=this._rowElements.length;X<=E;X++){const Q=this._document.createElement("div");this._rowContainer.appendChild(Q),this._rowElements.push(Q)}for(;this._rowElements.length>E;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(I,E){this._refreshRowElements(I,E),this._updateDimensions(),this.handleSelectionChanged(this._selectionRenderModel.selectionStart,this._selectionRenderModel.selectionEnd,this._selectionRenderModel.columnSelectMode)}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(A),this.renderRows(0,this._bufferService.rows-1)}handleFocus(){this._rowContainer.classList.add(A),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(I,E,X){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(I,E,X),this.renderRows(0,this._bufferService.rows-1),!I||!E)return;this._selectionRenderModel.update(this._terminal,I,E,X);const Q=this._selectionRenderModel.viewportStartRow,J=this._selectionRenderModel.viewportEndRow,ie=this._selectionRenderModel.viewportCappedStartRow,T=this._selectionRenderModel.viewportCappedEndRow;if(ie>=this._bufferService.rows||T<0)return;const U=this._document.createDocumentFragment();if(X){const M=I[0]>E[0];U.appendChild(this._createSelectionElement(ie,M?E[0]:I[0],M?I[0]:E[0],T-ie+1))}else{const M=Q===ie?I[0]:0,$=ie===J?E[0]:this._bufferService.cols;U.appendChild(this._createSelectionElement(ie,M,$));const ne=T-ie-1;if(U.appendChild(this._createSelectionElement(ie+1,0,this._bufferService.cols,ne)),ie!==T){const le=J===T?E[0]:this._bufferService.cols;U.appendChild(this._createSelectionElement(T,0,le))}}this._selectionContainer.appendChild(U)}_createSelectionElement(I,E,X,Q=1){const J=this._document.createElement("div"),ie=E*this.dimensions.css.cell.width;let T=this.dimensions.css.cell.width*(X-E);return ie+T>this.dimensions.css.canvas.width&&(T=this.dimensions.css.canvas.width-ie),J.style.height=Q*this.dimensions.css.cell.height+"px",J.style.top=I*this.dimensions.css.cell.height+"px",J.style.left=`${ie}px`,J.style.width=`${T}px`,J}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(const I of this._rowElements)I.replaceChildren()}renderRows(I,E){const X=this._bufferService.buffer,Q=X.ybase+X.y,J=Math.min(X.x,this._bufferService.cols-1),ie=this._optionsService.rawOptions.cursorBlink,T=this._optionsService.rawOptions.cursorStyle,U=this._optionsService.rawOptions.cursorInactiveStyle;for(let M=I;M<=E;M++){const $=M+X.ydisp,ne=this._rowElements[M],le=X.lines.get($);if(!ne||!le)break;ne.replaceChildren(...this._rowFactory.createRow(le,$,$===Q,T,U,J,ie,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${S}${this._terminalClass}`}_handleLinkHover(I){this._setCellUnderline(I.x1,I.x2,I.y1,I.y2,I.cols,!0)}_handleLinkLeave(I){this._setCellUnderline(I.x1,I.x2,I.y1,I.y2,I.cols,!1)}_setCellUnderline(I,E,X,Q,J,ie){X<0&&(I=0),Q<0&&(E=0);const T=this._bufferService.rows-1;X=Math.max(Math.min(X,T),0),Q=Math.max(Math.min(Q,T),0),J=Math.min(J,this._bufferService.cols);const U=this._bufferService.buffer,M=U.ybase+U.y,$=Math.min(U.x,J-1),ne=this._optionsService.rawOptions.cursorBlink,le=this._optionsService.rawOptions.cursorStyle,ce=this._optionsService.rawOptions.cursorInactiveStyle;for(let pe=X;pe<=Q;++pe){const j=pe+U.ydisp,O=this._rowElements[pe],ee=U.lines.get(j);if(!O||!ee)break;O.replaceChildren(...this._rowFactory.createRow(ee,j,j===M,le,ce,$,ne,this.dimensions.css.cell.width,this._widthCache,ie?pe===X?I:0:-1,ie?(pe===Q?E:J)-1:-1))}}};r.DomRenderer=L=p([_(7,v.IInstantiationService),_(8,c.ICharSizeService),_(9,v.IOptionsService),_(10,v.IBufferService),_(11,c.ICoreBrowserService),_(12,c.IThemeService)],L)},3787:function(f,r,n){var p=this&&this.__decorate||function(x,k,C,A){var N,G=arguments.length,L=G<3?k:A===null?A=Object.getOwnPropertyDescriptor(k,C):A;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(x,k,C,A);else for(var I=x.length-1;I>=0;I--)(N=x[I])&&(L=(G<3?N(L):G>3?N(k,C,L):N(k,C))||L);return G>3&&L&&Object.defineProperty(k,C,L),L},_=this&&this.__param||function(x,k){return function(C,A){k(C,A,x)}};Object.defineProperty(r,"__esModule",{value:!0}),r.DomRendererRowFactory=void 0;const d=n(2223),g=n(643),b=n(511),w=n(2585),m=n(8055),c=n(4725),h=n(4269),o=n(6171),l=n(3734);let v=r.DomRendererRowFactory=class{constructor(x,k,C,A,N,G,L){this._document=x,this._characterJoinerService=k,this._optionsService=C,this._coreBrowserService=A,this._coreService=N,this._decorationService=G,this._themeService=L,this._workCell=new b.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(x,k,C){this._selectionStart=x,this._selectionEnd=k,this._columnSelectMode=C}createRow(x,k,C,A,N,G,L,I,E,X,Q){const J=[],ie=this._characterJoinerService.getJoinedCharacters(k),T=this._themeService.colors;let U,M=x.getNoBgTrimmedLength();C&&M<G+1&&(M=G+1);let $=0,ne="",le=0,ce=0,pe=0,j=!1,O=0,ee=!1,te=0;const F=[],q=X!==-1&&Q!==-1;for(let Y=0;Y<M;Y++){x.loadCell(Y,this._workCell);let y=this._workCell.getWidth();if(y===0)continue;let P=!1,K=Y,D=this._workCell;if(ie.length>0&&Y===ie[0][0]){P=!0;const Se=ie.shift();D=new h.JoinedCellData(this._workCell,x.translateToString(!0,Se[0],Se[1]),Se[1]-Se[0]),K=Se[1]-1,y=D.getWidth()}const B=this._isCellInSelection(Y,k),V=C&&Y===G,Z=q&&Y>=X&&Y<=Q;let z=!1;this._decorationService.forEachDecorationAtCell(Y,k,void 0,(Se=>{z=!0}));let H=D.getChars()||g.WHITESPACE_CELL_CHAR;if(H===" "&&(D.isUnderline()||D.isOverline())&&(H=""),te=y*I-E.get(H,D.isBold(),D.isItalic()),U){if($&&(B&&ee||!B&&!ee&&D.bg===le)&&(B&&ee&&T.selectionForeground||D.fg===ce)&&D.extended.ext===pe&&Z===j&&te===O&&!V&&!P&&!z){D.isInvisible()?ne+=g.WHITESPACE_CELL_CHAR:ne+=H,$++;continue}$&&(U.textContent=ne),U=this._document.createElement("span"),$=0,ne=""}else U=this._document.createElement("span");if(le=D.bg,ce=D.fg,pe=D.extended.ext,j=Z,O=te,ee=B,P&&G>=Y&&G<=K&&(G=Y),!this._coreService.isCursorHidden&&V&&this._coreService.isCursorInitialized){if(F.push("xterm-cursor"),this._coreBrowserService.isFocused)L&&F.push("xterm-cursor-blink"),F.push(A==="bar"?"xterm-cursor-bar":A==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(N)switch(N){case"outline":F.push("xterm-cursor-outline");break;case"block":F.push("xterm-cursor-block");break;case"bar":F.push("xterm-cursor-bar");break;case"underline":F.push("xterm-cursor-underline")}}if(D.isBold()&&F.push("xterm-bold"),D.isItalic()&&F.push("xterm-italic"),D.isDim()&&F.push("xterm-dim"),ne=D.isInvisible()?g.WHITESPACE_CELL_CHAR:D.getChars()||g.WHITESPACE_CELL_CHAR,D.isUnderline()&&(F.push(`xterm-underline-${D.extended.underlineStyle}`),ne===" "&&(ne=""),!D.isUnderlineColorDefault()))if(D.isUnderlineColorRGB())U.style.textDecorationColor=`rgb(${l.AttributeData.toColorRGB(D.getUnderlineColor()).join(",")})`;else{let Se=D.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&D.isBold()&&Se<8&&(Se+=8),U.style.textDecorationColor=T.ansi[Se].css}D.isOverline()&&(F.push("xterm-overline"),ne===" "&&(ne="")),D.isStrikethrough()&&F.push("xterm-strikethrough"),Z&&(U.style.textDecoration="underline");let W=D.getFgColor(),se=D.getFgColorMode(),re=D.getBgColor(),ae=D.getBgColorMode();const ge=!!D.isInverse();if(ge){const Se=W;W=re,re=Se;const Ee=se;se=ae,ae=Ee}let _e,xe,De,Ae=!1;switch(this._decorationService.forEachDecorationAtCell(Y,k,void 0,(Se=>{Se.options.layer!=="top"&&Ae||(Se.backgroundColorRGB&&(ae=50331648,re=Se.backgroundColorRGB.rgba>>8&16777215,_e=Se.backgroundColorRGB),Se.foregroundColorRGB&&(se=50331648,W=Se.foregroundColorRGB.rgba>>8&16777215,xe=Se.foregroundColorRGB),Ae=Se.options.layer==="top")})),!Ae&&B&&(_e=this._coreBrowserService.isFocused?T.selectionBackgroundOpaque:T.selectionInactiveBackgroundOpaque,re=_e.rgba>>8&16777215,ae=50331648,Ae=!0,T.selectionForeground&&(se=50331648,W=T.selectionForeground.rgba>>8&16777215,xe=T.selectionForeground)),Ae&&F.push("xterm-decoration-top"),ae){case 16777216:case 33554432:De=T.ansi[re],F.push(`xterm-bg-${re}`);break;case 50331648:De=m.channels.toColor(re>>16,re>>8&255,255&re),this._addStyle(U,`background-color:#${S((re>>>0).toString(16),"0",6)}`);break;default:ge?(De=T.foreground,F.push(`xterm-bg-${d.INVERTED_DEFAULT_COLOR}`)):De=T.background}switch(_e||D.isDim()&&(_e=m.color.multiplyOpacity(De,.5)),se){case 16777216:case 33554432:D.isBold()&&W<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(W+=8),this._applyMinimumContrast(U,De,T.ansi[W],D,_e,void 0)||F.push(`xterm-fg-${W}`);break;case 50331648:const Se=m.channels.toColor(W>>16&255,W>>8&255,255&W);this._applyMinimumContrast(U,De,Se,D,_e,xe)||this._addStyle(U,`color:#${S(W.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(U,De,T.foreground,D,_e,xe)||ge&&F.push(`xterm-fg-${d.INVERTED_DEFAULT_COLOR}`)}F.length&&(U.className=F.join(" "),F.length=0),V||P||z?U.textContent=ne:$++,te!==this.defaultSpacing&&(U.style.letterSpacing=`${te}px`),J.push(U),Y=K}return U&&$&&(U.textContent=ne),J}_applyMinimumContrast(x,k,C,A,N,G){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,o.treatGlyphAsBackgroundColor)(A.getCode()))return!1;const L=this._getContrastCache(A);let I;if(N||G||(I=L.getColor(k.rgba,C.rgba)),I===void 0){const E=this._optionsService.rawOptions.minimumContrastRatio/(A.isDim()?2:1);I=m.color.ensureContrastRatio(N||k,G||C,E),L.setColor((N||k).rgba,(G||C).rgba,I??null)}return!!I&&(this._addStyle(x,`color:${I.css}`),!0)}_getContrastCache(x){return x.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(x,k){x.setAttribute("style",`${x.getAttribute("style")||""}${k};`)}_isCellInSelection(x,k){const C=this._selectionStart,A=this._selectionEnd;return!(!C||!A)&&(this._columnSelectMode?C[0]<=A[0]?x>=C[0]&&k>=C[1]&&x<A[0]&&k<=A[1]:x<C[0]&&k>=C[1]&&x>=A[0]&&k<=A[1]:k>C[1]&&k<A[1]||C[1]===A[1]&&k===C[1]&&x>=C[0]&&x<A[0]||C[1]<A[1]&&k===A[1]&&x<A[0]||C[1]<A[1]&&k===C[1]&&x>=C[0])}};function S(x,k,C){for(;x.length<C;)x=k+x;return x}r.DomRendererRowFactory=v=p([_(1,c.ICharacterJoinerService),_(2,w.IOptionsService),_(3,c.ICoreBrowserService),_(4,w.ICoreService),_(5,w.IDecorationService),_(6,c.IThemeService)],v)},2550:(f,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.WidthCache=void 0,r.WidthCache=class{constructor(n,p){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=n.createElement("div"),this._container.classList.add("xterm-width-cache-measure-container"),this._container.setAttribute("aria-hidden","true"),this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";const _=n.createElement("span");_.classList.add("xterm-char-measure-element");const d=n.createElement("span");d.classList.add("xterm-char-measure-element"),d.style.fontWeight="bold";const g=n.createElement("span");g.classList.add("xterm-char-measure-element"),g.style.fontStyle="italic";const b=n.createElement("span");b.classList.add("xterm-char-measure-element"),b.style.fontWeight="bold",b.style.fontStyle="italic",this._measureElements=[_,d,g,b],this._container.appendChild(_),this._container.appendChild(d),this._container.appendChild(g),this._container.appendChild(b),p.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(n,p,_,d){n===this._font&&p===this._fontSize&&_===this._weight&&d===this._weightBold||(this._font=n,this._fontSize=p,this._weight=_,this._weightBold=d,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${_}`,this._measureElements[1].style.fontWeight=`${d}`,this._measureElements[2].style.fontWeight=`${_}`,this._measureElements[3].style.fontWeight=`${d}`,this.clear())}get(n,p,_){let d=0;if(!p&&!_&&n.length===1&&(d=n.charCodeAt(0))<256){if(this._flat[d]!==-9999)return this._flat[d];const w=this._measure(n,0);return w>0&&(this._flat[d]=w),w}let g=n;p&&(g+="B"),_&&(g+="I");let b=this._holey.get(g);if(b===void 0){let w=0;p&&(w|=1),_&&(w|=2),b=this._measure(n,w),b>0&&this._holey.set(g,b)}return b}_measure(n,p){const _=this._measureElements[p];return _.textContent=n.repeat(32),_.offsetWidth/32}}},2223:(f,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.TEXT_BASELINE=r.DIM_OPACITY=r.INVERTED_DEFAULT_COLOR=void 0;const p=n(6114);r.INVERTED_DEFAULT_COLOR=257,r.DIM_OPACITY=.5,r.TEXT_BASELINE=p.isFirefox||p.isLegacyEdge?"bottom":"ideographic"},6171:(f,r)=>{function n(_){return 57508<=_&&_<=57558}function p(_){return _>=128512&&_<=128591||_>=127744&&_<=128511||_>=128640&&_<=128767||_>=9728&&_<=9983||_>=9984&&_<=10175||_>=65024&&_<=65039||_>=129280&&_<=129535||_>=127462&&_<=127487}Object.defineProperty(r,"__esModule",{value:!0}),r.computeNextVariantOffset=r.createRenderDimensions=r.treatGlyphAsBackgroundColor=r.allowRescaling=r.isEmoji=r.isRestrictedPowerlineGlyph=r.isPowerlineGlyph=r.throwIfFalsy=void 0,r.throwIfFalsy=function(_){if(!_)throw new Error("value must not be falsy");return _},r.isPowerlineGlyph=n,r.isRestrictedPowerlineGlyph=function(_){return 57520<=_&&_<=57527},r.isEmoji=p,r.allowRescaling=function(_,d,g,b){return d===1&&g>Math.ceil(1.5*b)&&_!==void 0&&_>255&&!p(_)&&!n(_)&&!(function(w){return 57344<=w&&w<=63743})(_)},r.treatGlyphAsBackgroundColor=function(_){return n(_)||(function(d){return 9472<=d&&d<=9631})(_)},r.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}},r.computeNextVariantOffset=function(_,d,g=0){return(_-(2*Math.round(d)-g))%(2*Math.round(d))}},6052:(f,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.createSelectionRenderModel=void 0;class n{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(_,d,g,b=!1){if(this.selectionStart=d,this.selectionEnd=g,!d||!g||d[0]===g[0]&&d[1]===g[1])return void this.clear();const w=_.buffers.active.ydisp,m=d[1]-w,c=g[1]-w,h=Math.max(m,0),o=Math.min(c,_.rows-1);h>=_.rows||o<0?this.clear():(this.hasSelection=!0,this.columnSelectMode=b,this.viewportStartRow=m,this.viewportEndRow=c,this.viewportCappedStartRow=h,this.viewportCappedEndRow=o,this.startCol=d[0],this.endCol=g[0])}isCellSelected(_,d,g){return!!this.hasSelection&&(g-=_.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?d>=this.startCol&&g>=this.viewportCappedStartRow&&d<this.endCol&&g<=this.viewportCappedEndRow:d<this.startCol&&g>=this.viewportCappedStartRow&&d>=this.endCol&&g<=this.viewportCappedEndRow:g>this.viewportStartRow&&g<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&g===this.viewportStartRow&&d>=this.startCol&&d<this.endCol||this.viewportStartRow<this.viewportEndRow&&g===this.viewportEndRow&&d<this.endCol||this.viewportStartRow<this.viewportEndRow&&g===this.viewportStartRow&&d>=this.startCol)}}r.createSelectionRenderModel=function(){return new n}},456:(f,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.SelectionModel=void 0,r.SelectionModel=class{constructor(n){this._bufferService=n,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){const n=this.selectionStart[0]+this.selectionStartLength;return n>this._bufferService.cols?n%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(n/this._bufferService.cols)-1]:[n%this._bufferService.cols,this.selectionStart[1]+Math.floor(n/this._bufferService.cols)]:[n,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){const n=this.selectionStart[0]+this.selectionStartLength;return n>this._bufferService.cols?[n%this._bufferService.cols,this.selectionStart[1]+Math.floor(n/this._bufferService.cols)]:[Math.max(n,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){const n=this.selectionStart,p=this.selectionEnd;return!(!n||!p)&&(n[1]>p[1]||n[1]===p[1]&&n[0]>p[0])}handleTrim(n){return this.selectionStart&&(this.selectionStart[1]-=n),this.selectionEnd&&(this.selectionEnd[1]-=n),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(f,r,n){var p=this&&this.__decorate||function(o,l,v,S){var x,k=arguments.length,C=k<3?l:S===null?S=Object.getOwnPropertyDescriptor(l,v):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(o,l,v,S);else for(var A=o.length-1;A>=0;A--)(x=o[A])&&(C=(k<3?x(C):k>3?x(l,v,C):x(l,v))||C);return k>3&&C&&Object.defineProperty(l,v,C),C},_=this&&this.__param||function(o,l){return function(v,S){l(v,S,o)}};Object.defineProperty(r,"__esModule",{value:!0}),r.CharSizeService=void 0;const d=n(2585),g=n(8460),b=n(844);let w=r.CharSizeService=class extends b.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(o,l,v){super(),this._optionsService=v,this.width=0,this.height=0,this._onCharSizeChange=this.register(new g.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event;try{this._measureStrategy=this.register(new h(this._optionsService))}catch{this._measureStrategy=this.register(new c(o,l,this._optionsService))}this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],(()=>this.measure())))}measure(){const o=this._measureStrategy.measure();o.width===this.width&&o.height===this.height||(this.width=o.width,this.height=o.height,this._onCharSizeChange.fire())}};r.CharSizeService=w=p([_(2,d.IOptionsService)],w);class m extends b.Disposable{constructor(){super(...arguments),this._result={width:0,height:0}}_validateAndSet(l,v){l!==void 0&&l>0&&v!==void 0&&v>0&&(this._result.width=l,this._result.height=v)}}class c extends m{constructor(l,v,S){super(),this._document=l,this._parentElement=v,this._optionsService=S,this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){return this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`,this._validateAndSet(Number(this._measureElement.offsetWidth)/32,Number(this._measureElement.offsetHeight)),this._result}}class h extends m{constructor(l){super(),this._optionsService=l,this._canvas=new OffscreenCanvas(100,100),this._ctx=this._canvas.getContext("2d");const v=this._ctx.measureText("W");if(!("width"in v&&"fontBoundingBoxAscent"in v&&"fontBoundingBoxDescent"in v))throw new Error("Required font metrics not supported")}measure(){this._ctx.font=`${this._optionsService.rawOptions.fontSize}px ${this._optionsService.rawOptions.fontFamily}`;const l=this._ctx.measureText("W");return this._validateAndSet(l.width,l.fontBoundingBoxAscent+l.fontBoundingBoxDescent),this._result}}},4269:function(f,r,n){var p=this&&this.__decorate||function(h,o,l,v){var S,x=arguments.length,k=x<3?o:v===null?v=Object.getOwnPropertyDescriptor(o,l):v;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(h,o,l,v);else for(var C=h.length-1;C>=0;C--)(S=h[C])&&(k=(x<3?S(k):x>3?S(o,l,k):S(o,l))||k);return x>3&&k&&Object.defineProperty(o,l,k),k},_=this&&this.__param||function(h,o){return function(l,v){o(l,v,h)}};Object.defineProperty(r,"__esModule",{value:!0}),r.CharacterJoinerService=r.JoinedCellData=void 0;const d=n(3734),g=n(643),b=n(511),w=n(2585);class m extends d.AttributeData{constructor(o,l,v){super(),this.content=0,this.combinedData="",this.fg=o.fg,this.bg=o.bg,this.combinedData=l,this._width=v}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(o){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}r.JoinedCellData=m;let c=r.CharacterJoinerService=class Bc{constructor(o){this._bufferService=o,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new b.CellData}register(o){const l={id:this._nextCharacterJoinerId++,handler:o};return this._characterJoiners.push(l),l.id}deregister(o){for(let l=0;l<this._characterJoiners.length;l++)if(this._characterJoiners[l].id===o)return this._characterJoiners.splice(l,1),!0;return!1}getJoinedCharacters(o){if(this._characterJoiners.length===0)return[];const l=this._bufferService.buffer.lines.get(o);if(!l||l.length===0)return[];const v=[],S=l.translateToString(!0);let x=0,k=0,C=0,A=l.getFg(0),N=l.getBg(0);for(let G=0;G<l.getTrimmedLength();G++)if(l.loadCell(G,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==A||this._workCell.bg!==N){if(G-x>1){const L=this._getJoinedRanges(S,C,k,l,x);for(let I=0;I<L.length;I++)v.push(L[I])}x=G,C=k,A=this._workCell.fg,N=this._workCell.bg}k+=this._workCell.getChars().length||g.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-x>1){const G=this._getJoinedRanges(S,C,k,l,x);for(let L=0;L<G.length;L++)v.push(G[L])}return v}_getJoinedRanges(o,l,v,S,x){const k=o.substring(l,v);let C=[];try{C=this._characterJoiners[0].handler(k)}catch(A){console.error(A)}for(let A=1;A<this._characterJoiners.length;A++)try{const N=this._characterJoiners[A].handler(k);for(let G=0;G<N.length;G++)Bc._mergeRanges(C,N[G])}catch(N){console.error(N)}return this._stringRangesToCellRanges(C,S,x),C}_stringRangesToCellRanges(o,l,v){let S=0,x=!1,k=0,C=o[S];if(C){for(let A=v;A<this._bufferService.cols;A++){const N=l.getWidth(A),G=l.getString(A).length||g.WHITESPACE_CELL_CHAR.length;if(N!==0){if(!x&&C[0]<=k&&(C[0]=A,x=!0),C[1]<=k){if(C[1]=A,C=o[++S],!C)break;C[0]<=k?(C[0]=A,x=!0):x=!1}k+=G}}C&&(C[1]=this._bufferService.cols)}}static _mergeRanges(o,l){let v=!1;for(let S=0;S<o.length;S++){const x=o[S];if(v){if(l[1]<=x[0])return o[S-1][1]=l[1],o;if(l[1]<=x[1])return o[S-1][1]=Math.max(l[1],x[1]),o.splice(S,1),o;o.splice(S,1),S--}else{if(l[1]<=x[0])return o.splice(S,0,l),o;if(l[1]<=x[1])return x[0]=Math.min(l[0],x[0]),o;l[0]<x[1]&&(x[0]=Math.min(l[0],x[0]),v=!0)}}return v?o[o.length-1][1]=l[1]:o.push(l),o}};r.CharacterJoinerService=c=p([_(0,w.IBufferService)],c)},5114:(f,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.CoreBrowserService=void 0;const p=n(844),_=n(8460),d=n(3656);class g extends p.Disposable{constructor(m,c,h){super(),this._textarea=m,this._window=c,this.mainDocument=h,this._isFocused=!1,this._cachedIsFocused=void 0,this._screenDprMonitor=new b(this._window),this._onDprChange=this.register(new _.EventEmitter),this.onDprChange=this._onDprChange.event,this._onWindowChange=this.register(new _.EventEmitter),this.onWindowChange=this._onWindowChange.event,this.register(this.onWindowChange((o=>this._screenDprMonitor.setWindow(o)))),this.register((0,_.forwardEvent)(this._screenDprMonitor.onDprChange,this._onDprChange)),this._textarea.addEventListener("focus",(()=>this._isFocused=!0)),this._textarea.addEventListener("blur",(()=>this._isFocused=!1))}get window(){return this._window}set window(m){this._window!==m&&(this._window=m,this._onWindowChange.fire(this._window))}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask((()=>this._cachedIsFocused=void 0))),this._cachedIsFocused}}r.CoreBrowserService=g;class b extends p.Disposable{constructor(m){super(),this._parentWindow=m,this._windowResizeListener=this.register(new p.MutableDisposable),this._onDprChange=this.register(new _.EventEmitter),this.onDprChange=this._onDprChange.event,this._outerListener=()=>this._setDprAndFireIfDiffers(),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._updateDpr(),this._setWindowResizeListener(),this.register((0,p.toDisposable)((()=>this.clearListener())))}setWindow(m){this._parentWindow=m,this._setWindowResizeListener(),this._setDprAndFireIfDiffers()}_setWindowResizeListener(){this._windowResizeListener.value=(0,d.addDisposableDomListener)(this._parentWindow,"resize",(()=>this._setDprAndFireIfDiffers()))}_setDprAndFireIfDiffers(){this._parentWindow.devicePixelRatio!==this._currentDevicePixelRatio&&this._onDprChange.fire(this._parentWindow.devicePixelRatio),this._updateDpr()}_updateDpr(){var m;this._outerListener&&((m=this._resolutionMediaMatchList)==null||m.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._outerListener=void 0)}}},779:(f,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.LinkProviderService=void 0;const p=n(844);class _ extends p.Disposable{constructor(){super(),this.linkProviders=[],this.register((0,p.toDisposable)((()=>this.linkProviders.length=0)))}registerLinkProvider(g){return this.linkProviders.push(g),{dispose:()=>{const b=this.linkProviders.indexOf(g);b!==-1&&this.linkProviders.splice(b,1)}}}}r.LinkProviderService=_},8934:function(f,r,n){var p=this&&this.__decorate||function(w,m,c,h){var o,l=arguments.length,v=l<3?m:h===null?h=Object.getOwnPropertyDescriptor(m,c):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")v=Reflect.decorate(w,m,c,h);else for(var S=w.length-1;S>=0;S--)(o=w[S])&&(v=(l<3?o(v):l>3?o(m,c,v):o(m,c))||v);return l>3&&v&&Object.defineProperty(m,c,v),v},_=this&&this.__param||function(w,m){return function(c,h){m(c,h,w)}};Object.defineProperty(r,"__esModule",{value:!0}),r.MouseService=void 0;const d=n(4725),g=n(9806);let b=r.MouseService=class{constructor(w,m){this._renderService=w,this._charSizeService=m}getCoords(w,m,c,h,o){return(0,g.getCoords)(window,w,m,c,h,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,o)}getMouseReportCoords(w,m){const c=(0,g.getCoordsRelativeToElement)(window,w,m);if(this._charSizeService.hasValidSize)return c[0]=Math.min(Math.max(c[0],0),this._renderService.dimensions.css.canvas.width-1),c[1]=Math.min(Math.max(c[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(c[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(c[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(c[0]),y:Math.floor(c[1])}}};r.MouseService=b=p([_(0,d.IRenderService),_(1,d.ICharSizeService)],b)},3230:function(f,r,n){var p=this&&this.__decorate||function(o,l,v,S){var x,k=arguments.length,C=k<3?l:S===null?S=Object.getOwnPropertyDescriptor(l,v):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(o,l,v,S);else for(var A=o.length-1;A>=0;A--)(x=o[A])&&(C=(k<3?x(C):k>3?x(l,v,C):x(l,v))||C);return k>3&&C&&Object.defineProperty(l,v,C),C},_=this&&this.__param||function(o,l){return function(v,S){l(v,S,o)}};Object.defineProperty(r,"__esModule",{value:!0}),r.RenderService=void 0;const d=n(6193),g=n(4725),b=n(8460),w=n(844),m=n(7226),c=n(2585);let h=r.RenderService=class extends w.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(o,l,v,S,x,k,C,A){super(),this._rowCount=o,this._charSizeService=S,this._renderer=this.register(new w.MutableDisposable),this._pausedResizeTask=new m.DebouncedIdleTask,this._observerDisposable=this.register(new w.MutableDisposable),this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new b.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new b.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new b.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new b.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new d.RenderDebouncer(((N,G)=>this._renderRows(N,G)),C),this.register(this._renderDebouncer),this.register(C.onDprChange((()=>this.handleDevicePixelRatioChange()))),this.register(k.onResize((()=>this._fullRefresh()))),this.register(k.buffers.onBufferActivate((()=>{var N;return(N=this._renderer.value)==null?void 0:N.clear()}))),this.register(v.onOptionChange((()=>this._handleOptionsChanged()))),this.register(this._charSizeService.onCharSizeChange((()=>this.handleCharSizeChanged()))),this.register(x.onDecorationRegistered((()=>this._fullRefresh()))),this.register(x.onDecorationRemoved((()=>this._fullRefresh()))),this.register(v.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio","rescaleOverlappingGlyphs"],(()=>{this.clear(),this.handleResize(k.cols,k.rows),this._fullRefresh()}))),this.register(v.onMultipleOptionChange(["cursorBlink","cursorStyle"],(()=>this.refreshRows(k.buffer.y,k.buffer.y,!0)))),this.register(A.onChangeColors((()=>this._fullRefresh()))),this._registerIntersectionObserver(C.window,l),this.register(C.onWindowChange((N=>this._registerIntersectionObserver(N,l))))}_registerIntersectionObserver(o,l){if("IntersectionObserver"in o){const v=new o.IntersectionObserver((S=>this._handleIntersectionChange(S[S.length-1])),{threshold:0});v.observe(l),this._observerDisposable.value=(0,w.toDisposable)((()=>v.disconnect()))}}_handleIntersectionChange(o){this._isPaused=o.isIntersecting===void 0?o.intersectionRatio===0:!o.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(o,l,v=!1){this._isPaused?this._needsFullRefresh=!0:(v||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(o,l,this._rowCount))}_renderRows(o,l){this._renderer.value&&(o=Math.min(o,this._rowCount-1),l=Math.min(l,this._rowCount-1),this._renderer.value.renderRows(o,l),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:o,end:l}),this._onRender.fire({start:o,end:l}),this._isNextRenderRedrawOnly=!0)}resize(o,l){this._rowCount=l,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(o){this._renderer.value=o,this._renderer.value&&(this._renderer.value.onRequestRedraw((l=>this.refreshRows(l.start,l.end,!0))),this._needsSelectionRefresh=!0,this._fullRefresh())}addRefreshCallback(o){return this._renderDebouncer.addRefreshCallback(o)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){var o,l;this._renderer.value&&((l=(o=this._renderer.value).clearTextureAtlas)==null||l.call(o),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(o,l){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set((()=>{var v;return(v=this._renderer.value)==null?void 0:v.handleResize(o,l)})):this._renderer.value.handleResize(o,l),this._fullRefresh())}handleCharSizeChanged(){var o;(o=this._renderer.value)==null||o.handleCharSizeChanged()}handleBlur(){var o;(o=this._renderer.value)==null||o.handleBlur()}handleFocus(){var o;(o=this._renderer.value)==null||o.handleFocus()}handleSelectionChanged(o,l,v){var S;this._selectionState.start=o,this._selectionState.end=l,this._selectionState.columnSelectMode=v,(S=this._renderer.value)==null||S.handleSelectionChanged(o,l,v)}handleCursorMove(){var o;(o=this._renderer.value)==null||o.handleCursorMove()}clear(){var o;(o=this._renderer.value)==null||o.clear()}};r.RenderService=h=p([_(2,c.IOptionsService),_(3,g.ICharSizeService),_(4,c.IDecorationService),_(5,c.IBufferService),_(6,g.ICoreBrowserService),_(7,g.IThemeService)],h)},9312:function(f,r,n){var p=this&&this.__decorate||function(C,A,N,G){var L,I=arguments.length,E=I<3?A:G===null?G=Object.getOwnPropertyDescriptor(A,N):G;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(C,A,N,G);else for(var X=C.length-1;X>=0;X--)(L=C[X])&&(E=(I<3?L(E):I>3?L(A,N,E):L(A,N))||E);return I>3&&E&&Object.defineProperty(A,N,E),E},_=this&&this.__param||function(C,A){return function(N,G){A(N,G,C)}};Object.defineProperty(r,"__esModule",{value:!0}),r.SelectionService=void 0;const d=n(9806),g=n(9504),b=n(456),w=n(4725),m=n(8460),c=n(844),h=n(6114),o=n(4841),l=n(511),v=n(2585),S="",x=new RegExp(S,"g");let k=r.SelectionService=class extends c.Disposable{constructor(C,A,N,G,L,I,E,X,Q){super(),this._element=C,this._screenElement=A,this._linkifier=N,this._bufferService=G,this._coreService=L,this._mouseService=I,this._optionsService=E,this._renderService=X,this._coreBrowserService=Q,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new l.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new m.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new m.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new m.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new m.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=J=>this._handleMouseMove(J),this._mouseUpListener=J=>this._handleMouseUp(J),this._coreService.onUserInput((()=>{this.hasSelection&&this.clearSelection()})),this._trimListener=this._bufferService.buffer.lines.onTrim((J=>this._handleTrim(J))),this.register(this._bufferService.buffers.onBufferActivate((J=>this._handleBufferActivate(J)))),this.enable(),this._model=new b.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,c.toDisposable)((()=>{this._removeMouseDownListeners()})))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){const C=this._model.finalSelectionStart,A=this._model.finalSelectionEnd;return!(!C||!A||C[0]===A[0]&&C[1]===A[1])}get selectionText(){const C=this._model.finalSelectionStart,A=this._model.finalSelectionEnd;if(!C||!A)return"";const N=this._bufferService.buffer,G=[];if(this._activeSelectionMode===3){if(C[0]===A[0])return"";const L=C[0]<A[0]?C[0]:A[0],I=C[0]<A[0]?A[0]:C[0];for(let E=C[1];E<=A[1];E++){const X=N.translateBufferLineToString(E,!0,L,I);G.push(X)}}else{const L=C[1]===A[1]?A[0]:void 0;G.push(N.translateBufferLineToString(C[1],!0,C[0],L));for(let I=C[1]+1;I<=A[1]-1;I++){const E=N.lines.get(I),X=N.translateBufferLineToString(I,!0);E!=null&&E.isWrapped?G[G.length-1]+=X:G.push(X)}if(C[1]!==A[1]){const I=N.lines.get(A[1]),E=N.translateBufferLineToString(A[1],!0,0,A[0]);I&&I.isWrapped?G[G.length-1]+=E:G.push(E)}}return G.map((L=>L.replace(x," "))).join(h.isWindows?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(C){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame((()=>this._refresh()))),h.isLinux&&C&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(C){const A=this._getMouseBufferCoords(C),N=this._model.finalSelectionStart,G=this._model.finalSelectionEnd;return!!(N&&G&&A)&&this._areCoordsInSelection(A,N,G)}isCellInSelection(C,A){const N=this._model.finalSelectionStart,G=this._model.finalSelectionEnd;return!(!N||!G)&&this._areCoordsInSelection([C,A],N,G)}_areCoordsInSelection(C,A,N){return C[1]>A[1]&&C[1]<N[1]||A[1]===N[1]&&C[1]===A[1]&&C[0]>=A[0]&&C[0]<N[0]||A[1]<N[1]&&C[1]===N[1]&&C[0]<N[0]||A[1]<N[1]&&C[1]===A[1]&&C[0]>=A[0]}_selectWordAtCursor(C,A){var L,I;const N=(I=(L=this._linkifier.currentLink)==null?void 0:L.link)==null?void 0:I.range;if(N)return this._model.selectionStart=[N.start.x-1,N.start.y-1],this._model.selectionStartLength=(0,o.getRangeLength)(N,this._bufferService.cols),this._model.selectionEnd=void 0,!0;const G=this._getMouseBufferCoords(C);return!!G&&(this._selectWordAt(G,A),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(C,A){this._model.clearSelection(),C=Math.max(C,0),A=Math.min(A,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,C],this._model.selectionEnd=[this._bufferService.cols,A],this.refresh(),this._onSelectionChange.fire()}_handleTrim(C){this._model.handleTrim(C)&&this.refresh()}_getMouseBufferCoords(C){const A=this._mouseService.getCoords(C,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(A)return A[0]--,A[1]--,A[1]+=this._bufferService.buffer.ydisp,A}_getMouseEventScrollAmount(C){let A=(0,d.getCoordsRelativeToElement)(this._coreBrowserService.window,C,this._screenElement)[1];const N=this._renderService.dimensions.css.canvas.height;return A>=0&&A<=N?0:(A>N&&(A-=N),A=Math.min(Math.max(A,-50),50),A/=50,A/Math.abs(A)+Math.round(14*A))}shouldForceSelection(C){return h.isMac?C.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:C.shiftKey}handleMouseDown(C){if(this._mouseDownTimeStamp=C.timeStamp,(C.button!==2||!this.hasSelection)&&C.button===0){if(!this._enabled){if(!this.shouldForceSelection(C))return;C.stopPropagation()}C.preventDefault(),this._dragScrollAmount=0,this._enabled&&C.shiftKey?this._handleIncrementalClick(C):C.detail===1?this._handleSingleClick(C):C.detail===2?this._handleDoubleClick(C):C.detail===3&&this._handleTripleClick(C),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval((()=>this._dragScroll()),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(C){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(C))}_handleSingleClick(C){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(C)?3:0,this._model.selectionStart=this._getMouseBufferCoords(C),!this._model.selectionStart)return;this._model.selectionEnd=void 0;const A=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);A&&A.length!==this._model.selectionStart[0]&&A.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(C){this._selectWordAtCursor(C,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(C){const A=this._getMouseBufferCoords(C);A&&(this._activeSelectionMode=2,this._selectLineAt(A[1]))}shouldColumnSelect(C){return C.altKey&&!(h.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(C){if(C.stopImmediatePropagation(),!this._model.selectionStart)return;const A=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(C),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(C),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));const N=this._bufferService.buffer;if(this._model.selectionEnd[1]<N.lines.length){const G=N.lines.get(this._model.selectionEnd[1]);G&&G.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]<this._bufferService.cols&&this._model.selectionEnd[0]++}A&&A[0]===this._model.selectionEnd[0]&&A[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});const C=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(C.ydisp+this._bufferService.rows,C.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=C.ydisp),this.refresh()}}_handleMouseUp(C){const A=C.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&A<500&&C.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){const N=this._mouseService.getCoords(C,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(N&&N[0]!==void 0&&N[1]!==void 0){const G=(0,g.moveToCellSequence)(N[0]-1,N[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(G,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){const C=this._model.finalSelectionStart,A=this._model.finalSelectionEnd,N=!(!C||!A||C[0]===A[0]&&C[1]===A[1]);N?C&&A&&(this._oldSelectionStart&&this._oldSelectionEnd&&C[0]===this._oldSelectionStart[0]&&C[1]===this._oldSelectionStart[1]&&A[0]===this._oldSelectionEnd[0]&&A[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(C,A,N)):this._oldHasSelection&&this._fireOnSelectionChange(C,A,N)}_fireOnSelectionChange(C,A,N){this._oldSelectionStart=C,this._oldSelectionEnd=A,this._oldHasSelection=N,this._onSelectionChange.fire()}_handleBufferActivate(C){this.clearSelection(),this._trimListener.dispose(),this._trimListener=C.activeBuffer.lines.onTrim((A=>this._handleTrim(A)))}_convertViewportColToCharacterIndex(C,A){let N=A;for(let G=0;A>=G;G++){const L=C.loadCell(G,this._workCell).getChars().length;this._workCell.getWidth()===0?N--:L>1&&A!==G&&(N+=L-1)}return N}setSelection(C,A,N){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[C,A],this._model.selectionStartLength=N,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(C){this._isClickInSelection(C)||(this._selectWordAtCursor(C,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(C,A,N=!0,G=!0){if(C[0]>=this._bufferService.cols)return;const L=this._bufferService.buffer,I=L.lines.get(C[1]);if(!I)return;const E=L.translateBufferLineToString(C[1],!1);let X=this._convertViewportColToCharacterIndex(I,C[0]),Q=X;const J=C[0]-X;let ie=0,T=0,U=0,M=0;if(E.charAt(X)===" "){for(;X>0&&E.charAt(X-1)===" ";)X--;for(;Q<E.length&&E.charAt(Q+1)===" ";)Q++}else{let le=C[0],ce=C[0];I.getWidth(le)===0&&(ie++,le--),I.getWidth(ce)===2&&(T++,ce++);const pe=I.getString(ce).length;for(pe>1&&(M+=pe-1,Q+=pe-1);le>0&&X>0&&!this._isCharWordSeparator(I.loadCell(le-1,this._workCell));){I.loadCell(le-1,this._workCell);const j=this._workCell.getChars().length;this._workCell.getWidth()===0?(ie++,le--):j>1&&(U+=j-1,X-=j-1),X--,le--}for(;ce<I.length&&Q+1<E.length&&!this._isCharWordSeparator(I.loadCell(ce+1,this._workCell));){I.loadCell(ce+1,this._workCell);const j=this._workCell.getChars().length;this._workCell.getWidth()===2?(T++,ce++):j>1&&(M+=j-1,Q+=j-1),Q++,ce++}}Q++;let $=X+J-ie+U,ne=Math.min(this._bufferService.cols,Q-X+ie+T-U-M);if(A||E.slice(X,Q).trim()!==""){if(N&&$===0&&I.getCodePoint(0)!==32){const le=L.lines.get(C[1]-1);if(le&&I.isWrapped&&le.getCodePoint(this._bufferService.cols-1)!==32){const ce=this._getWordAt([this._bufferService.cols-1,C[1]-1],!1,!0,!1);if(ce){const pe=this._bufferService.cols-ce.start;$-=pe,ne+=pe}}}if(G&&$+ne===this._bufferService.cols&&I.getCodePoint(this._bufferService.cols-1)!==32){const le=L.lines.get(C[1]+1);if(le!=null&&le.isWrapped&&le.getCodePoint(0)!==32){const ce=this._getWordAt([0,C[1]+1],!1,!1,!0);ce&&(ne+=ce.length)}}return{start:$,length:ne}}}_selectWordAt(C,A){const N=this._getWordAt(C,A);if(N){for(;N.start<0;)N.start+=this._bufferService.cols,C[1]--;this._model.selectionStart=[N.start,C[1]],this._model.selectionStartLength=N.length}}_selectToWordAt(C){const A=this._getWordAt(C,!0);if(A){let N=C[1];for(;A.start<0;)A.start+=this._bufferService.cols,N--;if(!this._model.areSelectionValuesReversed())for(;A.start+A.length>this._bufferService.cols;)A.length-=this._bufferService.cols,N++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?A.start:A.start+A.length,N]}}_isCharWordSeparator(C){return C.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(C.getChars())>=0}_selectLineAt(C){const A=this._bufferService.buffer.getWrappedRangeForLine(C),N={start:{x:0,y:A.first},end:{x:this._bufferService.cols-1,y:A.last}};this._model.selectionStart=[0,A.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,o.getRangeLength)(N,this._bufferService.cols)}};r.SelectionService=k=p([_(3,v.IBufferService),_(4,v.ICoreService),_(5,w.IMouseService),_(6,v.IOptionsService),_(7,w.IRenderService),_(8,w.ICoreBrowserService)],k)},4725:(f,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.ILinkProviderService=r.IThemeService=r.ICharacterJoinerService=r.ISelectionService=r.IRenderService=r.IMouseService=r.ICoreBrowserService=r.ICharSizeService=void 0;const p=n(8343);r.ICharSizeService=(0,p.createDecorator)("CharSizeService"),r.ICoreBrowserService=(0,p.createDecorator)("CoreBrowserService"),r.IMouseService=(0,p.createDecorator)("MouseService"),r.IRenderService=(0,p.createDecorator)("RenderService"),r.ISelectionService=(0,p.createDecorator)("SelectionService"),r.ICharacterJoinerService=(0,p.createDecorator)("CharacterJoinerService"),r.IThemeService=(0,p.createDecorator)("ThemeService"),r.ILinkProviderService=(0,p.createDecorator)("LinkProviderService")},6731:function(f,r,n){var p=this&&this.__decorate||function(k,C,A,N){var G,L=arguments.length,I=L<3?C:N===null?N=Object.getOwnPropertyDescriptor(C,A):N;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")I=Reflect.decorate(k,C,A,N);else for(var E=k.length-1;E>=0;E--)(G=k[E])&&(I=(L<3?G(I):L>3?G(C,A,I):G(C,A))||I);return L>3&&I&&Object.defineProperty(C,A,I),I},_=this&&this.__param||function(k,C){return function(A,N){C(A,N,k)}};Object.defineProperty(r,"__esModule",{value:!0}),r.ThemeService=r.DEFAULT_ANSI_COLORS=void 0;const d=n(7239),g=n(8055),b=n(8460),w=n(844),m=n(2585),c=g.css.toColor("#ffffff"),h=g.css.toColor("#000000"),o=g.css.toColor("#ffffff"),l=g.css.toColor("#000000"),v={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};r.DEFAULT_ANSI_COLORS=Object.freeze((()=>{const k=[g.css.toColor("#2e3436"),g.css.toColor("#cc0000"),g.css.toColor("#4e9a06"),g.css.toColor("#c4a000"),g.css.toColor("#3465a4"),g.css.toColor("#75507b"),g.css.toColor("#06989a"),g.css.toColor("#d3d7cf"),g.css.toColor("#555753"),g.css.toColor("#ef2929"),g.css.toColor("#8ae234"),g.css.toColor("#fce94f"),g.css.toColor("#729fcf"),g.css.toColor("#ad7fa8"),g.css.toColor("#34e2e2"),g.css.toColor("#eeeeec")],C=[0,95,135,175,215,255];for(let A=0;A<216;A++){const N=C[A/36%6|0],G=C[A/6%6|0],L=C[A%6];k.push({css:g.channels.toCss(N,G,L),rgba:g.channels.toRgba(N,G,L)})}for(let A=0;A<24;A++){const N=8+10*A;k.push({css:g.channels.toCss(N,N,N),rgba:g.channels.toRgba(N,N,N)})}return k})());let S=r.ThemeService=class extends w.Disposable{get colors(){return this._colors}constructor(k){super(),this._optionsService=k,this._contrastCache=new d.ColorContrastCache,this._halfContrastCache=new d.ColorContrastCache,this._onChangeColors=this.register(new b.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:c,background:h,cursor:o,cursorAccent:l,selectionForeground:void 0,selectionBackgroundTransparent:v,selectionBackgroundOpaque:g.color.blend(h,v),selectionInactiveBackgroundTransparent:v,selectionInactiveBackgroundOpaque:g.color.blend(h,v),ansi:r.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",(()=>this._contrastCache.clear()))),this.register(this._optionsService.onSpecificOptionChange("theme",(()=>this._setTheme(this._optionsService.rawOptions.theme))))}_setTheme(k={}){const C=this._colors;if(C.foreground=x(k.foreground,c),C.background=x(k.background,h),C.cursor=x(k.cursor,o),C.cursorAccent=x(k.cursorAccent,l),C.selectionBackgroundTransparent=x(k.selectionBackground,v),C.selectionBackgroundOpaque=g.color.blend(C.background,C.selectionBackgroundTransparent),C.selectionInactiveBackgroundTransparent=x(k.selectionInactiveBackground,C.selectionBackgroundTransparent),C.selectionInactiveBackgroundOpaque=g.color.blend(C.background,C.selectionInactiveBackgroundTransparent),C.selectionForeground=k.selectionForeground?x(k.selectionForeground,g.NULL_COLOR):void 0,C.selectionForeground===g.NULL_COLOR&&(C.selectionForeground=void 0),g.color.isOpaque(C.selectionBackgroundTransparent)&&(C.selectionBackgroundTransparent=g.color.opacity(C.selectionBackgroundTransparent,.3)),g.color.isOpaque(C.selectionInactiveBackgroundTransparent)&&(C.selectionInactiveBackgroundTransparent=g.color.opacity(C.selectionInactiveBackgroundTransparent,.3)),C.ansi=r.DEFAULT_ANSI_COLORS.slice(),C.ansi[0]=x(k.black,r.DEFAULT_ANSI_COLORS[0]),C.ansi[1]=x(k.red,r.DEFAULT_ANSI_COLORS[1]),C.ansi[2]=x(k.green,r.DEFAULT_ANSI_COLORS[2]),C.ansi[3]=x(k.yellow,r.DEFAULT_ANSI_COLORS[3]),C.ansi[4]=x(k.blue,r.DEFAULT_ANSI_COLORS[4]),C.ansi[5]=x(k.magenta,r.DEFAULT_ANSI_COLORS[5]),C.ansi[6]=x(k.cyan,r.DEFAULT_ANSI_COLORS[6]),C.ansi[7]=x(k.white,r.DEFAULT_ANSI_COLORS[7]),C.ansi[8]=x(k.brightBlack,r.DEFAULT_ANSI_COLORS[8]),C.ansi[9]=x(k.brightRed,r.DEFAULT_ANSI_COLORS[9]),C.ansi[10]=x(k.brightGreen,r.DEFAULT_ANSI_COLORS[10]),C.ansi[11]=x(k.brightYellow,r.DEFAULT_ANSI_COLORS[11]),C.ansi[12]=x(k.brightBlue,r.DEFAULT_ANSI_COLORS[12]),C.ansi[13]=x(k.brightMagenta,r.DEFAULT_ANSI_COLORS[13]),C.ansi[14]=x(k.brightCyan,r.DEFAULT_ANSI_COLORS[14]),C.ansi[15]=x(k.brightWhite,r.DEFAULT_ANSI_COLORS[15]),k.extendedAnsi){const A=Math.min(C.ansi.length-16,k.extendedAnsi.length);for(let N=0;N<A;N++)C.ansi[N+16]=x(k.extendedAnsi[N],r.DEFAULT_ANSI_COLORS[N+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(k){this._restoreColor(k),this._onChangeColors.fire(this.colors)}_restoreColor(k){if(k!==void 0)switch(k){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[k]=this._restoreColors.ansi[k]}else for(let C=0;C<this._restoreColors.ansi.length;++C)this._colors.ansi[C]=this._restoreColors.ansi[C]}modifyColors(k){k(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function x(k,C){if(k!==void 0)try{return g.css.toColor(k)}catch{}return C}r.ThemeService=S=p([_(0,m.IOptionsService)],S)},6349:(f,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.CircularList=void 0;const p=n(8460),_=n(844);class d extends _.Disposable{constructor(b){super(),this._maxLength=b,this.onDeleteEmitter=this.register(new p.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new p.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new p.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(b){if(this._maxLength===b)return;const w=new Array(b);for(let m=0;m<Math.min(b,this.length);m++)w[m]=this._array[this._getCyclicIndex(m)];this._array=w,this._maxLength=b,this._startIndex=0}get length(){return this._length}set length(b){if(b>this._length)for(let w=this._length;w<b;w++)this._array[w]=void 0;this._length=b}get(b){return this._array[this._getCyclicIndex(b)]}set(b,w){this._array[this._getCyclicIndex(b)]=w}push(b){this._array[this._getCyclicIndex(this._length)]=b,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(b,w,...m){if(w){for(let c=b;c<this._length-w;c++)this._array[this._getCyclicIndex(c)]=this._array[this._getCyclicIndex(c+w)];this._length-=w,this.onDeleteEmitter.fire({index:b,amount:w})}for(let c=this._length-1;c>=b;c--)this._array[this._getCyclicIndex(c+m.length)]=this._array[this._getCyclicIndex(c)];for(let c=0;c<m.length;c++)this._array[this._getCyclicIndex(b+c)]=m[c];if(m.length&&this.onInsertEmitter.fire({index:b,amount:m.length}),this._length+m.length>this._maxLength){const c=this._length+m.length-this._maxLength;this._startIndex+=c,this._length=this._maxLength,this.onTrimEmitter.fire(c)}else this._length+=m.length}trimStart(b){b>this._length&&(b=this._length),this._startIndex+=b,this._length-=b,this.onTrimEmitter.fire(b)}shiftElements(b,w,m){if(!(w<=0)){if(b<0||b>=this._length)throw new Error("start argument out of range");if(b+m<0)throw new Error("Cannot shift elements in list beyond index 0");if(m>0){for(let h=w-1;h>=0;h--)this.set(b+h+m,this.get(b+h));const c=b+w+m-this._length;if(c>0)for(this._length+=c;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let c=0;c<w;c++)this.set(b+c+m,this.get(b+c))}}_getCyclicIndex(b){return(this._startIndex+b)%this._maxLength}}r.CircularList=d},1439:(f,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.clone=void 0,r.clone=function n(p,_=5){if(typeof p!="object")return p;const d=Array.isArray(p)?[]:{};for(const g in p)d[g]=_<=1?p[g]:p[g]&&n(p[g],_-1);return d}},8055:(f,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.contrastRatio=r.toPaddedHex=r.rgba=r.rgb=r.css=r.color=r.channels=r.NULL_COLOR=void 0;let n=0,p=0,_=0,d=0;var g,b,w,m,c;function h(l){const v=l.toString(16);return v.length<2?"0"+v:v}function o(l,v){return l<v?(v+.05)/(l+.05):(l+.05)/(v+.05)}r.NULL_COLOR={css:"#00000000",rgba:0},(function(l){l.toCss=function(v,S,x,k){return k!==void 0?`#${h(v)}${h(S)}${h(x)}${h(k)}`:`#${h(v)}${h(S)}${h(x)}`},l.toRgba=function(v,S,x,k=255){return(v<<24|S<<16|x<<8|k)>>>0},l.toColor=function(v,S,x,k){return{css:l.toCss(v,S,x,k),rgba:l.toRgba(v,S,x,k)}}})(g||(r.channels=g={})),(function(l){function v(S,x){return d=Math.round(255*x),[n,p,_]=c.toChannels(S.rgba),{css:g.toCss(n,p,_,d),rgba:g.toRgba(n,p,_,d)}}l.blend=function(S,x){if(d=(255&x.rgba)/255,d===1)return{css:x.css,rgba:x.rgba};const k=x.rgba>>24&255,C=x.rgba>>16&255,A=x.rgba>>8&255,N=S.rgba>>24&255,G=S.rgba>>16&255,L=S.rgba>>8&255;return n=N+Math.round((k-N)*d),p=G+Math.round((C-G)*d),_=L+Math.round((A-L)*d),{css:g.toCss(n,p,_),rgba:g.toRgba(n,p,_)}},l.isOpaque=function(S){return(255&S.rgba)==255},l.ensureContrastRatio=function(S,x,k){const C=c.ensureContrastRatio(S.rgba,x.rgba,k);if(C)return g.toColor(C>>24&255,C>>16&255,C>>8&255)},l.opaque=function(S){const x=(255|S.rgba)>>>0;return[n,p,_]=c.toChannels(x),{css:g.toCss(n,p,_),rgba:x}},l.opacity=v,l.multiplyOpacity=function(S,x){return d=255&S.rgba,v(S,d*x/255)},l.toColorRGB=function(S){return[S.rgba>>24&255,S.rgba>>16&255,S.rgba>>8&255]}})(b||(r.color=b={})),(function(l){let v,S;try{const x=document.createElement("canvas");x.width=1,x.height=1;const k=x.getContext("2d",{willReadFrequently:!0});k&&(v=k,v.globalCompositeOperation="copy",S=v.createLinearGradient(0,0,1,1))}catch{}l.toColor=function(x){if(x.match(/#[\da-f]{3,8}/i))switch(x.length){case 4:return n=parseInt(x.slice(1,2).repeat(2),16),p=parseInt(x.slice(2,3).repeat(2),16),_=parseInt(x.slice(3,4).repeat(2),16),g.toColor(n,p,_);case 5:return n=parseInt(x.slice(1,2).repeat(2),16),p=parseInt(x.slice(2,3).repeat(2),16),_=parseInt(x.slice(3,4).repeat(2),16),d=parseInt(x.slice(4,5).repeat(2),16),g.toColor(n,p,_,d);case 7:return{css:x,rgba:(parseInt(x.slice(1),16)<<8|255)>>>0};case 9:return{css:x,rgba:parseInt(x.slice(1),16)>>>0}}const k=x.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(k)return n=parseInt(k[1]),p=parseInt(k[2]),_=parseInt(k[3]),d=Math.round(255*(k[5]===void 0?1:parseFloat(k[5]))),g.toColor(n,p,_,d);if(!v||!S)throw new Error("css.toColor: Unsupported css format");if(v.fillStyle=S,v.fillStyle=x,typeof v.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(v.fillRect(0,0,1,1),[n,p,_,d]=v.getImageData(0,0,1,1).data,d!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:g.toRgba(n,p,_,d),css:x}}})(w||(r.css=w={})),(function(l){function v(S,x,k){const C=S/255,A=x/255,N=k/255;return .2126*(C<=.03928?C/12.92:Math.pow((C+.055)/1.055,2.4))+.7152*(A<=.03928?A/12.92:Math.pow((A+.055)/1.055,2.4))+.0722*(N<=.03928?N/12.92:Math.pow((N+.055)/1.055,2.4))}l.relativeLuminance=function(S){return v(S>>16&255,S>>8&255,255&S)},l.relativeLuminance2=v})(m||(r.rgb=m={})),(function(l){function v(x,k,C){const A=x>>24&255,N=x>>16&255,G=x>>8&255;let L=k>>24&255,I=k>>16&255,E=k>>8&255,X=o(m.relativeLuminance2(L,I,E),m.relativeLuminance2(A,N,G));for(;X<C&&(L>0||I>0||E>0);)L-=Math.max(0,Math.ceil(.1*L)),I-=Math.max(0,Math.ceil(.1*I)),E-=Math.max(0,Math.ceil(.1*E)),X=o(m.relativeLuminance2(L,I,E),m.relativeLuminance2(A,N,G));return(L<<24|I<<16|E<<8|255)>>>0}function S(x,k,C){const A=x>>24&255,N=x>>16&255,G=x>>8&255;let L=k>>24&255,I=k>>16&255,E=k>>8&255,X=o(m.relativeLuminance2(L,I,E),m.relativeLuminance2(A,N,G));for(;X<C&&(L<255||I<255||E<255);)L=Math.min(255,L+Math.ceil(.1*(255-L))),I=Math.min(255,I+Math.ceil(.1*(255-I))),E=Math.min(255,E+Math.ceil(.1*(255-E))),X=o(m.relativeLuminance2(L,I,E),m.relativeLuminance2(A,N,G));return(L<<24|I<<16|E<<8|255)>>>0}l.blend=function(x,k){if(d=(255&k)/255,d===1)return k;const C=k>>24&255,A=k>>16&255,N=k>>8&255,G=x>>24&255,L=x>>16&255,I=x>>8&255;return n=G+Math.round((C-G)*d),p=L+Math.round((A-L)*d),_=I+Math.round((N-I)*d),g.toRgba(n,p,_)},l.ensureContrastRatio=function(x,k,C){const A=m.relativeLuminance(x>>8),N=m.relativeLuminance(k>>8);if(o(A,N)<C){if(N<A){const I=v(x,k,C),E=o(A,m.relativeLuminance(I>>8));if(E<C){const X=S(x,k,C);return E>o(A,m.relativeLuminance(X>>8))?I:X}return I}const G=S(x,k,C),L=o(A,m.relativeLuminance(G>>8));if(L<C){const I=v(x,k,C);return L>o(A,m.relativeLuminance(I>>8))?G:I}return G}},l.reduceLuminance=v,l.increaseLuminance=S,l.toChannels=function(x){return[x>>24&255,x>>16&255,x>>8&255,255&x]}})(c||(r.rgba=c={})),r.toPaddedHex=h,r.contrastRatio=o},8969:(f,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.CoreTerminal=void 0;const p=n(844),_=n(2585),d=n(4348),g=n(7866),b=n(744),w=n(7302),m=n(6975),c=n(8460),h=n(1753),o=n(1480),l=n(7994),v=n(9282),S=n(5435),x=n(5981),k=n(2660);let C=!1;class A extends p.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new c.EventEmitter),this._onScroll.event((G=>{var L;(L=this._onScrollApi)==null||L.fire(G.position)}))),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(G){for(const L in G)this.optionsService.options[L]=G[L]}constructor(G){super(),this._windowsWrappingHeuristics=this.register(new p.MutableDisposable),this._onBinary=this.register(new c.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new c.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new c.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new c.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new c.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new c.EventEmitter),this._instantiationService=new d.InstantiationService,this.optionsService=this.register(new w.OptionsService(G)),this._instantiationService.setService(_.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(b.BufferService)),this._instantiationService.setService(_.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(g.LogService)),this._instantiationService.setService(_.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(m.CoreService)),this._instantiationService.setService(_.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(h.CoreMouseService)),this._instantiationService.setService(_.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(o.UnicodeService)),this._instantiationService.setService(_.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(l.CharsetService),this._instantiationService.setService(_.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(k.OscLinkService),this._instantiationService.setService(_.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new S.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,c.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,c.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,c.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,c.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom((()=>this.scrollToBottom()))),this.register(this.coreService.onUserInput((()=>this._writeBuffer.handleUserInput()))),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],(()=>this._handleWindowsPtyOptionChange()))),this.register(this._bufferService.onScroll((L=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)}))),this.register(this._inputHandler.onScroll((L=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)}))),this._writeBuffer=this.register(new x.WriteBuffer(((L,I)=>this._inputHandler.parse(L,I)))),this.register((0,c.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write(G,L){this._writeBuffer.write(G,L)}writeSync(G,L){this._logService.logLevel<=_.LogLevelEnum.WARN&&!C&&(this._logService.warn("writeSync is unreliable and will be removed soon."),C=!0),this._writeBuffer.writeSync(G,L)}input(G,L=!0){this.coreService.triggerDataEvent(G,L)}resize(G,L){isNaN(G)||isNaN(L)||(G=Math.max(G,b.MINIMUM_COLS),L=Math.max(L,b.MINIMUM_ROWS),this._bufferService.resize(G,L))}scroll(G,L=!1){this._bufferService.scroll(G,L)}scrollLines(G,L,I){this._bufferService.scrollLines(G,L,I)}scrollPages(G){this.scrollLines(G*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(G){const L=G-this._bufferService.buffer.ydisp;L!==0&&this.scrollLines(L)}registerEscHandler(G,L){return this._inputHandler.registerEscHandler(G,L)}registerDcsHandler(G,L){return this._inputHandler.registerDcsHandler(G,L)}registerCsiHandler(G,L){return this._inputHandler.registerCsiHandler(G,L)}registerOscHandler(G,L){return this._inputHandler.registerOscHandler(G,L)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let G=!1;const L=this.optionsService.rawOptions.windowsPty;L&&L.buildNumber!==void 0&&L.buildNumber!==void 0?G=L.backend==="conpty"&&L.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(G=!0),G?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){const G=[];G.push(this.onLineFeed(v.updateWindowsModeWrappedState.bind(null,this._bufferService))),G.push(this.registerCsiHandler({final:"H"},(()=>((0,v.updateWindowsModeWrappedState)(this._bufferService),!1)))),this._windowsWrappingHeuristics.value=(0,p.toDisposable)((()=>{for(const L of G)L.dispose()}))}}}r.CoreTerminal=A},8460:(f,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.runAndSubscribe=r.forwardEvent=r.EventEmitter=void 0,r.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=n=>(this._listeners.push(n),{dispose:()=>{if(!this._disposed){for(let p=0;p<this._listeners.length;p++)if(this._listeners[p]===n)return void this._listeners.splice(p,1)}}})),this._event}fire(n,p){const _=[];for(let d=0;d<this._listeners.length;d++)_.push(this._listeners[d]);for(let d=0;d<_.length;d++)_[d].call(void 0,n,p)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},r.forwardEvent=function(n,p){return n((_=>p.fire(_)))},r.runAndSubscribe=function(n,p){return p(void 0),n((_=>p(_)))}},5435:function(f,r,n){var p=this&&this.__decorate||function(ie,T,U,M){var $,ne=arguments.length,le=ne<3?T:M===null?M=Object.getOwnPropertyDescriptor(T,U):M;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")le=Reflect.decorate(ie,T,U,M);else for(var ce=ie.length-1;ce>=0;ce--)($=ie[ce])&&(le=(ne<3?$(le):ne>3?$(T,U,le):$(T,U))||le);return ne>3&&le&&Object.defineProperty(T,U,le),le},_=this&&this.__param||function(ie,T){return function(U,M){T(U,M,ie)}};Object.defineProperty(r,"__esModule",{value:!0}),r.InputHandler=r.WindowsOptionsReportType=void 0;const d=n(2584),g=n(7116),b=n(2015),w=n(844),m=n(482),c=n(8437),h=n(8460),o=n(643),l=n(511),v=n(3734),S=n(2585),x=n(1480),k=n(6242),C=n(6351),A=n(5941),N={"(":0,")":1,"*":2,"+":3,"-":1,".":2},G=131072;function L(ie,T){if(ie>24)return T.setWinLines||!1;switch(ie){case 1:return!!T.restoreWin;case 2:return!!T.minimizeWin;case 3:return!!T.setWinPosition;case 4:return!!T.setWinSizePixels;case 5:return!!T.raiseWin;case 6:return!!T.lowerWin;case 7:return!!T.refreshWin;case 8:return!!T.setWinSizeChars;case 9:return!!T.maximizeWin;case 10:return!!T.fullscreenWin;case 11:return!!T.getWinState;case 13:return!!T.getWinPosition;case 14:return!!T.getWinSizePixels;case 15:return!!T.getScreenSizePixels;case 16:return!!T.getCellSizePixels;case 18:return!!T.getWinSizeChars;case 19:return!!T.getScreenSizeChars;case 20:return!!T.getIconTitle;case 21:return!!T.getWinTitle;case 22:return!!T.pushTitle;case 23:return!!T.popTitle;case 24:return!!T.setWinLines}return!1}var I;(function(ie){ie[ie.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",ie[ie.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(I||(r.WindowsOptionsReportType=I={}));let E=0;class X extends w.Disposable{getAttrData(){return this._curAttrData}constructor(T,U,M,$,ne,le,ce,pe,j=new b.EscapeSequenceParser){super(),this._bufferService=T,this._charsetService=U,this._coreService=M,this._logService=$,this._optionsService=ne,this._oscLinkService=le,this._coreMouseService=ce,this._unicodeService=pe,this._parser=j,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new m.StringToUtf32,this._utf8Decoder=new m.Utf8ToUtf32,this._workCell=new l.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=c.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=c.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new h.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new h.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new h.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new h.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new h.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new h.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new h.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new h.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new h.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new h.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new h.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new h.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new h.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new Q(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate((O=>this._activeBuffer=O.activeBuffer))),this._parser.setCsiHandlerFallback(((O,ee)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(O),params:ee.toArray()})})),this._parser.setEscHandlerFallback((O=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(O)})})),this._parser.setExecuteHandlerFallback((O=>{this._logService.debug("Unknown EXECUTE code: ",{code:O})})),this._parser.setOscHandlerFallback(((O,ee,te)=>{this._logService.debug("Unknown OSC code: ",{identifier:O,action:ee,data:te})})),this._parser.setDcsHandlerFallback(((O,ee,te)=>{ee==="HOOK"&&(te=te.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(O),action:ee,payload:te})})),this._parser.setPrintHandler(((O,ee,te)=>this.print(O,ee,te))),this._parser.registerCsiHandler({final:"@"},(O=>this.insertChars(O))),this._parser.registerCsiHandler({intermediates:" ",final:"@"},(O=>this.scrollLeft(O))),this._parser.registerCsiHandler({final:"A"},(O=>this.cursorUp(O))),this._parser.registerCsiHandler({intermediates:" ",final:"A"},(O=>this.scrollRight(O))),this._parser.registerCsiHandler({final:"B"},(O=>this.cursorDown(O))),this._parser.registerCsiHandler({final:"C"},(O=>this.cursorForward(O))),this._parser.registerCsiHandler({final:"D"},(O=>this.cursorBackward(O))),this._parser.registerCsiHandler({final:"E"},(O=>this.cursorNextLine(O))),this._parser.registerCsiHandler({final:"F"},(O=>this.cursorPrecedingLine(O))),this._parser.registerCsiHandler({final:"G"},(O=>this.cursorCharAbsolute(O))),this._parser.registerCsiHandler({final:"H"},(O=>this.cursorPosition(O))),this._parser.registerCsiHandler({final:"I"},(O=>this.cursorForwardTab(O))),this._parser.registerCsiHandler({final:"J"},(O=>this.eraseInDisplay(O,!1))),this._parser.registerCsiHandler({prefix:"?",final:"J"},(O=>this.eraseInDisplay(O,!0))),this._parser.registerCsiHandler({final:"K"},(O=>this.eraseInLine(O,!1))),this._parser.registerCsiHandler({prefix:"?",final:"K"},(O=>this.eraseInLine(O,!0))),this._parser.registerCsiHandler({final:"L"},(O=>this.insertLines(O))),this._parser.registerCsiHandler({final:"M"},(O=>this.deleteLines(O))),this._parser.registerCsiHandler({final:"P"},(O=>this.deleteChars(O))),this._parser.registerCsiHandler({final:"S"},(O=>this.scrollUp(O))),this._parser.registerCsiHandler({final:"T"},(O=>this.scrollDown(O))),this._parser.registerCsiHandler({final:"X"},(O=>this.eraseChars(O))),this._parser.registerCsiHandler({final:"Z"},(O=>this.cursorBackwardTab(O))),this._parser.registerCsiHandler({final:"`"},(O=>this.charPosAbsolute(O))),this._parser.registerCsiHandler({final:"a"},(O=>this.hPositionRelative(O))),this._parser.registerCsiHandler({final:"b"},(O=>this.repeatPrecedingCharacter(O))),this._parser.registerCsiHandler({final:"c"},(O=>this.sendDeviceAttributesPrimary(O))),this._parser.registerCsiHandler({prefix:">",final:"c"},(O=>this.sendDeviceAttributesSecondary(O))),this._parser.registerCsiHandler({final:"d"},(O=>this.linePosAbsolute(O))),this._parser.registerCsiHandler({final:"e"},(O=>this.vPositionRelative(O))),this._parser.registerCsiHandler({final:"f"},(O=>this.hVPosition(O))),this._parser.registerCsiHandler({final:"g"},(O=>this.tabClear(O))),this._parser.registerCsiHandler({final:"h"},(O=>this.setMode(O))),this._parser.registerCsiHandler({prefix:"?",final:"h"},(O=>this.setModePrivate(O))),this._parser.registerCsiHandler({final:"l"},(O=>this.resetMode(O))),this._parser.registerCsiHandler({prefix:"?",final:"l"},(O=>this.resetModePrivate(O))),this._parser.registerCsiHandler({final:"m"},(O=>this.charAttributes(O))),this._parser.registerCsiHandler({final:"n"},(O=>this.deviceStatus(O))),this._parser.registerCsiHandler({prefix:"?",final:"n"},(O=>this.deviceStatusPrivate(O))),this._parser.registerCsiHandler({intermediates:"!",final:"p"},(O=>this.softReset(O))),this._parser.registerCsiHandler({intermediates:" ",final:"q"},(O=>this.setCursorStyle(O))),this._parser.registerCsiHandler({final:"r"},(O=>this.setScrollRegion(O))),this._parser.registerCsiHandler({final:"s"},(O=>this.saveCursor(O))),this._parser.registerCsiHandler({final:"t"},(O=>this.windowOptions(O))),this._parser.registerCsiHandler({final:"u"},(O=>this.restoreCursor(O))),this._parser.registerCsiHandler({intermediates:"'",final:"}"},(O=>this.insertColumns(O))),this._parser.registerCsiHandler({intermediates:"'",final:"~"},(O=>this.deleteColumns(O))),this._parser.registerCsiHandler({intermediates:'"',final:"q"},(O=>this.selectProtected(O))),this._parser.registerCsiHandler({intermediates:"$",final:"p"},(O=>this.requestMode(O,!0))),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},(O=>this.requestMode(O,!1))),this._parser.setExecuteHandler(d.C0.BEL,(()=>this.bell())),this._parser.setExecuteHandler(d.C0.LF,(()=>this.lineFeed())),this._parser.setExecuteHandler(d.C0.VT,(()=>this.lineFeed())),this._parser.setExecuteHandler(d.C0.FF,(()=>this.lineFeed())),this._parser.setExecuteHandler(d.C0.CR,(()=>this.carriageReturn())),this._parser.setExecuteHandler(d.C0.BS,(()=>this.backspace())),this._parser.setExecuteHandler(d.C0.HT,(()=>this.tab())),this._parser.setExecuteHandler(d.C0.SO,(()=>this.shiftOut())),this._parser.setExecuteHandler(d.C0.SI,(()=>this.shiftIn())),this._parser.setExecuteHandler(d.C1.IND,(()=>this.index())),this._parser.setExecuteHandler(d.C1.NEL,(()=>this.nextLine())),this._parser.setExecuteHandler(d.C1.HTS,(()=>this.tabSet())),this._parser.registerOscHandler(0,new k.OscHandler((O=>(this.setTitle(O),this.setIconName(O),!0)))),this._parser.registerOscHandler(1,new k.OscHandler((O=>this.setIconName(O)))),this._parser.registerOscHandler(2,new k.OscHandler((O=>this.setTitle(O)))),this._parser.registerOscHandler(4,new k.OscHandler((O=>this.setOrReportIndexedColor(O)))),this._parser.registerOscHandler(8,new k.OscHandler((O=>this.setHyperlink(O)))),this._parser.registerOscHandler(10,new k.OscHandler((O=>this.setOrReportFgColor(O)))),this._parser.registerOscHandler(11,new k.OscHandler((O=>this.setOrReportBgColor(O)))),this._parser.registerOscHandler(12,new k.OscHandler((O=>this.setOrReportCursorColor(O)))),this._parser.registerOscHandler(104,new k.OscHandler((O=>this.restoreIndexedColor(O)))),this._parser.registerOscHandler(110,new k.OscHandler((O=>this.restoreFgColor(O)))),this._parser.registerOscHandler(111,new k.OscHandler((O=>this.restoreBgColor(O)))),this._parser.registerOscHandler(112,new k.OscHandler((O=>this.restoreCursorColor(O)))),this._parser.registerEscHandler({final:"7"},(()=>this.saveCursor())),this._parser.registerEscHandler({final:"8"},(()=>this.restoreCursor())),this._parser.registerEscHandler({final:"D"},(()=>this.index())),this._parser.registerEscHandler({final:"E"},(()=>this.nextLine())),this._parser.registerEscHandler({final:"H"},(()=>this.tabSet())),this._parser.registerEscHandler({final:"M"},(()=>this.reverseIndex())),this._parser.registerEscHandler({final:"="},(()=>this.keypadApplicationMode())),this._parser.registerEscHandler({final:">"},(()=>this.keypadNumericMode())),this._parser.registerEscHandler({final:"c"},(()=>this.fullReset())),this._parser.registerEscHandler({final:"n"},(()=>this.setgLevel(2))),this._parser.registerEscHandler({final:"o"},(()=>this.setgLevel(3))),this._parser.registerEscHandler({final:"|"},(()=>this.setgLevel(3))),this._parser.registerEscHandler({final:"}"},(()=>this.setgLevel(2))),this._parser.registerEscHandler({final:"~"},(()=>this.setgLevel(1))),this._parser.registerEscHandler({intermediates:"%",final:"@"},(()=>this.selectDefaultCharset())),this._parser.registerEscHandler({intermediates:"%",final:"G"},(()=>this.selectDefaultCharset()));for(const O in g.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:O},(()=>this.selectCharset("("+O))),this._parser.registerEscHandler({intermediates:")",final:O},(()=>this.selectCharset(")"+O))),this._parser.registerEscHandler({intermediates:"*",final:O},(()=>this.selectCharset("*"+O))),this._parser.registerEscHandler({intermediates:"+",final:O},(()=>this.selectCharset("+"+O))),this._parser.registerEscHandler({intermediates:"-",final:O},(()=>this.selectCharset("-"+O))),this._parser.registerEscHandler({intermediates:".",final:O},(()=>this.selectCharset("."+O))),this._parser.registerEscHandler({intermediates:"/",final:O},(()=>this.selectCharset("/"+O)));this._parser.registerEscHandler({intermediates:"#",final:"8"},(()=>this.screenAlignmentPattern())),this._parser.setErrorHandler((O=>(this._logService.error("Parsing error: ",O),O))),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new C.DcsHandler(((O,ee)=>this.requestStatusString(O,ee))))}_preserveStack(T,U,M,$){this._parseStack.paused=!0,this._parseStack.cursorStartX=T,this._parseStack.cursorStartY=U,this._parseStack.decodedLength=M,this._parseStack.position=$}_logSlowResolvingAsync(T){this._logService.logLevel<=S.LogLevelEnum.WARN&&Promise.race([T,new Promise(((U,M)=>setTimeout((()=>M("#SLOW_TIMEOUT")),5e3)))]).catch((U=>{if(U!=="#SLOW_TIMEOUT")throw U;console.warn("async parser handler taking longer than 5000 ms")}))}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(T,U){let M,$=this._activeBuffer.x,ne=this._activeBuffer.y,le=0;const ce=this._parseStack.paused;if(ce){if(M=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,U))return this._logSlowResolvingAsync(M),M;$=this._parseStack.cursorStartX,ne=this._parseStack.cursorStartY,this._parseStack.paused=!1,T.length>G&&(le=this._parseStack.position+G)}if(this._logService.logLevel<=S.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof T=="string"?` "${T}"`:` "${Array.prototype.map.call(T,(O=>String.fromCharCode(O))).join("")}"`),typeof T=="string"?T.split("").map((O=>O.charCodeAt(0))):T),this._parseBuffer.length<T.length&&this._parseBuffer.length<G&&(this._parseBuffer=new Uint32Array(Math.min(T.length,G))),ce||this._dirtyRowTracker.clearRange(),T.length>G)for(let O=le;O<T.length;O+=G){const ee=O+G<T.length?O+G:T.length,te=typeof T=="string"?this._stringDecoder.decode(T.substring(O,ee),this._parseBuffer):this._utf8Decoder.decode(T.subarray(O,ee),this._parseBuffer);if(M=this._parser.parse(this._parseBuffer,te))return this._preserveStack($,ne,te,O),this._logSlowResolvingAsync(M),M}else if(!ce){const O=typeof T=="string"?this._stringDecoder.decode(T,this._parseBuffer):this._utf8Decoder.decode(T,this._parseBuffer);if(M=this._parser.parse(this._parseBuffer,O))return this._preserveStack($,ne,O,0),this._logSlowResolvingAsync(M),M}this._activeBuffer.x===$&&this._activeBuffer.y===ne||this._onCursorMove.fire();const pe=this._dirtyRowTracker.end+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp),j=this._dirtyRowTracker.start+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp);j<this._bufferService.rows&&this._onRequestRefreshRows.fire(Math.min(j,this._bufferService.rows-1),Math.min(pe,this._bufferService.rows-1))}print(T,U,M){let $,ne;const le=this._charsetService.charset,ce=this._optionsService.rawOptions.screenReaderMode,pe=this._bufferService.cols,j=this._coreService.decPrivateModes.wraparound,O=this._coreService.modes.insertMode,ee=this._curAttrData;let te=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&M-U>0&&te.getWidth(this._activeBuffer.x-1)===2&&te.setCellFromCodepoint(this._activeBuffer.x-1,0,1,ee);let F=this._parser.precedingJoinState;for(let q=U;q<M;++q){if($=T[q],$<127&&le){const K=le[String.fromCharCode($)];K&&($=K.charCodeAt(0))}const Y=this._unicodeService.charProperties($,F);ne=x.UnicodeService.extractWidth(Y);const y=x.UnicodeService.extractShouldJoin(Y),P=y?x.UnicodeService.extractWidth(F):0;if(F=Y,ce&&this._onA11yChar.fire((0,m.stringFromCodePoint)($)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),this._activeBuffer.x+ne-P>pe){if(j){const K=te;let D=this._activeBuffer.x-P;for(this._activeBuffer.x=P,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),te=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y),P>0&&te instanceof c.BufferLine&&te.copyCellsFrom(K,D,0,P,!1);D<pe;)K.setCellFromCodepoint(D++,0,1,ee)}else if(this._activeBuffer.x=pe-1,ne===2)continue}if(y&&this._activeBuffer.x){const K=te.getWidth(this._activeBuffer.x-1)?1:2;te.addCodepointToCell(this._activeBuffer.x-K,$,ne);for(let D=ne-P;--D>=0;)te.setCellFromCodepoint(this._activeBuffer.x++,0,0,ee)}else if(O&&(te.insertCells(this._activeBuffer.x,ne-P,this._activeBuffer.getNullCell(ee)),te.getWidth(pe-1)===2&&te.setCellFromCodepoint(pe-1,o.NULL_CELL_CODE,o.NULL_CELL_WIDTH,ee)),te.setCellFromCodepoint(this._activeBuffer.x++,$,ne,ee),ne>0)for(;--ne;)te.setCellFromCodepoint(this._activeBuffer.x++,0,0,ee)}this._parser.precedingJoinState=F,this._activeBuffer.x<pe&&M-U>0&&te.getWidth(this._activeBuffer.x)===0&&!te.hasContent(this._activeBuffer.x)&&te.setCellFromCodepoint(this._activeBuffer.x,0,1,ee),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(T,U){return T.final!=="t"||T.prefix||T.intermediates?this._parser.registerCsiHandler(T,U):this._parser.registerCsiHandler(T,(M=>!L(M.params[0],this._optionsService.rawOptions.windowOptions)||U(M)))}registerDcsHandler(T,U){return this._parser.registerDcsHandler(T,new C.DcsHandler(U))}registerEscHandler(T,U){return this._parser.registerEscHandler(T,U)}registerOscHandler(T,U){return this._parser.registerOscHandler(T,new k.OscHandler(U))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){var T;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&((T=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))!=null&&T.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;const U=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);U.hasWidth(this._activeBuffer.x)&&!U.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;const T=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-T),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(T=this._bufferService.cols-1){this._activeBuffer.x=Math.min(T,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(T,U){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=T,this._activeBuffer.y=this._activeBuffer.scrollTop+U):(this._activeBuffer.x=T,this._activeBuffer.y=U),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(T,U){this._restrictCursor(),this._setCursor(this._activeBuffer.x+T,this._activeBuffer.y+U)}cursorUp(T){const U=this._activeBuffer.y-this._activeBuffer.scrollTop;return U>=0?this._moveCursor(0,-Math.min(U,T.params[0]||1)):this._moveCursor(0,-(T.params[0]||1)),!0}cursorDown(T){const U=this._activeBuffer.scrollBottom-this._activeBuffer.y;return U>=0?this._moveCursor(0,Math.min(U,T.params[0]||1)):this._moveCursor(0,T.params[0]||1),!0}cursorForward(T){return this._moveCursor(T.params[0]||1,0),!0}cursorBackward(T){return this._moveCursor(-(T.params[0]||1),0),!0}cursorNextLine(T){return this.cursorDown(T),this._activeBuffer.x=0,!0}cursorPrecedingLine(T){return this.cursorUp(T),this._activeBuffer.x=0,!0}cursorCharAbsolute(T){return this._setCursor((T.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(T){return this._setCursor(T.length>=2?(T.params[1]||1)-1:0,(T.params[0]||1)-1),!0}charPosAbsolute(T){return this._setCursor((T.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(T){return this._moveCursor(T.params[0]||1,0),!0}linePosAbsolute(T){return this._setCursor(this._activeBuffer.x,(T.params[0]||1)-1),!0}vPositionRelative(T){return this._moveCursor(0,T.params[0]||1),!0}hVPosition(T){return this.cursorPosition(T),!0}tabClear(T){const U=T.params[0];return U===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:U===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(T){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let U=T.params[0]||1;for(;U--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(T){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let U=T.params[0]||1;for(;U--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(T){const U=T.params[0];return U===1&&(this._curAttrData.bg|=536870912),U!==2&&U!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(T,U,M,$=!1,ne=!1){const le=this._activeBuffer.lines.get(this._activeBuffer.ybase+T);le.replaceCells(U,M,this._activeBuffer.getNullCell(this._eraseAttrData()),ne),$&&(le.isWrapped=!1)}_resetBufferLine(T,U=!1){const M=this._activeBuffer.lines.get(this._activeBuffer.ybase+T);M&&(M.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),U),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+T),M.isWrapped=!1)}eraseInDisplay(T,U=!1){let M;switch(this._restrictCursor(this._bufferService.cols),T.params[0]){case 0:for(M=this._activeBuffer.y,this._dirtyRowTracker.markDirty(M),this._eraseInBufferLine(M++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,U);M<this._bufferService.rows;M++)this._resetBufferLine(M,U);this._dirtyRowTracker.markDirty(M);break;case 1:for(M=this._activeBuffer.y,this._dirtyRowTracker.markDirty(M),this._eraseInBufferLine(M,0,this._activeBuffer.x+1,!0,U),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(M+1).isWrapped=!1);M--;)this._resetBufferLine(M,U);this._dirtyRowTracker.markDirty(0);break;case 2:for(M=this._bufferService.rows,this._dirtyRowTracker.markDirty(M-1);M--;)this._resetBufferLine(M,U);this._dirtyRowTracker.markDirty(0);break;case 3:const $=this._activeBuffer.lines.length-this._bufferService.rows;$>0&&(this._activeBuffer.lines.trimStart($),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-$,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-$,0),this._onScroll.fire(0))}return!0}eraseInLine(T,U=!1){switch(this._restrictCursor(this._bufferService.cols),T.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,U);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,U);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,U)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(T){this._restrictCursor();let U=T.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const M=this._activeBuffer.ybase+this._activeBuffer.y,$=this._bufferService.rows-1-this._activeBuffer.scrollBottom,ne=this._bufferService.rows-1+this._activeBuffer.ybase-$+1;for(;U--;)this._activeBuffer.lines.splice(ne-1,1),this._activeBuffer.lines.splice(M,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(T){this._restrictCursor();let U=T.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const M=this._activeBuffer.ybase+this._activeBuffer.y;let $;for($=this._bufferService.rows-1-this._activeBuffer.scrollBottom,$=this._bufferService.rows-1+this._activeBuffer.ybase-$;U--;)this._activeBuffer.lines.splice(M,1),this._activeBuffer.lines.splice($,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(T){this._restrictCursor();const U=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return U&&(U.insertCells(this._activeBuffer.x,T.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(T){this._restrictCursor();const U=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return U&&(U.deleteCells(this._activeBuffer.x,T.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(T){let U=T.params[0]||1;for(;U--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(T){let U=T.params[0]||1;for(;U--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(c.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(T){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const U=T.params[0]||1;for(let M=this._activeBuffer.scrollTop;M<=this._activeBuffer.scrollBottom;++M){const $=this._activeBuffer.lines.get(this._activeBuffer.ybase+M);$.deleteCells(0,U,this._activeBuffer.getNullCell(this._eraseAttrData())),$.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(T){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const U=T.params[0]||1;for(let M=this._activeBuffer.scrollTop;M<=this._activeBuffer.scrollBottom;++M){const $=this._activeBuffer.lines.get(this._activeBuffer.ybase+M);$.insertCells(0,U,this._activeBuffer.getNullCell(this._eraseAttrData())),$.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(T){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const U=T.params[0]||1;for(let M=this._activeBuffer.scrollTop;M<=this._activeBuffer.scrollBottom;++M){const $=this._activeBuffer.lines.get(this._activeBuffer.ybase+M);$.insertCells(this._activeBuffer.x,U,this._activeBuffer.getNullCell(this._eraseAttrData())),$.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(T){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const U=T.params[0]||1;for(let M=this._activeBuffer.scrollTop;M<=this._activeBuffer.scrollBottom;++M){const $=this._activeBuffer.lines.get(this._activeBuffer.ybase+M);$.deleteCells(this._activeBuffer.x,U,this._activeBuffer.getNullCell(this._eraseAttrData())),$.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(T){this._restrictCursor();const U=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return U&&(U.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(T.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(T){const U=this._parser.precedingJoinState;if(!U)return!0;const M=T.params[0]||1,$=x.UnicodeService.extractWidth(U),ne=this._activeBuffer.x-$,le=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).getString(ne),ce=new Uint32Array(le.length*M);let pe=0;for(let O=0;O<le.length;){const ee=le.codePointAt(O)||0;ce[pe++]=ee,O+=ee>65535?2:1}let j=pe;for(let O=1;O<M;++O)ce.copyWithin(j,0,pe),j+=pe;return this.print(ce,0,j),!0}sendDeviceAttributesPrimary(T){return T.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(d.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(d.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(T){return T.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(d.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(d.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(T.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(d.C0.ESC+"[>83;40003;0c")),!0}_is(T){return(this._optionsService.rawOptions.termName+"").indexOf(T)===0}setMode(T){for(let U=0;U<T.length;U++)switch(T.params[U]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(T){for(let U=0;U<T.length;U++)switch(T.params[U]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,g.DEFAULT_CHARSET),this._charsetService.setgCharset(1,g.DEFAULT_CHARSET),this._charsetService.setgCharset(2,g.DEFAULT_CHARSET),this._charsetService.setgCharset(3,g.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(T){for(let U=0;U<T.length;U++)switch(T.params[U]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(T){for(let U=0;U<T.length;U++)switch(T.params[U]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),T.params[U]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(T,U){const M=this._coreService.decPrivateModes,{activeProtocol:$,activeEncoding:ne}=this._coreMouseService,le=this._coreService,{buffers:ce,cols:pe}=this._bufferService,{active:j,alt:O}=ce,ee=this._optionsService.rawOptions,te=y=>y?1:2,F=T.params[0];return q=F,Y=U?F===2?4:F===4?te(le.modes.insertMode):F===12?3:F===20?te(ee.convertEol):0:F===1?te(M.applicationCursorKeys):F===3?ee.windowOptions.setWinLines?pe===80?2:pe===132?1:0:0:F===6?te(M.origin):F===7?te(M.wraparound):F===8?3:F===9?te($==="X10"):F===12?te(ee.cursorBlink):F===25?te(!le.isCursorHidden):F===45?te(M.reverseWraparound):F===66?te(M.applicationKeypad):F===67?4:F===1e3?te($==="VT200"):F===1002?te($==="DRAG"):F===1003?te($==="ANY"):F===1004?te(M.sendFocus):F===1005?4:F===1006?te(ne==="SGR"):F===1015?4:F===1016?te(ne==="SGR_PIXELS"):F===1048?1:F===47||F===1047||F===1049?te(j===O):F===2004?te(M.bracketedPasteMode):0,le.triggerDataEvent(`${d.C0.ESC}[${U?"":"?"}${q};${Y}$y`),!0;var q,Y}_updateAttrColor(T,U,M,$,ne){return U===2?(T|=50331648,T&=-16777216,T|=v.AttributeData.fromColorRGB([M,$,ne])):U===5&&(T&=-50331904,T|=33554432|255&M),T}_extractColor(T,U,M){const $=[0,0,-1,0,0,0];let ne=0,le=0;do{if($[le+ne]=T.params[U+le],T.hasSubParams(U+le)){const ce=T.getSubParams(U+le);let pe=0;do $[1]===5&&(ne=1),$[le+pe+1+ne]=ce[pe];while(++pe<ce.length&&pe+le+1+ne<$.length);break}if($[1]===5&&le+ne>=2||$[1]===2&&le+ne>=5)break;$[1]&&(ne=1)}while(++le+U<T.length&&le+ne<$.length);for(let ce=2;ce<$.length;++ce)$[ce]===-1&&($[ce]=0);switch($[0]){case 38:M.fg=this._updateAttrColor(M.fg,$[1],$[3],$[4],$[5]);break;case 48:M.bg=this._updateAttrColor(M.bg,$[1],$[3],$[4],$[5]);break;case 58:M.extended=M.extended.clone(),M.extended.underlineColor=this._updateAttrColor(M.extended.underlineColor,$[1],$[3],$[4],$[5])}return le}_processUnderline(T,U){U.extended=U.extended.clone(),(!~T||T>5)&&(T=1),U.extended.underlineStyle=T,U.fg|=268435456,T===0&&(U.fg&=-268435457),U.updateExtended()}_processSGR0(T){T.fg=c.DEFAULT_ATTR_DATA.fg,T.bg=c.DEFAULT_ATTR_DATA.bg,T.extended=T.extended.clone(),T.extended.underlineStyle=0,T.extended.underlineColor&=-67108864,T.updateExtended()}charAttributes(T){if(T.length===1&&T.params[0]===0)return this._processSGR0(this._curAttrData),!0;const U=T.length;let M;const $=this._curAttrData;for(let ne=0;ne<U;ne++)M=T.params[ne],M>=30&&M<=37?($.fg&=-50331904,$.fg|=16777216|M-30):M>=40&&M<=47?($.bg&=-50331904,$.bg|=16777216|M-40):M>=90&&M<=97?($.fg&=-50331904,$.fg|=16777224|M-90):M>=100&&M<=107?($.bg&=-50331904,$.bg|=16777224|M-100):M===0?this._processSGR0($):M===1?$.fg|=134217728:M===3?$.bg|=67108864:M===4?($.fg|=268435456,this._processUnderline(T.hasSubParams(ne)?T.getSubParams(ne)[0]:1,$)):M===5?$.fg|=536870912:M===7?$.fg|=67108864:M===8?$.fg|=1073741824:M===9?$.fg|=2147483648:M===2?$.bg|=134217728:M===21?this._processUnderline(2,$):M===22?($.fg&=-134217729,$.bg&=-134217729):M===23?$.bg&=-67108865:M===24?($.fg&=-268435457,this._processUnderline(0,$)):M===25?$.fg&=-536870913:M===27?$.fg&=-67108865:M===28?$.fg&=-1073741825:M===29?$.fg&=2147483647:M===39?($.fg&=-67108864,$.fg|=16777215&c.DEFAULT_ATTR_DATA.fg):M===49?($.bg&=-67108864,$.bg|=16777215&c.DEFAULT_ATTR_DATA.bg):M===38||M===48||M===58?ne+=this._extractColor(T,ne,$):M===53?$.bg|=1073741824:M===55?$.bg&=-1073741825:M===59?($.extended=$.extended.clone(),$.extended.underlineColor=-1,$.updateExtended()):M===100?($.fg&=-67108864,$.fg|=16777215&c.DEFAULT_ATTR_DATA.fg,$.bg&=-67108864,$.bg|=16777215&c.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",M);return!0}deviceStatus(T){switch(T.params[0]){case 5:this._coreService.triggerDataEvent(`${d.C0.ESC}[0n`);break;case 6:const U=this._activeBuffer.y+1,M=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${d.C0.ESC}[${U};${M}R`)}return!0}deviceStatusPrivate(T){if(T.params[0]===6){const U=this._activeBuffer.y+1,M=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${d.C0.ESC}[?${U};${M}R`)}return!0}softReset(T){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=c.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(T){const U=T.params[0]||1;switch(U){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}const M=U%2==1;return this._optionsService.options.cursorBlink=M,!0}setScrollRegion(T){const U=T.params[0]||1;let M;return(T.length<2||(M=T.params[1])>this._bufferService.rows||M===0)&&(M=this._bufferService.rows),M>U&&(this._activeBuffer.scrollTop=U-1,this._activeBuffer.scrollBottom=M-1,this._setCursor(0,0)),!0}windowOptions(T){if(!L(T.params[0],this._optionsService.rawOptions.windowOptions))return!0;const U=T.length>1?T.params[1]:0;switch(T.params[0]){case 14:U!==2&&this._onRequestWindowsOptionsReport.fire(I.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(I.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${d.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:U!==0&&U!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),U!==0&&U!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:U!==0&&U!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),U!==0&&U!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(T){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(T){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(T){return this._windowTitle=T,this._onTitleChange.fire(T),!0}setIconName(T){return this._iconName=T,!0}setOrReportIndexedColor(T){const U=[],M=T.split(";");for(;M.length>1;){const $=M.shift(),ne=M.shift();if(/^\d+$/.exec($)){const le=parseInt($);if(J(le))if(ne==="?")U.push({type:0,index:le});else{const ce=(0,A.parseColor)(ne);ce&&U.push({type:1,index:le,color:ce})}}}return U.length&&this._onColor.fire(U),!0}setHyperlink(T){const U=T.split(";");return!(U.length<2)&&(U[1]?this._createHyperlink(U[0],U[1]):!U[0]&&this._finishHyperlink())}_createHyperlink(T,U){this._getCurrentLinkId()&&this._finishHyperlink();const M=T.split(":");let $;const ne=M.findIndex((le=>le.startsWith("id=")));return ne!==-1&&($=M[ne].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:$,uri:U}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(T,U){const M=T.split(";");for(let $=0;$<M.length&&!(U>=this._specialColors.length);++$,++U)if(M[$]==="?")this._onColor.fire([{type:0,index:this._specialColors[U]}]);else{const ne=(0,A.parseColor)(M[$]);ne&&this._onColor.fire([{type:1,index:this._specialColors[U],color:ne}])}return!0}setOrReportFgColor(T){return this._setOrReportSpecialColor(T,0)}setOrReportBgColor(T){return this._setOrReportSpecialColor(T,1)}setOrReportCursorColor(T){return this._setOrReportSpecialColor(T,2)}restoreIndexedColor(T){if(!T)return this._onColor.fire([{type:2}]),!0;const U=[],M=T.split(";");for(let $=0;$<M.length;++$)if(/^\d+$/.exec(M[$])){const ne=parseInt(M[$]);J(ne)&&U.push({type:2,index:ne})}return U.length&&this._onColor.fire(U),!0}restoreFgColor(T){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(T){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(T){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,g.DEFAULT_CHARSET),!0}selectCharset(T){return T.length!==2?(this.selectDefaultCharset(),!0):(T[0]==="/"||this._charsetService.setgCharset(N[T[0]],g.CHARSETS[T[1]]||g.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){const T=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,T,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=c.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=c.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(T){return this._charsetService.setgLevel(T),!0}screenAlignmentPattern(){const T=new l.CellData;T.content=4194373,T.fg=this._curAttrData.fg,T.bg=this._curAttrData.bg,this._setCursor(0,0);for(let U=0;U<this._bufferService.rows;++U){const M=this._activeBuffer.ybase+this._activeBuffer.y+U,$=this._activeBuffer.lines.get(M);$&&($.fill(T),$.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(T,U){const M=this._bufferService.buffer,$=this._optionsService.rawOptions;return(ne=>(this._coreService.triggerDataEvent(`${d.C0.ESC}${ne}${d.C0.ESC}\\`),!0))(T==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:T==='"p'?'P1$r61;1"p':T==="r"?`P1$r${M.scrollTop+1};${M.scrollBottom+1}r`:T==="m"?"P1$r0m":T===" q"?`P1$r${{block:2,underline:4,bar:6}[$.cursorStyle]-($.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(T,U){this._dirtyRowTracker.markRangeDirty(T,U)}}r.InputHandler=X;let Q=class{constructor(ie){this._bufferService=ie,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(ie){ie<this.start?this.start=ie:ie>this.end&&(this.end=ie)}markRangeDirty(ie,T){ie>T&&(E=ie,ie=T,T=E),ie<this.start&&(this.start=ie),T>this.end&&(this.end=T)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function J(ie){return 0<=ie&&ie<256}Q=p([_(0,S.IBufferService)],Q)},844:(f,r)=>{function n(p){for(const _ of p)_.dispose();p.length=0}Object.defineProperty(r,"__esModule",{value:!0}),r.getDisposeArrayDisposable=r.disposeArray=r.toDisposable=r.MutableDisposable=r.Disposable=void 0,r.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const p of this._disposables)p.dispose();this._disposables.length=0}register(p){return this._disposables.push(p),p}unregister(p){const _=this._disposables.indexOf(p);_!==-1&&this._disposables.splice(_,1)}},r.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(p){var _;this._isDisposed||p===this._value||((_=this._value)==null||_.dispose(),this._value=p)}clear(){this.value=void 0}dispose(){var p;this._isDisposed=!0,(p=this._value)==null||p.dispose(),this._value=void 0}},r.toDisposable=function(p){return{dispose:p}},r.disposeArray=n,r.getDisposeArrayDisposable=function(p){return{dispose:()=>n(p)}}},1505:(f,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.FourKeyMap=r.TwoKeyMap=void 0;class n{constructor(){this._data={}}set(_,d,g){this._data[_]||(this._data[_]={}),this._data[_][d]=g}get(_,d){return this._data[_]?this._data[_][d]:void 0}clear(){this._data={}}}r.TwoKeyMap=n,r.FourKeyMap=class{constructor(){this._data=new n}set(p,_,d,g,b){this._data.get(p,_)||this._data.set(p,_,new n),this._data.get(p,_).set(d,g,b)}get(p,_,d,g){var b;return(b=this._data.get(p,_))==null?void 0:b.get(d,g)}clear(){this._data.clear()}}},6114:(f,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.isChromeOS=r.isLinux=r.isWindows=r.isIphone=r.isIpad=r.isMac=r.getSafariVersion=r.isSafari=r.isLegacyEdge=r.isFirefox=r.isNode=void 0,r.isNode=typeof process<"u"&&"title"in process;const n=r.isNode?"node":navigator.userAgent,p=r.isNode?"node":navigator.platform;r.isFirefox=n.includes("Firefox"),r.isLegacyEdge=n.includes("Edge"),r.isSafari=/^((?!chrome|android).)*safari/i.test(n),r.getSafariVersion=function(){if(!r.isSafari)return 0;const _=n.match(/Version\/(\d+)/);return _===null||_.length<2?0:parseInt(_[1])},r.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(p),r.isIpad=p==="iPad",r.isIphone=p==="iPhone",r.isWindows=["Windows","Win16","Win32","WinCE"].includes(p),r.isLinux=p.indexOf("Linux")>=0,r.isChromeOS=/\bCrOS\b/.test(n)},6106:(f,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.SortedList=void 0;let n=0;r.SortedList=class{constructor(p){this._getKey=p,this._array=[]}clear(){this._array.length=0}insert(p){this._array.length!==0?(n=this._search(this._getKey(p)),this._array.splice(n,0,p)):this._array.push(p)}delete(p){if(this._array.length===0)return!1;const _=this._getKey(p);if(_===void 0||(n=this._search(_),n===-1)||this._getKey(this._array[n])!==_)return!1;do if(this._array[n]===p)return this._array.splice(n,1),!0;while(++n<this._array.length&&this._getKey(this._array[n])===_);return!1}*getKeyIterator(p){if(this._array.length!==0&&(n=this._search(p),!(n<0||n>=this._array.length)&&this._getKey(this._array[n])===p))do yield this._array[n];while(++n<this._array.length&&this._getKey(this._array[n])===p)}forEachByKey(p,_){if(this._array.length!==0&&(n=this._search(p),!(n<0||n>=this._array.length)&&this._getKey(this._array[n])===p))do _(this._array[n]);while(++n<this._array.length&&this._getKey(this._array[n])===p)}values(){return[...this._array].values()}_search(p){let _=0,d=this._array.length-1;for(;d>=_;){let g=_+d>>1;const b=this._getKey(this._array[g]);if(b>p)d=g-1;else{if(!(b<p)){for(;g>0&&this._getKey(this._array[g-1])===p;)g--;return g}_=g+1}}return _}}},7226:(f,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.DebouncedIdleTask=r.IdleTaskQueue=r.PriorityTaskQueue=void 0;const p=n(6114);class _{constructor(){this._tasks=[],this._i=0}enqueue(b){this._tasks.push(b),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(b){this._idleCallback=void 0;let w=0,m=0,c=b.timeRemaining(),h=0;for(;this._i<this._tasks.length;){if(w=Date.now(),this._tasks[this._i]()||this._i++,w=Math.max(1,Date.now()-w),m=Math.max(w,m),h=b.timeRemaining(),1.5*m>h)return c-w<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(c-w))}ms`),void this._start();c=h}this.clear()}}class d extends _{_requestCallback(b){return setTimeout((()=>b(this._createDeadline(16))))}_cancelCallback(b){clearTimeout(b)}_createDeadline(b){const w=Date.now()+b;return{timeRemaining:()=>Math.max(0,w-Date.now())}}}r.PriorityTaskQueue=d,r.IdleTaskQueue=!p.isNode&&"requestIdleCallback"in window?class extends _{_requestCallback(g){return requestIdleCallback(g)}_cancelCallback(g){cancelIdleCallback(g)}}:d,r.DebouncedIdleTask=class{constructor(){this._queue=new r.IdleTaskQueue}set(g){this._queue.clear(),this._queue.enqueue(g)}flush(){this._queue.flush()}}},9282:(f,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.updateWindowsModeWrappedState=void 0;const p=n(643);r.updateWindowsModeWrappedState=function(_){const d=_.buffer.lines.get(_.buffer.ybase+_.buffer.y-1),g=d==null?void 0:d.get(_.cols-1),b=_.buffer.lines.get(_.buffer.ybase+_.buffer.y);b&&g&&(b.isWrapped=g[p.CHAR_DATA_CODE_INDEX]!==p.NULL_CELL_CODE&&g[p.CHAR_DATA_CODE_INDEX]!==p.WHITESPACE_CELL_CODE)}},3734:(f,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.ExtendedAttrs=r.AttributeData=void 0;class n{constructor(){this.fg=0,this.bg=0,this.extended=new p}static toColorRGB(d){return[d>>>16&255,d>>>8&255,255&d]}static fromColorRGB(d){return(255&d[0])<<16|(255&d[1])<<8|255&d[2]}clone(){const d=new n;return d.fg=this.fg,d.bg=this.bg,d.extended=this.extended.clone(),d}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}getUnderlineVariantOffset(){return this.extended.underlineVariantOffset}}r.AttributeData=n;class p{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(d){this._ext=d}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(d){this._ext&=-469762049,this._ext|=d<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(d){this._ext&=-67108864,this._ext|=67108863&d}get urlId(){return this._urlId}set urlId(d){this._urlId=d}get underlineVariantOffset(){const d=(3758096384&this._ext)>>29;return d<0?4294967288^d:d}set underlineVariantOffset(d){this._ext&=536870911,this._ext|=d<<29&3758096384}constructor(d=0,g=0){this._ext=0,this._urlId=0,this._ext=d,this._urlId=g}clone(){return new p(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}r.ExtendedAttrs=p},9092:(f,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.Buffer=r.MAX_BUFFER_SIZE=void 0;const p=n(6349),_=n(7226),d=n(3734),g=n(8437),b=n(4634),w=n(511),m=n(643),c=n(4863),h=n(7116);r.MAX_BUFFER_SIZE=4294967295,r.Buffer=class{constructor(o,l,v){this._hasScrollback=o,this._optionsService=l,this._bufferService=v,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=g.DEFAULT_ATTR_DATA.clone(),this.savedCharset=h.DEFAULT_CHARSET,this.markers=[],this._nullCell=w.CellData.fromCharData([0,m.NULL_CELL_CHAR,m.NULL_CELL_WIDTH,m.NULL_CELL_CODE]),this._whitespaceCell=w.CellData.fromCharData([0,m.WHITESPACE_CELL_CHAR,m.WHITESPACE_CELL_WIDTH,m.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new _.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new p.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(o){return o?(this._nullCell.fg=o.fg,this._nullCell.bg=o.bg,this._nullCell.extended=o.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new d.ExtendedAttrs),this._nullCell}getWhitespaceCell(o){return o?(this._whitespaceCell.fg=o.fg,this._whitespaceCell.bg=o.bg,this._whitespaceCell.extended=o.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new d.ExtendedAttrs),this._whitespaceCell}getBlankLine(o,l){return new g.BufferLine(this._bufferService.cols,this.getNullCell(o),l)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){const o=this.ybase+this.y-this.ydisp;return o>=0&&o<this._rows}_getCorrectBufferLength(o){if(!this._hasScrollback)return o;const l=o+this._optionsService.rawOptions.scrollback;return l>r.MAX_BUFFER_SIZE?r.MAX_BUFFER_SIZE:l}fillViewportRows(o){if(this.lines.length===0){o===void 0&&(o=g.DEFAULT_ATTR_DATA);let l=this._rows;for(;l--;)this.lines.push(this.getBlankLine(o))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new p.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(o,l){const v=this.getNullCell(g.DEFAULT_ATTR_DATA);let S=0;const x=this._getCorrectBufferLength(l);if(x>this.lines.maxLength&&(this.lines.maxLength=x),this.lines.length>0){if(this._cols<o)for(let C=0;C<this.lines.length;C++)S+=+this.lines.get(C).resize(o,v);let k=0;if(this._rows<l)for(let C=this._rows;C<l;C++)this.lines.length<l+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new g.BufferLine(o,v)):this.ybase>0&&this.lines.length<=this.ybase+this.y+k+1?(this.ybase--,k++,this.ydisp>0&&this.ydisp--):this.lines.push(new g.BufferLine(o,v)));else for(let C=this._rows;C>l;C--)this.lines.length>l+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(x<this.lines.maxLength){const C=this.lines.length-x;C>0&&(this.lines.trimStart(C),this.ybase=Math.max(this.ybase-C,0),this.ydisp=Math.max(this.ydisp-C,0),this.savedY=Math.max(this.savedY-C,0)),this.lines.maxLength=x}this.x=Math.min(this.x,o-1),this.y=Math.min(this.y,l-1),k&&(this.y+=k),this.savedX=Math.min(this.savedX,o-1),this.scrollTop=0}if(this.scrollBottom=l-1,this._isReflowEnabled&&(this._reflow(o,l),this._cols>o))for(let k=0;k<this.lines.length;k++)S+=+this.lines.get(k).resize(o,v);this._cols=o,this._rows=l,this._memoryCleanupQueue.clear(),S>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue((()=>this._batchedMemoryCleanup())))}_batchedMemoryCleanup(){let o=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,o=!1);let l=0;for(;this._memoryCleanupPosition<this.lines.length;)if(l+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),l>100)return!0;return o}get _isReflowEnabled(){const o=this._optionsService.rawOptions.windowsPty;return o&&o.buildNumber?this._hasScrollback&&o.backend==="conpty"&&o.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(o,l){this._cols!==o&&(o>this._cols?this._reflowLarger(o,l):this._reflowSmaller(o,l))}_reflowLarger(o,l){const v=(0,b.reflowLargerGetLinesToRemove)(this.lines,this._cols,o,this.ybase+this.y,this.getNullCell(g.DEFAULT_ATTR_DATA));if(v.length>0){const S=(0,b.reflowLargerCreateNewLayout)(this.lines,v);(0,b.reflowLargerApplyNewLayout)(this.lines,S.layout),this._reflowLargerAdjustViewport(o,l,S.countRemoved)}}_reflowLargerAdjustViewport(o,l,v){const S=this.getNullCell(g.DEFAULT_ATTR_DATA);let x=v;for(;x-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<l&&this.lines.push(new g.BufferLine(o,S))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-v,0)}_reflowSmaller(o,l){const v=this.getNullCell(g.DEFAULT_ATTR_DATA),S=[];let x=0;for(let k=this.lines.length-1;k>=0;k--){let C=this.lines.get(k);if(!C||!C.isWrapped&&C.getTrimmedLength()<=o)continue;const A=[C];for(;C.isWrapped&&k>0;)C=this.lines.get(--k),A.unshift(C);const N=this.ybase+this.y;if(N>=k&&N<k+A.length)continue;const G=A[A.length-1].getTrimmedLength(),L=(0,b.reflowSmallerGetNewLineLengths)(A,this._cols,o),I=L.length-A.length;let E;E=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+I):Math.max(0,this.lines.length-this.lines.maxLength+I);const X=[];for(let M=0;M<I;M++){const $=this.getBlankLine(g.DEFAULT_ATTR_DATA,!0);X.push($)}X.length>0&&(S.push({start:k+A.length+x,newLines:X}),x+=X.length),A.push(...X);let Q=L.length-1,J=L[Q];J===0&&(Q--,J=L[Q]);let ie=A.length-I-1,T=G;for(;ie>=0;){const M=Math.min(T,J);if(A[Q]===void 0)break;if(A[Q].copyCellsFrom(A[ie],T-M,J-M,M,!0),J-=M,J===0&&(Q--,J=L[Q]),T-=M,T===0){ie--;const $=Math.max(ie,0);T=(0,b.getWrappedLineTrimmedLength)(A,$,this._cols)}}for(let M=0;M<A.length;M++)L[M]<o&&A[M].setCell(L[M],v);let U=I-E;for(;U-- >0;)this.ybase===0?this.y<l-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+x)-l&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+I,this.ybase+l-1)}if(S.length>0){const k=[],C=[];for(let Q=0;Q<this.lines.length;Q++)C.push(this.lines.get(Q));const A=this.lines.length;let N=A-1,G=0,L=S[G];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+x);let I=0;for(let Q=Math.min(this.lines.maxLength-1,A+x-1);Q>=0;Q--)if(L&&L.start>N+I){for(let J=L.newLines.length-1;J>=0;J--)this.lines.set(Q--,L.newLines[J]);Q++,k.push({index:N+1,amount:L.newLines.length}),I+=L.newLines.length,L=S[++G]}else this.lines.set(Q,C[N--]);let E=0;for(let Q=k.length-1;Q>=0;Q--)k[Q].index+=E,this.lines.onInsertEmitter.fire(k[Q]),E+=k[Q].amount;const X=Math.max(0,A+x-this.lines.maxLength);X>0&&this.lines.onTrimEmitter.fire(X)}}translateBufferLineToString(o,l,v=0,S){const x=this.lines.get(o);return x?x.translateToString(l,v,S):""}getWrappedRangeForLine(o){let l=o,v=o;for(;l>0&&this.lines.get(l).isWrapped;)l--;for(;v+1<this.lines.length&&this.lines.get(v+1).isWrapped;)v++;return{first:l,last:v}}setupTabStops(o){for(o!=null?this.tabs[o]||(o=this.prevStop(o)):(this.tabs={},o=0);o<this._cols;o+=this._optionsService.rawOptions.tabStopWidth)this.tabs[o]=!0}prevStop(o){for(o==null&&(o=this.x);!this.tabs[--o]&&o>0;);return o>=this._cols?this._cols-1:o<0?0:o}nextStop(o){for(o==null&&(o=this.x);!this.tabs[++o]&&o<this._cols;);return o>=this._cols?this._cols-1:o<0?0:o}clearMarkers(o){this._isClearing=!0;for(let l=0;l<this.markers.length;l++)this.markers[l].line===o&&(this.markers[l].dispose(),this.markers.splice(l--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let o=0;o<this.markers.length;o++)this.markers[o].dispose(),this.markers.splice(o--,1);this._isClearing=!1}addMarker(o){const l=new c.Marker(o);return this.markers.push(l),l.register(this.lines.onTrim((v=>{l.line-=v,l.line<0&&l.dispose()}))),l.register(this.lines.onInsert((v=>{l.line>=v.index&&(l.line+=v.amount)}))),l.register(this.lines.onDelete((v=>{l.line>=v.index&&l.line<v.index+v.amount&&l.dispose(),l.line>v.index&&(l.line-=v.amount)}))),l.register(l.onDispose((()=>this._removeMarker(l)))),l}_removeMarker(o){this._isClearing||this.markers.splice(this.markers.indexOf(o),1)}}},8437:(f,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.BufferLine=r.DEFAULT_ATTR_DATA=void 0;const p=n(3734),_=n(511),d=n(643),g=n(482);r.DEFAULT_ATTR_DATA=Object.freeze(new p.AttributeData);let b=0;class w{constructor(c,h,o=!1){this.isWrapped=o,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*c);const l=h||_.CellData.fromCharData([0,d.NULL_CELL_CHAR,d.NULL_CELL_WIDTH,d.NULL_CELL_CODE]);for(let v=0;v<c;++v)this.setCell(v,l);this.length=c}get(c){const h=this._data[3*c+0],o=2097151&h;return[this._data[3*c+1],2097152&h?this._combined[c]:o?(0,g.stringFromCodePoint)(o):"",h>>22,2097152&h?this._combined[c].charCodeAt(this._combined[c].length-1):o]}set(c,h){this._data[3*c+1]=h[d.CHAR_DATA_ATTR_INDEX],h[d.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[c]=h[1],this._data[3*c+0]=2097152|c|h[d.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*c+0]=h[d.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|h[d.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(c){return this._data[3*c+0]>>22}hasWidth(c){return 12582912&this._data[3*c+0]}getFg(c){return this._data[3*c+1]}getBg(c){return this._data[3*c+2]}hasContent(c){return 4194303&this._data[3*c+0]}getCodePoint(c){const h=this._data[3*c+0];return 2097152&h?this._combined[c].charCodeAt(this._combined[c].length-1):2097151&h}isCombined(c){return 2097152&this._data[3*c+0]}getString(c){const h=this._data[3*c+0];return 2097152&h?this._combined[c]:2097151&h?(0,g.stringFromCodePoint)(2097151&h):""}isProtected(c){return 536870912&this._data[3*c+2]}loadCell(c,h){return b=3*c,h.content=this._data[b+0],h.fg=this._data[b+1],h.bg=this._data[b+2],2097152&h.content&&(h.combinedData=this._combined[c]),268435456&h.bg&&(h.extended=this._extendedAttrs[c]),h}setCell(c,h){2097152&h.content&&(this._combined[c]=h.combinedData),268435456&h.bg&&(this._extendedAttrs[c]=h.extended),this._data[3*c+0]=h.content,this._data[3*c+1]=h.fg,this._data[3*c+2]=h.bg}setCellFromCodepoint(c,h,o,l){268435456&l.bg&&(this._extendedAttrs[c]=l.extended),this._data[3*c+0]=h|o<<22,this._data[3*c+1]=l.fg,this._data[3*c+2]=l.bg}addCodepointToCell(c,h,o){let l=this._data[3*c+0];2097152&l?this._combined[c]+=(0,g.stringFromCodePoint)(h):2097151&l?(this._combined[c]=(0,g.stringFromCodePoint)(2097151&l)+(0,g.stringFromCodePoint)(h),l&=-2097152,l|=2097152):l=h|4194304,o&&(l&=-12582913,l|=o<<22),this._data[3*c+0]=l}insertCells(c,h,o){if((c%=this.length)&&this.getWidth(c-1)===2&&this.setCellFromCodepoint(c-1,0,1,o),h<this.length-c){const l=new _.CellData;for(let v=this.length-c-h-1;v>=0;--v)this.setCell(c+h+v,this.loadCell(c+v,l));for(let v=0;v<h;++v)this.setCell(c+v,o)}else for(let l=c;l<this.length;++l)this.setCell(l,o);this.getWidth(this.length-1)===2&&this.setCellFromCodepoint(this.length-1,0,1,o)}deleteCells(c,h,o){if(c%=this.length,h<this.length-c){const l=new _.CellData;for(let v=0;v<this.length-c-h;++v)this.setCell(c+v,this.loadCell(c+h+v,l));for(let v=this.length-h;v<this.length;++v)this.setCell(v,o)}else for(let l=c;l<this.length;++l)this.setCell(l,o);c&&this.getWidth(c-1)===2&&this.setCellFromCodepoint(c-1,0,1,o),this.getWidth(c)!==0||this.hasContent(c)||this.setCellFromCodepoint(c,0,1,o)}replaceCells(c,h,o,l=!1){if(l)for(c&&this.getWidth(c-1)===2&&!this.isProtected(c-1)&&this.setCellFromCodepoint(c-1,0,1,o),h<this.length&&this.getWidth(h-1)===2&&!this.isProtected(h)&&this.setCellFromCodepoint(h,0,1,o);c<h&&c<this.length;)this.isProtected(c)||this.setCell(c,o),c++;else for(c&&this.getWidth(c-1)===2&&this.setCellFromCodepoint(c-1,0,1,o),h<this.length&&this.getWidth(h-1)===2&&this.setCellFromCodepoint(h,0,1,o);c<h&&c<this.length;)this.setCell(c++,o)}resize(c,h){if(c===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;const o=3*c;if(c>this.length){if(this._data.buffer.byteLength>=4*o)this._data=new Uint32Array(this._data.buffer,0,o);else{const l=new Uint32Array(o);l.set(this._data),this._data=l}for(let l=this.length;l<c;++l)this.setCell(l,h)}else{this._data=this._data.subarray(0,o);const l=Object.keys(this._combined);for(let S=0;S<l.length;S++){const x=parseInt(l[S],10);x>=c&&delete this._combined[x]}const v=Object.keys(this._extendedAttrs);for(let S=0;S<v.length;S++){const x=parseInt(v[S],10);x>=c&&delete this._extendedAttrs[x]}}return this.length=c,4*o*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){const c=new Uint32Array(this._data.length);return c.set(this._data),this._data=c,1}return 0}fill(c,h=!1){if(h)for(let o=0;o<this.length;++o)this.isProtected(o)||this.setCell(o,c);else{this._combined={},this._extendedAttrs={};for(let o=0;o<this.length;++o)this.setCell(o,c)}}copyFrom(c){this.length!==c.length?this._data=new Uint32Array(c._data):this._data.set(c._data),this.length=c.length,this._combined={};for(const h in c._combined)this._combined[h]=c._combined[h];this._extendedAttrs={};for(const h in c._extendedAttrs)this._extendedAttrs[h]=c._extendedAttrs[h];this.isWrapped=c.isWrapped}clone(){const c=new w(0);c._data=new Uint32Array(this._data),c.length=this.length;for(const h in this._combined)c._combined[h]=this._combined[h];for(const h in this._extendedAttrs)c._extendedAttrs[h]=this._extendedAttrs[h];return c.isWrapped=this.isWrapped,c}getTrimmedLength(){for(let c=this.length-1;c>=0;--c)if(4194303&this._data[3*c+0])return c+(this._data[3*c+0]>>22);return 0}getNoBgTrimmedLength(){for(let c=this.length-1;c>=0;--c)if(4194303&this._data[3*c+0]||50331648&this._data[3*c+2])return c+(this._data[3*c+0]>>22);return 0}copyCellsFrom(c,h,o,l,v){const S=c._data;if(v)for(let k=l-1;k>=0;k--){for(let C=0;C<3;C++)this._data[3*(o+k)+C]=S[3*(h+k)+C];268435456&S[3*(h+k)+2]&&(this._extendedAttrs[o+k]=c._extendedAttrs[h+k])}else for(let k=0;k<l;k++){for(let C=0;C<3;C++)this._data[3*(o+k)+C]=S[3*(h+k)+C];268435456&S[3*(h+k)+2]&&(this._extendedAttrs[o+k]=c._extendedAttrs[h+k])}const x=Object.keys(c._combined);for(let k=0;k<x.length;k++){const C=parseInt(x[k],10);C>=h&&(this._combined[C-h+o]=c._combined[C])}}translateToString(c,h,o,l){h=h??0,o=o??this.length,c&&(o=Math.min(o,this.getTrimmedLength())),l&&(l.length=0);let v="";for(;h<o;){const S=this._data[3*h+0],x=2097151&S,k=2097152&S?this._combined[h]:x?(0,g.stringFromCodePoint)(x):d.WHITESPACE_CELL_CHAR;if(v+=k,l)for(let C=0;C<k.length;++C)l.push(h);h+=S>>22||1}return l&&l.push(h),v}}r.BufferLine=w},4841:(f,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.getRangeLength=void 0,r.getRangeLength=function(n,p){if(n.start.y>n.end.y)throw new Error(`Buffer range end (${n.end.x}, ${n.end.y}) cannot be before start (${n.start.x}, ${n.start.y})`);return p*(n.end.y-n.start.y)+(n.end.x-n.start.x+1)}},4634:(f,r)=>{function n(p,_,d){if(_===p.length-1)return p[_].getTrimmedLength();const g=!p[_].hasContent(d-1)&&p[_].getWidth(d-1)===1,b=p[_+1].getWidth(0)===2;return g&&b?d-1:d}Object.defineProperty(r,"__esModule",{value:!0}),r.getWrappedLineTrimmedLength=r.reflowSmallerGetNewLineLengths=r.reflowLargerApplyNewLayout=r.reflowLargerCreateNewLayout=r.reflowLargerGetLinesToRemove=void 0,r.reflowLargerGetLinesToRemove=function(p,_,d,g,b){const w=[];for(let m=0;m<p.length-1;m++){let c=m,h=p.get(++c);if(!h.isWrapped)continue;const o=[p.get(m)];for(;c<p.length&&h.isWrapped;)o.push(h),h=p.get(++c);if(g>=m&&g<c){m+=o.length-1;continue}let l=0,v=n(o,l,_),S=1,x=0;for(;S<o.length;){const C=n(o,S,_),A=C-x,N=d-v,G=Math.min(A,N);o[l].copyCellsFrom(o[S],x,v,G,!1),v+=G,v===d&&(l++,v=0),x+=G,x===C&&(S++,x=0),v===0&&l!==0&&o[l-1].getWidth(d-1)===2&&(o[l].copyCellsFrom(o[l-1],d-1,v++,1,!1),o[l-1].setCell(d-1,b))}o[l].replaceCells(v,d,b);let k=0;for(let C=o.length-1;C>0&&(C>l||o[C].getTrimmedLength()===0);C--)k++;k>0&&(w.push(m+o.length-k),w.push(k)),m+=o.length-1}return w},r.reflowLargerCreateNewLayout=function(p,_){const d=[];let g=0,b=_[g],w=0;for(let m=0;m<p.length;m++)if(b===m){const c=_[++g];p.onDeleteEmitter.fire({index:m-w,amount:c}),m+=c-1,w+=c,b=_[++g]}else d.push(m);return{layout:d,countRemoved:w}},r.reflowLargerApplyNewLayout=function(p,_){const d=[];for(let g=0;g<_.length;g++)d.push(p.get(_[g]));for(let g=0;g<d.length;g++)p.set(g,d[g]);p.length=_.length},r.reflowSmallerGetNewLineLengths=function(p,_,d){const g=[],b=p.map(((h,o)=>n(p,o,_))).reduce(((h,o)=>h+o));let w=0,m=0,c=0;for(;c<b;){if(b-c<d){g.push(b-c);break}w+=d;const h=n(p,m,_);w>h&&(w-=h,m++);const o=p[m].getWidth(w-1)===2;o&&w--;const l=o?d-1:d;g.push(l),c+=l}return g},r.getWrappedLineTrimmedLength=n},5295:(f,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.BufferSet=void 0;const p=n(8460),_=n(844),d=n(9092);class g extends _.Disposable{constructor(w,m){super(),this._optionsService=w,this._bufferService=m,this._onBufferActivate=this.register(new p.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",(()=>this.resize(this._bufferService.cols,this._bufferService.rows)))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",(()=>this.setupTabStops())))}reset(){this._normal=new d.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new d.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(w){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(w),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(w,m){this._normal.resize(w,m),this._alt.resize(w,m),this.setupTabStops(w)}setupTabStops(w){this._normal.setupTabStops(w),this._alt.setupTabStops(w)}}r.BufferSet=g},511:(f,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.CellData=void 0;const p=n(482),_=n(643),d=n(3734);class g extends d.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new d.ExtendedAttrs,this.combinedData=""}static fromCharData(w){const m=new g;return m.setFromCharData(w),m}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,p.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(w){this.fg=w[_.CHAR_DATA_ATTR_INDEX],this.bg=0;let m=!1;if(w[_.CHAR_DATA_CHAR_INDEX].length>2)m=!0;else if(w[_.CHAR_DATA_CHAR_INDEX].length===2){const c=w[_.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=c&&c<=56319){const h=w[_.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=h&&h<=57343?this.content=1024*(c-55296)+h-56320+65536|w[_.CHAR_DATA_WIDTH_INDEX]<<22:m=!0}else m=!0}else this.content=w[_.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|w[_.CHAR_DATA_WIDTH_INDEX]<<22;m&&(this.combinedData=w[_.CHAR_DATA_CHAR_INDEX],this.content=2097152|w[_.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}r.CellData=g},643:(f,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.WHITESPACE_CELL_CODE=r.WHITESPACE_CELL_WIDTH=r.WHITESPACE_CELL_CHAR=r.NULL_CELL_CODE=r.NULL_CELL_WIDTH=r.NULL_CELL_CHAR=r.CHAR_DATA_CODE_INDEX=r.CHAR_DATA_WIDTH_INDEX=r.CHAR_DATA_CHAR_INDEX=r.CHAR_DATA_ATTR_INDEX=r.DEFAULT_EXT=r.DEFAULT_ATTR=r.DEFAULT_COLOR=void 0,r.DEFAULT_COLOR=0,r.DEFAULT_ATTR=256|r.DEFAULT_COLOR<<9,r.DEFAULT_EXT=0,r.CHAR_DATA_ATTR_INDEX=0,r.CHAR_DATA_CHAR_INDEX=1,r.CHAR_DATA_WIDTH_INDEX=2,r.CHAR_DATA_CODE_INDEX=3,r.NULL_CELL_CHAR="",r.NULL_CELL_WIDTH=1,r.NULL_CELL_CODE=0,r.WHITESPACE_CELL_CHAR=" ",r.WHITESPACE_CELL_WIDTH=1,r.WHITESPACE_CELL_CODE=32},4863:(f,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.Marker=void 0;const p=n(8460),_=n(844);class d{get id(){return this._id}constructor(b){this.line=b,this.isDisposed=!1,this._disposables=[],this._id=d._nextId++,this._onDispose=this.register(new p.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,_.disposeArray)(this._disposables),this._disposables.length=0)}register(b){return this._disposables.push(b),b}}r.Marker=d,d._nextId=1},7116:(f,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.DEFAULT_CHARSET=r.CHARSETS=void 0,r.CHARSETS={},r.DEFAULT_CHARSET=r.CHARSETS.B,r.CHARSETS[0]={"`":"",a:"",b:"",c:"",d:"",e:"",f:"",g:"",h:"",i:"",j:"",k:"",l:"",m:"",n:"",o:"",p:"",q:"",r:"",s:"",t:"",u:"",v:"",w:"",x:"",y:"",z:"","{":"","|":"","}":"","~":""},r.CHARSETS.A={"#":""},r.CHARSETS.B=void 0,r.CHARSETS[4]={"#":"","@":"","[":"ij","\\":"","]":"|","{":"","|":"f","}":"","~":""},r.CHARSETS.C=r.CHARSETS[5]={"[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},r.CHARSETS.R={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""},r.CHARSETS.Q={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},r.CHARSETS.K={"@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""},r.CHARSETS.Y={"#":"","@":"","[":"","\\":"","]":"","`":"","{":"","|":"","}":"","~":""},r.CHARSETS.E=r.CHARSETS[6]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},r.CHARSETS.Z={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":""},r.CHARSETS.H=r.CHARSETS[7]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},r.CHARSETS["="]={"#":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":""}},2584:(f,r)=>{var n,p,_;Object.defineProperty(r,"__esModule",{value:!0}),r.C1_ESCAPED=r.C1=r.C0=void 0,(function(d){d.NUL="\0",d.SOH="",d.STX="",d.ETX="",d.EOT="",d.ENQ="",d.ACK="",d.BEL="\x07",d.BS="\b",d.HT="	",d.LF=`
`,d.VT="\v",d.FF="\f",d.CR="\r",d.SO="",d.SI="",d.DLE="",d.DC1="",d.DC2="",d.DC3="",d.DC4="",d.NAK="",d.SYN="",d.ETB="",d.CAN="",d.EM="",d.SUB="",d.ESC="\x1B",d.FS="",d.GS="",d.RS="",d.US="",d.SP=" ",d.DEL=""})(n||(r.C0=n={})),(function(d){d.PAD="",d.HOP="",d.BPH="",d.NBH="",d.IND="",d.NEL="",d.SSA="",d.ESA="",d.HTS="",d.HTJ="",d.VTS="",d.PLD="",d.PLU="",d.RI="",d.SS2="",d.SS3="",d.DCS="",d.PU1="",d.PU2="",d.STS="",d.CCH="",d.MW="",d.SPA="",d.EPA="",d.SOS="",d.SGCI="",d.SCI="",d.CSI="",d.ST="",d.OSC="",d.PM="",d.APC=""})(p||(r.C1=p={})),(function(d){d.ST=`${n.ESC}\\`})(_||(r.C1_ESCAPED=_={}))},7399:(f,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.evaluateKeyboardEvent=void 0;const p=n(2584),_={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};r.evaluateKeyboardEvent=function(d,g,b,w){const m={type:0,cancel:!1,key:void 0},c=(d.shiftKey?1:0)|(d.altKey?2:0)|(d.ctrlKey?4:0)|(d.metaKey?8:0);switch(d.keyCode){case 0:d.key==="UIKeyInputUpArrow"?m.key=g?p.C0.ESC+"OA":p.C0.ESC+"[A":d.key==="UIKeyInputLeftArrow"?m.key=g?p.C0.ESC+"OD":p.C0.ESC+"[D":d.key==="UIKeyInputRightArrow"?m.key=g?p.C0.ESC+"OC":p.C0.ESC+"[C":d.key==="UIKeyInputDownArrow"&&(m.key=g?p.C0.ESC+"OB":p.C0.ESC+"[B");break;case 8:m.key=d.ctrlKey?"\b":p.C0.DEL,d.altKey&&(m.key=p.C0.ESC+m.key);break;case 9:if(d.shiftKey){m.key=p.C0.ESC+"[Z";break}m.key=p.C0.HT,m.cancel=!0;break;case 13:m.key=d.altKey?p.C0.ESC+p.C0.CR:p.C0.CR,m.cancel=!0;break;case 27:m.key=p.C0.ESC,d.altKey&&(m.key=p.C0.ESC+p.C0.ESC),m.cancel=!0;break;case 37:if(d.metaKey)break;c?(m.key=p.C0.ESC+"[1;"+(c+1)+"D",m.key===p.C0.ESC+"[1;3D"&&(m.key=p.C0.ESC+(b?"b":"[1;5D"))):m.key=g?p.C0.ESC+"OD":p.C0.ESC+"[D";break;case 39:if(d.metaKey)break;c?(m.key=p.C0.ESC+"[1;"+(c+1)+"C",m.key===p.C0.ESC+"[1;3C"&&(m.key=p.C0.ESC+(b?"f":"[1;5C"))):m.key=g?p.C0.ESC+"OC":p.C0.ESC+"[C";break;case 38:if(d.metaKey)break;c?(m.key=p.C0.ESC+"[1;"+(c+1)+"A",b||m.key!==p.C0.ESC+"[1;3A"||(m.key=p.C0.ESC+"[1;5A")):m.key=g?p.C0.ESC+"OA":p.C0.ESC+"[A";break;case 40:if(d.metaKey)break;c?(m.key=p.C0.ESC+"[1;"+(c+1)+"B",b||m.key!==p.C0.ESC+"[1;3B"||(m.key=p.C0.ESC+"[1;5B")):m.key=g?p.C0.ESC+"OB":p.C0.ESC+"[B";break;case 45:d.shiftKey||d.ctrlKey||(m.key=p.C0.ESC+"[2~");break;case 46:m.key=c?p.C0.ESC+"[3;"+(c+1)+"~":p.C0.ESC+"[3~";break;case 36:m.key=c?p.C0.ESC+"[1;"+(c+1)+"H":g?p.C0.ESC+"OH":p.C0.ESC+"[H";break;case 35:m.key=c?p.C0.ESC+"[1;"+(c+1)+"F":g?p.C0.ESC+"OF":p.C0.ESC+"[F";break;case 33:d.shiftKey?m.type=2:d.ctrlKey?m.key=p.C0.ESC+"[5;"+(c+1)+"~":m.key=p.C0.ESC+"[5~";break;case 34:d.shiftKey?m.type=3:d.ctrlKey?m.key=p.C0.ESC+"[6;"+(c+1)+"~":m.key=p.C0.ESC+"[6~";break;case 112:m.key=c?p.C0.ESC+"[1;"+(c+1)+"P":p.C0.ESC+"OP";break;case 113:m.key=c?p.C0.ESC+"[1;"+(c+1)+"Q":p.C0.ESC+"OQ";break;case 114:m.key=c?p.C0.ESC+"[1;"+(c+1)+"R":p.C0.ESC+"OR";break;case 115:m.key=c?p.C0.ESC+"[1;"+(c+1)+"S":p.C0.ESC+"OS";break;case 116:m.key=c?p.C0.ESC+"[15;"+(c+1)+"~":p.C0.ESC+"[15~";break;case 117:m.key=c?p.C0.ESC+"[17;"+(c+1)+"~":p.C0.ESC+"[17~";break;case 118:m.key=c?p.C0.ESC+"[18;"+(c+1)+"~":p.C0.ESC+"[18~";break;case 119:m.key=c?p.C0.ESC+"[19;"+(c+1)+"~":p.C0.ESC+"[19~";break;case 120:m.key=c?p.C0.ESC+"[20;"+(c+1)+"~":p.C0.ESC+"[20~";break;case 121:m.key=c?p.C0.ESC+"[21;"+(c+1)+"~":p.C0.ESC+"[21~";break;case 122:m.key=c?p.C0.ESC+"[23;"+(c+1)+"~":p.C0.ESC+"[23~";break;case 123:m.key=c?p.C0.ESC+"[24;"+(c+1)+"~":p.C0.ESC+"[24~";break;default:if(!d.ctrlKey||d.shiftKey||d.altKey||d.metaKey)if(b&&!w||!d.altKey||d.metaKey)!b||d.altKey||d.ctrlKey||d.shiftKey||!d.metaKey?d.key&&!d.ctrlKey&&!d.altKey&&!d.metaKey&&d.keyCode>=48&&d.key.length===1?m.key=d.key:d.key&&d.ctrlKey&&(d.key==="_"&&(m.key=p.C0.US),d.key==="@"&&(m.key=p.C0.NUL)):d.keyCode===65&&(m.type=1);else{const h=_[d.keyCode],o=h==null?void 0:h[d.shiftKey?1:0];if(o)m.key=p.C0.ESC+o;else if(d.keyCode>=65&&d.keyCode<=90){const l=d.ctrlKey?d.keyCode-64:d.keyCode+32;let v=String.fromCharCode(l);d.shiftKey&&(v=v.toUpperCase()),m.key=p.C0.ESC+v}else if(d.keyCode===32)m.key=p.C0.ESC+(d.ctrlKey?p.C0.NUL:" ");else if(d.key==="Dead"&&d.code.startsWith("Key")){let l=d.code.slice(3,4);d.shiftKey||(l=l.toLowerCase()),m.key=p.C0.ESC+l,m.cancel=!0}}else d.keyCode>=65&&d.keyCode<=90?m.key=String.fromCharCode(d.keyCode-64):d.keyCode===32?m.key=p.C0.NUL:d.keyCode>=51&&d.keyCode<=55?m.key=String.fromCharCode(d.keyCode-51+27):d.keyCode===56?m.key=p.C0.DEL:d.keyCode===219?m.key=p.C0.ESC:d.keyCode===220?m.key=p.C0.FS:d.keyCode===221&&(m.key=p.C0.GS)}return m}},482:(f,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.Utf8ToUtf32=r.StringToUtf32=r.utf32ToString=r.stringFromCodePoint=void 0,r.stringFromCodePoint=function(n){return n>65535?(n-=65536,String.fromCharCode(55296+(n>>10))+String.fromCharCode(n%1024+56320)):String.fromCharCode(n)},r.utf32ToString=function(n,p=0,_=n.length){let d="";for(let g=p;g<_;++g){let b=n[g];b>65535?(b-=65536,d+=String.fromCharCode(55296+(b>>10))+String.fromCharCode(b%1024+56320)):d+=String.fromCharCode(b)}return d},r.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(n,p){const _=n.length;if(!_)return 0;let d=0,g=0;if(this._interim){const b=n.charCodeAt(g++);56320<=b&&b<=57343?p[d++]=1024*(this._interim-55296)+b-56320+65536:(p[d++]=this._interim,p[d++]=b),this._interim=0}for(let b=g;b<_;++b){const w=n.charCodeAt(b);if(55296<=w&&w<=56319){if(++b>=_)return this._interim=w,d;const m=n.charCodeAt(b);56320<=m&&m<=57343?p[d++]=1024*(w-55296)+m-56320+65536:(p[d++]=w,p[d++]=m)}else w!==65279&&(p[d++]=w)}return d}},r.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(n,p){const _=n.length;if(!_)return 0;let d,g,b,w,m=0,c=0,h=0;if(this.interim[0]){let v=!1,S=this.interim[0];S&=(224&S)==192?31:(240&S)==224?15:7;let x,k=0;for(;(x=63&this.interim[++k])&&k<4;)S<<=6,S|=x;const C=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,A=C-k;for(;h<A;){if(h>=_)return 0;if(x=n[h++],(192&x)!=128){h--,v=!0;break}this.interim[k++]=x,S<<=6,S|=63&x}v||(C===2?S<128?h--:p[m++]=S:C===3?S<2048||S>=55296&&S<=57343||S===65279||(p[m++]=S):S<65536||S>1114111||(p[m++]=S)),this.interim.fill(0)}const o=_-4;let l=h;for(;l<_;){for(;!(!(l<o)||128&(d=n[l])||128&(g=n[l+1])||128&(b=n[l+2])||128&(w=n[l+3]));)p[m++]=d,p[m++]=g,p[m++]=b,p[m++]=w,l+=4;if(d=n[l++],d<128)p[m++]=d;else if((224&d)==192){if(l>=_)return this.interim[0]=d,m;if(g=n[l++],(192&g)!=128){l--;continue}if(c=(31&d)<<6|63&g,c<128){l--;continue}p[m++]=c}else if((240&d)==224){if(l>=_)return this.interim[0]=d,m;if(g=n[l++],(192&g)!=128){l--;continue}if(l>=_)return this.interim[0]=d,this.interim[1]=g,m;if(b=n[l++],(192&b)!=128){l--;continue}if(c=(15&d)<<12|(63&g)<<6|63&b,c<2048||c>=55296&&c<=57343||c===65279)continue;p[m++]=c}else if((248&d)==240){if(l>=_)return this.interim[0]=d,m;if(g=n[l++],(192&g)!=128){l--;continue}if(l>=_)return this.interim[0]=d,this.interim[1]=g,m;if(b=n[l++],(192&b)!=128){l--;continue}if(l>=_)return this.interim[0]=d,this.interim[1]=g,this.interim[2]=b,m;if(w=n[l++],(192&w)!=128){l--;continue}if(c=(7&d)<<18|(63&g)<<12|(63&b)<<6|63&w,c<65536||c>1114111)continue;p[m++]=c}}return m}}},225:(f,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.UnicodeV6=void 0;const p=n(1480),_=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],d=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]];let g;r.UnicodeV6=class{constructor(){if(this.version="6",!g){g=new Uint8Array(65536),g.fill(1),g[0]=0,g.fill(0,1,32),g.fill(0,127,160),g.fill(2,4352,4448),g[9001]=2,g[9002]=2,g.fill(2,11904,42192),g[12351]=1,g.fill(2,44032,55204),g.fill(2,63744,64256),g.fill(2,65040,65050),g.fill(2,65072,65136),g.fill(2,65280,65377),g.fill(2,65504,65511);for(let b=0;b<_.length;++b)g.fill(0,_[b][0],_[b][1]+1)}}wcwidth(b){return b<32?0:b<127?1:b<65536?g[b]:(function(w,m){let c,h=0,o=m.length-1;if(w<m[0][0]||w>m[o][1])return!1;for(;o>=h;)if(c=h+o>>1,w>m[c][1])h=c+1;else{if(!(w<m[c][0]))return!0;o=c-1}return!1})(b,d)?0:b>=131072&&b<=196605||b>=196608&&b<=262141?2:1}charProperties(b,w){let m=this.wcwidth(b),c=m===0&&w!==0;if(c){const h=p.UnicodeService.extractWidth(w);h===0?c=!1:h>m&&(m=h)}return p.UnicodeService.createPropertyValue(0,m,c)}}},5981:(f,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.WriteBuffer=void 0;const p=n(8460),_=n(844);class d extends _.Disposable{constructor(b){super(),this._action=b,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new p.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(b,w){if(w!==void 0&&this._syncCalls>w)return void(this._syncCalls=0);if(this._pendingData+=b.length,this._writeBuffer.push(b),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let m;for(this._isSyncWriting=!0;m=this._writeBuffer.shift();){this._action(m);const c=this._callbacks.shift();c&&c()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(b,w){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=b.length,this._writeBuffer.push(b),this._callbacks.push(w),void this._innerWrite();setTimeout((()=>this._innerWrite()))}this._pendingData+=b.length,this._writeBuffer.push(b),this._callbacks.push(w)}_innerWrite(b=0,w=!0){const m=b||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){const c=this._writeBuffer[this._bufferOffset],h=this._action(c,w);if(h){const l=v=>Date.now()-m>=12?setTimeout((()=>this._innerWrite(0,v))):this._innerWrite(m,v);return void h.catch((v=>(queueMicrotask((()=>{throw v})),Promise.resolve(!1)))).then(l)}const o=this._callbacks[this._bufferOffset];if(o&&o(),this._bufferOffset++,this._pendingData-=c.length,Date.now()-m>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout((()=>this._innerWrite()))):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}r.WriteBuffer=d},5941:(f,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.toRgbString=r.parseColor=void 0;const n=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,p=/^[\da-f]+$/;function _(d,g){const b=d.toString(16),w=b.length<2?"0"+b:b;switch(g){case 4:return b[0];case 8:return w;case 12:return(w+w).slice(0,3);default:return w+w}}r.parseColor=function(d){if(!d)return;let g=d.toLowerCase();if(g.indexOf("rgb:")===0){g=g.slice(4);const b=n.exec(g);if(b){const w=b[1]?15:b[4]?255:b[7]?4095:65535;return[Math.round(parseInt(b[1]||b[4]||b[7]||b[10],16)/w*255),Math.round(parseInt(b[2]||b[5]||b[8]||b[11],16)/w*255),Math.round(parseInt(b[3]||b[6]||b[9]||b[12],16)/w*255)]}}else if(g.indexOf("#")===0&&(g=g.slice(1),p.exec(g)&&[3,6,9,12].includes(g.length))){const b=g.length/3,w=[0,0,0];for(let m=0;m<3;++m){const c=parseInt(g.slice(b*m,b*m+b),16);w[m]=b===1?c<<4:b===2?c:b===3?c>>4:c>>8}return w}},r.toRgbString=function(d,g=16){const[b,w,m]=d;return`rgb:${_(b,g)}/${_(w,g)}/${_(m,g)}`}},5770:(f,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.PAYLOAD_LIMIT=void 0,r.PAYLOAD_LIMIT=1e7},6351:(f,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.DcsHandler=r.DcsParser=void 0;const p=n(482),_=n(8742),d=n(5770),g=[];r.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=g,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=g}registerHandler(w,m){this._handlers[w]===void 0&&(this._handlers[w]=[]);const c=this._handlers[w];return c.push(m),{dispose:()=>{const h=c.indexOf(m);h!==-1&&c.splice(h,1)}}}clearHandler(w){this._handlers[w]&&delete this._handlers[w]}setHandlerFallback(w){this._handlerFb=w}reset(){if(this._active.length)for(let w=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;w>=0;--w)this._active[w].unhook(!1);this._stack.paused=!1,this._active=g,this._ident=0}hook(w,m){if(this.reset(),this._ident=w,this._active=this._handlers[w]||g,this._active.length)for(let c=this._active.length-1;c>=0;c--)this._active[c].hook(m);else this._handlerFb(this._ident,"HOOK",m)}put(w,m,c){if(this._active.length)for(let h=this._active.length-1;h>=0;h--)this._active[h].put(w,m,c);else this._handlerFb(this._ident,"PUT",(0,p.utf32ToString)(w,m,c))}unhook(w,m=!0){if(this._active.length){let c=!1,h=this._active.length-1,o=!1;if(this._stack.paused&&(h=this._stack.loopPosition-1,c=m,o=this._stack.fallThrough,this._stack.paused=!1),!o&&c===!1){for(;h>=0&&(c=this._active[h].unhook(w),c!==!0);h--)if(c instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=h,this._stack.fallThrough=!1,c;h--}for(;h>=0;h--)if(c=this._active[h].unhook(!1),c instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=h,this._stack.fallThrough=!0,c}else this._handlerFb(this._ident,"UNHOOK",w);this._active=g,this._ident=0}};const b=new _.Params;b.addParam(0),r.DcsHandler=class{constructor(w){this._handler=w,this._data="",this._params=b,this._hitLimit=!1}hook(w){this._params=w.length>1||w.params[0]?w.clone():b,this._data="",this._hitLimit=!1}put(w,m,c){this._hitLimit||(this._data+=(0,p.utf32ToString)(w,m,c),this._data.length>d.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(w){let m=!1;if(this._hitLimit)m=!1;else if(w&&(m=this._handler(this._data,this._params),m instanceof Promise))return m.then((c=>(this._params=b,this._data="",this._hitLimit=!1,c)));return this._params=b,this._data="",this._hitLimit=!1,m}}},2015:(f,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.EscapeSequenceParser=r.VT500_TRANSITION_TABLE=r.TransitionTable=void 0;const p=n(844),_=n(8742),d=n(6242),g=n(6351);class b{constructor(h){this.table=new Uint8Array(h)}setDefault(h,o){this.table.fill(h<<4|o)}add(h,o,l,v){this.table[o<<8|h]=l<<4|v}addMany(h,o,l,v){for(let S=0;S<h.length;S++)this.table[o<<8|h[S]]=l<<4|v}}r.TransitionTable=b;const w=160;r.VT500_TRANSITION_TABLE=(function(){const c=new b(4095),h=Array.apply(null,Array(256)).map(((k,C)=>C)),o=(k,C)=>h.slice(k,C),l=o(32,127),v=o(0,24);v.push(25),v.push.apply(v,o(28,32));const S=o(0,14);let x;for(x in c.setDefault(1,0),c.addMany(l,0,2,0),S)c.addMany([24,26,153,154],x,3,0),c.addMany(o(128,144),x,3,0),c.addMany(o(144,152),x,3,0),c.add(156,x,0,0),c.add(27,x,11,1),c.add(157,x,4,8),c.addMany([152,158,159],x,0,7),c.add(155,x,11,3),c.add(144,x,11,9);return c.addMany(v,0,3,0),c.addMany(v,1,3,1),c.add(127,1,0,1),c.addMany(v,8,0,8),c.addMany(v,3,3,3),c.add(127,3,0,3),c.addMany(v,4,3,4),c.add(127,4,0,4),c.addMany(v,6,3,6),c.addMany(v,5,3,5),c.add(127,5,0,5),c.addMany(v,2,3,2),c.add(127,2,0,2),c.add(93,1,4,8),c.addMany(l,8,5,8),c.add(127,8,5,8),c.addMany([156,27,24,26,7],8,6,0),c.addMany(o(28,32),8,0,8),c.addMany([88,94,95],1,0,7),c.addMany(l,7,0,7),c.addMany(v,7,0,7),c.add(156,7,0,0),c.add(127,7,0,7),c.add(91,1,11,3),c.addMany(o(64,127),3,7,0),c.addMany(o(48,60),3,8,4),c.addMany([60,61,62,63],3,9,4),c.addMany(o(48,60),4,8,4),c.addMany(o(64,127),4,7,0),c.addMany([60,61,62,63],4,0,6),c.addMany(o(32,64),6,0,6),c.add(127,6,0,6),c.addMany(o(64,127),6,0,0),c.addMany(o(32,48),3,9,5),c.addMany(o(32,48),5,9,5),c.addMany(o(48,64),5,0,6),c.addMany(o(64,127),5,7,0),c.addMany(o(32,48),4,9,5),c.addMany(o(32,48),1,9,2),c.addMany(o(32,48),2,9,2),c.addMany(o(48,127),2,10,0),c.addMany(o(48,80),1,10,0),c.addMany(o(81,88),1,10,0),c.addMany([89,90,92],1,10,0),c.addMany(o(96,127),1,10,0),c.add(80,1,11,9),c.addMany(v,9,0,9),c.add(127,9,0,9),c.addMany(o(28,32),9,0,9),c.addMany(o(32,48),9,9,12),c.addMany(o(48,60),9,8,10),c.addMany([60,61,62,63],9,9,10),c.addMany(v,11,0,11),c.addMany(o(32,128),11,0,11),c.addMany(o(28,32),11,0,11),c.addMany(v,10,0,10),c.add(127,10,0,10),c.addMany(o(28,32),10,0,10),c.addMany(o(48,60),10,8,10),c.addMany([60,61,62,63],10,0,11),c.addMany(o(32,48),10,9,12),c.addMany(v,12,0,12),c.add(127,12,0,12),c.addMany(o(28,32),12,0,12),c.addMany(o(32,48),12,9,12),c.addMany(o(48,64),12,0,11),c.addMany(o(64,127),12,12,13),c.addMany(o(64,127),10,12,13),c.addMany(o(64,127),9,12,13),c.addMany(v,13,13,13),c.addMany(l,13,13,13),c.add(127,13,0,13),c.addMany([27,156,24,26],13,14,0),c.add(w,0,2,0),c.add(w,8,5,8),c.add(w,6,0,6),c.add(w,11,0,11),c.add(w,13,13,13),c})();class m extends p.Disposable{constructor(h=r.VT500_TRANSITION_TABLE){super(),this._transitions=h,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new _.Params,this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._printHandlerFb=(o,l,v)=>{},this._executeHandlerFb=o=>{},this._csiHandlerFb=(o,l)=>{},this._escHandlerFb=o=>{},this._errorHandlerFb=o=>o,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,p.toDisposable)((()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)}))),this._oscParser=this.register(new d.OscParser),this._dcsParser=this.register(new g.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},(()=>!0))}_identifier(h,o=[64,126]){let l=0;if(h.prefix){if(h.prefix.length>1)throw new Error("only one byte as prefix supported");if(l=h.prefix.charCodeAt(0),l&&60>l||l>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(h.intermediates){if(h.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let S=0;S<h.intermediates.length;++S){const x=h.intermediates.charCodeAt(S);if(32>x||x>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");l<<=8,l|=x}}if(h.final.length!==1)throw new Error("final must be a single byte");const v=h.final.charCodeAt(0);if(o[0]>v||v>o[1])throw new Error(`final must be in range ${o[0]} .. ${o[1]}`);return l<<=8,l|=v,l}identToString(h){const o=[];for(;h;)o.push(String.fromCharCode(255&h)),h>>=8;return o.reverse().join("")}setPrintHandler(h){this._printHandler=h}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(h,o){const l=this._identifier(h,[48,126]);this._escHandlers[l]===void 0&&(this._escHandlers[l]=[]);const v=this._escHandlers[l];return v.push(o),{dispose:()=>{const S=v.indexOf(o);S!==-1&&v.splice(S,1)}}}clearEscHandler(h){this._escHandlers[this._identifier(h,[48,126])]&&delete this._escHandlers[this._identifier(h,[48,126])]}setEscHandlerFallback(h){this._escHandlerFb=h}setExecuteHandler(h,o){this._executeHandlers[h.charCodeAt(0)]=o}clearExecuteHandler(h){this._executeHandlers[h.charCodeAt(0)]&&delete this._executeHandlers[h.charCodeAt(0)]}setExecuteHandlerFallback(h){this._executeHandlerFb=h}registerCsiHandler(h,o){const l=this._identifier(h);this._csiHandlers[l]===void 0&&(this._csiHandlers[l]=[]);const v=this._csiHandlers[l];return v.push(o),{dispose:()=>{const S=v.indexOf(o);S!==-1&&v.splice(S,1)}}}clearCsiHandler(h){this._csiHandlers[this._identifier(h)]&&delete this._csiHandlers[this._identifier(h)]}setCsiHandlerFallback(h){this._csiHandlerFb=h}registerDcsHandler(h,o){return this._dcsParser.registerHandler(this._identifier(h),o)}clearDcsHandler(h){this._dcsParser.clearHandler(this._identifier(h))}setDcsHandlerFallback(h){this._dcsParser.setHandlerFallback(h)}registerOscHandler(h,o){return this._oscParser.registerHandler(h,o)}clearOscHandler(h){this._oscParser.clearHandler(h)}setOscHandlerFallback(h){this._oscParser.setHandlerFallback(h)}setErrorHandler(h){this._errorHandler=h}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(h,o,l,v,S){this._parseStack.state=h,this._parseStack.handlers=o,this._parseStack.handlerPos=l,this._parseStack.transition=v,this._parseStack.chunkPos=S}parse(h,o,l){let v,S=0,x=0,k=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,k=this._parseStack.chunkPos+1;else{if(l===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");const C=this._parseStack.handlers;let A=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(l===!1&&A>-1){for(;A>=0&&(v=C[A](this._params),v!==!0);A--)if(v instanceof Promise)return this._parseStack.handlerPos=A,v}this._parseStack.handlers=[];break;case 4:if(l===!1&&A>-1){for(;A>=0&&(v=C[A](),v!==!0);A--)if(v instanceof Promise)return this._parseStack.handlerPos=A,v}this._parseStack.handlers=[];break;case 6:if(S=h[this._parseStack.chunkPos],v=this._dcsParser.unhook(S!==24&&S!==26,l),v)return v;S===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(S=h[this._parseStack.chunkPos],v=this._oscParser.end(S!==24&&S!==26,l),v)return v;S===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,k=this._parseStack.chunkPos+1,this.precedingJoinState=0,this.currentState=15&this._parseStack.transition}for(let C=k;C<o;++C){switch(S=h[C],x=this._transitions.table[this.currentState<<8|(S<160?S:w)],x>>4){case 2:for(let I=C+1;;++I){if(I>=o||(S=h[I])<32||S>126&&S<w){this._printHandler(h,C,I),C=I-1;break}if(++I>=o||(S=h[I])<32||S>126&&S<w){this._printHandler(h,C,I),C=I-1;break}if(++I>=o||(S=h[I])<32||S>126&&S<w){this._printHandler(h,C,I),C=I-1;break}if(++I>=o||(S=h[I])<32||S>126&&S<w){this._printHandler(h,C,I),C=I-1;break}}break;case 3:this._executeHandlers[S]?this._executeHandlers[S]():this._executeHandlerFb(S),this.precedingJoinState=0;break;case 0:break;case 1:if(this._errorHandler({position:C,code:S,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:const A=this._csiHandlers[this._collect<<8|S];let N=A?A.length-1:-1;for(;N>=0&&(v=A[N](this._params),v!==!0);N--)if(v instanceof Promise)return this._preserveStack(3,A,N,x,C),v;N<0&&this._csiHandlerFb(this._collect<<8|S,this._params),this.precedingJoinState=0;break;case 8:do switch(S){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(S-48)}while(++C<o&&(S=h[C])>47&&S<60);C--;break;case 9:this._collect<<=8,this._collect|=S;break;case 10:const G=this._escHandlers[this._collect<<8|S];let L=G?G.length-1:-1;for(;L>=0&&(v=G[L](),v!==!0);L--)if(v instanceof Promise)return this._preserveStack(4,G,L,x,C),v;L<0&&this._escHandlerFb(this._collect<<8|S),this.precedingJoinState=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|S,this._params);break;case 13:for(let I=C+1;;++I)if(I>=o||(S=h[I])===24||S===26||S===27||S>127&&S<w){this._dcsParser.put(h,C,I),C=I-1;break}break;case 14:if(v=this._dcsParser.unhook(S!==24&&S!==26),v)return this._preserveStack(6,[],0,x,C),v;S===27&&(x|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0;break;case 4:this._oscParser.start();break;case 5:for(let I=C+1;;I++)if(I>=o||(S=h[I])<32||S>127&&S<w){this._oscParser.put(h,C,I),C=I-1;break}break;case 6:if(v=this._oscParser.end(S!==24&&S!==26),v)return this._preserveStack(5,[],0,x,C),v;S===27&&(x|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0}this.currentState=15&x}}}r.EscapeSequenceParser=m},6242:(f,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.OscHandler=r.OscParser=void 0;const p=n(5770),_=n(482),d=[];r.OscParser=class{constructor(){this._state=0,this._active=d,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(g,b){this._handlers[g]===void 0&&(this._handlers[g]=[]);const w=this._handlers[g];return w.push(b),{dispose:()=>{const m=w.indexOf(b);m!==-1&&w.splice(m,1)}}}clearHandler(g){this._handlers[g]&&delete this._handlers[g]}setHandlerFallback(g){this._handlerFb=g}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=d}reset(){if(this._state===2)for(let g=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;g>=0;--g)this._active[g].end(!1);this._stack.paused=!1,this._active=d,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||d,this._active.length)for(let g=this._active.length-1;g>=0;g--)this._active[g].start();else this._handlerFb(this._id,"START")}_put(g,b,w){if(this._active.length)for(let m=this._active.length-1;m>=0;m--)this._active[m].put(g,b,w);else this._handlerFb(this._id,"PUT",(0,_.utf32ToString)(g,b,w))}start(){this.reset(),this._state=1}put(g,b,w){if(this._state!==3){if(this._state===1)for(;b<w;){const m=g[b++];if(m===59){this._state=2,this._start();break}if(m<48||57<m)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+m-48}this._state===2&&w-b>0&&this._put(g,b,w)}}end(g,b=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let w=!1,m=this._active.length-1,c=!1;if(this._stack.paused&&(m=this._stack.loopPosition-1,w=b,c=this._stack.fallThrough,this._stack.paused=!1),!c&&w===!1){for(;m>=0&&(w=this._active[m].end(g),w!==!0);m--)if(w instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=m,this._stack.fallThrough=!1,w;m--}for(;m>=0;m--)if(w=this._active[m].end(!1),w instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=m,this._stack.fallThrough=!0,w}else this._handlerFb(this._id,"END",g);this._active=d,this._id=-1,this._state=0}}},r.OscHandler=class{constructor(g){this._handler=g,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(g,b,w){this._hitLimit||(this._data+=(0,_.utf32ToString)(g,b,w),this._data.length>p.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(g){let b=!1;if(this._hitLimit)b=!1;else if(g&&(b=this._handler(this._data),b instanceof Promise))return b.then((w=>(this._data="",this._hitLimit=!1,w)));return this._data="",this._hitLimit=!1,b}}},8742:(f,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.Params=void 0;const n=2147483647;class p{static fromArray(d){const g=new p;if(!d.length)return g;for(let b=Array.isArray(d[0])?1:0;b<d.length;++b){const w=d[b];if(Array.isArray(w))for(let m=0;m<w.length;++m)g.addSubParam(w[m]);else g.addParam(w)}return g}constructor(d=32,g=32){if(this.maxLength=d,this.maxSubParamsLength=g,g>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(d),this.length=0,this._subParams=new Int32Array(g),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(d),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){const d=new p(this.maxLength,this.maxSubParamsLength);return d.params.set(this.params),d.length=this.length,d._subParams.set(this._subParams),d._subParamsLength=this._subParamsLength,d._subParamsIdx.set(this._subParamsIdx),d._rejectDigits=this._rejectDigits,d._rejectSubDigits=this._rejectSubDigits,d._digitIsSub=this._digitIsSub,d}toArray(){const d=[];for(let g=0;g<this.length;++g){d.push(this.params[g]);const b=this._subParamsIdx[g]>>8,w=255&this._subParamsIdx[g];w-b>0&&d.push(Array.prototype.slice.call(this._subParams,b,w))}return d}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(d){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(d<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=d>n?n:d}}addSubParam(d){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(d<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=d>n?n:d,this._subParamsIdx[this.length-1]++}}hasSubParams(d){return(255&this._subParamsIdx[d])-(this._subParamsIdx[d]>>8)>0}getSubParams(d){const g=this._subParamsIdx[d]>>8,b=255&this._subParamsIdx[d];return b-g>0?this._subParams.subarray(g,b):null}getSubParamsAll(){const d={};for(let g=0;g<this.length;++g){const b=this._subParamsIdx[g]>>8,w=255&this._subParamsIdx[g];w-b>0&&(d[g]=this._subParams.slice(b,w))}return d}addDigit(d){let g;if(this._rejectDigits||!(g=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;const b=this._digitIsSub?this._subParams:this.params,w=b[g-1];b[g-1]=~w?Math.min(10*w+d,n):d}}r.Params=p},5741:(f,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.AddonManager=void 0,r.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let n=this._addons.length-1;n>=0;n--)this._addons[n].instance.dispose()}loadAddon(n,p){const _={instance:p,dispose:p.dispose,isDisposed:!1};this._addons.push(_),p.dispose=()=>this._wrappedAddonDispose(_),p.activate(n)}_wrappedAddonDispose(n){if(n.isDisposed)return;let p=-1;for(let _=0;_<this._addons.length;_++)if(this._addons[_]===n){p=_;break}if(p===-1)throw new Error("Could not dispose an addon that has not been loaded");n.isDisposed=!0,n.dispose.apply(n.instance),this._addons.splice(p,1)}}},8771:(f,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.BufferApiView=void 0;const p=n(3785),_=n(511);r.BufferApiView=class{constructor(d,g){this._buffer=d,this.type=g}init(d){return this._buffer=d,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(d){const g=this._buffer.lines.get(d);if(g)return new p.BufferLineApiView(g)}getNullCell(){return new _.CellData}}},3785:(f,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.BufferLineApiView=void 0;const p=n(511);r.BufferLineApiView=class{constructor(_){this._line=_}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(_,d){if(!(_<0||_>=this._line.length))return d?(this._line.loadCell(_,d),d):this._line.loadCell(_,new p.CellData)}translateToString(_,d,g){return this._line.translateToString(_,d,g)}}},8285:(f,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.BufferNamespaceApi=void 0;const p=n(8771),_=n(8460),d=n(844);class g extends d.Disposable{constructor(w){super(),this._core=w,this._onBufferChange=this.register(new _.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new p.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new p.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate((()=>this._onBufferChange.fire(this.active)))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}r.BufferNamespaceApi=g},7975:(f,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.ParserApi=void 0,r.ParserApi=class{constructor(n){this._core=n}registerCsiHandler(n,p){return this._core.registerCsiHandler(n,(_=>p(_.toArray())))}addCsiHandler(n,p){return this.registerCsiHandler(n,p)}registerDcsHandler(n,p){return this._core.registerDcsHandler(n,((_,d)=>p(_,d.toArray())))}addDcsHandler(n,p){return this.registerDcsHandler(n,p)}registerEscHandler(n,p){return this._core.registerEscHandler(n,p)}addEscHandler(n,p){return this.registerEscHandler(n,p)}registerOscHandler(n,p){return this._core.registerOscHandler(n,p)}addOscHandler(n,p){return this.registerOscHandler(n,p)}}},7090:(f,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.UnicodeApi=void 0,r.UnicodeApi=class{constructor(n){this._core=n}register(n){this._core.unicodeService.register(n)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(n){this._core.unicodeService.activeVersion=n}}},744:function(f,r,n){var p=this&&this.__decorate||function(c,h,o,l){var v,S=arguments.length,x=S<3?h:l===null?l=Object.getOwnPropertyDescriptor(h,o):l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(c,h,o,l);else for(var k=c.length-1;k>=0;k--)(v=c[k])&&(x=(S<3?v(x):S>3?v(h,o,x):v(h,o))||x);return S>3&&x&&Object.defineProperty(h,o,x),x},_=this&&this.__param||function(c,h){return function(o,l){h(o,l,c)}};Object.defineProperty(r,"__esModule",{value:!0}),r.BufferService=r.MINIMUM_ROWS=r.MINIMUM_COLS=void 0;const d=n(8460),g=n(844),b=n(5295),w=n(2585);r.MINIMUM_COLS=2,r.MINIMUM_ROWS=1;let m=r.BufferService=class extends g.Disposable{get buffer(){return this.buffers.active}constructor(c){super(),this.isUserScrolling=!1,this._onResize=this.register(new d.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new d.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(c.rawOptions.cols||0,r.MINIMUM_COLS),this.rows=Math.max(c.rawOptions.rows||0,r.MINIMUM_ROWS),this.buffers=this.register(new b.BufferSet(c,this))}resize(c,h){this.cols=c,this.rows=h,this.buffers.resize(c,h),this._onResize.fire({cols:c,rows:h})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(c,h=!1){const o=this.buffer;let l;l=this._cachedBlankLine,l&&l.length===this.cols&&l.getFg(0)===c.fg&&l.getBg(0)===c.bg||(l=o.getBlankLine(c,h),this._cachedBlankLine=l),l.isWrapped=h;const v=o.ybase+o.scrollTop,S=o.ybase+o.scrollBottom;if(o.scrollTop===0){const x=o.lines.isFull;S===o.lines.length-1?x?o.lines.recycle().copyFrom(l):o.lines.push(l.clone()):o.lines.splice(S+1,0,l.clone()),x?this.isUserScrolling&&(o.ydisp=Math.max(o.ydisp-1,0)):(o.ybase++,this.isUserScrolling||o.ydisp++)}else{const x=S-v+1;o.lines.shiftElements(v+1,x-1,-1),o.lines.set(S,l.clone())}this.isUserScrolling||(o.ydisp=o.ybase),this._onScroll.fire(o.ydisp)}scrollLines(c,h,o){const l=this.buffer;if(c<0){if(l.ydisp===0)return;this.isUserScrolling=!0}else c+l.ydisp>=l.ybase&&(this.isUserScrolling=!1);const v=l.ydisp;l.ydisp=Math.max(Math.min(l.ydisp+c,l.ybase),0),v!==l.ydisp&&(h||this._onScroll.fire(l.ydisp))}};r.BufferService=m=p([_(0,w.IOptionsService)],m)},7994:(f,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.CharsetService=void 0,r.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(n){this.glevel=n,this.charset=this._charsets[n]}setgCharset(n,p){this._charsets[n]=p,this.glevel===n&&(this.charset=p)}}},1753:function(f,r,n){var p=this&&this.__decorate||function(l,v,S,x){var k,C=arguments.length,A=C<3?v:x===null?x=Object.getOwnPropertyDescriptor(v,S):x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")A=Reflect.decorate(l,v,S,x);else for(var N=l.length-1;N>=0;N--)(k=l[N])&&(A=(C<3?k(A):C>3?k(v,S,A):k(v,S))||A);return C>3&&A&&Object.defineProperty(v,S,A),A},_=this&&this.__param||function(l,v){return function(S,x){v(S,x,l)}};Object.defineProperty(r,"__esModule",{value:!0}),r.CoreMouseService=void 0;const d=n(2585),g=n(8460),b=n(844),w={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:l=>l.button!==4&&l.action===1&&(l.ctrl=!1,l.alt=!1,l.shift=!1,!0)},VT200:{events:19,restrict:l=>l.action!==32},DRAG:{events:23,restrict:l=>l.action!==32||l.button!==3},ANY:{events:31,restrict:l=>!0}};function m(l,v){let S=(l.ctrl?16:0)|(l.shift?4:0)|(l.alt?8:0);return l.button===4?(S|=64,S|=l.action):(S|=3&l.button,4&l.button&&(S|=64),8&l.button&&(S|=128),l.action===32?S|=32:l.action!==0||v||(S|=3)),S}const c=String.fromCharCode,h={DEFAULT:l=>{const v=[m(l,!1)+32,l.col+32,l.row+32];return v[0]>255||v[1]>255||v[2]>255?"":`\x1B[M${c(v[0])}${c(v[1])}${c(v[2])}`},SGR:l=>{const v=l.action===0&&l.button!==4?"m":"M";return`\x1B[<${m(l,!0)};${l.col};${l.row}${v}`},SGR_PIXELS:l=>{const v=l.action===0&&l.button!==4?"m":"M";return`\x1B[<${m(l,!0)};${l.x};${l.y}${v}`}};let o=r.CoreMouseService=class extends b.Disposable{constructor(l,v){super(),this._bufferService=l,this._coreService=v,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new g.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(const S of Object.keys(w))this.addProtocol(S,w[S]);for(const S of Object.keys(h))this.addEncoding(S,h[S]);this.reset()}addProtocol(l,v){this._protocols[l]=v}addEncoding(l,v){this._encodings[l]=v}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(l){if(!this._protocols[l])throw new Error(`unknown protocol "${l}"`);this._activeProtocol=l,this._onProtocolChange.fire(this._protocols[l].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(l){if(!this._encodings[l])throw new Error(`unknown encoding "${l}"`);this._activeEncoding=l}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(l){if(l.col<0||l.col>=this._bufferService.cols||l.row<0||l.row>=this._bufferService.rows||l.button===4&&l.action===32||l.button===3&&l.action!==32||l.button!==4&&(l.action===2||l.action===3)||(l.col++,l.row++,l.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,l,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(l))return!1;const v=this._encodings[this._activeEncoding](l);return v&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(v):this._coreService.triggerDataEvent(v,!0)),this._lastEvent=l,!0}explainEvents(l){return{down:!!(1&l),up:!!(2&l),drag:!!(4&l),move:!!(8&l),wheel:!!(16&l)}}_equalEvents(l,v,S){if(S){if(l.x!==v.x||l.y!==v.y)return!1}else if(l.col!==v.col||l.row!==v.row)return!1;return l.button===v.button&&l.action===v.action&&l.ctrl===v.ctrl&&l.alt===v.alt&&l.shift===v.shift}};r.CoreMouseService=o=p([_(0,d.IBufferService),_(1,d.ICoreService)],o)},6975:function(f,r,n){var p=this&&this.__decorate||function(o,l,v,S){var x,k=arguments.length,C=k<3?l:S===null?S=Object.getOwnPropertyDescriptor(l,v):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(o,l,v,S);else for(var A=o.length-1;A>=0;A--)(x=o[A])&&(C=(k<3?x(C):k>3?x(l,v,C):x(l,v))||C);return k>3&&C&&Object.defineProperty(l,v,C),C},_=this&&this.__param||function(o,l){return function(v,S){l(v,S,o)}};Object.defineProperty(r,"__esModule",{value:!0}),r.CoreService=void 0;const d=n(1439),g=n(8460),b=n(844),w=n(2585),m=Object.freeze({insertMode:!1}),c=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0});let h=r.CoreService=class extends b.Disposable{constructor(o,l,v){super(),this._bufferService=o,this._logService=l,this._optionsService=v,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new g.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new g.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new g.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new g.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,d.clone)(m),this.decPrivateModes=(0,d.clone)(c)}reset(){this.modes=(0,d.clone)(m),this.decPrivateModes=(0,d.clone)(c)}triggerDataEvent(o,l=!1){if(this._optionsService.rawOptions.disableStdin)return;const v=this._bufferService.buffer;l&&this._optionsService.rawOptions.scrollOnUserInput&&v.ybase!==v.ydisp&&this._onRequestScrollToBottom.fire(),l&&this._onUserInput.fire(),this._logService.debug(`sending data "${o}"`,(()=>o.split("").map((S=>S.charCodeAt(0))))),this._onData.fire(o)}triggerBinaryEvent(o){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${o}"`,(()=>o.split("").map((l=>l.charCodeAt(0))))),this._onBinary.fire(o))}};r.CoreService=h=p([_(0,w.IBufferService),_(1,w.ILogService),_(2,w.IOptionsService)],h)},9074:(f,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.DecorationService=void 0;const p=n(8055),_=n(8460),d=n(844),g=n(6106);let b=0,w=0;class m extends d.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new g.SortedList((o=>o==null?void 0:o.marker.line)),this._onDecorationRegistered=this.register(new _.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new _.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,d.toDisposable)((()=>this.reset())))}registerDecoration(o){if(o.marker.isDisposed)return;const l=new c(o);if(l){const v=l.marker.onDispose((()=>l.dispose()));l.onDispose((()=>{l&&(this._decorations.delete(l)&&this._onDecorationRemoved.fire(l),v.dispose())})),this._decorations.insert(l),this._onDecorationRegistered.fire(l)}return l}reset(){for(const o of this._decorations.values())o.dispose();this._decorations.clear()}*getDecorationsAtCell(o,l,v){let S=0,x=0;for(const k of this._decorations.getKeyIterator(l))S=k.options.x??0,x=S+(k.options.width??1),o>=S&&o<x&&(!v||(k.options.layer??"bottom")===v)&&(yield k)}forEachDecorationAtCell(o,l,v,S){this._decorations.forEachByKey(l,(x=>{b=x.options.x??0,w=b+(x.options.width??1),o>=b&&o<w&&(!v||(x.options.layer??"bottom")===v)&&S(x)}))}}r.DecorationService=m;class c extends d.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=p.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=p.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}constructor(o){super(),this.options=o,this.onRenderEmitter=this.register(new _.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new _.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=o.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(f,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.InstantiationService=r.ServiceCollection=void 0;const p=n(2585),_=n(8343);class d{constructor(...b){this._entries=new Map;for(const[w,m]of b)this.set(w,m)}set(b,w){const m=this._entries.get(b);return this._entries.set(b,w),m}forEach(b){for(const[w,m]of this._entries.entries())b(w,m)}has(b){return this._entries.has(b)}get(b){return this._entries.get(b)}}r.ServiceCollection=d,r.InstantiationService=class{constructor(){this._services=new d,this._services.set(p.IInstantiationService,this)}setService(g,b){this._services.set(g,b)}getService(g){return this._services.get(g)}createInstance(g,...b){const w=(0,_.getServiceDependencies)(g).sort(((h,o)=>h.index-o.index)),m=[];for(const h of w){const o=this._services.get(h.id);if(!o)throw new Error(`[createInstance] ${g.name} depends on UNKNOWN service ${h.id}.`);m.push(o)}const c=w.length>0?w[0].index:b.length;if(b.length!==c)throw new Error(`[createInstance] First service dependency of ${g.name} at position ${c+1} conflicts with ${b.length} static arguments`);return new g(...b,...m)}}},7866:function(f,r,n){var p=this&&this.__decorate||function(c,h,o,l){var v,S=arguments.length,x=S<3?h:l===null?l=Object.getOwnPropertyDescriptor(h,o):l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(c,h,o,l);else for(var k=c.length-1;k>=0;k--)(v=c[k])&&(x=(S<3?v(x):S>3?v(h,o,x):v(h,o))||x);return S>3&&x&&Object.defineProperty(h,o,x),x},_=this&&this.__param||function(c,h){return function(o,l){h(o,l,c)}};Object.defineProperty(r,"__esModule",{value:!0}),r.traceCall=r.setTraceLogger=r.LogService=void 0;const d=n(844),g=n(2585),b={trace:g.LogLevelEnum.TRACE,debug:g.LogLevelEnum.DEBUG,info:g.LogLevelEnum.INFO,warn:g.LogLevelEnum.WARN,error:g.LogLevelEnum.ERROR,off:g.LogLevelEnum.OFF};let w,m=r.LogService=class extends d.Disposable{get logLevel(){return this._logLevel}constructor(c){super(),this._optionsService=c,this._logLevel=g.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",(()=>this._updateLogLevel()))),w=this}_updateLogLevel(){this._logLevel=b[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(c){for(let h=0;h<c.length;h++)typeof c[h]=="function"&&(c[h]=c[h]())}_log(c,h,o){this._evalLazyOptionalParams(o),c.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+h,...o)}trace(c,...h){var o;this._logLevel<=g.LogLevelEnum.TRACE&&this._log(((o=this._optionsService.options.logger)==null?void 0:o.trace.bind(this._optionsService.options.logger))??console.log,c,h)}debug(c,...h){var o;this._logLevel<=g.LogLevelEnum.DEBUG&&this._log(((o=this._optionsService.options.logger)==null?void 0:o.debug.bind(this._optionsService.options.logger))??console.log,c,h)}info(c,...h){var o;this._logLevel<=g.LogLevelEnum.INFO&&this._log(((o=this._optionsService.options.logger)==null?void 0:o.info.bind(this._optionsService.options.logger))??console.info,c,h)}warn(c,...h){var o;this._logLevel<=g.LogLevelEnum.WARN&&this._log(((o=this._optionsService.options.logger)==null?void 0:o.warn.bind(this._optionsService.options.logger))??console.warn,c,h)}error(c,...h){var o;this._logLevel<=g.LogLevelEnum.ERROR&&this._log(((o=this._optionsService.options.logger)==null?void 0:o.error.bind(this._optionsService.options.logger))??console.error,c,h)}};r.LogService=m=p([_(0,g.IOptionsService)],m),r.setTraceLogger=function(c){w=c},r.traceCall=function(c,h,o){if(typeof o.value!="function")throw new Error("not supported");const l=o.value;o.value=function(...v){if(w.logLevel!==g.LogLevelEnum.TRACE)return l.apply(this,v);w.trace(`GlyphRenderer#${l.name}(${v.map((x=>JSON.stringify(x))).join(", ")})`);const S=l.apply(this,v);return w.trace(`GlyphRenderer#${l.name} return`,S),S}}},7302:(f,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.OptionsService=r.DEFAULT_OPTIONS=void 0;const p=n(8460),_=n(844),d=n(6114);r.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,documentOverride:null,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rescaleOverlappingGlyphs:!1,rightClickSelectsWord:d.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};const g=["normal","bold","100","200","300","400","500","600","700","800","900"];class b extends _.Disposable{constructor(m){super(),this._onOptionChange=this.register(new p.EventEmitter),this.onOptionChange=this._onOptionChange.event;const c={...r.DEFAULT_OPTIONS};for(const h in m)if(h in c)try{const o=m[h];c[h]=this._sanitizeAndValidateOption(h,o)}catch(o){console.error(o)}this.rawOptions=c,this.options={...c},this._setupOptions(),this.register((0,_.toDisposable)((()=>{this.rawOptions.linkHandler=null,this.rawOptions.documentOverride=null})))}onSpecificOptionChange(m,c){return this.onOptionChange((h=>{h===m&&c(this.rawOptions[m])}))}onMultipleOptionChange(m,c){return this.onOptionChange((h=>{m.indexOf(h)!==-1&&c()}))}_setupOptions(){const m=h=>{if(!(h in r.DEFAULT_OPTIONS))throw new Error(`No option with key "${h}"`);return this.rawOptions[h]},c=(h,o)=>{if(!(h in r.DEFAULT_OPTIONS))throw new Error(`No option with key "${h}"`);o=this._sanitizeAndValidateOption(h,o),this.rawOptions[h]!==o&&(this.rawOptions[h]=o,this._onOptionChange.fire(h))};for(const h in this.rawOptions){const o={get:m.bind(this,h),set:c.bind(this,h)};Object.defineProperty(this.options,h,o)}}_sanitizeAndValidateOption(m,c){switch(m){case"cursorStyle":if(c||(c=r.DEFAULT_OPTIONS[m]),!(function(h){return h==="block"||h==="underline"||h==="bar"})(c))throw new Error(`"${c}" is not a valid value for ${m}`);break;case"wordSeparator":c||(c=r.DEFAULT_OPTIONS[m]);break;case"fontWeight":case"fontWeightBold":if(typeof c=="number"&&1<=c&&c<=1e3)break;c=g.includes(c)?c:r.DEFAULT_OPTIONS[m];break;case"cursorWidth":c=Math.floor(c);case"lineHeight":case"tabStopWidth":if(c<1)throw new Error(`${m} cannot be less than 1, value: ${c}`);break;case"minimumContrastRatio":c=Math.max(1,Math.min(21,Math.round(10*c)/10));break;case"scrollback":if((c=Math.min(c,4294967295))<0)throw new Error(`${m} cannot be less than 0, value: ${c}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(c<=0)throw new Error(`${m} cannot be less than or equal to 0, value: ${c}`);break;case"rows":case"cols":if(!c&&c!==0)throw new Error(`${m} must be numeric, value: ${c}`);break;case"windowsPty":c=c??{}}return c}}r.OptionsService=b},2660:function(f,r,n){var p=this&&this.__decorate||function(b,w,m,c){var h,o=arguments.length,l=o<3?w:c===null?c=Object.getOwnPropertyDescriptor(w,m):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(b,w,m,c);else for(var v=b.length-1;v>=0;v--)(h=b[v])&&(l=(o<3?h(l):o>3?h(w,m,l):h(w,m))||l);return o>3&&l&&Object.defineProperty(w,m,l),l},_=this&&this.__param||function(b,w){return function(m,c){w(m,c,b)}};Object.defineProperty(r,"__esModule",{value:!0}),r.OscLinkService=void 0;const d=n(2585);let g=r.OscLinkService=class{constructor(b){this._bufferService=b,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(b){const w=this._bufferService.buffer;if(b.id===void 0){const v=w.addMarker(w.ybase+w.y),S={data:b,id:this._nextId++,lines:[v]};return v.onDispose((()=>this._removeMarkerFromLink(S,v))),this._dataByLinkId.set(S.id,S),S.id}const m=b,c=this._getEntryIdKey(m),h=this._entriesWithId.get(c);if(h)return this.addLineToLink(h.id,w.ybase+w.y),h.id;const o=w.addMarker(w.ybase+w.y),l={id:this._nextId++,key:this._getEntryIdKey(m),data:m,lines:[o]};return o.onDispose((()=>this._removeMarkerFromLink(l,o))),this._entriesWithId.set(l.key,l),this._dataByLinkId.set(l.id,l),l.id}addLineToLink(b,w){const m=this._dataByLinkId.get(b);if(m&&m.lines.every((c=>c.line!==w))){const c=this._bufferService.buffer.addMarker(w);m.lines.push(c),c.onDispose((()=>this._removeMarkerFromLink(m,c)))}}getLinkData(b){var w;return(w=this._dataByLinkId.get(b))==null?void 0:w.data}_getEntryIdKey(b){return`${b.id};;${b.uri}`}_removeMarkerFromLink(b,w){const m=b.lines.indexOf(w);m!==-1&&(b.lines.splice(m,1),b.lines.length===0&&(b.data.id!==void 0&&this._entriesWithId.delete(b.key),this._dataByLinkId.delete(b.id)))}};r.OscLinkService=g=p([_(0,d.IBufferService)],g)},8343:(f,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.createDecorator=r.getServiceDependencies=r.serviceRegistry=void 0;const n="di$target",p="di$dependencies";r.serviceRegistry=new Map,r.getServiceDependencies=function(_){return _[p]||[]},r.createDecorator=function(_){if(r.serviceRegistry.has(_))return r.serviceRegistry.get(_);const d=function(g,b,w){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(m,c,h){c[n]===c?c[p].push({id:m,index:h}):(c[p]=[{id:m,index:h}],c[n]=c)})(d,g,w)};return d.toString=()=>_,r.serviceRegistry.set(_,d),d}},2585:(f,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.IDecorationService=r.IUnicodeService=r.IOscLinkService=r.IOptionsService=r.ILogService=r.LogLevelEnum=r.IInstantiationService=r.ICharsetService=r.ICoreService=r.ICoreMouseService=r.IBufferService=void 0;const p=n(8343);var _;r.IBufferService=(0,p.createDecorator)("BufferService"),r.ICoreMouseService=(0,p.createDecorator)("CoreMouseService"),r.ICoreService=(0,p.createDecorator)("CoreService"),r.ICharsetService=(0,p.createDecorator)("CharsetService"),r.IInstantiationService=(0,p.createDecorator)("InstantiationService"),(function(d){d[d.TRACE=0]="TRACE",d[d.DEBUG=1]="DEBUG",d[d.INFO=2]="INFO",d[d.WARN=3]="WARN",d[d.ERROR=4]="ERROR",d[d.OFF=5]="OFF"})(_||(r.LogLevelEnum=_={})),r.ILogService=(0,p.createDecorator)("LogService"),r.IOptionsService=(0,p.createDecorator)("OptionsService"),r.IOscLinkService=(0,p.createDecorator)("OscLinkService"),r.IUnicodeService=(0,p.createDecorator)("UnicodeService"),r.IDecorationService=(0,p.createDecorator)("DecorationService")},1480:(f,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.UnicodeService=void 0;const p=n(8460),_=n(225);class d{static extractShouldJoin(b){return(1&b)!=0}static extractWidth(b){return b>>1&3}static extractCharKind(b){return b>>3}static createPropertyValue(b,w,m=!1){return(16777215&b)<<3|(3&w)<<1|(m?1:0)}constructor(){this._providers=Object.create(null),this._active="",this._onChange=new p.EventEmitter,this.onChange=this._onChange.event;const b=new _.UnicodeV6;this.register(b),this._active=b.version,this._activeProvider=b}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(b){if(!this._providers[b])throw new Error(`unknown Unicode version "${b}"`);this._active=b,this._activeProvider=this._providers[b],this._onChange.fire(b)}register(b){this._providers[b.version]=b}wcwidth(b){return this._activeProvider.wcwidth(b)}getStringCellWidth(b){let w=0,m=0;const c=b.length;for(let h=0;h<c;++h){let o=b.charCodeAt(h);if(55296<=o&&o<=56319){if(++h>=c)return w+this.wcwidth(o);const S=b.charCodeAt(h);56320<=S&&S<=57343?o=1024*(o-55296)+S-56320+65536:w+=this.wcwidth(S)}const l=this.charProperties(o,m);let v=d.extractWidth(l);d.extractShouldJoin(l)&&(v-=d.extractWidth(m)),w+=v,m=l}return w}charProperties(b,w){return this._activeProvider.charProperties(b,w)}}r.UnicodeService=d}},i={};function a(f){var r=i[f];if(r!==void 0)return r.exports;var n=i[f]={exports:{}};return s[f].call(n.exports,n,n.exports,a),n.exports}var u={};return(()=>{var f=u;Object.defineProperty(f,"__esModule",{value:!0}),f.Terminal=void 0;const r=a(9042),n=a(3236),p=a(844),_=a(5741),d=a(8285),g=a(7975),b=a(7090),w=["cols","rows"];class m extends p.Disposable{constructor(h){super(),this._core=this.register(new n.Terminal(h)),this._addonManager=this.register(new _.AddonManager),this._publicOptions={...this._core.options};const o=v=>this._core.options[v],l=(v,S)=>{this._checkReadonlyOptions(v),this._core.options[v]=S};for(const v in this._core.options){const S={get:o.bind(this,v),set:l.bind(this,v)};Object.defineProperty(this._publicOptions,v,S)}}_checkReadonlyOptions(h){if(w.includes(h))throw new Error(`Option "${h}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new g.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new b.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new d.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){const h=this._core.coreService.decPrivateModes;let o="none";switch(this._core.coreMouseService.activeProtocol){case"X10":o="x10";break;case"VT200":o="vt200";break;case"DRAG":o="drag";break;case"ANY":o="any"}return{applicationCursorKeysMode:h.applicationCursorKeys,applicationKeypadMode:h.applicationKeypad,bracketedPasteMode:h.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:o,originMode:h.origin,reverseWraparoundMode:h.reverseWraparound,sendFocusMode:h.sendFocus,wraparoundMode:h.wraparound}}get options(){return this._publicOptions}set options(h){for(const o in h)this._publicOptions[o]=h[o]}blur(){this._core.blur()}focus(){this._core.focus()}input(h,o=!0){this._core.input(h,o)}resize(h,o){this._verifyIntegers(h,o),this._core.resize(h,o)}open(h){this._core.open(h)}attachCustomKeyEventHandler(h){this._core.attachCustomKeyEventHandler(h)}attachCustomWheelEventHandler(h){this._core.attachCustomWheelEventHandler(h)}registerLinkProvider(h){return this._core.registerLinkProvider(h)}registerCharacterJoiner(h){return this._checkProposedApi(),this._core.registerCharacterJoiner(h)}deregisterCharacterJoiner(h){this._checkProposedApi(),this._core.deregisterCharacterJoiner(h)}registerMarker(h=0){return this._verifyIntegers(h),this._core.registerMarker(h)}registerDecoration(h){return this._checkProposedApi(),this._verifyPositiveIntegers(h.x??0,h.width??0,h.height??0),this._core.registerDecoration(h)}hasSelection(){return this._core.hasSelection()}select(h,o,l){this._verifyIntegers(h,o,l),this._core.select(h,o,l)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(h,o){this._verifyIntegers(h,o),this._core.selectLines(h,o)}dispose(){super.dispose()}scrollLines(h){this._verifyIntegers(h),this._core.scrollLines(h)}scrollPages(h){this._verifyIntegers(h),this._core.scrollPages(h)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(h){this._verifyIntegers(h),this._core.scrollToLine(h)}clear(){this._core.clear()}write(h,o){this._core.write(h,o)}writeln(h,o){this._core.write(h),this._core.write(`\r
`,o)}paste(h){this._core.paste(h)}refresh(h,o){this._verifyIntegers(h,o),this._core.refresh(h,o)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(h){this._addonManager.loadAddon(this,h)}static get strings(){return r}_verifyIntegers(...h){for(const o of h)if(o===1/0||isNaN(o)||o%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...h){for(const o of h)if(o&&(o===1/0||isNaN(o)||o%1!=0||o<0))throw new Error("This API only accepts positive integers")}}f.Terminal=m})(),u})()))})(nn)),nn.exports}var xy=Sy(),on={exports:{}},Ua;function Cy(){return Ua||(Ua=1,(function(e,t){(function(s,i){e.exports=i()})(self,(()=>(()=>{var s={};return(()=>{var i=s;Object.defineProperty(i,"__esModule",{value:!0}),i.FitAddon=void 0,i.FitAddon=class{activate(a){this._terminal=a}dispose(){}fit(){const a=this.proposeDimensions();if(!a||!this._terminal||isNaN(a.cols)||isNaN(a.rows))return;const u=this._terminal._core;this._terminal.rows===a.rows&&this._terminal.cols===a.cols||(u._renderService.clear(),this._terminal.resize(a.cols,a.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;const a=this._terminal._core,u=a._renderService.dimensions;if(u.css.cell.width===0||u.css.cell.height===0)return;const f=this._terminal.options.scrollback===0?0:a.viewport.scrollBarWidth,r=window.getComputedStyle(this._terminal.element.parentElement),n=parseInt(r.getPropertyValue("height")),p=Math.max(0,parseInt(r.getPropertyValue("width"))),_=window.getComputedStyle(this._terminal.element),d=n-(parseInt(_.getPropertyValue("padding-top"))+parseInt(_.getPropertyValue("padding-bottom"))),g=p-(parseInt(_.getPropertyValue("padding-right"))+parseInt(_.getPropertyValue("padding-left")))-f;return{cols:Math.max(2,Math.floor(g/u.css.cell.width)),rows:Math.max(1,Math.floor(d/u.css.cell.height))}}}})(),s})()))})(on)),on.exports}var ky=Cy();const Ey={class:"min-h-screen bg-gradient-to-br from-slate-900 to-slate-800 p-4 md:p-6"},Ry={class:"max-w-6xl mx-auto"},Ay={class:"flex items-center justify-between mb-6"},Ty={class:"flex items-center gap-4"},Dy=R("h1",{class:"text-2xl font-bold text-white"},"SSH ",-1),Ly={class:"flex items-center gap-3 text-slate-400"},Oy={class:"flex items-center gap-2"},My={class:"text-sm"},Iy={key:0,class:"mb-6"},By={class:"bg-slate-800/50 backdrop-blur rounded-lg p-6 border border-slate-700"},Py=R("h2",{class:"text-xl font-bold text-white mb-4"},"SSH ",-1),$y={class:"mb-4"},Fy=R("label",{class:"block text-sm font-medium text-slate-300 mb-2"},"",-1),Hy={class:"flex gap-4"},Ny={class:"flex items-center"},zy=R("span",{class:"text-slate-300"},"",-1),Uy={class:"flex items-center"},jy=R("span",{class:"text-slate-300"},"",-1),Wy={key:0,class:"mb-4"},qy=R("label",{class:"block text-sm font-medium text-slate-300 mb-2"},"",-1),Ky={class:"grid md:grid-cols-2 lg:grid-cols-4 gap-4"},Vy=R("label",{class:"block text-sm font-medium text-slate-300 mb-2"},"",-1),Gy=R("label",{class:"block text-sm font-medium text-slate-300 mb-2"},"",-1),Zy=R("label",{class:"block text-sm font-medium text-slate-300 mb-2"},"",-1),Xy=R("label",{class:"block text-sm font-medium text-slate-300 mb-2"},"",-1),Jy={class:"mt-4 flex gap-3"},Yy=["disabled"],Qy={key:1,class:"bg-black rounded-lg shadow-2xl border border-slate-700 overflow-hidden"},eS={class:"flex items-center justify-between px-4 py-2 bg-slate-800 border-b border-slate-700"},tS={class:"flex items-center gap-2"},sS=R("div",{class:"flex gap-1.5"},[R("div",{class:"w-3 h-3 rounded-full bg-red-500"}),R("div",{class:"w-3 h-3 rounded-full bg-yellow-500"}),R("div",{class:"w-3 h-3 rounded-full bg-green-500"})],-1),rS={class:"text-sm text-slate-300"},iS={class:"text-xs text-slate-500"},nS={key:1,class:"h-96 w-full p-4 bg-black text-green-400 font-mono text-sm overflow-auto"},oS=R("div",{class:"mb-2 text-slate-300"},":",-1),aS={class:"whitespace-pre-wrap"},lS={class:"px-4 py-2 bg-slate-800 border-t border-slate-700 flex items-center justify-between"},cS={class:"text-xs text-slate-500"},hS=R("span",{class:"text-slate-300"},"help",-1),uS={class:"text-xs text-slate-500"},dS=Ir('<div class="mt-6 grid md:grid-cols-2 lg:grid-cols-3 gap-4"><div class="bg-slate-800/50 backdrop-blur rounded-lg p-4 border border-slate-700"><h3 class="font-medium text-white mb-2"></h3><ul class="text-sm text-slate-300 space-y-1"><li><code class="text-green-400">ls</code> - </li><li><code class="text-green-400">cd</code> - </li><li><code class="text-green-400">pwd</code> - </li><li><code class="text-green-400">cat</code> - </li></ul></div><div class="bg-slate-800/50 backdrop-blur rounded-lg p-4 border border-slate-700"><h3 class="font-medium text-white mb-2"></h3><ul class="text-sm text-slate-300 space-y-1"><li><code class="text-green-400">date</code> - </li><li><code class="text-green-400">whoami</code> - </li><li><code class="text-green-400">uname</code> - </li><li><code class="text-green-400">echo</code> - </li></ul></div><div class="bg-slate-800/50 backdrop-blur rounded-lg p-4 border border-slate-700"><h3 class="font-medium text-white mb-2"></h3><ul class="text-sm text-slate-300 space-y-1"><li><code class="text-green-400">clear</code> - </li><li><code class="text-green-400">help</code> - </li><li><code class="text-green-400">theme</code> - </li><li><code class="text-green-400">exit</code> - </li></ul></div></div>',1),fS=ut({__name:"SshTerminal",setup(e){const t=fe(),s=fe(""),i=fe(!1),a=fe({host:"",port:22,username:"",password:""}),u=fe("interactive"),f=fe(""),r=fe(""),n=Ue(()=>a.value.host.trim()!==""&&a.value.username.trim()!==""&&a.value.password.trim()!=="");async function p(){var o;if(n.value)try{if(u.value==="interactive"){if(i.value=!0,await Wn(),!t.value)throw console.error(""),new Error("");await b()}else await d(),i.value=!0}catch(l){console.error("SSH:",l),i.value=!1;const v=(o=window.sshTerminalManager)==null?void 0:o.getTerminal();v?v.write(`\r
\x1B[31m: ${l.message}\x1B[0m\r
`):console.error(":",l.message)}}let _=null;async function d(){return new Promise((o,l)=>{const v="ws://localhost:8002/ws/ssh/execute";_=new WebSocket(v),_.onopen=()=>{console.log("WebSocket"),_==null||_.send(JSON.stringify({type:"execute",config:a.value,command:f.value}))},_.onmessage=S=>{try{const x=JSON.parse(S.data);switch(x.type){case"success":console.log(""),r.value=x.output,o(x);break;case"error":console.error(":",x.message),r.value=`: ${x.message}`,l(new Error(x.message));break;case"data":r.value+=x.data;break}}catch(x){console.error(":",x)}},_.onerror=S=>{console.error("WebSocket:",S),l(new Error("WebSocket"))},_.onclose=()=>{console.log("WebSocket"),i.value=!1},setTimeout(()=>{(_==null?void 0:_.readyState)!==WebSocket.OPEN&&l(new Error(""))},3e4)})}class g{constructor(l,v,S,x){this.ws=null,this.terminal=null,this.fitAddon=null,this.sessionId=null,this.terminalContainer=null,this.connectionConfig=null,this.isConnecting=!1,this.terminalContainer=l,this.connectionConfig=v,this.onConnectionChange=S,this.onError=x,this.connect()}initTerminal(){this.terminalContainer&&(this.terminal=new xy.Terminal({theme:{background:"#000000",foreground:"#00ff00",cursor:"#00ff00",selection:"#ffffff40"},fontSize:14,fontFamily:'Consolas, "Courier New", monospace',cursorBlink:!0}),this.fitAddon=new ky.FitAddon,this.terminal.loadAddon(this.fitAddon),this.terminal.open(this.terminalContainer),this.fitAddon.fit(),setTimeout(()=>{var l;(l=this.terminal)==null||l.focus()},100),this.terminal.write(`\x1B[1;32mSSH v3.0 - \x1B[0m\r
`),this.terminal.write(` \x1B[33mhelp\x1B[0m \r
\r
`),this.terminal.onData(l=>{this.ws&&this.ws.readyState===WebSocket.OPEN&&this.ws.send(JSON.stringify({type:"command",data:{command:l}}))}),window.addEventListener("resize",()=>{this.resizeTerminal()}))}resizeTerminal(){if(this.fitAddon&&this.fitAddon.fit(),this.ws&&this.ws.readyState===WebSocket.OPEN&&this.terminal){const l=this.terminal.cols,v=this.terminal.rows;this.ws.send(JSON.stringify({type:"resize",data:{cols:l,rows:v}}))}}log(l){this.terminal&&this.terminal.write(`\r
\x1B[33m${l}\x1B[0m\r
`)}async connect(){if(!this.isConnecting)return this.isConnecting=!0,new Promise((l,v)=>{if(!this.terminalContainer){v(new Error(""));return}this.initTerminal();const S="ws://localhost:8002/ws/ssh";this.ws=new WebSocket(S),this.ws.onopen=()=>{var x;console.log("WebSocket"),this.log("SSH..."),(x=this.ws)==null||x.send(JSON.stringify({type:"connect",data:this.connectionConfig}))},this.ws.onmessage=x=>{try{const k=JSON.parse(x.data);switch(k.type){case"connected":this.sessionId=k.session_id,this.onConnectionChange(!0),this.log("SSH"),this.isConnecting=!1,l();break;case"output":case"data":this.terminal&&this.terminal.write(k.data||k.output);break;case"error":const C=k.message||"";this.onError(C),this.terminal&&this.terminal.write(`\r
\x1B[31m: ${C}\x1B[0m\r
`),this.isConnecting=!1,v(new Error(C));break;case"completed":this.log(`: ${k.exit_code}`);break;case"disconnected":this.onConnectionChange(!1),this.log("SSH");break}}catch(k){console.error(":",k),this.onError(""),this.isConnecting=!1}},this.ws.onerror=x=>{console.error("WebSocket:",x),this.onError("WebSocket"),this.isConnecting=!1,v(new Error("WebSocket"))},this.ws.onclose=()=>{console.log("WebSocket"),this.onConnectionChange(!1),this.log(""),this.isConnecting=!1},setTimeout(()=>{var x;((x=this.ws)==null?void 0:x.readyState)!==WebSocket.OPEN&&this.isConnecting&&(this.isConnecting=!1,v(new Error("")))},1e4)})}disconnect(){this.ws&&this.ws.readyState===WebSocket.OPEN&&this.ws.send(JSON.stringify({type:"disconnect"})),this.ws&&(this.ws.close(),this.ws=null),this.terminal&&(this.terminal.dispose(),this.terminal=null),this.onConnectionChange(!1)}getTerminal(){return this.terminal}}async function b(){if(!t.value)throw new Error("");const o=new g(t.value,a.value,l=>{i.value=l},l=>{console.error("SSH:",l)});try{await o.connect(),window.sshTerminalManager=o}catch(l){throw console.error("SSH:",l),l}}function w(){window.sshTerminalManager?(window.sshTerminalManager.disconnect(),window.sshTerminalManager=null):(_&&_.readyState===WebSocket.OPEN&&_.send(JSON.stringify({type:"disconnect"})),_&&(_.close(),_=null),window.sshTerminalManager&&(window.sshTerminalManager.disconnect(),window.sshTerminalManager=null)),i.value=!1,r.value=""}function m(){a.value={host:"",port:22,username:"",password:""},f.value="",r.value="",u.value="interactive"}function c(){var l;const o=(l=window.sshTerminalManager)==null?void 0:l.getTerminal();o&&(o.clear(),o.write(`\x1B[1;32mSSH v3.0 - \x1B[0m\r
`),o.write(` \x1B[33mhelp\x1B[0m \r
\r
`))}function h(){s.value=new Date().toLocaleString("zh-CN")}return fs(()=>{h();const o=setInterval(h,1e3);Mr(()=>{clearInterval(o),_&&(_.close(),_=null),window.sshTerminalManager&&(window.sshTerminalManager.disconnect(),window.sshTerminalManager=null)}),window.addEventListener("resize",()=>{var v,S;((v=window.sshTerminalManager)==null?void 0:v.getTerminal())&&((S=window.sshTerminalManager)==null||S.resizeTerminal())})}),(o,l)=>(ue(),de("div",Ey,[R("div",Ry,[R("div",Ay,[R("div",Ty,[be(ve(Qt),{to:"/",class:"flex items-center gap-2 px-3 py-2 bg-white/10 backdrop-blur rounded-lg shadow-sm border border-slate-700 text-slate-300 hover:text-white hover:bg-white/20 transition-colors"},{default:Yt(()=>[be(ve(gs),{class:"w-4 h-4"}),We("  ")]),_:1}),Dy]),R("div",Ly,[R("div",Oy,[R("div",{class:Te(["w-2 h-2 rounded-full",i.value?"bg-green-500 animate-pulse":"bg-red-500"])},null,2),R("span",My,we(i.value?"":""),1)]),i.value?(ue(),de("button",{key:0,onClick:w,class:"px-3 py-1.5 bg-red-600 hover:bg-red-500 rounded text-sm transition-colors"},"  ")):Oe("",!0),R("button",{onClick:c,class:"px-3 py-1.5 bg-slate-700 hover:bg-slate-600 rounded text-sm transition-colors"},"  ")])]),i.value?Oe("",!0):(ue(),de("div",Iy,[R("div",By,[Py,R("div",$y,[Fy,R("div",Hy,[R("label",Ny,[Ze(R("input",{"onUpdate:modelValue":l[0]||(l[0]=v=>u.value=v),type:"radio",value:"interactive",class:"mr-2"},null,512),[[Vo,u.value]]),zy]),R("label",Uy,[Ze(R("input",{"onUpdate:modelValue":l[1]||(l[1]=v=>u.value=v),type:"radio",value:"execute",class:"mr-2"},null,512),[[Vo,u.value]]),jy])])]),u.value==="execute"?(ue(),de("div",Wy,[qy,Ze(R("textarea",{"onUpdate:modelValue":l[2]||(l[2]=v=>f.value=v),placeholder:"ls -la",rows:"3",class:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded text-white placeholder-slate-400 focus:outline-none focus:border-blue-500"},null,512),[[Ye,f.value]])])):Oe("",!0),R("div",Ky,[R("div",null,[Vy,Ze(R("input",{"onUpdate:modelValue":l[3]||(l[3]=v=>a.value.host=v),type:"text",placeholder:"192.168.1.100",class:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded text-white placeholder-slate-400 focus:outline-none focus:border-blue-500"},null,512),[[Ye,a.value.host]])]),R("div",null,[Gy,Ze(R("input",{"onUpdate:modelValue":l[4]||(l[4]=v=>a.value.port=v),type:"number",placeholder:"22",class:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded text-white placeholder-slate-400 focus:outline-none focus:border-blue-500"},null,512),[[Ye,a.value.port]])]),R("div",null,[Zy,Ze(R("input",{"onUpdate:modelValue":l[5]||(l[5]=v=>a.value.username=v),type:"text",placeholder:"root",class:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded text-white placeholder-slate-400 focus:outline-none focus:border-blue-500"},null,512),[[Ye,a.value.username]])]),R("div",null,[Xy,Ze(R("input",{"onUpdate:modelValue":l[6]||(l[6]=v=>a.value.password=v),type:"password",placeholder:"",class:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded text-white placeholder-slate-400 focus:outline-none focus:border-blue-500"},null,512),[[Ye,a.value.password]])])]),R("div",Jy,[u.value==="interactive"||!i.value?(ue(),de("button",{key:0,onClick:p,disabled:!n.value,class:Te(["px-4 py-2 rounded font-medium transition-colors",n.value?"bg-green-600 hover:bg-green-500 text-white":"bg-slate-600 text-slate-400 cursor-not-allowed"])},we(u.value==="interactive"?"":""),11,Yy)):Oe("",!0),u.value==="execute"&&i.value?(ue(),de("button",{key:1,onClick:l[7]||(l[7]=v=>i.value=!1),class:"px-4 py-2 bg-blue-600 hover:bg-blue-500 rounded text-white transition-colors"},"  ")):Oe("",!0),R("button",{onClick:m,class:"px-4 py-2 bg-slate-600 hover:bg-slate-500 rounded text-white transition-colors"},"  ")])])])),i.value?(ue(),de("div",Qy,[R("div",eS,[R("div",tS,[sS,R("span",rS,[u.value==="interactive"?(ue(),de(Qe,{key:0},[We(" ssh "+we(a.value.username)+"@"+we(a.value.host)+":"+we(a.value.port),1)],64)):(ue(),de(Qe,{key:1},[We(" : "+we(f.value),1)],64))])]),R("div",iS,we(u.value==="interactive"?"SSH v3.0 - ":""),1)]),u.value==="interactive"?(ue(),de("div",{key:0,ref_key:"terminalContainer",ref:t,class:"h-96 w-full"},null,512)):(ue(),de("div",nS,[oS,R("pre",aS,we(r.value),1)])),R("div",lS,[R("div",cS,[u.value==="interactive"?(ue(),de(Qe,{key:0},[We("  "),hS,We("  ")],64)):(ue(),de(Qe,{key:1},[We("  ")],64))]),R("div",uS,we(s.value),1)])])):Oe("",!0),dS])]))}}),pS=[{path:"/",name:"home",component:ap},{path:"/reader",name:"reader",component:q_},{path:"/json",name:"json",component:ag},{path:"/timestamp",name:"timestamp",component:nm},{path:"/case",name:"case",component:Dm},{path:"/string",name:"string",component:Jm},{path:"/images",name:"images",component:Kv},{path:"/images-new",name:"images-new",component:wb},{path:"/image-to-base64",name:"image-to-base64",component:Qb},{path:"/script-writer",name:"script-writer",component:yy},{path:"/ssh",name:"ssh",component:fS}],_S=cf({history:Ed(),routes:pS}),Pc=ad(wf);Pc.use(_S);Pc.mount("#app");
