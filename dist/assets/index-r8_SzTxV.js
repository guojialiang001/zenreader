var El=Object.defineProperty;var In=e=>{throw TypeError(e)};var Tl=(e,t,s)=>t in e?El(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s;var qe=(e,t,s)=>Tl(e,typeof t!="symbol"?t+"":t,s),Al=(e,t,s)=>t.has(e)||In("Cannot "+s);var On=(e,t,s)=>t.has(e)?In("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,s);var Ci=(e,t,s)=>(Al(e,t,"access private method"),s);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))o(u);new MutationObserver(u=>{for(const d of u)if(d.type==="childList")for(const b of d.addedNodes)b.tagName==="LINK"&&b.rel==="modulepreload"&&o(b)}).observe(document,{childList:!0,subtree:!0});function s(u){const d={};return u.integrity&&(d.integrity=u.integrity),u.referrerPolicy&&(d.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?d.credentials="include":u.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function o(u){if(u.ep)return;u.ep=!0;const d=s(u);fetch(u.href,d)}})();/**
* @vue/shared v3.5.26
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function rn(e){const t=Object.create(null);for(const s of e.split(","))t[s]=1;return s=>s in t}const Ke={},Fs=[],ts=()=>{},qo=()=>!1,sr=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),nn=e=>e.startsWith("onUpdate:"),gt=Object.assign,on=(e,t)=>{const s=e.indexOf(t);s>-1&&e.splice(s,1)},Rl=Object.prototype.hasOwnProperty,ze=(e,t)=>Rl.call(e,t),De=Array.isArray,zs=e=>ir(e)==="[object Map]",Ko=e=>ir(e)==="[object Set]",Ie=e=>typeof e=="function",ot=e=>typeof e=="string",Ss=e=>typeof e=="symbol",Qe=e=>e!==null&&typeof e=="object",Go=e=>(Qe(e)||Ie(e))&&Ie(e.then)&&Ie(e.catch),Zo=Object.prototype.toString,ir=e=>Zo.call(e),Ml=e=>ir(e).slice(8,-1),Xo=e=>ir(e)==="[object Object]",an=e=>ot(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,ri=rn(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),rr=e=>{const t=Object.create(null);return(s=>t[s]||(t[s]=e(s)))},Dl=/-\w/g,Ft=rr(e=>e.replace(Dl,t=>t.slice(1).toUpperCase())),Ll=/\B([A-Z])/g,Is=rr(e=>e.replace(Ll,"-$1").toLowerCase()),nr=rr(e=>e.charAt(0).toUpperCase()+e.slice(1)),gr=rr(e=>e?`on${nr(e)}`:""),ws=(e,t)=>!Object.is(e,t),Bi=(e,...t)=>{for(let s=0;s<e.length;s++)e[s](...t)},Yo=(e,t,s,o=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:o,value:s})},ln=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let Bn;const or=()=>Bn||(Bn=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Lt(e){if(De(e)){const t={};for(let s=0;s<e.length;s++){const o=e[s],u=ot(o)?Pl(o):Lt(o);if(u)for(const d in u)t[d]=u[d]}return t}else if(ot(e)||Qe(e))return e}const Il=/;(?![^(]*\))/g,Ol=/:([^]+)/,Bl=/\/\*[^]*?\*\//g;function Pl(e){const t={};return e.replace(Bl,"").split(Il).forEach(s=>{if(s){const o=s.split(Ol);o.length>1&&(t[o[0].trim()]=o[1].trim())}}),t}function Ae(e){let t="";if(ot(e))t=e;else if(De(e))for(let s=0;s<e.length;s++){const o=Ae(e[s]);o&&(t+=o+" ")}else if(Qe(e))for(const s in e)e[s]&&(t+=s+" ");return t.trim()}const $l="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Hl=rn($l);function Jo(e){return!!e||e===""}const Qo=e=>!!(e&&e.__v_isRef===!0),be=e=>ot(e)?e:e==null?"":De(e)||Qe(e)&&(e.toString===Zo||!Ie(e.toString))?Qo(e)?be(e.value):JSON.stringify(e,ea,2):String(e),ea=(e,t)=>Qo(t)?ea(e,t.value):zs(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((s,[o,u],d)=>(s[vr(o,d)+" =>"]=u,s),{})}:Ko(t)?{[`Set(${t.size})`]:[...t.values()].map(s=>vr(s))}:Ss(t)?vr(t):Qe(t)&&!De(t)&&!Xo(t)?String(t):t,vr=(e,t="")=>{var s;return Ss(e)?`Symbol(${(s=e.description)!=null?s:t})`:e};/**
* @vue/reactivity v3.5.26
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let kt;class Nl{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=kt,!t&&kt&&(this.index=(kt.scopes||(kt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,s;if(this.scopes)for(t=0,s=this.scopes.length;t<s;t++)this.scopes[t].pause();for(t=0,s=this.effects.length;t<s;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,s;if(this.scopes)for(t=0,s=this.scopes.length;t<s;t++)this.scopes[t].resume();for(t=0,s=this.effects.length;t<s;t++)this.effects[t].resume()}}run(t){if(this._active){const s=kt;try{return kt=this,t()}finally{kt=s}}}on(){++this._on===1&&(this.prevScope=kt,kt=this)}off(){this._on>0&&--this._on===0&&(kt=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let s,o;for(s=0,o=this.effects.length;s<o;s++)this.effects[s].stop();for(this.effects.length=0,s=0,o=this.cleanups.length;s<o;s++)this.cleanups[s]();if(this.cleanups.length=0,this.scopes){for(s=0,o=this.scopes.length;s<o;s++)this.scopes[s].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const u=this.parent.scopes.pop();u&&u!==this&&(this.parent.scopes[this.index]=u,u.index=this.index)}this.parent=void 0}}}function Fl(){return kt}let Ze;const br=new WeakSet;class ta{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,kt&&kt.active&&kt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,br.has(this)&&(br.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||ia(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Pn(this),ra(this);const t=Ze,s=Wt;Ze=this,Wt=!0;try{return this.fn()}finally{na(this),Ze=t,Wt=s,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)un(t);this.deps=this.depsTail=void 0,Pn(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?br.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Nr(this)&&this.run()}get dirty(){return Nr(this)}}let sa=0,ni,oi;function ia(e,t=!1){if(e.flags|=8,t){e.next=oi,oi=e;return}e.next=ni,ni=e}function cn(){sa++}function hn(){if(--sa>0)return;if(oi){let t=oi;for(oi=void 0;t;){const s=t.next;t.next=void 0,t.flags&=-9,t=s}}let e;for(;ni;){let t=ni;for(ni=void 0;t;){const s=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(o){e||(e=o)}t=s}}if(e)throw e}function ra(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function na(e){let t,s=e.depsTail,o=s;for(;o;){const u=o.prevDep;o.version===-1?(o===s&&(s=u),un(o),zl(o)):t=o,o.dep.activeLink=o.prevActiveLink,o.prevActiveLink=void 0,o=u}e.deps=t,e.depsTail=s}function Nr(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(oa(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function oa(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===pi)||(e.globalVersion=pi,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!Nr(e))))return;e.flags|=2;const t=e.dep,s=Ze,o=Wt;Ze=e,Wt=!0;try{ra(e);const u=e.fn(e._value);(t.version===0||ws(u,e._value))&&(e.flags|=128,e._value=u,t.version++)}catch(u){throw t.version++,u}finally{Ze=s,Wt=o,na(e),e.flags&=-3}}function un(e,t=!1){const{dep:s,prevSub:o,nextSub:u}=e;if(o&&(o.nextSub=u,e.prevSub=void 0),u&&(u.prevSub=o,e.nextSub=void 0),s.subs===e&&(s.subs=o,!o&&s.computed)){s.computed.flags&=-5;for(let d=s.computed.deps;d;d=d.nextDep)un(d,!0)}!t&&!--s.sc&&s.map&&s.map.delete(s.key)}function zl(e){const{prevDep:t,nextDep:s}=e;t&&(t.nextDep=s,e.prevDep=void 0),s&&(s.prevDep=t,e.nextDep=void 0)}let Wt=!0;const aa=[];function cs(){aa.push(Wt),Wt=!1}function hs(){const e=aa.pop();Wt=e===void 0?!0:e}function Pn(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const s=Ze;Ze=void 0;try{t()}finally{Ze=s}}}let pi=0,Ul=class{constructor(t,s){this.sub=t,this.dep=s,this.version=s.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}};class dn{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!Ze||!Wt||Ze===this.computed)return;let s=this.activeLink;if(s===void 0||s.sub!==Ze)s=this.activeLink=new Ul(Ze,this),Ze.deps?(s.prevDep=Ze.depsTail,Ze.depsTail.nextDep=s,Ze.depsTail=s):Ze.deps=Ze.depsTail=s,la(s);else if(s.version===-1&&(s.version=this.version,s.nextDep)){const o=s.nextDep;o.prevDep=s.prevDep,s.prevDep&&(s.prevDep.nextDep=o),s.prevDep=Ze.depsTail,s.nextDep=void 0,Ze.depsTail.nextDep=s,Ze.depsTail=s,Ze.deps===s&&(Ze.deps=o)}return s}trigger(t){this.version++,pi++,this.notify(t)}notify(t){cn();try{for(let s=this.subs;s;s=s.prevSub)s.sub.notify()&&s.sub.dep.notify()}finally{hn()}}}function la(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let o=t.deps;o;o=o.nextDep)la(o)}const s=e.dep.subs;s!==e&&(e.prevSub=s,s&&(s.nextSub=e)),e.dep.subs=e}}const Fr=new WeakMap,As=Symbol(""),zr=Symbol(""),mi=Symbol("");function pt(e,t,s){if(Wt&&Ze){let o=Fr.get(e);o||Fr.set(e,o=new Map);let u=o.get(s);u||(o.set(s,u=new dn),u.map=o,u.key=s),u.track()}}function os(e,t,s,o,u,d){const b=Fr.get(e);if(!b){pi++;return}const i=r=>{r&&r.trigger()};if(cn(),t==="clear")b.forEach(i);else{const r=De(e),f=r&&an(s);if(r&&s==="length"){const p=Number(o);b.forEach((h,_)=>{(_==="length"||_===mi||!Ss(_)&&_>=p)&&i(h)})}else switch((s!==void 0||b.has(void 0))&&i(b.get(s)),f&&i(b.get(mi)),t){case"add":r?f&&i(b.get("length")):(i(b.get(As)),zs(e)&&i(b.get(zr)));break;case"delete":r||(i(b.get(As)),zs(e)&&i(b.get(zr)));break;case"set":zs(e)&&i(b.get(As));break}}hn()}function Bs(e){const t=Fe(e);return t===e?t:(pt(t,"iterate",mi),Ht(e)?t:t.map(Vt))}function ar(e){return pt(e=Fe(e),"iterate",mi),e}function _s(e,t){return us(e)?Rs(e)?js(Vt(t)):js(t):Vt(t)}const Wl={__proto__:null,[Symbol.iterator](){return wr(this,Symbol.iterator,e=>_s(this,e))},concat(...e){return Bs(this).concat(...e.map(t=>De(t)?Bs(t):t))},entries(){return wr(this,"entries",e=>(e[1]=_s(this,e[1]),e))},every(e,t){return is(this,"every",e,t,void 0,arguments)},filter(e,t){return is(this,"filter",e,t,s=>s.map(o=>_s(this,o)),arguments)},find(e,t){return is(this,"find",e,t,s=>_s(this,s),arguments)},findIndex(e,t){return is(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return is(this,"findLast",e,t,s=>_s(this,s),arguments)},findLastIndex(e,t){return is(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return is(this,"forEach",e,t,void 0,arguments)},includes(...e){return yr(this,"includes",e)},indexOf(...e){return yr(this,"indexOf",e)},join(e){return Bs(this).join(e)},lastIndexOf(...e){return yr(this,"lastIndexOf",e)},map(e,t){return is(this,"map",e,t,void 0,arguments)},pop(){return Ys(this,"pop")},push(...e){return Ys(this,"push",e)},reduce(e,...t){return $n(this,"reduce",e,t)},reduceRight(e,...t){return $n(this,"reduceRight",e,t)},shift(){return Ys(this,"shift")},some(e,t){return is(this,"some",e,t,void 0,arguments)},splice(...e){return Ys(this,"splice",e)},toReversed(){return Bs(this).toReversed()},toSorted(e){return Bs(this).toSorted(e)},toSpliced(...e){return Bs(this).toSpliced(...e)},unshift(...e){return Ys(this,"unshift",e)},values(){return wr(this,"values",e=>_s(this,e))}};function wr(e,t,s){const o=ar(e),u=o[t]();return o!==e&&!Ht(e)&&(u._next=u.next,u.next=()=>{const d=u._next();return d.done||(d.value=s(d.value)),d}),u}const jl=Array.prototype;function is(e,t,s,o,u,d){const b=ar(e),i=b!==e&&!Ht(e),r=b[t];if(r!==jl[t]){const h=r.apply(e,d);return i?Vt(h):h}let f=s;b!==e&&(i?f=function(h,_){return s.call(this,_s(e,h),_,e)}:s.length>2&&(f=function(h,_){return s.call(this,h,_,e)}));const p=r.call(b,f,o);return i&&u?u(p):p}function $n(e,t,s,o){const u=ar(e);let d=s;return u!==e&&(Ht(e)?s.length>3&&(d=function(b,i,r){return s.call(this,b,i,r,e)}):d=function(b,i,r){return s.call(this,b,_s(e,i),r,e)}),u[t](d,...o)}function yr(e,t,s){const o=Fe(e);pt(o,"iterate",mi);const u=o[t](...s);return(u===-1||u===!1)&&mn(s[0])?(s[0]=Fe(s[0]),o[t](...s)):u}function Ys(e,t,s=[]){cs(),cn();const o=Fe(e)[t].apply(e,s);return hn(),hs(),o}const Vl=rn("__proto__,__v_isRef,__isVue"),ca=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Ss));function ql(e){Ss(e)||(e=String(e));const t=Fe(this);return pt(t,"has",e),t.hasOwnProperty(e)}class ha{constructor(t=!1,s=!1){this._isReadonly=t,this._isShallow=s}get(t,s,o){if(s==="__v_skip")return t.__v_skip;const u=this._isReadonly,d=this._isShallow;if(s==="__v_isReactive")return!u;if(s==="__v_isReadonly")return u;if(s==="__v_isShallow")return d;if(s==="__v_raw")return o===(u?d?sc:pa:d?fa:da).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(o)?t:void 0;const b=De(t);if(!u){let r;if(b&&(r=Wl[s]))return r;if(s==="hasOwnProperty")return ql}const i=Reflect.get(t,s,_t(t)?t:o);if((Ss(s)?ca.has(s):Vl(s))||(u||pt(t,"get",s),d))return i;if(_t(i)){const r=b&&an(s)?i:i.value;return u&&Qe(r)?Wr(r):r}return Qe(i)?u?Wr(i):Ut(i):i}}class ua extends ha{constructor(t=!1){super(!1,t)}set(t,s,o,u){let d=t[s];const b=De(t)&&an(s);if(!this._isShallow){const f=us(d);if(!Ht(o)&&!us(o)&&(d=Fe(d),o=Fe(o)),!b&&_t(d)&&!_t(o))return f||(d.value=o),!0}const i=b?Number(s)<t.length:ze(t,s),r=Reflect.set(t,s,o,_t(t)?t:u);return t===Fe(u)&&(i?ws(o,d)&&os(t,"set",s,o):os(t,"add",s,o)),r}deleteProperty(t,s){const o=ze(t,s);t[s];const u=Reflect.deleteProperty(t,s);return u&&o&&os(t,"delete",s,void 0),u}has(t,s){const o=Reflect.has(t,s);return(!Ss(s)||!ca.has(s))&&pt(t,"has",s),o}ownKeys(t){return pt(t,"iterate",De(t)?"length":As),Reflect.ownKeys(t)}}class Kl extends ha{constructor(t=!1){super(!0,t)}set(t,s){return!0}deleteProperty(t,s){return!0}}const Gl=new ua,Zl=new Kl,Xl=new ua(!0);const Ur=e=>e,ki=e=>Reflect.getPrototypeOf(e);function Yl(e,t,s){return function(...o){const u=this.__v_raw,d=Fe(u),b=zs(d),i=e==="entries"||e===Symbol.iterator&&b,r=e==="keys"&&b,f=u[e](...o),p=s?Ur:t?js:Vt;return!t&&pt(d,"iterate",r?zr:As),{next(){const{value:h,done:_}=f.next();return _?{value:h,done:_}:{value:i?[p(h[0]),p(h[1])]:p(h),done:_}},[Symbol.iterator](){return this}}}}function Ei(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function Jl(e,t){const s={get(u){const d=this.__v_raw,b=Fe(d),i=Fe(u);e||(ws(u,i)&&pt(b,"get",u),pt(b,"get",i));const{has:r}=ki(b),f=t?Ur:e?js:Vt;if(r.call(b,u))return f(d.get(u));if(r.call(b,i))return f(d.get(i));d!==b&&d.get(u)},get size(){const u=this.__v_raw;return!e&&pt(Fe(u),"iterate",As),u.size},has(u){const d=this.__v_raw,b=Fe(d),i=Fe(u);return e||(ws(u,i)&&pt(b,"has",u),pt(b,"has",i)),u===i?d.has(u):d.has(u)||d.has(i)},forEach(u,d){const b=this,i=b.__v_raw,r=Fe(i),f=t?Ur:e?js:Vt;return!e&&pt(r,"iterate",As),i.forEach((p,h)=>u.call(d,f(p),f(h),b))}};return gt(s,e?{add:Ei("add"),set:Ei("set"),delete:Ei("delete"),clear:Ei("clear")}:{add(u){!t&&!Ht(u)&&!us(u)&&(u=Fe(u));const d=Fe(this);return ki(d).has.call(d,u)||(d.add(u),os(d,"add",u,u)),this},set(u,d){!t&&!Ht(d)&&!us(d)&&(d=Fe(d));const b=Fe(this),{has:i,get:r}=ki(b);let f=i.call(b,u);f||(u=Fe(u),f=i.call(b,u));const p=r.call(b,u);return b.set(u,d),f?ws(d,p)&&os(b,"set",u,d):os(b,"add",u,d),this},delete(u){const d=Fe(this),{has:b,get:i}=ki(d);let r=b.call(d,u);r||(u=Fe(u),r=b.call(d,u)),i&&i.call(d,u);const f=d.delete(u);return r&&os(d,"delete",u,void 0),f},clear(){const u=Fe(this),d=u.size!==0,b=u.clear();return d&&os(u,"clear",void 0,void 0),b}}),["keys","values","entries",Symbol.iterator].forEach(u=>{s[u]=Yl(u,e,t)}),s}function fn(e,t){const s=Jl(e,t);return(o,u,d)=>u==="__v_isReactive"?!e:u==="__v_isReadonly"?e:u==="__v_raw"?o:Reflect.get(ze(s,u)&&u in o?s:o,u,d)}const Ql={get:fn(!1,!1)},ec={get:fn(!1,!0)},tc={get:fn(!0,!1)};const da=new WeakMap,fa=new WeakMap,pa=new WeakMap,sc=new WeakMap;function ic(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function rc(e){return e.__v_skip||!Object.isExtensible(e)?0:ic(Ml(e))}function Ut(e){return us(e)?e:pn(e,!1,Gl,Ql,da)}function ma(e){return pn(e,!1,Xl,ec,fa)}function Wr(e){return pn(e,!0,Zl,tc,pa)}function pn(e,t,s,o,u){if(!Qe(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const d=rc(e);if(d===0)return e;const b=u.get(e);if(b)return b;const i=new Proxy(e,d===2?o:s);return u.set(e,i),i}function Rs(e){return us(e)?Rs(e.__v_raw):!!(e&&e.__v_isReactive)}function us(e){return!!(e&&e.__v_isReadonly)}function Ht(e){return!!(e&&e.__v_isShallow)}function mn(e){return e?!!e.__v_raw:!1}function Fe(e){const t=e&&e.__v_raw;return t?Fe(t):e}function nc(e){return!ze(e,"__v_skip")&&Object.isExtensible(e)&&Yo(e,"__v_skip",!0),e}const Vt=e=>Qe(e)?Ut(e):e,js=e=>Qe(e)?Wr(e):e;function _t(e){return e?e.__v_isRef===!0:!1}function fe(e){return _a(e,!1)}function oc(e){return _a(e,!0)}function _a(e,t){return _t(e)?e:new ac(e,t)}class ac{constructor(t,s){this.dep=new dn,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=s?t:Fe(t),this._value=s?t:Vt(t),this.__v_isShallow=s}get value(){return this.dep.track(),this._value}set value(t){const s=this._rawValue,o=this.__v_isShallow||Ht(t)||us(t);t=o?t:Fe(t),ws(t,s)&&(this._rawValue=t,this._value=o?t:Vt(t),this.dep.trigger())}}function ve(e){return _t(e)?e.value:e}const lc={get:(e,t,s)=>t==="__v_raw"?e:ve(Reflect.get(e,t,s)),set:(e,t,s,o)=>{const u=e[t];return _t(u)&&!_t(s)?(u.value=s,!0):Reflect.set(e,t,s,o)}};function ga(e){return Rs(e)?e:new Proxy(e,lc)}class cc{constructor(t,s,o){this.fn=t,this.setter=s,this._value=void 0,this.dep=new dn(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=pi-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!s,this.isSSR=o}notify(){if(this.flags|=16,!(this.flags&8)&&Ze!==this)return ia(this,!0),!0}get value(){const t=this.dep.track();return oa(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function hc(e,t,s=!1){let o,u;return Ie(e)?o=e:(o=e.get,u=e.set),new cc(o,u,s)}const Ti={},Ui=new WeakMap;let Ts;function uc(e,t=!1,s=Ts){if(s){let o=Ui.get(s);o||Ui.set(s,o=[]),o.push(e)}}function dc(e,t,s=Ke){const{immediate:o,deep:u,once:d,scheduler:b,augmentJob:i,call:r}=s,f=v=>u?v:Ht(v)||u===!1||u===0?as(v,1):as(v);let p,h,_,m,w=!1,g=!1;if(_t(e)?(h=()=>e.value,w=Ht(e)):Rs(e)?(h=()=>f(e),w=!0):De(e)?(g=!0,w=e.some(v=>Rs(v)||Ht(v)),h=()=>e.map(v=>{if(_t(v))return v.value;if(Rs(v))return f(v);if(Ie(v))return r?r(v,2):v()})):Ie(e)?t?h=r?()=>r(e,2):e:h=()=>{if(_){cs();try{_()}finally{hs()}}const v=Ts;Ts=p;try{return r?r(e,3,[m]):e(m)}finally{Ts=v}}:h=ts,t&&u){const v=h,x=u===!0?1/0:u;h=()=>as(v(),x)}const l=Fl(),a=()=>{p.stop(),l&&l.active&&on(l.effects,p)};if(d&&t){const v=t;t=(...x)=>{v(...x),a()}}let n=g?new Array(e.length).fill(Ti):Ti;const c=v=>{if(!(!(p.flags&1)||!p.dirty&&!v))if(t){const x=p.run();if(u||w||(g?x.some((k,E)=>ws(k,n[E])):ws(x,n))){_&&_();const k=Ts;Ts=p;try{const E=[x,n===Ti?void 0:g&&n[0]===Ti?[]:n,m];n=x,r?r(t,3,E):t(...E)}finally{Ts=k}}}else p.run()};return i&&i(c),p=new ta(h),p.scheduler=b?()=>b(c,!1):c,m=v=>uc(v,!1,p),_=p.onStop=()=>{const v=Ui.get(p);if(v){if(r)r(v,4);else for(const x of v)x();Ui.delete(p)}},t?o?c(!0):n=p.run():b?b(c.bind(null,!0),!0):p.run(),a.pause=p.pause.bind(p),a.resume=p.resume.bind(p),a.stop=a,a}function as(e,t=1/0,s){if(t<=0||!Qe(e)||e.__v_skip||(s=s||new Map,(s.get(e)||0)>=t))return e;if(s.set(e,t),t--,_t(e))as(e.value,t,s);else if(De(e))for(let o=0;o<e.length;o++)as(e[o],t,s);else if(Ko(e)||zs(e))e.forEach(o=>{as(o,t,s)});else if(Xo(e)){for(const o in e)as(e[o],t,s);for(const o of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,o)&&as(e[o],t,s)}return e}/**
* @vue/runtime-core v3.5.26
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function yi(e,t,s,o){try{return o?e(...o):e()}catch(u){lr(u,t,s)}}function ss(e,t,s,o){if(Ie(e)){const u=yi(e,t,s,o);return u&&Go(u)&&u.catch(d=>{lr(d,t,s)}),u}if(De(e)){const u=[];for(let d=0;d<e.length;d++)u.push(ss(e[d],t,s,o));return u}}function lr(e,t,s,o=!0){const u=t?t.vnode:null,{errorHandler:d,throwUnhandledErrorInProduction:b}=t&&t.appContext.config||Ke;if(t){let i=t.parent;const r=t.proxy,f=`https://vuejs.org/error-reference/#runtime-${s}`;for(;i;){const p=i.ec;if(p){for(let h=0;h<p.length;h++)if(p[h](e,r,f)===!1)return}i=i.parent}if(d){cs(),yi(d,null,10,[e,r,f]),hs();return}}fc(e,s,u,o,b)}function fc(e,t,s,o=!0,u=!1){if(u)throw e;console.error(e)}const wt=[];let Yt=-1;const Us=[];let gs=null,$s=0;const va=Promise.resolve();let Wi=null;function cr(e){const t=Wi||va;return e?t.then(this?e.bind(this):e):t}function pc(e){let t=Yt+1,s=wt.length;for(;t<s;){const o=t+s>>>1,u=wt[o],d=_i(u);d<e||d===e&&u.flags&2?t=o+1:s=o}return t}function _n(e){if(!(e.flags&1)){const t=_i(e),s=wt[wt.length-1];!s||!(e.flags&2)&&t>=_i(s)?wt.push(e):wt.splice(pc(t),0,e),e.flags|=1,ba()}}function ba(){Wi||(Wi=va.then(ya))}function mc(e){De(e)?Us.push(...e):gs&&e.id===-1?gs.splice($s+1,0,e):e.flags&1||(Us.push(e),e.flags|=1),ba()}function Hn(e,t,s=Yt+1){for(;s<wt.length;s++){const o=wt[s];if(o&&o.flags&2){if(e&&o.id!==e.uid)continue;wt.splice(s,1),s--,o.flags&4&&(o.flags&=-2),o(),o.flags&4||(o.flags&=-2)}}}function wa(e){if(Us.length){const t=[...new Set(Us)].sort((s,o)=>_i(s)-_i(o));if(Us.length=0,gs){gs.push(...t);return}for(gs=t,$s=0;$s<gs.length;$s++){const s=gs[$s];s.flags&4&&(s.flags&=-2),s.flags&8||s(),s.flags&=-2}gs=null,$s=0}}const _i=e=>e.id==null?e.flags&2?-1:1/0:e.id;function ya(e){try{for(Yt=0;Yt<wt.length;Yt++){const t=wt[Yt];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),yi(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Yt<wt.length;Yt++){const t=wt[Yt];t&&(t.flags&=-2)}Yt=-1,wt.length=0,wa(),Wi=null,(wt.length||Us.length)&&ya()}}let Ot=null,Sa=null;function ji(e){const t=Ot;return Ot=e,Sa=e&&e.type.__scopeId||null,t}function Gt(e,t=Ot,s){if(!t||e._n)return e;const o=(...u)=>{o._d&&Ki(-1);const d=ji(t);let b;try{b=e(...u)}finally{ji(d),o._d&&Ki(1)}return b};return o._n=!0,o._c=!0,o._d=!0,o}function Xe(e,t){if(Ot===null)return e;const s=fr(Ot),o=e.dirs||(e.dirs=[]);for(let u=0;u<t.length;u++){let[d,b,i,r=Ke]=t[u];d&&(Ie(d)&&(d={mounted:d,updated:d}),d.deep&&as(b),o.push({dir:d,instance:s,value:b,oldValue:void 0,arg:i,modifiers:r}))}return e}function ks(e,t,s,o){const u=e.dirs,d=t&&t.dirs;for(let b=0;b<u.length;b++){const i=u[b];d&&(i.oldValue=d[b].value);let r=i.dir[o];r&&(cs(),ss(r,s,8,[e.el,i,e,t]),hs())}}function Pi(e,t){if(mt){let s=mt.provides;const o=mt.parent&&mt.parent.provides;o===s&&(s=mt.provides=Object.create(o)),s[e]=t}}function jt(e,t,s=!1){const o=ph();if(o||Ws){let u=Ws?Ws._context.provides:o?o.parent==null||o.ce?o.vnode.appContext&&o.vnode.appContext.provides:o.parent.provides:void 0;if(u&&e in u)return u[e];if(arguments.length>1)return s&&Ie(t)?t.call(o&&o.proxy):t}}const _c=Symbol.for("v-scx"),gc=()=>jt(_c);function Ms(e,t,s){return xa(e,t,s)}function xa(e,t,s=Ke){const{immediate:o,deep:u,flush:d,once:b}=s,i=gt({},s),r=t&&o||!t&&d!=="post";let f;if(vi){if(d==="sync"){const m=gc();f=m.__watcherHandles||(m.__watcherHandles=[])}else if(!r){const m=()=>{};return m.stop=ts,m.resume=ts,m.pause=ts,m}}const p=mt;i.call=(m,w,g)=>ss(m,p,w,g);let h=!1;d==="post"?i.scheduler=m=>{Dt(m,p&&p.suspense)}:d!=="sync"&&(h=!0,i.scheduler=(m,w)=>{w?m():_n(m)}),i.augmentJob=m=>{t&&(m.flags|=4),h&&(m.flags|=2,p&&(m.id=p.uid,m.i=p))};const _=dc(e,t,i);return vi&&(f?f.push(_):r&&_()),_}function vc(e,t,s){const o=this.proxy,u=ot(e)?e.includes(".")?Ca(o,e):()=>o[e]:e.bind(o,o);let d;Ie(t)?d=t:(d=t.handler,s=t);const b=xi(this),i=xa(u,d.bind(o),s);return b(),i}function Ca(e,t){const s=t.split(".");return()=>{let o=e;for(let u=0;u<s.length&&o;u++)o=o[s[u]];return o}}const bc=Symbol("_vte"),wc=e=>e.__isTeleport,yc=Symbol("_leaveCb");function gn(e,t){e.shapeFlag&6&&e.component?(e.transition=t,gn(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function ct(e,t){return Ie(e)?gt({name:e.name},t,{setup:e}):e}function ka(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}const Vi=new WeakMap;function ai(e,t,s,o,u=!1){if(De(e)){e.forEach((w,g)=>ai(w,t&&(De(t)?t[g]:t),s,o,u));return}if(li(o)&&!u){o.shapeFlag&512&&o.type.__asyncResolved&&o.component.subTree.component&&ai(e,t,s,o.component.subTree);return}const d=o.shapeFlag&4?fr(o.component):o.el,b=u?null:d,{i,r}=e,f=t&&t.r,p=i.refs===Ke?i.refs={}:i.refs,h=i.setupState,_=Fe(h),m=h===Ke?qo:w=>ze(_,w);if(f!=null&&f!==r){if(Nn(t),ot(f))p[f]=null,m(f)&&(h[f]=null);else if(_t(f)){f.value=null;const w=t;w.k&&(p[w.k]=null)}}if(Ie(r))yi(r,i,12,[b,p]);else{const w=ot(r),g=_t(r);if(w||g){const l=()=>{if(e.f){const a=w?m(r)?h[r]:p[r]:r.value;if(u)De(a)&&on(a,d);else if(De(a))a.includes(d)||a.push(d);else if(w)p[r]=[d],m(r)&&(h[r]=p[r]);else{const n=[d];r.value=n,e.k&&(p[e.k]=n)}}else w?(p[r]=b,m(r)&&(h[r]=b)):g&&(r.value=b,e.k&&(p[e.k]=b))};if(b){const a=()=>{l(),Vi.delete(e)};a.id=-1,Vi.set(e,a),Dt(a,s)}else Nn(e),l()}}}function Nn(e){const t=Vi.get(e);t&&(t.flags|=8,Vi.delete(e))}or().requestIdleCallback;or().cancelIdleCallback;const li=e=>!!e.type.__asyncLoader,Ea=e=>e.type.__isKeepAlive;function Sc(e,t){Ta(e,"a",t)}function xc(e,t){Ta(e,"da",t)}function Ta(e,t,s=mt){const o=e.__wdc||(e.__wdc=()=>{let u=s;for(;u;){if(u.isDeactivated)return;u=u.parent}return e()});if(hr(t,o,s),s){let u=s.parent;for(;u&&u.parent;)Ea(u.parent.vnode)&&Cc(o,t,s,u),u=u.parent}}function Cc(e,t,s,o){const u=hr(t,e,o,!0);Si(()=>{on(o[t],u)},s)}function hr(e,t,s=mt,o=!1){if(s){const u=s[e]||(s[e]=[]),d=t.__weh||(t.__weh=(...b)=>{cs();const i=xi(s),r=ss(t,s,e,b);return i(),hs(),r});return o?u.unshift(d):u.push(d),d}}const ds=e=>(t,s=mt)=>{(!vi||e==="sp")&&hr(e,(...o)=>t(...o),s)},kc=ds("bm"),ls=ds("m"),Ec=ds("bu"),Tc=ds("u"),Ac=ds("bum"),Si=ds("um"),Rc=ds("sp"),Mc=ds("rtg"),Dc=ds("rtc");function Lc(e,t=mt){hr("ec",e,t)}const Ic="components",Aa=Symbol.for("v-ndc");function Ra(e){return ot(e)?Oc(Ic,e,!1)||e:e||Aa}function Oc(e,t,s=!0,o=!1){const u=Ot||mt;if(u){const d=u.type;{const i=bh(d,!1);if(i&&(i===t||i===Ft(t)||i===nr(Ft(t))))return d}const b=Fn(u[e]||d[e],t)||Fn(u.appContext[e],t);return!b&&o?d:b}}function Fn(e,t){return e&&(e[t]||e[Ft(t)]||e[nr(Ft(t))])}function Nt(e,t,s,o){let u;const d=s,b=De(e);if(b||ot(e)){const i=b&&Rs(e);let r=!1,f=!1;i&&(r=!Ht(e),f=us(e),e=ar(e)),u=new Array(e.length);for(let p=0,h=e.length;p<h;p++)u[p]=t(r?f?js(Vt(e[p])):Vt(e[p]):e[p],p,void 0,d)}else if(typeof e=="number"){u=new Array(e);for(let i=0;i<e;i++)u[i]=t(i+1,i,void 0,d)}else if(Qe(e))if(e[Symbol.iterator])u=Array.from(e,(i,r)=>t(i,r,void 0,d));else{const i=Object.keys(e);u=new Array(i.length);for(let r=0,f=i.length;r<f;r++){const p=i[r];u[r]=t(e[p],p,r,d)}}else u=[];return u}const jr=e=>e?Ga(e)?fr(e):jr(e.parent):null,ci=gt(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>jr(e.parent),$root:e=>jr(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>Da(e),$forceUpdate:e=>e.f||(e.f=()=>{_n(e.update)}),$nextTick:e=>e.n||(e.n=cr.bind(e.proxy)),$watch:e=>vc.bind(e)}),Sr=(e,t)=>e!==Ke&&!e.__isScriptSetup&&ze(e,t),Bc={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:s,setupState:o,data:u,props:d,accessCache:b,type:i,appContext:r}=e;if(t[0]!=="$"){const _=b[t];if(_!==void 0)switch(_){case 1:return o[t];case 2:return u[t];case 4:return s[t];case 3:return d[t]}else{if(Sr(o,t))return b[t]=1,o[t];if(u!==Ke&&ze(u,t))return b[t]=2,u[t];if(ze(d,t))return b[t]=3,d[t];if(s!==Ke&&ze(s,t))return b[t]=4,s[t];Vr&&(b[t]=0)}}const f=ci[t];let p,h;if(f)return t==="$attrs"&&pt(e.attrs,"get",""),f(e);if((p=i.__cssModules)&&(p=p[t]))return p;if(s!==Ke&&ze(s,t))return b[t]=4,s[t];if(h=r.config.globalProperties,ze(h,t))return h[t]},set({_:e},t,s){const{data:o,setupState:u,ctx:d}=e;return Sr(u,t)?(u[t]=s,!0):o!==Ke&&ze(o,t)?(o[t]=s,!0):ze(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(d[t]=s,!0)},has({_:{data:e,setupState:t,accessCache:s,ctx:o,appContext:u,props:d,type:b}},i){let r;return!!(s[i]||e!==Ke&&i[0]!=="$"&&ze(e,i)||Sr(t,i)||ze(d,i)||ze(o,i)||ze(ci,i)||ze(u.config.globalProperties,i)||(r=b.__cssModules)&&r[i])},defineProperty(e,t,s){return s.get!=null?e._.accessCache[t]=0:ze(s,"value")&&this.set(e,t,s.value,null),Reflect.defineProperty(e,t,s)}};function zn(e){return De(e)?e.reduce((t,s)=>(t[s]=null,t),{}):e}let Vr=!0;function Pc(e){const t=Da(e),s=e.proxy,o=e.ctx;Vr=!1,t.beforeCreate&&Un(t.beforeCreate,e,"bc");const{data:u,computed:d,methods:b,watch:i,provide:r,inject:f,created:p,beforeMount:h,mounted:_,beforeUpdate:m,updated:w,activated:g,deactivated:l,beforeDestroy:a,beforeUnmount:n,destroyed:c,unmounted:v,render:x,renderTracked:k,renderTriggered:E,errorCaptured:C,serverPrefetch:A,expose:z,inheritAttrs:G,components:B,directives:P,filters:R}=t;if(f&&$c(f,o,null),b)for(const X in b){const oe=b[X];Ie(oe)&&(o[X]=oe.bind(s))}if(u){const X=u.call(s,s);Qe(X)&&(e.data=Ut(X))}if(Vr=!0,d)for(const X in d){const oe=d[X],D=Ie(oe)?oe.bind(s,s):Ie(oe.get)?oe.get.bind(s,s):ts,U=!Ie(oe)&&Ie(oe.set)?oe.set.bind(s):ts,S=Pe({get:D,set:U});Object.defineProperty(o,X,{enumerable:!0,configurable:!0,get:()=>S.value,set:T=>S.value=T})}if(i)for(const X in i)Ma(i[X],o,s,X);if(r){const X=Ie(r)?r.call(s):r;Reflect.ownKeys(X).forEach(oe=>{Pi(oe,X[oe])})}p&&Un(p,e,"c");function se(X,oe){De(oe)?oe.forEach(D=>X(D.bind(s))):oe&&X(oe.bind(s))}if(se(kc,h),se(ls,_),se(Ec,m),se(Tc,w),se(Sc,g),se(xc,l),se(Lc,C),se(Dc,k),se(Mc,E),se(Ac,n),se(Si,v),se(Rc,A),De(z))if(z.length){const X=e.exposed||(e.exposed={});z.forEach(oe=>{Object.defineProperty(X,oe,{get:()=>s[oe],set:D=>s[oe]=D,enumerable:!0})})}else e.exposed||(e.exposed={});x&&e.render===ts&&(e.render=x),G!=null&&(e.inheritAttrs=G),B&&(e.components=B),P&&(e.directives=P),A&&ka(e)}function $c(e,t,s=ts){De(e)&&(e=qr(e));for(const o in e){const u=e[o];let d;Qe(u)?"default"in u?d=jt(u.from||o,u.default,!0):d=jt(u.from||o):d=jt(u),_t(d)?Object.defineProperty(t,o,{enumerable:!0,configurable:!0,get:()=>d.value,set:b=>d.value=b}):t[o]=d}}function Un(e,t,s){ss(De(e)?e.map(o=>o.bind(t.proxy)):e.bind(t.proxy),t,s)}function Ma(e,t,s,o){let u=o.includes(".")?Ca(s,o):()=>s[o];if(ot(e)){const d=t[e];Ie(d)&&Ms(u,d)}else if(Ie(e))Ms(u,e.bind(s));else if(Qe(e))if(De(e))e.forEach(d=>Ma(d,t,s,o));else{const d=Ie(e.handler)?e.handler.bind(s):t[e.handler];Ie(d)&&Ms(u,d,e)}}function Da(e){const t=e.type,{mixins:s,extends:o}=t,{mixins:u,optionsCache:d,config:{optionMergeStrategies:b}}=e.appContext,i=d.get(t);let r;return i?r=i:!u.length&&!s&&!o?r=t:(r={},u.length&&u.forEach(f=>qi(r,f,b,!0)),qi(r,t,b)),Qe(t)&&d.set(t,r),r}function qi(e,t,s,o=!1){const{mixins:u,extends:d}=t;d&&qi(e,d,s,!0),u&&u.forEach(b=>qi(e,b,s,!0));for(const b in t)if(!(o&&b==="expose")){const i=Hc[b]||s&&s[b];e[b]=i?i(e[b],t[b]):t[b]}return e}const Hc={data:Wn,props:jn,emits:jn,methods:ii,computed:ii,beforeCreate:bt,created:bt,beforeMount:bt,mounted:bt,beforeUpdate:bt,updated:bt,beforeDestroy:bt,beforeUnmount:bt,destroyed:bt,unmounted:bt,activated:bt,deactivated:bt,errorCaptured:bt,serverPrefetch:bt,components:ii,directives:ii,watch:Fc,provide:Wn,inject:Nc};function Wn(e,t){return t?e?function(){return gt(Ie(e)?e.call(this,this):e,Ie(t)?t.call(this,this):t)}:t:e}function Nc(e,t){return ii(qr(e),qr(t))}function qr(e){if(De(e)){const t={};for(let s=0;s<e.length;s++)t[e[s]]=e[s];return t}return e}function bt(e,t){return e?[...new Set([].concat(e,t))]:t}function ii(e,t){return e?gt(Object.create(null),e,t):t}function jn(e,t){return e?De(e)&&De(t)?[...new Set([...e,...t])]:gt(Object.create(null),zn(e),zn(t??{})):t}function Fc(e,t){if(!e)return t;if(!t)return e;const s=gt(Object.create(null),e);for(const o in t)s[o]=bt(e[o],t[o]);return s}function La(){return{app:null,config:{isNativeTag:qo,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let zc=0;function Uc(e,t){return function(o,u=null){Ie(o)||(o=gt({},o)),u!=null&&!Qe(u)&&(u=null);const d=La(),b=new WeakSet,i=[];let r=!1;const f=d.app={_uid:zc++,_component:o,_props:u,_container:null,_context:d,_instance:null,version:yh,get config(){return d.config},set config(p){},use(p,...h){return b.has(p)||(p&&Ie(p.install)?(b.add(p),p.install(f,...h)):Ie(p)&&(b.add(p),p(f,...h))),f},mixin(p){return d.mixins.includes(p)||d.mixins.push(p),f},component(p,h){return h?(d.components[p]=h,f):d.components[p]},directive(p,h){return h?(d.directives[p]=h,f):d.directives[p]},mount(p,h,_){if(!r){const m=f._ceVNode||_e(o,u);return m.appContext=d,_===!0?_="svg":_===!1&&(_=void 0),e(m,p,_),r=!0,f._container=p,p.__vue_app__=f,fr(m.component)}},onUnmount(p){i.push(p)},unmount(){r&&(ss(i,f._instance,16),e(null,f._container),delete f._container.__vue_app__)},provide(p,h){return d.provides[p]=h,f},runWithContext(p){const h=Ws;Ws=f;try{return p()}finally{Ws=h}}};return f}}let Ws=null;const Wc=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${Ft(t)}Modifiers`]||e[`${Is(t)}Modifiers`];function jc(e,t,...s){if(e.isUnmounted)return;const o=e.vnode.props||Ke;let u=s;const d=t.startsWith("update:"),b=d&&Wc(o,t.slice(7));b&&(b.trim&&(u=s.map(p=>ot(p)?p.trim():p)),b.number&&(u=s.map(ln)));let i,r=o[i=gr(t)]||o[i=gr(Ft(t))];!r&&d&&(r=o[i=gr(Is(t))]),r&&ss(r,e,6,u);const f=o[i+"Once"];if(f){if(!e.emitted)e.emitted={};else if(e.emitted[i])return;e.emitted[i]=!0,ss(f,e,6,u)}}const Vc=new WeakMap;function Ia(e,t,s=!1){const o=s?Vc:t.emitsCache,u=o.get(e);if(u!==void 0)return u;const d=e.emits;let b={},i=!1;if(!Ie(e)){const r=f=>{const p=Ia(f,t,!0);p&&(i=!0,gt(b,p))};!s&&t.mixins.length&&t.mixins.forEach(r),e.extends&&r(e.extends),e.mixins&&e.mixins.forEach(r)}return!d&&!i?(Qe(e)&&o.set(e,null),null):(De(d)?d.forEach(r=>b[r]=null):gt(b,d),Qe(e)&&o.set(e,b),b)}function ur(e,t){return!e||!sr(t)?!1:(t=t.slice(2).replace(/Once$/,""),ze(e,t[0].toLowerCase()+t.slice(1))||ze(e,Is(t))||ze(e,t))}function Vn(e){const{type:t,vnode:s,proxy:o,withProxy:u,propsOptions:[d],slots:b,attrs:i,emit:r,render:f,renderCache:p,props:h,data:_,setupState:m,ctx:w,inheritAttrs:g}=e,l=ji(e);let a,n;try{if(s.shapeFlag&4){const v=u||o,x=v;a=Jt(f.call(x,v,p,h,m,_,w)),n=i}else{const v=t;a=Jt(v.length>1?v(h,{attrs:i,slots:b,emit:r}):v(h,null)),n=t.props?i:qc(i)}}catch(v){hi.length=0,lr(v,e,1),a=_e(ys)}let c=a;if(n&&g!==!1){const v=Object.keys(n),{shapeFlag:x}=c;v.length&&x&7&&(d&&v.some(nn)&&(n=Kc(n,d)),c=Vs(c,n,!1,!0))}return s.dirs&&(c=Vs(c,null,!1,!0),c.dirs=c.dirs?c.dirs.concat(s.dirs):s.dirs),s.transition&&gn(c,s.transition),a=c,ji(l),a}const qc=e=>{let t;for(const s in e)(s==="class"||s==="style"||sr(s))&&((t||(t={}))[s]=e[s]);return t},Kc=(e,t)=>{const s={};for(const o in e)(!nn(o)||!(o.slice(9)in t))&&(s[o]=e[o]);return s};function Gc(e,t,s){const{props:o,children:u,component:d}=e,{props:b,children:i,patchFlag:r}=t,f=d.emitsOptions;if(t.dirs||t.transition)return!0;if(s&&r>=0){if(r&1024)return!0;if(r&16)return o?qn(o,b,f):!!b;if(r&8){const p=t.dynamicProps;for(let h=0;h<p.length;h++){const _=p[h];if(b[_]!==o[_]&&!ur(f,_))return!0}}}else return(u||i)&&(!i||!i.$stable)?!0:o===b?!1:o?b?qn(o,b,f):!0:!!b;return!1}function qn(e,t,s){const o=Object.keys(t);if(o.length!==Object.keys(e).length)return!0;for(let u=0;u<o.length;u++){const d=o[u];if(t[d]!==e[d]&&!ur(s,d))return!0}return!1}function Zc({vnode:e,parent:t},s){for(;t;){const o=t.subTree;if(o.suspense&&o.suspense.activeBranch===e&&(o.el=e.el),o===e)(e=t.vnode).el=s,t=t.parent;else break}}const Oa={},Ba=()=>Object.create(Oa),Pa=e=>Object.getPrototypeOf(e)===Oa;function Xc(e,t,s,o=!1){const u={},d=Ba();e.propsDefaults=Object.create(null),$a(e,t,u,d);for(const b in e.propsOptions[0])b in u||(u[b]=void 0);s?e.props=o?u:ma(u):e.type.props?e.props=u:e.props=d,e.attrs=d}function Yc(e,t,s,o){const{props:u,attrs:d,vnode:{patchFlag:b}}=e,i=Fe(u),[r]=e.propsOptions;let f=!1;if((o||b>0)&&!(b&16)){if(b&8){const p=e.vnode.dynamicProps;for(let h=0;h<p.length;h++){let _=p[h];if(ur(e.emitsOptions,_))continue;const m=t[_];if(r)if(ze(d,_))m!==d[_]&&(d[_]=m,f=!0);else{const w=Ft(_);u[w]=Kr(r,i,w,m,e,!1)}else m!==d[_]&&(d[_]=m,f=!0)}}}else{$a(e,t,u,d)&&(f=!0);let p;for(const h in i)(!t||!ze(t,h)&&((p=Is(h))===h||!ze(t,p)))&&(r?s&&(s[h]!==void 0||s[p]!==void 0)&&(u[h]=Kr(r,i,h,void 0,e,!0)):delete u[h]);if(d!==i)for(const h in d)(!t||!ze(t,h))&&(delete d[h],f=!0)}f&&os(e.attrs,"set","")}function $a(e,t,s,o){const[u,d]=e.propsOptions;let b=!1,i;if(t)for(let r in t){if(ri(r))continue;const f=t[r];let p;u&&ze(u,p=Ft(r))?!d||!d.includes(p)?s[p]=f:(i||(i={}))[p]=f:ur(e.emitsOptions,r)||(!(r in o)||f!==o[r])&&(o[r]=f,b=!0)}if(d){const r=Fe(s),f=i||Ke;for(let p=0;p<d.length;p++){const h=d[p];s[h]=Kr(u,r,h,f[h],e,!ze(f,h))}}return b}function Kr(e,t,s,o,u,d){const b=e[s];if(b!=null){const i=ze(b,"default");if(i&&o===void 0){const r=b.default;if(b.type!==Function&&!b.skipFactory&&Ie(r)){const{propsDefaults:f}=u;if(s in f)o=f[s];else{const p=xi(u);o=f[s]=r.call(null,t),p()}}else o=r;u.ce&&u.ce._setProp(s,o)}b[0]&&(d&&!i?o=!1:b[1]&&(o===""||o===Is(s))&&(o=!0))}return o}const Jc=new WeakMap;function Ha(e,t,s=!1){const o=s?Jc:t.propsCache,u=o.get(e);if(u)return u;const d=e.props,b={},i=[];let r=!1;if(!Ie(e)){const p=h=>{r=!0;const[_,m]=Ha(h,t,!0);gt(b,_),m&&i.push(...m)};!s&&t.mixins.length&&t.mixins.forEach(p),e.extends&&p(e.extends),e.mixins&&e.mixins.forEach(p)}if(!d&&!r)return Qe(e)&&o.set(e,Fs),Fs;if(De(d))for(let p=0;p<d.length;p++){const h=Ft(d[p]);Kn(h)&&(b[h]=Ke)}else if(d)for(const p in d){const h=Ft(p);if(Kn(h)){const _=d[p],m=b[h]=De(_)||Ie(_)?{type:_}:gt({},_),w=m.type;let g=!1,l=!0;if(De(w))for(let a=0;a<w.length;++a){const n=w[a],c=Ie(n)&&n.name;if(c==="Boolean"){g=!0;break}else c==="String"&&(l=!1)}else g=Ie(w)&&w.name==="Boolean";m[0]=g,m[1]=l,(g||ze(m,"default"))&&i.push(h)}}const f=[b,i];return Qe(e)&&o.set(e,f),f}function Kn(e){return e[0]!=="$"&&!ri(e)}const vn=e=>e==="_"||e==="_ctx"||e==="$stable",bn=e=>De(e)?e.map(Jt):[Jt(e)],Qc=(e,t,s)=>{if(t._n)return t;const o=Gt((...u)=>bn(t(...u)),s);return o._c=!1,o},Na=(e,t,s)=>{const o=e._ctx;for(const u in e){if(vn(u))continue;const d=e[u];if(Ie(d))t[u]=Qc(u,d,o);else if(d!=null){const b=bn(d);t[u]=()=>b}}},Fa=(e,t)=>{const s=bn(t);e.slots.default=()=>s},za=(e,t,s)=>{for(const o in t)(s||!vn(o))&&(e[o]=t[o])},eh=(e,t,s)=>{const o=e.slots=Ba();if(e.vnode.shapeFlag&32){const u=t._;u?(za(o,t,s),s&&Yo(o,"_",u,!0)):Na(t,o)}else t&&Fa(e,t)},th=(e,t,s)=>{const{vnode:o,slots:u}=e;let d=!0,b=Ke;if(o.shapeFlag&32){const i=t._;i?s&&i===1?d=!1:za(u,t,s):(d=!t.$stable,Na(t,u)),b=t}else t&&(Fa(e,t),b={default:1});if(d)for(const i in u)!vn(i)&&b[i]==null&&delete u[i]},Dt=oh;function sh(e){return ih(e)}function ih(e,t){const s=or();s.__VUE__=!0;const{insert:o,remove:u,patchProp:d,createElement:b,createText:i,createComment:r,setText:f,setElementText:p,parentNode:h,nextSibling:_,setScopeId:m=ts,insertStaticContent:w}=e,g=(H,q,y,O=null,V=null,I=null,$=void 0,Z=null,J=!!q.dynamicChildren)=>{if(H===q)return;H&&!Js(H,q)&&(O=W(H),T(H,V,I,!0),H=null),q.patchFlag===-2&&(J=!1,q.dynamicChildren=null);const{type:N,ref:F,shapeFlag:j}=q;switch(N){case dr:l(H,q,y,O);break;case ys:a(H,q,y,O);break;case $i:H==null&&n(q,y,O,$);break;case tt:B(H,q,y,O,V,I,$,Z,J);break;default:j&1?x(H,q,y,O,V,I,$,Z,J):j&6?P(H,q,y,O,V,I,$,Z,J):(j&64||j&128)&&N.process(H,q,y,O,V,I,$,Z,J,te)}F!=null&&V?ai(F,H&&H.ref,I,q||H,!q):F==null&&H&&H.ref!=null&&ai(H.ref,null,I,H,!0)},l=(H,q,y,O)=>{if(H==null)o(q.el=i(q.children),y,O);else{const V=q.el=H.el;q.children!==H.children&&f(V,q.children)}},a=(H,q,y,O)=>{H==null?o(q.el=r(q.children||""),y,O):q.el=H.el},n=(H,q,y,O)=>{[H.el,H.anchor]=w(H.children,q,y,O,H.el,H.anchor)},c=({el:H,anchor:q},y,O)=>{let V;for(;H&&H!==q;)V=_(H),o(H,y,O),H=V;o(q,y,O)},v=({el:H,anchor:q})=>{let y;for(;H&&H!==q;)y=_(H),u(H),H=y;u(q)},x=(H,q,y,O,V,I,$,Z,J)=>{if(q.type==="svg"?$="svg":q.type==="math"&&($="mathml"),H==null)k(q,y,O,V,I,$,Z,J);else{const N=H.el&&H.el._isVueCE?H.el:null;try{N&&N._beginPatch(),A(H,q,V,I,$,Z,J)}finally{N&&N._endPatch()}}},k=(H,q,y,O,V,I,$,Z)=>{let J,N;const{props:F,shapeFlag:j,transition:ie,dirs:re}=H;if(J=H.el=b(H.type,I,F&&F.is,F),j&8?p(J,H.children):j&16&&C(H.children,J,null,O,V,xr(H,I),$,Z),re&&ks(H,null,O,"created"),E(J,H,H.scopeId,$,O),F){for(const me in F)me!=="value"&&!ri(me)&&d(J,me,null,F[me],I,O);"value"in F&&d(J,"value",null,F.value,I),(N=F.onVnodeBeforeMount)&&Xt(N,O,H)}re&&ks(H,null,O,"beforeMount");const le=rh(V,ie);le&&ie.beforeEnter(J),o(J,q,y),((N=F&&F.onVnodeMounted)||le||re)&&Dt(()=>{N&&Xt(N,O,H),le&&ie.enter(J),re&&ks(H,null,O,"mounted")},V)},E=(H,q,y,O,V)=>{if(y&&m(H,y),O)for(let I=0;I<O.length;I++)m(H,O[I]);if(V){let I=V.subTree;if(q===I||Va(I.type)&&(I.ssContent===q||I.ssFallback===q)){const $=V.vnode;E(H,$,$.scopeId,$.slotScopeIds,V.parent)}}},C=(H,q,y,O,V,I,$,Z,J=0)=>{for(let N=J;N<H.length;N++){const F=H[N]=Z?vs(H[N]):Jt(H[N]);g(null,F,q,y,O,V,I,$,Z)}},A=(H,q,y,O,V,I,$)=>{const Z=q.el=H.el;let{patchFlag:J,dynamicChildren:N,dirs:F}=q;J|=H.patchFlag&16;const j=H.props||Ke,ie=q.props||Ke;let re;if(y&&Es(y,!1),(re=ie.onVnodeBeforeUpdate)&&Xt(re,y,q,H),F&&ks(q,H,y,"beforeUpdate"),y&&Es(y,!0),(j.innerHTML&&ie.innerHTML==null||j.textContent&&ie.textContent==null)&&p(Z,""),N?z(H.dynamicChildren,N,Z,y,O,xr(q,V),I):$||oe(H,q,Z,null,y,O,xr(q,V),I,!1),J>0){if(J&16)G(Z,j,ie,y,V);else if(J&2&&j.class!==ie.class&&d(Z,"class",null,ie.class,V),J&4&&d(Z,"style",j.style,ie.style,V),J&8){const le=q.dynamicProps;for(let me=0;me<le.length;me++){const de=le[me],Se=j[de],Ee=ie[de];(Ee!==Se||de==="value")&&d(Z,de,Se,Ee,V,y)}}J&1&&H.children!==q.children&&p(Z,q.children)}else!$&&N==null&&G(Z,j,ie,y,V);((re=ie.onVnodeUpdated)||F)&&Dt(()=>{re&&Xt(re,y,q,H),F&&ks(q,H,y,"updated")},O)},z=(H,q,y,O,V,I,$)=>{for(let Z=0;Z<q.length;Z++){const J=H[Z],N=q[Z],F=J.el&&(J.type===tt||!Js(J,N)||J.shapeFlag&198)?h(J.el):y;g(J,N,F,null,O,V,I,$,!0)}},G=(H,q,y,O,V)=>{if(q!==y){if(q!==Ke)for(const I in q)!ri(I)&&!(I in y)&&d(H,I,q[I],null,V,O);for(const I in y){if(ri(I))continue;const $=y[I],Z=q[I];$!==Z&&I!=="value"&&d(H,I,Z,$,V,O)}"value"in y&&d(H,"value",q.value,y.value,V)}},B=(H,q,y,O,V,I,$,Z,J)=>{const N=q.el=H?H.el:i(""),F=q.anchor=H?H.anchor:i("");let{patchFlag:j,dynamicChildren:ie,slotScopeIds:re}=q;re&&(Z=Z?Z.concat(re):re),H==null?(o(N,y,O),o(F,y,O),C(q.children||[],y,F,V,I,$,Z,J)):j>0&&j&64&&ie&&H.dynamicChildren&&H.dynamicChildren.length===ie.length?(z(H.dynamicChildren,ie,y,V,I,$,Z),(q.key!=null||V&&q===V.subTree)&&Ua(H,q,!0)):oe(H,q,y,F,V,I,$,Z,J)},P=(H,q,y,O,V,I,$,Z,J)=>{q.slotScopeIds=Z,H==null?q.shapeFlag&512?V.ctx.activate(q,y,O,$,J):R(q,y,O,V,I,$,J):Q(H,q,J)},R=(H,q,y,O,V,I,$)=>{const Z=H.component=fh(H,O,V);if(Ea(H)&&(Z.ctx.renderer=te),mh(Z,!1,$),Z.asyncDep){if(V&&V.registerDep(Z,se,$),!H.el){const J=Z.subTree=_e(ys);a(null,J,q,y),H.placeholder=J.el}}else se(Z,H,q,y,V,I,$)},Q=(H,q,y)=>{const O=q.component=H.component;if(Gc(H,q,y))if(O.asyncDep&&!O.asyncResolved){X(O,q,y);return}else O.next=q,O.update();else q.el=H.el,O.vnode=q},se=(H,q,y,O,V,I,$)=>{const Z=()=>{if(H.isMounted){let{next:j,bu:ie,u:re,parent:le,vnode:me}=H;{const we=Wa(H);if(we){j&&(j.el=me.el,X(H,j,$)),we.asyncDep.then(()=>{H.isUnmounted||Z()});return}}let de=j,Se;Es(H,!1),j?(j.el=me.el,X(H,j,$)):j=me,ie&&Bi(ie),(Se=j.props&&j.props.onVnodeBeforeUpdate)&&Xt(Se,le,j,me),Es(H,!0);const Ee=Vn(H),xe=H.subTree;H.subTree=Ee,g(xe,Ee,h(xe.el),W(xe),H,V,I),j.el=Ee.el,de===null&&Zc(H,Ee.el),re&&Dt(re,V),(Se=j.props&&j.props.onVnodeUpdated)&&Dt(()=>Xt(Se,le,j,me),V)}else{let j;const{el:ie,props:re}=q,{bm:le,m:me,parent:de,root:Se,type:Ee}=H,xe=li(q);Es(H,!1),le&&Bi(le),!xe&&(j=re&&re.onVnodeBeforeMount)&&Xt(j,de,q),Es(H,!0);{Se.ce&&Se.ce._def.shadowRoot!==!1&&Se.ce._injectChildStyle(Ee);const we=H.subTree=Vn(H);g(null,we,y,O,H,V,I),q.el=we.el}if(me&&Dt(me,V),!xe&&(j=re&&re.onVnodeMounted)){const we=q;Dt(()=>Xt(j,de,we),V)}(q.shapeFlag&256||de&&li(de.vnode)&&de.vnode.shapeFlag&256)&&H.a&&Dt(H.a,V),H.isMounted=!0,q=y=O=null}};H.scope.on();const J=H.effect=new ta(Z);H.scope.off();const N=H.update=J.run.bind(J),F=H.job=J.runIfDirty.bind(J);F.i=H,F.id=H.uid,J.scheduler=()=>_n(F),Es(H,!0),N()},X=(H,q,y)=>{q.component=H;const O=H.vnode.props;H.vnode=q,H.next=null,Yc(H,q.props,O,y),th(H,q.children,y),cs(),Hn(H),hs()},oe=(H,q,y,O,V,I,$,Z,J=!1)=>{const N=H&&H.children,F=H?H.shapeFlag:0,j=q.children,{patchFlag:ie,shapeFlag:re}=q;if(ie>0){if(ie&128){U(N,j,y,O,V,I,$,Z,J);return}else if(ie&256){D(N,j,y,O,V,I,$,Z,J);return}}re&8?(F&16&&ae(N,V,I),j!==N&&p(y,j)):F&16?re&16?U(N,j,y,O,V,I,$,Z,J):ae(N,V,I,!0):(F&8&&p(y,""),re&16&&C(j,y,O,V,I,$,Z,J))},D=(H,q,y,O,V,I,$,Z,J)=>{H=H||Fs,q=q||Fs;const N=H.length,F=q.length,j=Math.min(N,F);let ie;for(ie=0;ie<j;ie++){const re=q[ie]=J?vs(q[ie]):Jt(q[ie]);g(H[ie],re,y,null,V,I,$,Z,J)}N>F?ae(H,V,I,!0,!1,j):C(q,y,O,V,I,$,Z,J,j)},U=(H,q,y,O,V,I,$,Z,J)=>{let N=0;const F=q.length;let j=H.length-1,ie=F-1;for(;N<=j&&N<=ie;){const re=H[N],le=q[N]=J?vs(q[N]):Jt(q[N]);if(Js(re,le))g(re,le,y,null,V,I,$,Z,J);else break;N++}for(;N<=j&&N<=ie;){const re=H[j],le=q[ie]=J?vs(q[ie]):Jt(q[ie]);if(Js(re,le))g(re,le,y,null,V,I,$,Z,J);else break;j--,ie--}if(N>j){if(N<=ie){const re=ie+1,le=re<F?q[re].el:O;for(;N<=ie;)g(null,q[N]=J?vs(q[N]):Jt(q[N]),y,le,V,I,$,Z,J),N++}}else if(N>ie)for(;N<=j;)T(H[N],V,I,!0),N++;else{const re=N,le=N,me=new Map;for(N=le;N<=ie;N++){const $e=q[N]=J?vs(q[N]):Jt(q[N]);$e.key!=null&&me.set($e.key,N)}let de,Se=0;const Ee=ie-le+1;let xe=!1,we=0;const ke=new Array(Ee);for(N=0;N<Ee;N++)ke[N]=0;for(N=re;N<=j;N++){const $e=H[N];if(Se>=Ee){T($e,V,I,!0);continue}let Me;if($e.key!=null)Me=me.get($e.key);else for(de=le;de<=ie;de++)if(ke[de-le]===0&&Js($e,q[de])){Me=de;break}Me===void 0?T($e,V,I,!0):(ke[Me-le]=N+1,Me>=we?we=Me:xe=!0,g($e,q[Me],y,null,V,I,$,Z,J),Se++)}const We=xe?nh(ke):Fs;for(de=We.length-1,N=Ee-1;N>=0;N--){const $e=le+N,Me=q[$e],et=q[$e+1],st=$e+1<F?et.el||ja(et):O;ke[N]===0?g(null,Me,y,st,V,I,$,Z,J):xe&&(de<0||N!==We[de]?S(Me,y,st,2):de--)}}},S=(H,q,y,O,V=null)=>{const{el:I,type:$,transition:Z,children:J,shapeFlag:N}=H;if(N&6){S(H.component.subTree,q,y,O);return}if(N&128){H.suspense.move(q,y,O);return}if(N&64){$.move(H,q,y,te);return}if($===tt){o(I,q,y);for(let j=0;j<J.length;j++)S(J[j],q,y,O);o(H.anchor,q,y);return}if($===$i){c(H,q,y);return}if(O!==2&&N&1&&Z)if(O===0)Z.beforeEnter(I),o(I,q,y),Dt(()=>Z.enter(I),V);else{const{leave:j,delayLeave:ie,afterLeave:re}=Z,le=()=>{H.ctx.isUnmounted?u(I):o(I,q,y)},me=()=>{I._isLeaving&&I[yc](!0),j(I,()=>{le(),re&&re()})};ie?ie(I,le,me):me()}else o(I,q,y)},T=(H,q,y,O=!1,V=!1)=>{const{type:I,props:$,ref:Z,children:J,dynamicChildren:N,shapeFlag:F,patchFlag:j,dirs:ie,cacheIndex:re}=H;if(j===-2&&(V=!1),Z!=null&&(cs(),ai(Z,null,y,H,!0),hs()),re!=null&&(q.renderCache[re]=void 0),F&256){q.ctx.deactivate(H);return}const le=F&1&&ie,me=!li(H);let de;if(me&&(de=$&&$.onVnodeBeforeUnmount)&&Xt(de,q,H),F&6)ne(H.component,y,O);else{if(F&128){H.suspense.unmount(y,O);return}le&&ks(H,null,q,"beforeUnmount"),F&64?H.type.remove(H,q,y,te,O):N&&!N.hasOnce&&(I!==tt||j>0&&j&64)?ae(N,q,y,!1,!0):(I===tt&&j&384||!V&&F&16)&&ae(J,q,y),O&&K(H)}(me&&(de=$&&$.onVnodeUnmounted)||le)&&Dt(()=>{de&&Xt(de,q,H),le&&ks(H,null,q,"unmounted")},y)},K=H=>{const{type:q,el:y,anchor:O,transition:V}=H;if(q===tt){Y(y,O);return}if(q===$i){v(H);return}const I=()=>{u(y),V&&!V.persisted&&V.afterLeave&&V.afterLeave()};if(H.shapeFlag&1&&V&&!V.persisted){const{leave:$,delayLeave:Z}=V,J=()=>$(y,I);Z?Z(H.el,I,J):J()}else I()},Y=(H,q)=>{let y;for(;H!==q;)y=_(H),u(H),H=y;u(q)},ne=(H,q,y)=>{const{bum:O,scope:V,job:I,subTree:$,um:Z,m:J,a:N}=H;Gn(J),Gn(N),O&&Bi(O),V.stop(),I&&(I.flags|=8,T($,H,q,y)),Z&&Dt(Z,q),Dt(()=>{H.isUnmounted=!0},q)},ae=(H,q,y,O=!1,V=!1,I=0)=>{for(let $=I;$<H.length;$++)T(H[$],q,y,O,V)},W=H=>{if(H.shapeFlag&6)return W(H.component.subTree);if(H.shapeFlag&128)return H.suspense.next();const q=_(H.anchor||H.el),y=q&&q[bc];return y?_(y):q};let L=!1;const ee=(H,q,y)=>{let O;H==null?q._vnode&&(T(q._vnode,null,null,!0),O=q._vnode.component):g(q._vnode||null,H,q,null,null,null,y),q._vnode=H,L||(L=!0,Hn(O),wa(),L=!1)},te={p:g,um:T,m:S,r:K,mt:R,mc:C,pc:oe,pbc:z,n:W,o:e};return{render:ee,hydrate:void 0,createApp:Uc(ee)}}function xr({type:e,props:t},s){return s==="svg"&&e==="foreignObject"||s==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:s}function Es({effect:e,job:t},s){s?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function rh(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function Ua(e,t,s=!1){const o=e.children,u=t.children;if(De(o)&&De(u))for(let d=0;d<o.length;d++){const b=o[d];let i=u[d];i.shapeFlag&1&&!i.dynamicChildren&&((i.patchFlag<=0||i.patchFlag===32)&&(i=u[d]=vs(u[d]),i.el=b.el),!s&&i.patchFlag!==-2&&Ua(b,i)),i.type===dr&&(i.patchFlag!==-1?i.el=b.el:i.__elIndex=d+(e.type===tt?1:0)),i.type===ys&&!i.el&&(i.el=b.el)}}function nh(e){const t=e.slice(),s=[0];let o,u,d,b,i;const r=e.length;for(o=0;o<r;o++){const f=e[o];if(f!==0){if(u=s[s.length-1],e[u]<f){t[o]=u,s.push(o);continue}for(d=0,b=s.length-1;d<b;)i=d+b>>1,e[s[i]]<f?d=i+1:b=i;f<e[s[d]]&&(d>0&&(t[o]=s[d-1]),s[d]=o)}}for(d=s.length,b=s[d-1];d-- >0;)s[d]=b,b=t[b];return s}function Wa(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Wa(t)}function Gn(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}function ja(e){if(e.placeholder)return e.placeholder;const t=e.component;return t?ja(t.subTree):null}const Va=e=>e.__isSuspense;function oh(e,t){t&&t.pendingBranch?De(e)?t.effects.push(...e):t.effects.push(e):mc(e)}const tt=Symbol.for("v-fgt"),dr=Symbol.for("v-txt"),ys=Symbol.for("v-cmt"),$i=Symbol.for("v-stc"),hi=[];let Bt=null;function ue(e=!1){hi.push(Bt=e?null:[])}function ah(){hi.pop(),Bt=hi[hi.length-1]||null}let gi=1;function Ki(e,t=!1){gi+=e,e<0&&Bt&&t&&(Bt.hasOnce=!0)}function qa(e){return e.dynamicChildren=gi>0?Bt||Fs:null,ah(),gi>0&&Bt&&Bt.push(e),e}function pe(e,t,s,o,u,d){return qa(M(e,t,s,o,u,d,!0))}function $t(e,t,s,o,u){return qa(_e(e,t,s,o,u,!0))}function Gi(e){return e?e.__v_isVNode===!0:!1}function Js(e,t){return e.type===t.type&&e.key===t.key}const Ka=({key:e})=>e??null,Hi=({ref:e,ref_key:t,ref_for:s})=>(typeof e=="number"&&(e=""+e),e!=null?ot(e)||_t(e)||Ie(e)?{i:Ot,r:e,k:t,f:!!s}:e:null);function M(e,t=null,s=null,o=0,u=null,d=e===tt?0:1,b=!1,i=!1){const r={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Ka(t),ref:t&&Hi(t),scopeId:Sa,slotScopeIds:null,children:s,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:d,patchFlag:o,dynamicProps:u,dynamicChildren:null,appContext:null,ctx:Ot};return i?(wn(r,s),d&128&&e.normalize(r)):s&&(r.shapeFlag|=ot(s)?8:16),gi>0&&!b&&Bt&&(r.patchFlag>0||d&6)&&r.patchFlag!==32&&Bt.push(r),r}const _e=lh;function lh(e,t=null,s=null,o=0,u=null,d=!1){if((!e||e===Aa)&&(e=ys),Gi(e)){const i=Vs(e,t,!0);return s&&wn(i,s),gi>0&&!d&&Bt&&(i.shapeFlag&6?Bt[Bt.indexOf(e)]=i:Bt.push(i)),i.patchFlag=-2,i}if(wh(e)&&(e=e.__vccOpts),t){t=ch(t);let{class:i,style:r}=t;i&&!ot(i)&&(t.class=Ae(i)),Qe(r)&&(mn(r)&&!De(r)&&(r=gt({},r)),t.style=Lt(r))}const b=ot(e)?1:Va(e)?128:wc(e)?64:Qe(e)?4:Ie(e)?2:0;return M(e,t,s,o,u,b,d,!0)}function ch(e){return e?mn(e)||Pa(e)?gt({},e):e:null}function Vs(e,t,s=!1,o=!1){const{props:u,ref:d,patchFlag:b,children:i,transition:r}=e,f=t?hh(u||{},t):u,p={__v_isVNode:!0,__v_skip:!0,type:e.type,props:f,key:f&&Ka(f),ref:t&&t.ref?s&&d?De(d)?d.concat(Hi(t)):[d,Hi(t)]:Hi(t):d,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:i,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==tt?b===-1?16:b|16:b,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:r,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Vs(e.ssContent),ssFallback:e.ssFallback&&Vs(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return r&&o&&gn(p,r.clone(p)),p}function Je(e=" ",t=0){return _e(dr,null,e,t)}function qs(e,t){const s=_e($i,null,e);return s.staticCount=t,s}function Oe(e="",t=!1){return t?(ue(),$t(ys,null,e)):_e(ys,null,e)}function Jt(e){return e==null||typeof e=="boolean"?_e(ys):De(e)?_e(tt,null,e.slice()):Gi(e)?vs(e):_e(dr,null,String(e))}function vs(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Vs(e)}function wn(e,t){let s=0;const{shapeFlag:o}=e;if(t==null)t=null;else if(De(t))s=16;else if(typeof t=="object")if(o&65){const u=t.default;u&&(u._c&&(u._d=!1),wn(e,u()),u._c&&(u._d=!0));return}else{s=32;const u=t._;!u&&!Pa(t)?t._ctx=Ot:u===3&&Ot&&(Ot.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else Ie(t)?(t={default:t,_ctx:Ot},s=32):(t=String(t),o&64?(s=16,t=[Je(t)]):s=8);e.children=t,e.shapeFlag|=s}function hh(...e){const t={};for(let s=0;s<e.length;s++){const o=e[s];for(const u in o)if(u==="class")t.class!==o.class&&(t.class=Ae([t.class,o.class]));else if(u==="style")t.style=Lt([t.style,o.style]);else if(sr(u)){const d=t[u],b=o[u];b&&d!==b&&!(De(d)&&d.includes(b))&&(t[u]=d?[].concat(d,b):b)}else u!==""&&(t[u]=o[u])}return t}function Xt(e,t,s,o=null){ss(e,t,7,[s,o])}const uh=La();let dh=0;function fh(e,t,s){const o=e.type,u=(t?t.appContext:e.appContext)||uh,d={uid:dh++,vnode:e,type:o,parent:t,appContext:u,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Nl(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(u.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Ha(o,u),emitsOptions:Ia(o,u),emit:null,emitted:null,propsDefaults:Ke,inheritAttrs:o.inheritAttrs,ctx:Ke,data:Ke,props:Ke,attrs:Ke,slots:Ke,refs:Ke,setupState:Ke,setupContext:null,suspense:s,suspenseId:s?s.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return d.ctx={_:d},d.root=t?t.root:d,d.emit=jc.bind(null,d),e.ce&&e.ce(d),d}let mt=null;const ph=()=>mt||Ot;let Zi,Gr;{const e=or(),t=(s,o)=>{let u;return(u=e[s])||(u=e[s]=[]),u.push(o),d=>{u.length>1?u.forEach(b=>b(d)):u[0](d)}};Zi=t("__VUE_INSTANCE_SETTERS__",s=>mt=s),Gr=t("__VUE_SSR_SETTERS__",s=>vi=s)}const xi=e=>{const t=mt;return Zi(e),e.scope.on(),()=>{e.scope.off(),Zi(t)}},Zn=()=>{mt&&mt.scope.off(),Zi(null)};function Ga(e){return e.vnode.shapeFlag&4}let vi=!1;function mh(e,t=!1,s=!1){t&&Gr(t);const{props:o,children:u}=e.vnode,d=Ga(e);Xc(e,o,d,t),eh(e,u,s||t);const b=d?_h(e,t):void 0;return t&&Gr(!1),b}function _h(e,t){const s=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,Bc);const{setup:o}=s;if(o){cs();const u=e.setupContext=o.length>1?vh(e):null,d=xi(e),b=yi(o,e,0,[e.props,u]),i=Go(b);if(hs(),d(),(i||e.sp)&&!li(e)&&ka(e),i){if(b.then(Zn,Zn),t)return b.then(r=>{Xn(e,r)}).catch(r=>{lr(r,e,0)});e.asyncDep=b}else Xn(e,b)}else Za(e)}function Xn(e,t,s){Ie(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Qe(t)&&(e.setupState=ga(t)),Za(e)}function Za(e,t,s){const o=e.type;e.render||(e.render=o.render||ts);{const u=xi(e);cs();try{Pc(e)}finally{hs(),u()}}}const gh={get(e,t){return pt(e,"get",""),e[t]}};function vh(e){const t=s=>{e.exposed=s||{}};return{attrs:new Proxy(e.attrs,gh),slots:e.slots,emit:e.emit,expose:t}}function fr(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(ga(nc(e.exposed)),{get(t,s){if(s in t)return t[s];if(s in ci)return ci[s](e)},has(t,s){return s in t||s in ci}})):e.proxy}function bh(e,t=!0){return Ie(e)?e.displayName||e.name:e.name||t&&e.__name}function wh(e){return Ie(e)&&"__vccOpts"in e}const Pe=(e,t)=>hc(e,t,vi);function Xi(e,t,s){try{Ki(-1);const o=arguments.length;return o===2?Qe(t)&&!De(t)?Gi(t)?_e(e,null,[t]):_e(e,t):_e(e,null,t):(o>3?s=Array.prototype.slice.call(arguments,2):o===3&&Gi(s)&&(s=[s]),_e(e,t,s))}finally{Ki(1)}}const yh="3.5.26";/**
* @vue/runtime-dom v3.5.26
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Zr;const Yn=typeof window<"u"&&window.trustedTypes;if(Yn)try{Zr=Yn.createPolicy("vue",{createHTML:e=>e})}catch{}const Xa=Zr?e=>Zr.createHTML(e):e=>e,Sh="http://www.w3.org/2000/svg",xh="http://www.w3.org/1998/Math/MathML",ns=typeof document<"u"?document:null,Jn=ns&&ns.createElement("template"),Ch={insert:(e,t,s)=>{t.insertBefore(e,s||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,s,o)=>{const u=t==="svg"?ns.createElementNS(Sh,e):t==="mathml"?ns.createElementNS(xh,e):s?ns.createElement(e,{is:s}):ns.createElement(e);return e==="select"&&o&&o.multiple!=null&&u.setAttribute("multiple",o.multiple),u},createText:e=>ns.createTextNode(e),createComment:e=>ns.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>ns.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,s,o,u,d){const b=s?s.previousSibling:t.lastChild;if(u&&(u===d||u.nextSibling))for(;t.insertBefore(u.cloneNode(!0),s),!(u===d||!(u=u.nextSibling)););else{Jn.innerHTML=Xa(o==="svg"?`<svg>${e}</svg>`:o==="mathml"?`<math>${e}</math>`:e);const i=Jn.content;if(o==="svg"||o==="mathml"){const r=i.firstChild;for(;r.firstChild;)i.appendChild(r.firstChild);i.removeChild(r)}t.insertBefore(i,s)}return[b?b.nextSibling:t.firstChild,s?s.previousSibling:t.lastChild]}},kh=Symbol("_vtc");function Eh(e,t,s){const o=e[kh];o&&(t=(t?[t,...o]:[...o]).join(" ")),t==null?e.removeAttribute("class"):s?e.setAttribute("class",t):e.className=t}const Qn=Symbol("_vod"),Th=Symbol("_vsh"),Ah=Symbol(""),Rh=/(?:^|;)\s*display\s*:/;function Mh(e,t,s){const o=e.style,u=ot(s);let d=!1;if(s&&!u){if(t)if(ot(t))for(const b of t.split(";")){const i=b.slice(0,b.indexOf(":")).trim();s[i]==null&&Ni(o,i,"")}else for(const b in t)s[b]==null&&Ni(o,b,"");for(const b in s)b==="display"&&(d=!0),Ni(o,b,s[b])}else if(u){if(t!==s){const b=o[Ah];b&&(s+=";"+b),o.cssText=s,d=Rh.test(s)}}else t&&e.removeAttribute("style");Qn in e&&(e[Qn]=d?o.display:"",e[Th]&&(o.display="none"))}const eo=/\s*!important$/;function Ni(e,t,s){if(De(s))s.forEach(o=>Ni(e,t,o));else if(s==null&&(s=""),t.startsWith("--"))e.setProperty(t,s);else{const o=Dh(e,t);eo.test(s)?e.setProperty(Is(o),s.replace(eo,""),"important"):e[o]=s}}const to=["Webkit","Moz","ms"],Cr={};function Dh(e,t){const s=Cr[t];if(s)return s;let o=Ft(t);if(o!=="filter"&&o in e)return Cr[t]=o;o=nr(o);for(let u=0;u<to.length;u++){const d=to[u]+o;if(d in e)return Cr[t]=d}return t}const so="http://www.w3.org/1999/xlink";function io(e,t,s,o,u,d=Hl(t)){o&&t.startsWith("xlink:")?s==null?e.removeAttributeNS(so,t.slice(6,t.length)):e.setAttributeNS(so,t,s):s==null||d&&!Jo(s)?e.removeAttribute(t):e.setAttribute(t,d?"":Ss(s)?String(s):s)}function ro(e,t,s,o,u){if(t==="innerHTML"||t==="textContent"){s!=null&&(e[t]=t==="innerHTML"?Xa(s):s);return}const d=e.tagName;if(t==="value"&&d!=="PROGRESS"&&!d.includes("-")){const i=d==="OPTION"?e.getAttribute("value")||"":e.value,r=s==null?e.type==="checkbox"?"on":"":String(s);(i!==r||!("_value"in e))&&(e.value=r),s==null&&e.removeAttribute(t),e._value=s;return}let b=!1;if(s===""||s==null){const i=typeof e[t];i==="boolean"?s=Jo(s):s==null&&i==="string"?(s="",b=!0):i==="number"&&(s=0,b=!0)}try{e[t]=s}catch{}b&&e.removeAttribute(u||t)}function Hs(e,t,s,o){e.addEventListener(t,s,o)}function Lh(e,t,s,o){e.removeEventListener(t,s,o)}const no=Symbol("_vei");function Ih(e,t,s,o,u=null){const d=e[no]||(e[no]={}),b=d[t];if(o&&b)b.value=o;else{const[i,r]=Oh(t);if(o){const f=d[t]=$h(o,u);Hs(e,i,f,r)}else b&&(Lh(e,i,b,r),d[t]=void 0)}}const oo=/(?:Once|Passive|Capture)$/;function Oh(e){let t;if(oo.test(e)){t={};let o;for(;o=e.match(oo);)e=e.slice(0,e.length-o[0].length),t[o[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Is(e.slice(2)),t]}let kr=0;const Bh=Promise.resolve(),Ph=()=>kr||(Bh.then(()=>kr=0),kr=Date.now());function $h(e,t){const s=o=>{if(!o._vts)o._vts=Date.now();else if(o._vts<=s.attached)return;ss(Hh(o,s.value),t,5,[o])};return s.value=e,s.attached=Ph(),s}function Hh(e,t){if(De(t)){const s=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{s.call(e),e._stopped=!0},t.map(o=>u=>!u._stopped&&o&&o(u))}else return t}const ao=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,Nh=(e,t,s,o,u,d)=>{const b=u==="svg";t==="class"?Eh(e,o,b):t==="style"?Mh(e,s,o):sr(t)?nn(t)||Ih(e,t,s,o,d):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Fh(e,t,o,b))?(ro(e,t,o),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&io(e,t,o,b,d,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!ot(o))?ro(e,Ft(t),o,d,t):(t==="true-value"?e._trueValue=o:t==="false-value"&&(e._falseValue=o),io(e,t,o,b))};function Fh(e,t,s,o){if(o)return!!(t==="innerHTML"||t==="textContent"||t in e&&ao(t)&&Ie(s));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="sandbox"&&e.tagName==="IFRAME"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const u=e.tagName;if(u==="IMG"||u==="VIDEO"||u==="CANVAS"||u==="SOURCE")return!1}return ao(t)&&ot(s)?!1:t in e}const lo=e=>{const t=e.props["onUpdate:modelValue"]||!1;return De(t)?s=>Bi(t,s):t};function zh(e){e.target.composing=!0}function co(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Er=Symbol("_assign");function ho(e,t,s){return t&&(e=e.trim()),s&&(e=ln(e)),e}const Ye={created(e,{modifiers:{lazy:t,trim:s,number:o}},u){e[Er]=lo(u);const d=o||u.props&&u.props.type==="number";Hs(e,t?"change":"input",b=>{b.target.composing||e[Er](ho(e.value,s,d))}),(s||d)&&Hs(e,"change",()=>{e.value=ho(e.value,s,d)}),t||(Hs(e,"compositionstart",zh),Hs(e,"compositionend",co),Hs(e,"change",co))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:s,modifiers:{lazy:o,trim:u,number:d}},b){if(e[Er]=lo(b),e.composing)return;const i=(d||e.type==="number")&&!/^0\d/.test(e.value)?ln(e.value):e.value,r=t??"";i!==r&&(document.activeElement===e&&e.type!=="range"&&(o&&t===s||u&&e.value.trim()===r)||(e.value=r))}},Uh=["ctrl","shift","alt","meta"],Wh={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>Uh.some(s=>e[`${s}Key`]&&!t.includes(s))},Fi=(e,t)=>{const s=e._withMods||(e._withMods={}),o=t.join(".");return s[o]||(s[o]=((u,...d)=>{for(let b=0;b<t.length;b++){const i=Wh[t[b]];if(i&&i(u,t))return}return e(u,...d)}))},jh=gt({patchProp:Nh},Ch);let uo;function Vh(){return uo||(uo=sh(jh))}const qh=((...e)=>{const t=Vh().createApp(...e),{mount:s}=t;return t.mount=o=>{const u=Gh(o);if(!u)return;const d=t._component;!Ie(d)&&!d.render&&!d.template&&(d.template=u.innerHTML),u.nodeType===1&&(u.textContent="");const b=s(u,!1,Kh(u));return u instanceof Element&&(u.removeAttribute("v-cloak"),u.setAttribute("data-v-app","")),b},t});function Kh(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function Gh(e){return ot(e)?document.querySelector(e):e}/*!
  * vue-router v4.4.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const Ns=typeof document<"u";function Zh(e){return e.__esModule||e[Symbol.toStringTag]==="Module"}const je=Object.assign;function Tr(e,t){const s={};for(const o in t){const u=t[o];s[o]=qt(u)?u.map(e):e(u)}return s}const ui=()=>{},qt=Array.isArray,Ya=/#/g,Xh=/&/g,Yh=/\//g,Jh=/=/g,Qh=/\?/g,Ja=/\+/g,eu=/%5B/g,tu=/%5D/g,Qa=/%5E/g,su=/%60/g,el=/%7B/g,iu=/%7C/g,tl=/%7D/g,ru=/%20/g;function yn(e){return encodeURI(""+e).replace(iu,"|").replace(eu,"[").replace(tu,"]")}function nu(e){return yn(e).replace(el,"{").replace(tl,"}").replace(Qa,"^")}function Xr(e){return yn(e).replace(Ja,"%2B").replace(ru,"+").replace(Ya,"%23").replace(Xh,"%26").replace(su,"`").replace(el,"{").replace(tl,"}").replace(Qa,"^")}function ou(e){return Xr(e).replace(Jh,"%3D")}function au(e){return yn(e).replace(Ya,"%23").replace(Qh,"%3F")}function lu(e){return e==null?"":au(e).replace(Yh,"%2F")}function bi(e){try{return decodeURIComponent(""+e)}catch{}return""+e}const cu=/\/$/,hu=e=>e.replace(cu,"");function Ar(e,t,s="/"){let o,u={},d="",b="";const i=t.indexOf("#");let r=t.indexOf("?");return i<r&&i>=0&&(r=-1),r>-1&&(o=t.slice(0,r),d=t.slice(r+1,i>-1?i:t.length),u=e(d)),i>-1&&(o=o||t.slice(0,i),b=t.slice(i,t.length)),o=pu(o??t,s),{fullPath:o+(d&&"?")+d+b,path:o,query:u,hash:bi(b)}}function uu(e,t){const s=t.query?e(t.query):"";return t.path+(s&&"?")+s+(t.hash||"")}function fo(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function du(e,t,s){const o=t.matched.length-1,u=s.matched.length-1;return o>-1&&o===u&&Ks(t.matched[o],s.matched[u])&&sl(t.params,s.params)&&e(t.query)===e(s.query)&&t.hash===s.hash}function Ks(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function sl(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(!fu(e[s],t[s]))return!1;return!0}function fu(e,t){return qt(e)?po(e,t):qt(t)?po(t,e):e===t}function po(e,t){return qt(t)?e.length===t.length&&e.every((s,o)=>s===t[o]):e.length===1&&e[0]===t}function pu(e,t){if(e.startsWith("/"))return e;if(!e)return t;const s=t.split("/"),o=e.split("/"),u=o[o.length-1];(u===".."||u===".")&&o.push("");let d=s.length-1,b,i;for(b=0;b<o.length;b++)if(i=o[b],i!==".")if(i==="..")d>1&&d--;else break;return s.slice(0,d).join("/")+"/"+o.slice(b).join("/")}const ms={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var wi;(function(e){e.pop="pop",e.push="push"})(wi||(wi={}));var di;(function(e){e.back="back",e.forward="forward",e.unknown=""})(di||(di={}));function mu(e){if(!e)if(Ns){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),hu(e)}const _u=/^[^#]+#/;function gu(e,t){return e.replace(_u,"#")+t}function vu(e,t){const s=document.documentElement.getBoundingClientRect(),o=e.getBoundingClientRect();return{behavior:t.behavior,left:o.left-s.left-(t.left||0),top:o.top-s.top-(t.top||0)}}const pr=()=>({left:window.scrollX,top:window.scrollY});function bu(e){let t;if("el"in e){const s=e.el,o=typeof s=="string"&&s.startsWith("#"),u=typeof s=="string"?o?document.getElementById(s.slice(1)):document.querySelector(s):s;if(!u)return;t=vu(u,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function mo(e,t){return(history.state?history.state.position-t:-1)+e}const Yr=new Map;function wu(e,t){Yr.set(e,t)}function yu(e){const t=Yr.get(e);return Yr.delete(e),t}let Su=()=>location.protocol+"//"+location.host;function il(e,t){const{pathname:s,search:o,hash:u}=t,d=e.indexOf("#");if(d>-1){let i=u.includes(e.slice(d))?e.slice(d).length:1,r=u.slice(i);return r[0]!=="/"&&(r="/"+r),fo(r,"")}return fo(s,e)+o+u}function xu(e,t,s,o){let u=[],d=[],b=null;const i=({state:_})=>{const m=il(e,location),w=s.value,g=t.value;let l=0;if(_){if(s.value=m,t.value=_,b&&b===w){b=null;return}l=g?_.position-g.position:0}else o(m);u.forEach(a=>{a(s.value,w,{delta:l,type:wi.pop,direction:l?l>0?di.forward:di.back:di.unknown})})};function r(){b=s.value}function f(_){u.push(_);const m=()=>{const w=u.indexOf(_);w>-1&&u.splice(w,1)};return d.push(m),m}function p(){const{history:_}=window;_.state&&_.replaceState(je({},_.state,{scroll:pr()}),"")}function h(){for(const _ of d)_();d=[],window.removeEventListener("popstate",i),window.removeEventListener("beforeunload",p)}return window.addEventListener("popstate",i),window.addEventListener("beforeunload",p,{passive:!0}),{pauseListeners:r,listen:f,destroy:h}}function _o(e,t,s,o=!1,u=!1){return{back:e,current:t,forward:s,replaced:o,position:window.history.length,scroll:u?pr():null}}function Cu(e){const{history:t,location:s}=window,o={value:il(e,s)},u={value:t.state};u.value||d(o.value,{back:null,current:o.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function d(r,f,p){const h=e.indexOf("#"),_=h>-1?(s.host&&document.querySelector("base")?e:e.slice(h))+r:Su()+e+r;try{t[p?"replaceState":"pushState"](f,"",_),u.value=f}catch(m){console.error(m),s[p?"replace":"assign"](_)}}function b(r,f){const p=je({},t.state,_o(u.value.back,r,u.value.forward,!0),f,{position:u.value.position});d(r,p,!0),o.value=r}function i(r,f){const p=je({},u.value,t.state,{forward:r,scroll:pr()});d(p.current,p,!0);const h=je({},_o(o.value,r,null),{position:p.position+1},f);d(r,h,!1),o.value=r}return{location:o,state:u,push:i,replace:b}}function ku(e){e=mu(e);const t=Cu(e),s=xu(e,t.state,t.location,t.replace);function o(d,b=!0){b||s.pauseListeners(),history.go(d)}const u=je({location:"",base:e,go:o,createHref:gu.bind(null,e)},t,s);return Object.defineProperty(u,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(u,"state",{enumerable:!0,get:()=>t.state.value}),u}function Eu(e){return typeof e=="string"||e&&typeof e=="object"}function rl(e){return typeof e=="string"||typeof e=="symbol"}const nl=Symbol("");var go;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(go||(go={}));function Gs(e,t){return je(new Error,{type:e,[nl]:!0},t)}function rs(e,t){return e instanceof Error&&nl in e&&(t==null||!!(e.type&t))}const vo="[^/]+?",Tu={sensitive:!1,strict:!1,start:!0,end:!0},Au=/[.+*?^${}()[\]/\\]/g;function Ru(e,t){const s=je({},Tu,t),o=[];let u=s.start?"^":"";const d=[];for(const f of e){const p=f.length?[]:[90];s.strict&&!f.length&&(u+="/");for(let h=0;h<f.length;h++){const _=f[h];let m=40+(s.sensitive?.25:0);if(_.type===0)h||(u+="/"),u+=_.value.replace(Au,"\\$&"),m+=40;else if(_.type===1){const{value:w,repeatable:g,optional:l,regexp:a}=_;d.push({name:w,repeatable:g,optional:l});const n=a||vo;if(n!==vo){m+=10;try{new RegExp(`(${n})`)}catch(v){throw new Error(`Invalid custom RegExp for param "${w}" (${n}): `+v.message)}}let c=g?`((?:${n})(?:/(?:${n}))*)`:`(${n})`;h||(c=l&&f.length<2?`(?:/${c})`:"/"+c),l&&(c+="?"),u+=c,m+=20,l&&(m+=-8),g&&(m+=-20),n===".*"&&(m+=-50)}p.push(m)}o.push(p)}if(s.strict&&s.end){const f=o.length-1;o[f][o[f].length-1]+=.7000000000000001}s.strict||(u+="/?"),s.end?u+="$":s.strict&&(u+="(?:/|$)");const b=new RegExp(u,s.sensitive?"":"i");function i(f){const p=f.match(b),h={};if(!p)return null;for(let _=1;_<p.length;_++){const m=p[_]||"",w=d[_-1];h[w.name]=m&&w.repeatable?m.split("/"):m}return h}function r(f){let p="",h=!1;for(const _ of e){(!h||!p.endsWith("/"))&&(p+="/"),h=!1;for(const m of _)if(m.type===0)p+=m.value;else if(m.type===1){const{value:w,repeatable:g,optional:l}=m,a=w in f?f[w]:"";if(qt(a)&&!g)throw new Error(`Provided param "${w}" is an array but it is not repeatable (* or + modifiers)`);const n=qt(a)?a.join("/"):a;if(!n)if(l)_.length<2&&(p.endsWith("/")?p=p.slice(0,-1):h=!0);else throw new Error(`Missing required param "${w}"`);p+=n}}return p||"/"}return{re:b,score:o,keys:d,parse:i,stringify:r}}function Mu(e,t){let s=0;for(;s<e.length&&s<t.length;){const o=t[s]-e[s];if(o)return o;s++}return e.length<t.length?e.length===1&&e[0]===80?-1:1:e.length>t.length?t.length===1&&t[0]===80?1:-1:0}function ol(e,t){let s=0;const o=e.score,u=t.score;for(;s<o.length&&s<u.length;){const d=Mu(o[s],u[s]);if(d)return d;s++}if(Math.abs(u.length-o.length)===1){if(bo(o))return 1;if(bo(u))return-1}return u.length-o.length}function bo(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const Du={type:0,value:""},Lu=/[a-zA-Z0-9_]/;function Iu(e){if(!e)return[[]];if(e==="/")return[[Du]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(m){throw new Error(`ERR (${s})/"${f}": ${m}`)}let s=0,o=s;const u=[];let d;function b(){d&&u.push(d),d=[]}let i=0,r,f="",p="";function h(){f&&(s===0?d.push({type:0,value:f}):s===1||s===2||s===3?(d.length>1&&(r==="*"||r==="+")&&t(`A repeatable param (${f}) must be alone in its segment. eg: '/:ids+.`),d.push({type:1,value:f,regexp:p,repeatable:r==="*"||r==="+",optional:r==="*"||r==="?"})):t("Invalid state to consume buffer"),f="")}function _(){f+=r}for(;i<e.length;){if(r=e[i++],r==="\\"&&s!==2){o=s,s=4;continue}switch(s){case 0:r==="/"?(f&&h(),b()):r===":"?(h(),s=1):_();break;case 4:_(),s=o;break;case 1:r==="("?s=2:Lu.test(r)?_():(h(),s=0,r!=="*"&&r!=="?"&&r!=="+"&&i--);break;case 2:r===")"?p[p.length-1]=="\\"?p=p.slice(0,-1)+r:s=3:p+=r;break;case 3:h(),s=0,r!=="*"&&r!=="?"&&r!=="+"&&i--,p="";break;default:t("Unknown state");break}}return s===2&&t(`Unfinished custom RegExp for param "${f}"`),h(),b(),u}function Ou(e,t,s){const o=Ru(Iu(e.path),s),u=je(o,{record:e,parent:t,children:[],alias:[]});return t&&!u.record.aliasOf==!t.record.aliasOf&&t.children.push(u),u}function Bu(e,t){const s=[],o=new Map;t=So({strict:!1,end:!0,sensitive:!1},t);function u(h){return o.get(h)}function d(h,_,m){const w=!m,g=Pu(h);g.aliasOf=m&&m.record;const l=So(t,h),a=[g];if("alias"in h){const v=typeof h.alias=="string"?[h.alias]:h.alias;for(const x of v)a.push(je({},g,{components:m?m.record.components:g.components,path:x,aliasOf:m?m.record:g}))}let n,c;for(const v of a){const{path:x}=v;if(_&&x[0]!=="/"){const k=_.record.path,E=k[k.length-1]==="/"?"":"/";v.path=_.record.path+(x&&E+x)}if(n=Ou(v,_,l),m?m.alias.push(n):(c=c||n,c!==n&&c.alias.push(n),w&&h.name&&!yo(n)&&b(h.name)),al(n)&&r(n),g.children){const k=g.children;for(let E=0;E<k.length;E++)d(k[E],n,m&&m.children[E])}m=m||n}return c?()=>{b(c)}:ui}function b(h){if(rl(h)){const _=o.get(h);_&&(o.delete(h),s.splice(s.indexOf(_),1),_.children.forEach(b),_.alias.forEach(b))}else{const _=s.indexOf(h);_>-1&&(s.splice(_,1),h.record.name&&o.delete(h.record.name),h.children.forEach(b),h.alias.forEach(b))}}function i(){return s}function r(h){const _=Nu(h,s);s.splice(_,0,h),h.record.name&&!yo(h)&&o.set(h.record.name,h)}function f(h,_){let m,w={},g,l;if("name"in h&&h.name){if(m=o.get(h.name),!m)throw Gs(1,{location:h});l=m.record.name,w=je(wo(_.params,m.keys.filter(c=>!c.optional).concat(m.parent?m.parent.keys.filter(c=>c.optional):[]).map(c=>c.name)),h.params&&wo(h.params,m.keys.map(c=>c.name))),g=m.stringify(w)}else if(h.path!=null)g=h.path,m=s.find(c=>c.re.test(g)),m&&(w=m.parse(g),l=m.record.name);else{if(m=_.name?o.get(_.name):s.find(c=>c.re.test(_.path)),!m)throw Gs(1,{location:h,currentLocation:_});l=m.record.name,w=je({},_.params,h.params),g=m.stringify(w)}const a=[];let n=m;for(;n;)a.unshift(n.record),n=n.parent;return{name:l,path:g,params:w,matched:a,meta:Hu(a)}}e.forEach(h=>d(h));function p(){s.length=0,o.clear()}return{addRoute:d,resolve:f,removeRoute:b,clearRoutes:p,getRoutes:i,getRecordMatcher:u}}function wo(e,t){const s={};for(const o of t)o in e&&(s[o]=e[o]);return s}function Pu(e){return{path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:void 0,beforeEnter:e.beforeEnter,props:$u(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}}}function $u(e){const t={},s=e.props||!1;if("component"in e)t.default=s;else for(const o in e.components)t[o]=typeof s=="object"?s[o]:s;return t}function yo(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function Hu(e){return e.reduce((t,s)=>je(t,s.meta),{})}function So(e,t){const s={};for(const o in e)s[o]=o in t?t[o]:e[o];return s}function Nu(e,t){let s=0,o=t.length;for(;s!==o;){const d=s+o>>1;ol(e,t[d])<0?o=d:s=d+1}const u=Fu(e);return u&&(o=t.lastIndexOf(u,o-1)),o}function Fu(e){let t=e;for(;t=t.parent;)if(al(t)&&ol(e,t)===0)return t}function al({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function zu(e){const t={};if(e===""||e==="?")return t;const o=(e[0]==="?"?e.slice(1):e).split("&");for(let u=0;u<o.length;++u){const d=o[u].replace(Ja," "),b=d.indexOf("="),i=bi(b<0?d:d.slice(0,b)),r=b<0?null:bi(d.slice(b+1));if(i in t){let f=t[i];qt(f)||(f=t[i]=[f]),f.push(r)}else t[i]=r}return t}function xo(e){let t="";for(let s in e){const o=e[s];if(s=ou(s),o==null){o!==void 0&&(t+=(t.length?"&":"")+s);continue}(qt(o)?o.map(d=>d&&Xr(d)):[o&&Xr(o)]).forEach(d=>{d!==void 0&&(t+=(t.length?"&":"")+s,d!=null&&(t+="="+d))})}return t}function Uu(e){const t={};for(const s in e){const o=e[s];o!==void 0&&(t[s]=qt(o)?o.map(u=>u==null?null:""+u):o==null?o:""+o)}return t}const Wu=Symbol(""),Co=Symbol(""),mr=Symbol(""),Sn=Symbol(""),Jr=Symbol("");function Qs(){let e=[];function t(o){return e.push(o),()=>{const u=e.indexOf(o);u>-1&&e.splice(u,1)}}function s(){e=[]}return{add:t,list:()=>e.slice(),reset:s}}function bs(e,t,s,o,u,d=b=>b()){const b=o&&(o.enterCallbacks[u]=o.enterCallbacks[u]||[]);return()=>new Promise((i,r)=>{const f=_=>{_===!1?r(Gs(4,{from:s,to:t})):_ instanceof Error?r(_):Eu(_)?r(Gs(2,{from:t,to:_})):(b&&o.enterCallbacks[u]===b&&typeof _=="function"&&b.push(_),i())},p=d(()=>e.call(o&&o.instances[u],t,s,f));let h=Promise.resolve(p);e.length<3&&(h=h.then(f)),h.catch(_=>r(_))})}function Rr(e,t,s,o,u=d=>d()){const d=[];for(const b of e)for(const i in b.components){let r=b.components[i];if(!(t!=="beforeRouteEnter"&&!b.instances[i]))if(ju(r)){const p=(r.__vccOpts||r)[t];p&&d.push(bs(p,s,o,b,i,u))}else{let f=r();d.push(()=>f.then(p=>{if(!p)return Promise.reject(new Error(`Couldn't resolve component "${i}" at "${b.path}"`));const h=Zh(p)?p.default:p;b.components[i]=h;const m=(h.__vccOpts||h)[t];return m&&bs(m,s,o,b,i,u)()}))}}return d}function ju(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function ko(e){const t=jt(mr),s=jt(Sn),o=Pe(()=>{const r=ve(e.to);return t.resolve(r)}),u=Pe(()=>{const{matched:r}=o.value,{length:f}=r,p=r[f-1],h=s.matched;if(!p||!h.length)return-1;const _=h.findIndex(Ks.bind(null,p));if(_>-1)return _;const m=Eo(r[f-2]);return f>1&&Eo(p)===m&&h[h.length-1].path!==m?h.findIndex(Ks.bind(null,r[f-2])):_}),d=Pe(()=>u.value>-1&&Ku(s.params,o.value.params)),b=Pe(()=>u.value>-1&&u.value===s.matched.length-1&&sl(s.params,o.value.params));function i(r={}){return qu(r)?t[ve(e.replace)?"replace":"push"](ve(e.to)).catch(ui):Promise.resolve()}return{route:o,href:Pe(()=>o.value.href),isActive:d,isExactActive:b,navigate:i}}const Vu=ct({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:ko,setup(e,{slots:t}){const s=Ut(ko(e)),{options:o}=jt(mr),u=Pe(()=>({[To(e.activeClass,o.linkActiveClass,"router-link-active")]:s.isActive,[To(e.exactActiveClass,o.linkExactActiveClass,"router-link-exact-active")]:s.isExactActive}));return()=>{const d=t.default&&t.default(s);return e.custom?d:Xi("a",{"aria-current":s.isExactActive?e.ariaCurrentValue:null,href:s.href,onClick:s.navigate,class:u.value},d)}}}),Zt=Vu;function qu(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function Ku(e,t){for(const s in t){const o=t[s],u=e[s];if(typeof o=="string"){if(o!==u)return!1}else if(!qt(u)||u.length!==o.length||o.some((d,b)=>d!==u[b]))return!1}return!0}function Eo(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const To=(e,t,s)=>e??t??s,Gu=ct({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:s}){const o=jt(Jr),u=Pe(()=>e.route||o.value),d=jt(Co,0),b=Pe(()=>{let f=ve(d);const{matched:p}=u.value;let h;for(;(h=p[f])&&!h.components;)f++;return f}),i=Pe(()=>u.value.matched[b.value]);Pi(Co,Pe(()=>b.value+1)),Pi(Wu,i),Pi(Jr,u);const r=fe();return Ms(()=>[r.value,i.value,e.name],([f,p,h],[_,m,w])=>{p&&(p.instances[h]=f,m&&m!==p&&f&&f===_&&(p.leaveGuards.size||(p.leaveGuards=m.leaveGuards),p.updateGuards.size||(p.updateGuards=m.updateGuards))),f&&p&&(!m||!Ks(p,m)||!_)&&(p.enterCallbacks[h]||[]).forEach(g=>g(f))},{flush:"post"}),()=>{const f=u.value,p=e.name,h=i.value,_=h&&h.components[p];if(!_)return Ao(s.default,{Component:_,route:f});const m=h.props[p],w=m?m===!0?f.params:typeof m=="function"?m(f):m:null,l=Xi(_,je({},w,t,{onVnodeUnmounted:a=>{a.component.isUnmounted&&(h.instances[p]=null)},ref:r}));return Ao(s.default,{Component:l,route:f})||l}}});function Ao(e,t){if(!e)return null;const s=e(t);return s.length===1?s[0]:s}const ll=Gu;function Zu(e){const t=Bu(e.routes,e),s=e.parseQuery||zu,o=e.stringifyQuery||xo,u=e.history,d=Qs(),b=Qs(),i=Qs(),r=oc(ms);let f=ms;Ns&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const p=Tr.bind(null,W=>""+W),h=Tr.bind(null,lu),_=Tr.bind(null,bi);function m(W,L){let ee,te;return rl(W)?(ee=t.getRecordMatcher(W),te=L):te=W,t.addRoute(te,ee)}function w(W){const L=t.getRecordMatcher(W);L&&t.removeRoute(L)}function g(){return t.getRoutes().map(W=>W.record)}function l(W){return!!t.getRecordMatcher(W)}function a(W,L){if(L=je({},L||r.value),typeof W=="string"){const y=Ar(s,W,L.path),O=t.resolve({path:y.path},L),V=u.createHref(y.fullPath);return je(y,O,{params:_(O.params),hash:bi(y.hash),redirectedFrom:void 0,href:V})}let ee;if(W.path!=null)ee=je({},W,{path:Ar(s,W.path,L.path).path});else{const y=je({},W.params);for(const O in y)y[O]==null&&delete y[O];ee=je({},W,{params:h(y)}),L.params=h(L.params)}const te=t.resolve(ee,L),he=W.hash||"";te.params=p(_(te.params));const H=uu(o,je({},W,{hash:nu(he),path:te.path})),q=u.createHref(H);return je({fullPath:H,hash:he,query:o===xo?Uu(W.query):W.query||{}},te,{redirectedFrom:void 0,href:q})}function n(W){return typeof W=="string"?Ar(s,W,r.value.path):je({},W)}function c(W,L){if(f!==W)return Gs(8,{from:L,to:W})}function v(W){return E(W)}function x(W){return v(je(n(W),{replace:!0}))}function k(W){const L=W.matched[W.matched.length-1];if(L&&L.redirect){const{redirect:ee}=L;let te=typeof ee=="function"?ee(W):ee;return typeof te=="string"&&(te=te.includes("?")||te.includes("#")?te=n(te):{path:te},te.params={}),je({query:W.query,hash:W.hash,params:te.path!=null?{}:W.params},te)}}function E(W,L){const ee=f=a(W),te=r.value,he=W.state,H=W.force,q=W.replace===!0,y=k(ee);if(y)return E(je(n(y),{state:typeof y=="object"?je({},he,y.state):he,force:H,replace:q}),L||ee);const O=ee;O.redirectedFrom=L;let V;return!H&&du(o,te,ee)&&(V=Gs(16,{to:O,from:te}),S(te,te,!0,!1)),(V?Promise.resolve(V):z(O,te)).catch(I=>rs(I)?rs(I,2)?I:U(I):oe(I,O,te)).then(I=>{if(I){if(rs(I,2))return E(je({replace:q},n(I.to),{state:typeof I.to=="object"?je({},he,I.to.state):he,force:H}),L||O)}else I=B(O,te,!0,q,he);return G(O,te,I),I})}function C(W,L){const ee=c(W,L);return ee?Promise.reject(ee):Promise.resolve()}function A(W){const L=Y.values().next().value;return L&&typeof L.runWithContext=="function"?L.runWithContext(W):W()}function z(W,L){let ee;const[te,he,H]=Xu(W,L);ee=Rr(te.reverse(),"beforeRouteLeave",W,L);for(const y of te)y.leaveGuards.forEach(O=>{ee.push(bs(O,W,L))});const q=C.bind(null,W,L);return ee.push(q),ae(ee).then(()=>{ee=[];for(const y of d.list())ee.push(bs(y,W,L));return ee.push(q),ae(ee)}).then(()=>{ee=Rr(he,"beforeRouteUpdate",W,L);for(const y of he)y.updateGuards.forEach(O=>{ee.push(bs(O,W,L))});return ee.push(q),ae(ee)}).then(()=>{ee=[];for(const y of H)if(y.beforeEnter)if(qt(y.beforeEnter))for(const O of y.beforeEnter)ee.push(bs(O,W,L));else ee.push(bs(y.beforeEnter,W,L));return ee.push(q),ae(ee)}).then(()=>(W.matched.forEach(y=>y.enterCallbacks={}),ee=Rr(H,"beforeRouteEnter",W,L,A),ee.push(q),ae(ee))).then(()=>{ee=[];for(const y of b.list())ee.push(bs(y,W,L));return ee.push(q),ae(ee)}).catch(y=>rs(y,8)?y:Promise.reject(y))}function G(W,L,ee){i.list().forEach(te=>A(()=>te(W,L,ee)))}function B(W,L,ee,te,he){const H=c(W,L);if(H)return H;const q=L===ms,y=Ns?history.state:{};ee&&(te||q?u.replace(W.fullPath,je({scroll:q&&y&&y.scroll},he)):u.push(W.fullPath,he)),r.value=W,S(W,L,ee,q),U()}let P;function R(){P||(P=u.listen((W,L,ee)=>{if(!ne.listening)return;const te=a(W),he=k(te);if(he){E(je(he,{replace:!0}),te).catch(ui);return}f=te;const H=r.value;Ns&&wu(mo(H.fullPath,ee.delta),pr()),z(te,H).catch(q=>rs(q,12)?q:rs(q,2)?(E(q.to,te).then(y=>{rs(y,20)&&!ee.delta&&ee.type===wi.pop&&u.go(-1,!1)}).catch(ui),Promise.reject()):(ee.delta&&u.go(-ee.delta,!1),oe(q,te,H))).then(q=>{q=q||B(te,H,!1),q&&(ee.delta&&!rs(q,8)?u.go(-ee.delta,!1):ee.type===wi.pop&&rs(q,20)&&u.go(-1,!1)),G(te,H,q)}).catch(ui)}))}let Q=Qs(),se=Qs(),X;function oe(W,L,ee){U(W);const te=se.list();return te.length?te.forEach(he=>he(W,L,ee)):console.error(W),Promise.reject(W)}function D(){return X&&r.value!==ms?Promise.resolve():new Promise((W,L)=>{Q.add([W,L])})}function U(W){return X||(X=!W,R(),Q.list().forEach(([L,ee])=>W?ee(W):L()),Q.reset()),W}function S(W,L,ee,te){const{scrollBehavior:he}=e;if(!Ns||!he)return Promise.resolve();const H=!ee&&yu(mo(W.fullPath,0))||(te||!ee)&&history.state&&history.state.scroll||null;return cr().then(()=>he(W,L,H)).then(q=>q&&bu(q)).catch(q=>oe(q,W,L))}const T=W=>u.go(W);let K;const Y=new Set,ne={currentRoute:r,listening:!0,addRoute:m,removeRoute:w,clearRoutes:t.clearRoutes,hasRoute:l,getRoutes:g,resolve:a,options:e,push:v,replace:x,go:T,back:()=>T(-1),forward:()=>T(1),beforeEach:d.add,beforeResolve:b.add,afterEach:i.add,onError:se.add,isReady:D,install(W){const L=this;W.component("RouterLink",Zt),W.component("RouterView",ll),W.config.globalProperties.$router=L,Object.defineProperty(W.config.globalProperties,"$route",{enumerable:!0,get:()=>ve(r)}),Ns&&!K&&r.value===ms&&(K=!0,v(u.location).catch(he=>{}));const ee={};for(const he in ms)Object.defineProperty(ee,he,{get:()=>r.value[he],enumerable:!0});W.provide(mr,L),W.provide(Sn,ma(ee)),W.provide(Jr,r);const te=W.unmount;Y.add(W),W.unmount=function(){Y.delete(W),Y.size<1&&(f=ms,P&&P(),P=null,r.value=ms,K=!1,X=!1),te()}}};function ae(W){return W.reduce((L,ee)=>L.then(()=>A(ee)),Promise.resolve())}return ne}function Xu(e,t){const s=[],o=[],u=[],d=Math.max(t.matched.length,e.matched.length);for(let b=0;b<d;b++){const i=t.matched[b];i&&(e.matched.find(f=>Ks(f,i))?o.push(i):s.push(i));const r=e.matched[b];r&&(t.matched.find(f=>Ks(f,r))||u.push(r))}return[s,o,u]}function Yu(){return jt(mr)}function Ju(e){return jt(Sn)}const Qu={class:"min-h-[100vh] bg-gray-50 flex flex-col"},ed={key:0,class:"sticky top-0 bg-white/90 backdrop-blur-sm border-b border-slate-200 z-10"},td={class:"max-w-6xl mx-auto px-6 md:px-8 py-3 flex items-center justify-between"},sd={class:"flex items-center"},id={class:"relative w-full max-w-xl mx-2"},rd={class:"flex items-center text-slate-600"},nd=ct({__name:"App",setup(e){const t=Ju(),s=Pe(()=>t.name==="home"),o=fe("");return(u,d)=>(ue(),pe("div",Qu,[s.value?(ue(),pe("header",ed,[M("div",td,[M("div",sd,[d[2]||(d[2]=M("h1",{class:"font-bold text-xl text-slate-900 tracking-tight flex items-center gap-2 mr-6 whitespace-nowrap"},[M("span",{class:"w-3 h-3 rounded-full bg-brand-500"}),Je("  ")],-1)),M("div",id,[Xe(M("input",{"onUpdate:modelValue":d[0]||(d[0]=b=>o.value=b),type:"text",placeholder:" JSONMarkdown",class:"w-full px-4 py-2.5 pr-10 rounded-lg border border-slate-200 shadow-sm focus:border-brand-500 focus:ring-2 focus:ring-brand-100 outline-none transition-all"},null,512),[[Ye,o.value]]),d[1]||(d[1]=M("div",{class:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 text-xs"},"",-1))])]),M("nav",rd,[_e(ve(Zt),{class:"hover:text-brand-600 font-medium transition-colors px-1 py-0.5 rounded-sm",to:"/"},{default:Gt(()=>[...d[3]||(d[3]=[Je("",-1)])]),_:1})])])])):Oe("",!0),_e(ve(ll),{class:"flex-grow"})]))}});var Ai={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};const od=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Le=(e,t)=>({size:s,strokeWidth:o=2,absoluteStrokeWidth:u,color:d,...b},{attrs:i,slots:r})=>Xi("svg",{...Ai,width:s||Ai.width,height:s||Ai.height,stroke:d||Ai.stroke,"stroke-width":u?Number(o)*24/Number(s):o,...i,class:["lucide",`lucide-${od(e)}`,(i==null?void 0:i.class)||""],...b},[...t.map(f=>Xi(...f)),...r.default?[r.default()]:[]]),ad=Le("BoldIcon",[["path",{d:"M14 12a4 4 0 0 0 0-8H6v8",key:"v2sylx"}],["path",{d:"M15 20a4 4 0 0 0 0-8H6v8Z",key:"1ef5ya"}]]),Mr=Le("BotIcon",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]),ld=Le("BracesIcon",[["path",{d:"M8 3H7a2 2 0 0 0-2 2v5a2 2 0 0 1-2 2 2 2 0 0 1 2 2v5c0 1.1.9 2 2 2h1",key:"ezmyqa"}],["path",{d:"M16 21h1a2 2 0 0 0 2-2v-5c0-1.1.9-2 2-2a2 2 0 0 1-2-2V5a2 2 0 0 0-2-2h-1",key:"e1hn23"}]]),cd=Le("CalendarIcon",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),hd=Le("CheckIcon",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),ud=Le("ChevronLeftIcon",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),xn=Le("ClockIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),cl=Le("CodeIcon",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]),dd=Le("CopyIcon",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),Yi=Le("DownloadIcon",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),fd=Le("FileImageIcon",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["circle",{cx:"10",cy:"13",r:"2",key:"6v46hv"}],["path",{d:"m20 17-1.09-1.09a2 2 0 0 0-2.82 0L10 22",key:"17vly1"}]]),Ji=Le("FileTextIcon",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),pd=Le("FolderOpenIcon",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]),md=Le("HandIcon",[["path",{d:"M18 11V6a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v0",key:"aigmz7"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v2",key:"1n6bmn"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v8",key:"a9iiix"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]]),_d=Le("HashIcon",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]),gd=Le("Heading1Icon",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"m17 12 3-2v8",key:"1hhhft"}]]),vd=Le("Heading2Icon",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M21 18h-4c0-4 4-3 4-6 0-1.5-2-2.5-4-1",key:"9jr5yi"}]]),fs=Le("HomeIcon",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),Cn=Le("ImageIcon",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),bd=Le("ItalicIcon",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]),wd=Le("LinkIcon",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]),yd=Le("ListOrderedIcon",[["line",{x1:"10",x2:"21",y1:"6",y2:"6",key:"76qw6h"}],["line",{x1:"10",x2:"21",y1:"12",y2:"12",key:"16nom4"}],["line",{x1:"10",x2:"21",y1:"18",y2:"18",key:"u3jurt"}],["path",{d:"M4 6h1v4",key:"cnovpq"}],["path",{d:"M4 10h2",key:"16xx2s"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1",key:"m9a95d"}]]),Sd=Le("ListIcon",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]),Ro=Le("Loader2Icon",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),hl=Le("MenuIcon",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),xd=Le("MessageSquareIcon",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),Cd=Le("MoveIcon",[["polyline",{points:"5 9 2 12 5 15",key:"1r5uj5"}],["polyline",{points:"9 5 12 2 15 5",key:"5v383o"}],["polyline",{points:"15 19 12 22 9 19",key:"g7qi8m"}],["polyline",{points:"19 9 22 12 19 15",key:"tpp73q"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}]]),Mo=Le("PenSquareIcon",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),kd=Le("PlusIcon",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),Ed=Le("QuoteIcon",[["path",{d:"M3 21c3 0 7-1 7-8V5c0-1.25-.756-2.017-2-2H4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2 1 0 1 0 1 1v1c0 1-1 2-2 2s-1 .008-1 1.031V20c0 1 0 1 1 1z",key:"4rm80e"}],["path",{d:"M15 21c3 0 7-1 7-8V5c0-1.25-.757-2.017-2-2h-4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2h.75c0 2.25.25 4-2.75 4v3c0 1 0 1 1 1z",key:"10za9r"}]]),Td=Le("RotateCcwIcon",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),Ad=Le("RotateCwIcon",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]),Rd=Le("SaveIcon",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),Md=Le("SendIcon",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),Dd=Le("SettingsIcon",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Ld=Le("TableIcon",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]),_r=Le("Trash2Icon",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),ul=Le("TypeIcon",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]),Zs=Le("UploadIcon",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),Id=Le("UserIcon",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),Od=Le("XIcon",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Do=Le("ZapIcon",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),Bd=Le("ZoomInIcon",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),Pd=Le("ZoomOutIcon",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),$d={class:"min-h-[100vh] bg-gradient-to-b from-brand-50 to-white"},Hd={class:"max-w-6xl mx-auto px-4 md:px-6 py-8 md:py-12"},Nd={class:"grid sm:grid-cols-2 lg:grid-cols-3 gap-6 md:gap-8"},Fd={class:"p-6 border-b border-slate-100 flex-1"},zd={class:"flex items-center gap-3 mb-3"},Ud={class:"w-10 h-10 rounded-xl bg-brand-100 flex items-center justify-center text-brand-600 group-hover:scale-110 transition-transform"},Wd={class:"text-xl font-bold text-slate-900"},jd={class:"text-slate-600 mb-3"},Vd={class:"flex flex-wrap gap-2 mb-3"},qd={class:"space-y-1"},Kd=ct({__name:"Home",setup(e){const t=[{name:"Markdown ",desc:" Markdown",route:"/reader",icon:"file",tags:["","",""],features:["","",""],usageCount:"12.5k+"},{name:"JSON ",desc:"",route:"/json",icon:"braces",tags:["","",""],features:["","","/"],usageCount:"9.3k+"},{name:"",desc:"",route:"/timestamp",icon:"clock",tags:["","",""],features:["","",""],usageCount:"7.8k+"},{name:"",desc:"",route:"/case",icon:"case",tags:["","",""],features:["","",""],usageCount:"5.2k+"},{name:"",desc:" AI ",route:"/chat",icon:"chat",tags:["AI","",""],features:["","",""],usageCount:"0.1k+"},{name:"SSH",desc:"SSH",route:"/ssh",icon:"string",tags:["SSH","",""],features:["","",""],usageCount:"0k+"},{name:"BASE64",desc:"BASE64",route:"/image-to-base64",icon:"code",tags:["","",""],features:["","",""],usageCount:"2.3k+"},{name:"",desc:"",route:"/string",icon:"string",tags:["","",""],features:["","",""],usageCount:"1.8k+"},{name:"",desc:"ZIP",route:"/images-new",icon:"image",tags:["","",""],features:["","ZIP",""],usageCount:"1.5k+"}],s=u=>{switch(u){case"file":return Ji;case"braces":return ld;case"clock":return xn;case"case":return ul;case"code":return cl;case"string":return _d;case"chat":return xd;case"image":return Cn;default:return Ji}},o=Pe(()=>t);return(u,d)=>(ue(),pe("div",$d,[M("main",Hd,[M("div",Nd,[(ue(!0),pe(tt,null,Nt(o.value,b=>(ue(),$t(ve(Zt),{key:b.route,to:b.route,class:"group rounded-2xl bg-white border border-slate-200 shadow-sm overflow-hidden hover:border-brand-200 hover:shadow-brand-500/10 transition duration-300 flex flex-col"},{default:Gt(()=>[M("div",Fd,[M("div",zd,[M("div",Ud,[(ue(),$t(Ra(s(b.icon)),{class:"w-5 h-5"}))]),M("h2",Wd,be(b.name),1)]),M("p",jd,be(b.desc),1),M("div",Vd,[(ue(!0),pe(tt,null,Nt(b.tags,(i,r)=>(ue(),pe("span",{key:r,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-slate-100 text-slate-600"},be(i),1))),128))]),M("div",qd,[(ue(!0),pe(tt,null,Nt(b.features.slice(0,2),(i,r)=>(ue(),pe("div",{key:r,class:"flex items-center gap-1.5 text-sm text-slate-500"},[d[0]||(d[0]=M("svg",{class:"w-3 h-3 text-brand-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)),M("span",null,be(i),1)]))),128))])]),d[1]||(d[1]=M("div",{class:"p-4 bg-slate-50 flex items-center justify-end mt-auto"},[M("span",{class:"text-xs text-brand-600 font-medium flex items-center gap-1"},[Je("  "),M("svg",{class:"w-3 h-3 group-hover:translate-x-0.5 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 8l4 4m0 0l-4 4m4-4H3"})])])],-1))]),_:2},1032,["to"]))),128))]),d[2]||(d[2]=qs('<div class="mt-16 flex justify-center"><div class="flex gap-2"><div class="w-2 h-2 rounded-full bg-slate-300"></div><div class="w-2 h-2 rounded-full bg-brand-500"></div><div class="w-2 h-2 rounded-full bg-slate-300"></div></div></div>',1))])]))}}),Gd={class:"p-4 sm:p-5 md:p-6 border-b border-slate-100 flex items-center justify-between"},Zd={class:"p-4 rounded-lg"},Xd={class:"flex-1 overflow-y-auto px-2 py-0 space-y-1 min-h-0 flex flex-col"},Yd={key:0,class:"text-center py-10 px-4"},Jd=["onClick","onDblclick"],Qd={class:"flex items-center gap-3 overflow-hidden flex-1"},ef={key:0,class:"relative flex items-center min-w-0 flex-1"},tf=["onBlur","onKeydown"],sf={class:"ml-1 whitespace-nowrap text-slate-500"},rf=["title"],nf={class:"flex items-center gap-1"},of=["onClick"],af=["onClick"],lf={key:0,class:"absolute inset-0 flex flex-col items-center justify-center bg-brand-50/90 backdrop-blur-sm z-30 w-full"},cf=ct({__name:"Sidebar",props:{files:{},activeFileId:{},isOpen:{type:Boolean}},emits:["select-file","delete-file","upload","toggle","rename-file"],setup(e,{emit:t}){const s=e,o=t,u=fe(null),d=fe(null),b=fe(!1),i=fe(!1),r=()=>{var c;(c=u.value)==null||c.click()},f=c=>{o("upload",c)},p=c=>{c.preventDefault(),c.stopPropagation(),b.value||(b.value=!0),i.value||(i.value=!0)},h=c=>{c.preventDefault(),c.stopPropagation();const v=c.currentTarget,x=c.relatedTarget;v.contains(x)||(b.value=!1,i.value=!1)},_=c=>{var v;if(c.preventDefault(),c.stopPropagation(),b.value=!1,i.value=!1,(v=c.dataTransfer)!=null&&v.files&&c.dataTransfer.files.length>0){const x={target:{files:c.dataTransfer.files}};o("upload",x)}};Pe(()=>({"border-dashed border-2 border-slate-200":!0,"border-brand-400 bg-brand-50":b.value,"hover:border-slate-300":!b.value}));const m=fe(null),w=fe(""),g=(c,v)=>{m.value=c,w.value=v},l=c=>{var v;if(w.value.trim()){const x=s.files.find(k=>k.id===c);if(x){const k=((v=x.name.match(/\.(md|markdown|txt)$/i))==null?void 0:v[0])||"",E=k?`${w.value.trim()}${k}`:w.value.trim();o("rename-file",c,E)}}m.value=null},a=()=>{m.value=null},n=(c,v)=>{c.key==="Enter"?l(v):c.key==="Escape"&&a()};return(c,v)=>(ue(),pe(tt,null,[e.isOpen?Oe("",!0):(ue(),pe("button",{key:0,onClick:v[0]||(v[0]=x=>o("toggle")),class:"fixed top-3 sm:top-4 left-3 sm:left-4 z-20 p-2 bg-white rounded-lg shadow-md hover:bg-gray-50 text-slate-600 transition-colors","aria-label":"Open sidebar"},[_e(ve(hl),{class:"w-6 h-6"})])),e.isOpen?(ue(),pe("div",{key:1,class:"fixed inset-0 bg-black/20 backdrop-blur-sm z-10 md:hidden",onClick:v[1]||(v[1]=x=>o("toggle"))})):Oe("",!0),e.isOpen?(ue(),pe("div",{key:2,class:Ae(["fixed md:static inset-0 left-0 w-64 sm:w-72 md:w-80 flex flex-col z-20 shadow-xl md:shadow-none transition-transform duration-300 h-full",b.value?"bg-brand-50 border-r-2 border-brand-300":"bg-white border-r border-slate-200"]),onDragover:p,onDragleave:h,onDrop:_},[M("div",Gd,[v[4]||(v[4]=M("h1",{class:"font-bold text-xl text-slate-800 tracking-tight flex items-center gap-2"},[M("span",{class:"w-3 h-3 rounded-full bg-brand-500"}),Je(" ZenReader ")],-1)),M("button",{onClick:v[2]||(v[2]=x=>o("toggle")),class:"md:hidden text-slate-400 hover:text-slate-600"},[_e(ve(ud),{class:"w-6 h-6"})])]),M("div",Zd,[M("input",{type:"file",ref_key:"fileInputRef",ref:u,onChange:f,accept:".md,.markdown,.txt",multiple:"",class:"hidden"},null,544),M("button",{onClick:r,class:"w-full flex items-center justify-center gap-2 bg-slate-900 hover:bg-slate-800 text-white py-3 px-4 rounded-xl transition-all duration-200 shadow-sm hover:shadow active:scale-95"},[_e(ve(kd),{class:"w-5 h-5"}),v[5]||(v[5]=M("span",{class:"font-medium"},"Open File",-1))])]),M("div",Xd,[e.files.length===0?(ue(),pe("div",Yd,[...v[6]||(v[6]=[M("p",{class:"text-sm text-slate-400 italic"},"No files opened yet.",-1)])])):(ue(),pe(tt,{key:1},[v[7]||(v[7]=M("h3",{class:"text-xs font-semibold text-slate-400 uppercase tracking-wider px-4 mb-2 mt-2"}," Recently Opened ",-1)),(ue(!0),pe(tt,null,Nt(e.files,x=>{var k;return ue(),pe("div",{key:x.id,class:Ae(["group flex items-center justify-between p-2 rounded-lg cursor-pointer transition-all duration-200",e.activeFileId===x.id?"bg-brand-50 text-brand-900 ring-1 ring-brand-200":"text-slate-600 hover:bg-slate-50"]),onClick:E=>o("select-file",x.id),onDblclick:Fi(E=>g(x.id,x.name.replace(/\.(md|markdown|txt)$/i,"")),["stop"])},[M("div",Qd,[_e(ve(Ji),{class:Ae(["w-4 h-4 flex-shrink-0",e.activeFileId===x.id?"text-brand-500":"text-slate-400"])},null,8,["class"]),m.value===x.id?(ue(),pe("div",ef,[Xe(M("input",{"onUpdate:modelValue":v[3]||(v[3]=E=>w.value=E),type:"text",class:"text-sm font-medium border-b-2 border-brand-400 focus:outline-none focus:border-brand-600 px-1 py-0 w-full min-w-0",onBlur:E=>l(x.id),onKeydown:E=>n(E,x.id),ref_for:!0,ref_key:"fileNameInputRef",ref:d,title:"EnterEscape",autofocus:""},null,40,tf),[[Ye,w.value]]),M("span",sf,be(((k=x.name.match(/\.(md|markdown|txt)$/i))==null?void 0:k[0])||""),1)])):(ue(),pe("span",{key:1,class:"truncate text-sm font-medium hover:text-brand-600 transition-colors cursor-default max-w-[calc(100%-50px)] whitespace-nowrap overflow-hidden text-ellipsis",title:x.name},be(x.name),9,rf))]),M("div",nf,[m.value!==x.id?(ue(),pe("button",{key:0,onClick:Fi(E=>g(x.id,x.name.replace(/\.(md|markdown|txt)$/i,"")),["stop"]),class:"opacity-0 group-hover:opacity-50 p-1.5 text-slate-400 hover:text-blue-500 hover:bg-blue-50 rounded-md transition-all",title:""},"  ",8,of)):Oe("",!0),M("button",{onClick:Fi(E=>o("delete-file",x.id),["stop"]),class:"opacity-0 group-hover:opacity-100 p-1.5 text-slate-400 hover:text-red-500 hover:bg-red-50 rounded-md transition-all",title:""},[_e(ve(_r),{class:"w-4 h-4"})],8,af)])],42,Jd)}),128))],64))]),i.value?(ue(),pe("div",lf,[...v[8]||(v[8]=[M("div",{class:"text-center p-8"},[M("div",{class:"text-brand-600 text-6xl mb-4"},""),M("h3",{class:"text-xl font-bold text-brand-800 mb-2"},""),M("p",{class:"text-brand-700"},"Markdown")],-1)])])):Oe("",!0),v[9]||(v[9]=M("div",{class:"p-2 border-t border-slate-100 mt-auto flex-shrink-0"},[M("div",{class:"text-xs text-slate-400 text-center"}," Built with Vue 3 & Tailwind ")],-1))],34)):Oe("",!0)],64))}});function kn(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}let Os=kn();function dl(e){Os=e}const fl=/[&<>"']/,hf=new RegExp(fl.source,"g"),pl=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,uf=new RegExp(pl.source,"g"),df={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Lo=e=>df[e];function It(e,t){if(t){if(fl.test(e))return e.replace(hf,Lo)}else if(pl.test(e))return e.replace(uf,Lo);return e}const ff=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function pf(e){return e.replace(ff,(t,s)=>(s=s.toLowerCase(),s==="colon"?":":s.charAt(0)==="#"?s.charAt(1)==="x"?String.fromCharCode(parseInt(s.substring(2),16)):String.fromCharCode(+s.substring(1)):""))}const mf=/(^|[^\[])\^/g;function Ue(e,t){e=typeof e=="string"?e:e.source,t=t||"";const s={replace:(o,u)=>(u=typeof u=="object"&&"source"in u?u.source:u,u=u.replace(mf,"$1"),e=e.replace(o,u),s),getRegex:()=>new RegExp(e,t)};return s}function Io(e){try{e=encodeURI(e).replace(/%25/g,"%")}catch{return null}return e}const Qi={exec:()=>null};function Oo(e,t){const s=e.replace(/\|/g,(d,b,i)=>{let r=!1,f=b;for(;--f>=0&&i[f]==="\\";)r=!r;return r?"|":" |"}),o=s.split(/ \|/);let u=0;if(o[0].trim()||o.shift(),o.length>0&&!o[o.length-1].trim()&&o.pop(),t)if(o.length>t)o.splice(t);else for(;o.length<t;)o.push("");for(;u<o.length;u++)o[u]=o[u].trim().replace(/\\\|/g,"|");return o}function Ri(e,t,s){const o=e.length;if(o===0)return"";let u=0;for(;u<o&&e.charAt(o-u-1)===t;)u++;return e.slice(0,o-u)}function _f(e,t){if(e.indexOf(t[1])===-1)return-1;let s=0;for(let o=0;o<e.length;o++)if(e[o]==="\\")o++;else if(e[o]===t[0])s++;else if(e[o]===t[1]&&(s--,s<0))return o;return-1}function Bo(e,t,s,o){const u=t.href,d=t.title?It(t.title):null,b=e[1].replace(/\\([\[\]])/g,"$1");if(e[0].charAt(0)!=="!"){o.state.inLink=!0;const i={type:"link",raw:s,href:u,title:d,text:b,tokens:o.inlineTokens(b)};return o.state.inLink=!1,i}return{type:"image",raw:s,href:u,title:d,text:It(b)}}function gf(e,t){const s=e.match(/^(\s+)(?:```)/);if(s===null)return t;const o=s[1];return t.split(`
`).map(u=>{const d=u.match(/^\s+/);if(d===null)return u;const[b]=d;return b.length>=o.length?u.slice(o.length):u}).join(`
`)}class er{constructor(t){qe(this,"options");qe(this,"rules");qe(this,"lexer");this.options=t||Os}space(t){const s=this.rules.block.newline.exec(t);if(s&&s[0].length>0)return{type:"space",raw:s[0]}}code(t){const s=this.rules.block.code.exec(t);if(s){const o=s[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:s[0],codeBlockStyle:"indented",text:this.options.pedantic?o:Ri(o,`
`)}}}fences(t){const s=this.rules.block.fences.exec(t);if(s){const o=s[0],u=gf(o,s[3]||"");return{type:"code",raw:o,lang:s[2]?s[2].trim().replace(this.rules.inline._escapes,"$1"):s[2],text:u}}}heading(t){const s=this.rules.block.heading.exec(t);if(s){let o=s[2].trim();if(/#$/.test(o)){const u=Ri(o,"#");(this.options.pedantic||!u||/ $/.test(u))&&(o=u.trim())}return{type:"heading",raw:s[0],depth:s[1].length,text:o,tokens:this.lexer.inline(o)}}}hr(t){const s=this.rules.block.hr.exec(t);if(s)return{type:"hr",raw:s[0]}}blockquote(t){const s=this.rules.block.blockquote.exec(t);if(s){const o=Ri(s[0].replace(/^ *>[ \t]?/gm,""),`
`),u=this.lexer.state.top;this.lexer.state.top=!0;const d=this.lexer.blockTokens(o);return this.lexer.state.top=u,{type:"blockquote",raw:s[0],tokens:d,text:o}}}list(t){let s=this.rules.block.list.exec(t);if(s){let o=s[1].trim();const u=o.length>1,d={type:"list",raw:"",ordered:u,start:u?+o.slice(0,-1):"",loose:!1,items:[]};o=u?`\\d{1,9}\\${o.slice(-1)}`:`\\${o}`,this.options.pedantic&&(o=u?o:"[*+-]");const b=new RegExp(`^( {0,3}${o})((?:[	 ][^\\n]*)?(?:\\n|$))`);let i="",r="",f=!1;for(;t;){let p=!1;if(!(s=b.exec(t))||this.rules.block.hr.test(t))break;i=s[0],t=t.substring(i.length);let h=s[2].split(`
`,1)[0].replace(/^\t+/,a=>" ".repeat(3*a.length)),_=t.split(`
`,1)[0],m=0;this.options.pedantic?(m=2,r=h.trimStart()):(m=s[2].search(/[^ ]/),m=m>4?1:m,r=h.slice(m),m+=s[1].length);let w=!1;if(!h&&/^ *$/.test(_)&&(i+=_+`
`,t=t.substring(_.length+1),p=!0),!p){const a=new RegExp(`^ {0,${Math.min(3,m-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),n=new RegExp(`^ {0,${Math.min(3,m-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),c=new RegExp(`^ {0,${Math.min(3,m-1)}}(?:\`\`\`|~~~)`),v=new RegExp(`^ {0,${Math.min(3,m-1)}}#`);for(;t;){const x=t.split(`
`,1)[0];if(_=x,this.options.pedantic&&(_=_.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),c.test(_)||v.test(_)||a.test(_)||n.test(t))break;if(_.search(/[^ ]/)>=m||!_.trim())r+=`
`+_.slice(m);else{if(w||h.search(/[^ ]/)>=4||c.test(h)||v.test(h)||n.test(h))break;r+=`
`+_}!w&&!_.trim()&&(w=!0),i+=x+`
`,t=t.substring(x.length+1),h=_.slice(m)}}d.loose||(f?d.loose=!0:/\n *\n *$/.test(i)&&(f=!0));let g=null,l;this.options.gfm&&(g=/^\[[ xX]\] /.exec(r),g&&(l=g[0]!=="[ ] ",r=r.replace(/^\[[ xX]\] +/,""))),d.items.push({type:"list_item",raw:i,task:!!g,checked:l,loose:!1,text:r,tokens:[]}),d.raw+=i}d.items[d.items.length-1].raw=i.trimEnd(),d.items[d.items.length-1].text=r.trimEnd(),d.raw=d.raw.trimEnd();for(let p=0;p<d.items.length;p++)if(this.lexer.state.top=!1,d.items[p].tokens=this.lexer.blockTokens(d.items[p].text,[]),!d.loose){const h=d.items[p].tokens.filter(m=>m.type==="space"),_=h.length>0&&h.some(m=>/\n.*\n/.test(m.raw));d.loose=_}if(d.loose)for(let p=0;p<d.items.length;p++)d.items[p].loose=!0;return d}}html(t){const s=this.rules.block.html.exec(t);if(s)return{type:"html",block:!0,raw:s[0],pre:s[1]==="pre"||s[1]==="script"||s[1]==="style",text:s[0]}}def(t){const s=this.rules.block.def.exec(t);if(s){const o=s[1].toLowerCase().replace(/\s+/g," "),u=s[2]?s[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline._escapes,"$1"):"",d=s[3]?s[3].substring(1,s[3].length-1).replace(this.rules.inline._escapes,"$1"):s[3];return{type:"def",tag:o,raw:s[0],href:u,title:d}}}table(t){const s=this.rules.block.table.exec(t);if(s){if(!/[:|]/.test(s[2]))return;const o={type:"table",raw:s[0],header:Oo(s[1]).map(u=>({text:u,tokens:[]})),align:s[2].replace(/^\||\| *$/g,"").split("|"),rows:s[3]&&s[3].trim()?s[3].replace(/\n[ \t]*$/,"").split(`
`):[]};if(o.header.length===o.align.length){let u=o.align.length,d,b,i,r;for(d=0;d<u;d++){const f=o.align[d];f&&(/^ *-+: *$/.test(f)?o.align[d]="right":/^ *:-+: *$/.test(f)?o.align[d]="center":/^ *:-+ *$/.test(f)?o.align[d]="left":o.align[d]=null)}for(u=o.rows.length,d=0;d<u;d++)o.rows[d]=Oo(o.rows[d],o.header.length).map(f=>({text:f,tokens:[]}));for(u=o.header.length,b=0;b<u;b++)o.header[b].tokens=this.lexer.inline(o.header[b].text);for(u=o.rows.length,b=0;b<u;b++)for(r=o.rows[b],i=0;i<r.length;i++)r[i].tokens=this.lexer.inline(r[i].text);return o}}}lheading(t){const s=this.rules.block.lheading.exec(t);if(s)return{type:"heading",raw:s[0],depth:s[2].charAt(0)==="="?1:2,text:s[1],tokens:this.lexer.inline(s[1])}}paragraph(t){const s=this.rules.block.paragraph.exec(t);if(s){const o=s[1].charAt(s[1].length-1)===`
`?s[1].slice(0,-1):s[1];return{type:"paragraph",raw:s[0],text:o,tokens:this.lexer.inline(o)}}}text(t){const s=this.rules.block.text.exec(t);if(s)return{type:"text",raw:s[0],text:s[0],tokens:this.lexer.inline(s[0])}}escape(t){const s=this.rules.inline.escape.exec(t);if(s)return{type:"escape",raw:s[0],text:It(s[1])}}tag(t){const s=this.rules.inline.tag.exec(t);if(s)return!this.lexer.state.inLink&&/^<a /i.test(s[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(s[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(s[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(s[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:s[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:s[0]}}link(t){const s=this.rules.inline.link.exec(t);if(s){const o=s[2].trim();if(!this.options.pedantic&&/^</.test(o)){if(!/>$/.test(o))return;const b=Ri(o.slice(0,-1),"\\");if((o.length-b.length)%2===0)return}else{const b=_f(s[2],"()");if(b>-1){const r=(s[0].indexOf("!")===0?5:4)+s[1].length+b;s[2]=s[2].substring(0,b),s[0]=s[0].substring(0,r).trim(),s[3]=""}}let u=s[2],d="";if(this.options.pedantic){const b=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(u);b&&(u=b[1],d=b[3])}else d=s[3]?s[3].slice(1,-1):"";return u=u.trim(),/^</.test(u)&&(this.options.pedantic&&!/>$/.test(o)?u=u.slice(1):u=u.slice(1,-1)),Bo(s,{href:u&&u.replace(this.rules.inline._escapes,"$1"),title:d&&d.replace(this.rules.inline._escapes,"$1")},s[0],this.lexer)}}reflink(t,s){let o;if((o=this.rules.inline.reflink.exec(t))||(o=this.rules.inline.nolink.exec(t))){let u=(o[2]||o[1]).replace(/\s+/g," ");if(u=s[u.toLowerCase()],!u){const d=o[0].charAt(0);return{type:"text",raw:d,text:d}}return Bo(o,u,o[0],this.lexer)}}emStrong(t,s,o=""){let u=this.rules.inline.emStrong.lDelim.exec(t);if(!u||u[3]&&o.match(/[\p{L}\p{N}]/u))return;if(!(u[1]||u[2]||"")||!o||this.rules.inline.punctuation.exec(o)){const b=[...u[0]].length-1;let i,r,f=b,p=0;const h=u[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(h.lastIndex=0,s=s.slice(-1*t.length+u[0].length-1);(u=h.exec(s))!=null;){if(i=u[1]||u[2]||u[3]||u[4]||u[5]||u[6],!i)continue;if(r=[...i].length,u[3]||u[4]){f+=r;continue}else if((u[5]||u[6])&&b%3&&!((b+r)%3)){p+=r;continue}if(f-=r,f>0)continue;r=Math.min(r,r+f+p);const _=[...t].slice(0,b+u.index+r+1).join("");if(Math.min(b,r)%2){const w=_.slice(1,-1);return{type:"em",raw:_,text:w,tokens:this.lexer.inlineTokens(w)}}const m=_.slice(2,-2);return{type:"strong",raw:_,text:m,tokens:this.lexer.inlineTokens(m)}}}}codespan(t){const s=this.rules.inline.code.exec(t);if(s){let o=s[2].replace(/\n/g," ");const u=/[^ ]/.test(o),d=/^ /.test(o)&&/ $/.test(o);return u&&d&&(o=o.substring(1,o.length-1)),o=It(o,!0),{type:"codespan",raw:s[0],text:o}}}br(t){const s=this.rules.inline.br.exec(t);if(s)return{type:"br",raw:s[0]}}del(t){const s=this.rules.inline.del.exec(t);if(s)return{type:"del",raw:s[0],text:s[2],tokens:this.lexer.inlineTokens(s[2])}}autolink(t){const s=this.rules.inline.autolink.exec(t);if(s){let o,u;return s[2]==="@"?(o=It(s[1]),u="mailto:"+o):(o=It(s[1]),u=o),{type:"link",raw:s[0],text:o,href:u,tokens:[{type:"text",raw:o,text:o}]}}}url(t){let s;if(s=this.rules.inline.url.exec(t)){let o,u;if(s[2]==="@")o=It(s[0]),u="mailto:"+o;else{let d;do d=s[0],s[0]=this.rules.inline._backpedal.exec(s[0])[0];while(d!==s[0]);o=It(s[0]),s[1]==="www."?u="http://"+s[0]:u=s[0]}return{type:"link",raw:s[0],text:o,href:u,tokens:[{type:"text",raw:o,text:o}]}}}inlineText(t){const s=this.rules.inline.text.exec(t);if(s){let o;return this.lexer.state.inRawBlock?o=s[0]:o=It(s[0]),{type:"text",raw:s[0],text:o}}}}const Re={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:Qi,lheading:/^(?!bull )((?:.|\n(?!\s*?\n|bull ))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/};Re._label=/(?!\s*\])(?:\\.|[^\[\]\\])+/;Re._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/;Re.def=Ue(Re.def).replace("label",Re._label).replace("title",Re._title).getRegex();Re.bullet=/(?:[*+-]|\d{1,9}[.)])/;Re.listItemStart=Ue(/^( *)(bull) */).replace("bull",Re.bullet).getRegex();Re.list=Ue(Re.list).replace(/bull/g,Re.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+Re.def.source+")").getRegex();Re._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul";Re._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/;Re.html=Ue(Re.html,"i").replace("comment",Re._comment).replace("tag",Re._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex();Re.lheading=Ue(Re.lheading).replace(/bull/g,Re.bullet).getRegex();Re.paragraph=Ue(Re._paragraph).replace("hr",Re.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Re._tag).getRegex();Re.blockquote=Ue(Re.blockquote).replace("paragraph",Re.paragraph).getRegex();Re.normal={...Re};Re.gfm={...Re.normal,table:"^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"};Re.gfm.table=Ue(Re.gfm.table).replace("hr",Re.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Re._tag).getRegex();Re.gfm.paragraph=Ue(Re._paragraph).replace("hr",Re.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",Re.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Re._tag).getRegex();Re.pedantic={...Re.normal,html:Ue(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",Re._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Qi,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:Ue(Re.normal._paragraph).replace("hr",Re.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",Re.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()};const ye={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:Qi,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,rDelimAst:/^[^_*]*?__[^_*]*?\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\*)[punct](\*+)(?=[\s]|$)|[^punct\s](\*+)(?!\*)(?=[punct\s]|$)|(?!\*)[punct\s](\*+)(?=[^punct\s])|[\s](\*+)(?!\*)(?=[punct])|(?!\*)[punct](\*+)(?!\*)(?=[punct])|[^punct\s](\*+)(?=[^punct\s])/,rDelimUnd:/^[^_*]*?\*\*[^_*]*?_[^_*]*?(?=\*\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\s]|$)|[^punct\s](_+)(?!_)(?=[punct\s]|$)|(?!_)[punct\s](_+)(?=[^punct\s])|[\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:Qi,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^((?![*_])[\spunctuation])/};ye._punctuation="\\p{P}$+<=>`^|~";ye.punctuation=Ue(ye.punctuation,"u").replace(/punctuation/g,ye._punctuation).getRegex();ye.blockSkip=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g;ye.anyPunctuation=/\\[punct]/g;ye._escapes=/\\([punct])/g;ye._comment=Ue(Re._comment).replace("(?:-->|$)","-->").getRegex();ye.emStrong.lDelim=Ue(ye.emStrong.lDelim,"u").replace(/punct/g,ye._punctuation).getRegex();ye.emStrong.rDelimAst=Ue(ye.emStrong.rDelimAst,"gu").replace(/punct/g,ye._punctuation).getRegex();ye.emStrong.rDelimUnd=Ue(ye.emStrong.rDelimUnd,"gu").replace(/punct/g,ye._punctuation).getRegex();ye.anyPunctuation=Ue(ye.anyPunctuation,"gu").replace(/punct/g,ye._punctuation).getRegex();ye._escapes=Ue(ye._escapes,"gu").replace(/punct/g,ye._punctuation).getRegex();ye._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/;ye._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/;ye.autolink=Ue(ye.autolink).replace("scheme",ye._scheme).replace("email",ye._email).getRegex();ye._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/;ye.tag=Ue(ye.tag).replace("comment",ye._comment).replace("attribute",ye._attribute).getRegex();ye._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/;ye._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/;ye._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/;ye.link=Ue(ye.link).replace("label",ye._label).replace("href",ye._href).replace("title",ye._title).getRegex();ye.reflink=Ue(ye.reflink).replace("label",ye._label).replace("ref",Re._label).getRegex();ye.nolink=Ue(ye.nolink).replace("ref",Re._label).getRegex();ye.reflinkSearch=Ue(ye.reflinkSearch,"g").replace("reflink",ye.reflink).replace("nolink",ye.nolink).getRegex();ye.normal={...ye};ye.pedantic={...ye.normal,strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:Ue(/^!?\[(label)\]\((.*?)\)/).replace("label",ye._label).getRegex(),reflink:Ue(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",ye._label).getRegex()};ye.gfm={...ye.normal,escape:Ue(ye.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/};ye.gfm.url=Ue(ye.gfm.url,"i").replace("email",ye.gfm._extended_email).getRegex();ye.breaks={...ye.gfm,br:Ue(ye.br).replace("{2,}","*").getRegex(),text:Ue(ye.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()};class Qt{constructor(t){qe(this,"tokens");qe(this,"options");qe(this,"state");qe(this,"tokenizer");qe(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=t||Os,this.options.tokenizer=this.options.tokenizer||new er,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const s={block:Re.normal,inline:ye.normal};this.options.pedantic?(s.block=Re.pedantic,s.inline=ye.pedantic):this.options.gfm&&(s.block=Re.gfm,this.options.breaks?s.inline=ye.breaks:s.inline=ye.gfm),this.tokenizer.rules=s}static get rules(){return{block:Re,inline:ye}}static lex(t,s){return new Qt(s).lex(t)}static lexInline(t,s){return new Qt(s).inlineTokens(t)}lex(t){t=t.replace(/\r\n|\r/g,`
`),this.blockTokens(t,this.tokens);let s;for(;s=this.inlineQueue.shift();)this.inlineTokens(s.src,s.tokens);return this.tokens}blockTokens(t,s=[]){this.options.pedantic?t=t.replace(/\t/g,"    ").replace(/^ +$/gm,""):t=t.replace(/^( *)(\t+)/gm,(i,r,f)=>r+"    ".repeat(f.length));let o,u,d,b;for(;t;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(i=>(o=i.call({lexer:this},t,s))?(t=t.substring(o.raw.length),s.push(o),!0):!1))){if(o=this.tokenizer.space(t)){t=t.substring(o.raw.length),o.raw.length===1&&s.length>0?s[s.length-1].raw+=`
`:s.push(o);continue}if(o=this.tokenizer.code(t)){t=t.substring(o.raw.length),u=s[s.length-1],u&&(u.type==="paragraph"||u.type==="text")?(u.raw+=`
`+o.raw,u.text+=`
`+o.text,this.inlineQueue[this.inlineQueue.length-1].src=u.text):s.push(o);continue}if(o=this.tokenizer.fences(t)){t=t.substring(o.raw.length),s.push(o);continue}if(o=this.tokenizer.heading(t)){t=t.substring(o.raw.length),s.push(o);continue}if(o=this.tokenizer.hr(t)){t=t.substring(o.raw.length),s.push(o);continue}if(o=this.tokenizer.blockquote(t)){t=t.substring(o.raw.length),s.push(o);continue}if(o=this.tokenizer.list(t)){t=t.substring(o.raw.length),s.push(o);continue}if(o=this.tokenizer.html(t)){t=t.substring(o.raw.length),s.push(o);continue}if(o=this.tokenizer.def(t)){t=t.substring(o.raw.length),u=s[s.length-1],u&&(u.type==="paragraph"||u.type==="text")?(u.raw+=`
`+o.raw,u.text+=`
`+o.raw,this.inlineQueue[this.inlineQueue.length-1].src=u.text):this.tokens.links[o.tag]||(this.tokens.links[o.tag]={href:o.href,title:o.title});continue}if(o=this.tokenizer.table(t)){t=t.substring(o.raw.length),s.push(o);continue}if(o=this.tokenizer.lheading(t)){t=t.substring(o.raw.length),s.push(o);continue}if(d=t,this.options.extensions&&this.options.extensions.startBlock){let i=1/0;const r=t.slice(1);let f;this.options.extensions.startBlock.forEach(p=>{f=p.call({lexer:this},r),typeof f=="number"&&f>=0&&(i=Math.min(i,f))}),i<1/0&&i>=0&&(d=t.substring(0,i+1))}if(this.state.top&&(o=this.tokenizer.paragraph(d))){u=s[s.length-1],b&&u.type==="paragraph"?(u.raw+=`
`+o.raw,u.text+=`
`+o.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=u.text):s.push(o),b=d.length!==t.length,t=t.substring(o.raw.length);continue}if(o=this.tokenizer.text(t)){t=t.substring(o.raw.length),u=s[s.length-1],u&&u.type==="text"?(u.raw+=`
`+o.raw,u.text+=`
`+o.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=u.text):s.push(o);continue}if(t){const i="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(i);break}else throw new Error(i)}}return this.state.top=!0,s}inline(t,s=[]){return this.inlineQueue.push({src:t,tokens:s}),s}inlineTokens(t,s=[]){let o,u,d,b=t,i,r,f;if(this.tokens.links){const p=Object.keys(this.tokens.links);if(p.length>0)for(;(i=this.tokenizer.rules.inline.reflinkSearch.exec(b))!=null;)p.includes(i[0].slice(i[0].lastIndexOf("[")+1,-1))&&(b=b.slice(0,i.index)+"["+"a".repeat(i[0].length-2)+"]"+b.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(i=this.tokenizer.rules.inline.blockSkip.exec(b))!=null;)b=b.slice(0,i.index)+"["+"a".repeat(i[0].length-2)+"]"+b.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(i=this.tokenizer.rules.inline.anyPunctuation.exec(b))!=null;)b=b.slice(0,i.index)+"++"+b.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;t;)if(r||(f=""),r=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(p=>(o=p.call({lexer:this},t,s))?(t=t.substring(o.raw.length),s.push(o),!0):!1))){if(o=this.tokenizer.escape(t)){t=t.substring(o.raw.length),s.push(o);continue}if(o=this.tokenizer.tag(t)){t=t.substring(o.raw.length),u=s[s.length-1],u&&o.type==="text"&&u.type==="text"?(u.raw+=o.raw,u.text+=o.text):s.push(o);continue}if(o=this.tokenizer.link(t)){t=t.substring(o.raw.length),s.push(o);continue}if(o=this.tokenizer.reflink(t,this.tokens.links)){t=t.substring(o.raw.length),u=s[s.length-1],u&&o.type==="text"&&u.type==="text"?(u.raw+=o.raw,u.text+=o.text):s.push(o);continue}if(o=this.tokenizer.emStrong(t,b,f)){t=t.substring(o.raw.length),s.push(o);continue}if(o=this.tokenizer.codespan(t)){t=t.substring(o.raw.length),s.push(o);continue}if(o=this.tokenizer.br(t)){t=t.substring(o.raw.length),s.push(o);continue}if(o=this.tokenizer.del(t)){t=t.substring(o.raw.length),s.push(o);continue}if(o=this.tokenizer.autolink(t)){t=t.substring(o.raw.length),s.push(o);continue}if(!this.state.inLink&&(o=this.tokenizer.url(t))){t=t.substring(o.raw.length),s.push(o);continue}if(d=t,this.options.extensions&&this.options.extensions.startInline){let p=1/0;const h=t.slice(1);let _;this.options.extensions.startInline.forEach(m=>{_=m.call({lexer:this},h),typeof _=="number"&&_>=0&&(p=Math.min(p,_))}),p<1/0&&p>=0&&(d=t.substring(0,p+1))}if(o=this.tokenizer.inlineText(d)){t=t.substring(o.raw.length),o.raw.slice(-1)!=="_"&&(f=o.raw.slice(-1)),r=!0,u=s[s.length-1],u&&u.type==="text"?(u.raw+=o.raw,u.text+=o.text):s.push(o);continue}if(t){const p="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(p);break}else throw new Error(p)}}return s}}class tr{constructor(t){qe(this,"options");this.options=t||Os}code(t,s,o){var d;const u=(d=(s||"").match(/^\S*/))==null?void 0:d[0];return t=t.replace(/\n$/,"")+`
`,u?'<pre><code class="language-'+It(u)+'">'+(o?t:It(t,!0))+`</code></pre>
`:"<pre><code>"+(o?t:It(t,!0))+`</code></pre>
`}blockquote(t){return`<blockquote>
${t}</blockquote>
`}html(t,s){return t}heading(t,s,o){return`<h${s}>${t}</h${s}>
`}hr(){return`<hr>
`}list(t,s,o){const u=s?"ol":"ul",d=s&&o!==1?' start="'+o+'"':"";return"<"+u+d+`>
`+t+"</"+u+`>
`}listitem(t,s,o){return`<li>${t}</li>
`}checkbox(t){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph(t){return`<p>${t}</p>
`}table(t,s){return s&&(s=`<tbody>${s}</tbody>`),`<table>
<thead>
`+t+`</thead>
`+s+`</table>
`}tablerow(t){return`<tr>
${t}</tr>
`}tablecell(t,s){const o=s.header?"th":"td";return(s.align?`<${o} align="${s.align}">`:`<${o}>`)+t+`</${o}>
`}strong(t){return`<strong>${t}</strong>`}em(t){return`<em>${t}</em>`}codespan(t){return`<code>${t}</code>`}br(){return"<br>"}del(t){return`<del>${t}</del>`}link(t,s,o){const u=Io(t);if(u===null)return o;t=u;let d='<a href="'+t+'"';return s&&(d+=' title="'+s+'"'),d+=">"+o+"</a>",d}image(t,s,o){const u=Io(t);if(u===null)return o;t=u;let d=`<img src="${t}" alt="${o}"`;return s&&(d+=` title="${s}"`),d+=">",d}text(t){return t}}class En{strong(t){return t}em(t){return t}codespan(t){return t}del(t){return t}html(t){return t}text(t){return t}link(t,s,o){return""+o}image(t,s,o){return""+o}br(){return""}}class es{constructor(t){qe(this,"options");qe(this,"renderer");qe(this,"textRenderer");this.options=t||Os,this.options.renderer=this.options.renderer||new tr,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new En}static parse(t,s){return new es(s).parse(t)}static parseInline(t,s){return new es(s).parseInline(t)}parse(t,s=!0){let o="";for(let u=0;u<t.length;u++){const d=t[u];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[d.type]){const b=d,i=this.options.extensions.renderers[b.type].call({parser:this},b);if(i!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(b.type)){o+=i||"";continue}}switch(d.type){case"space":continue;case"hr":{o+=this.renderer.hr();continue}case"heading":{const b=d;o+=this.renderer.heading(this.parseInline(b.tokens),b.depth,pf(this.parseInline(b.tokens,this.textRenderer)));continue}case"code":{const b=d;o+=this.renderer.code(b.text,b.lang,!!b.escaped);continue}case"table":{const b=d;let i="",r="";for(let p=0;p<b.header.length;p++)r+=this.renderer.tablecell(this.parseInline(b.header[p].tokens),{header:!0,align:b.align[p]});i+=this.renderer.tablerow(r);let f="";for(let p=0;p<b.rows.length;p++){const h=b.rows[p];r="";for(let _=0;_<h.length;_++)r+=this.renderer.tablecell(this.parseInline(h[_].tokens),{header:!1,align:b.align[_]});f+=this.renderer.tablerow(r)}o+=this.renderer.table(i,f);continue}case"blockquote":{const b=d,i=this.parse(b.tokens);o+=this.renderer.blockquote(i);continue}case"list":{const b=d,i=b.ordered,r=b.start,f=b.loose;let p="";for(let h=0;h<b.items.length;h++){const _=b.items[h],m=_.checked,w=_.task;let g="";if(_.task){const l=this.renderer.checkbox(!!m);f?_.tokens.length>0&&_.tokens[0].type==="paragraph"?(_.tokens[0].text=l+" "+_.tokens[0].text,_.tokens[0].tokens&&_.tokens[0].tokens.length>0&&_.tokens[0].tokens[0].type==="text"&&(_.tokens[0].tokens[0].text=l+" "+_.tokens[0].tokens[0].text)):_.tokens.unshift({type:"text",text:l+" "}):g+=l+" "}g+=this.parse(_.tokens,f),p+=this.renderer.listitem(g,w,!!m)}o+=this.renderer.list(p,i,r);continue}case"html":{const b=d;o+=this.renderer.html(b.text,b.block);continue}case"paragraph":{const b=d;o+=this.renderer.paragraph(this.parseInline(b.tokens));continue}case"text":{let b=d,i=b.tokens?this.parseInline(b.tokens):b.text;for(;u+1<t.length&&t[u+1].type==="text";)b=t[++u],i+=`
`+(b.tokens?this.parseInline(b.tokens):b.text);o+=s?this.renderer.paragraph(i):i;continue}default:{const b='Token with "'+d.type+'" type was not found.';if(this.options.silent)return console.error(b),"";throw new Error(b)}}}return o}parseInline(t,s){s=s||this.renderer;let o="";for(let u=0;u<t.length;u++){const d=t[u];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[d.type]){const b=this.options.extensions.renderers[d.type].call({parser:this},d);if(b!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(d.type)){o+=b||"";continue}}switch(d.type){case"escape":{const b=d;o+=s.text(b.text);break}case"html":{const b=d;o+=s.html(b.text);break}case"link":{const b=d;o+=s.link(b.href,b.title,this.parseInline(b.tokens,s));break}case"image":{const b=d;o+=s.image(b.href,b.title,b.text);break}case"strong":{const b=d;o+=s.strong(this.parseInline(b.tokens,s));break}case"em":{const b=d;o+=s.em(this.parseInline(b.tokens,s));break}case"codespan":{const b=d;o+=s.codespan(b.text);break}case"br":{o+=s.br();break}case"del":{const b=d;o+=s.del(this.parseInline(b.tokens,s));break}case"text":{const b=d;o+=s.text(b.text);break}default:{const b='Token with "'+d.type+'" type was not found.';if(this.options.silent)return console.error(b),"";throw new Error(b)}}}return o}}class fi{constructor(t){qe(this,"options");this.options=t||Os}preprocess(t){return t}postprocess(t){return t}}qe(fi,"passThroughHooks",new Set(["preprocess","postprocess"]));var Ls,Qr,ml;class vf{constructor(...t){On(this,Ls);qe(this,"defaults",kn());qe(this,"options",this.setOptions);qe(this,"parse",Ci(this,Ls,Qr).call(this,Qt.lex,es.parse));qe(this,"parseInline",Ci(this,Ls,Qr).call(this,Qt.lexInline,es.parseInline));qe(this,"Parser",es);qe(this,"parser",es.parse);qe(this,"Renderer",tr);qe(this,"TextRenderer",En);qe(this,"Lexer",Qt);qe(this,"lexer",Qt.lex);qe(this,"Tokenizer",er);qe(this,"Hooks",fi);this.use(...t)}walkTokens(t,s){var u,d;let o=[];for(const b of t)switch(o=o.concat(s.call(this,b)),b.type){case"table":{const i=b;for(const r of i.header)o=o.concat(this.walkTokens(r.tokens,s));for(const r of i.rows)for(const f of r)o=o.concat(this.walkTokens(f.tokens,s));break}case"list":{const i=b;o=o.concat(this.walkTokens(i.items,s));break}default:{const i=b;(d=(u=this.defaults.extensions)==null?void 0:u.childTokens)!=null&&d[i.type]?this.defaults.extensions.childTokens[i.type].forEach(r=>{o=o.concat(this.walkTokens(i[r],s))}):i.tokens&&(o=o.concat(this.walkTokens(i.tokens,s)))}}return o}use(...t){const s=this.defaults.extensions||{renderers:{},childTokens:{}};return t.forEach(o=>{const u={...o};if(u.async=this.defaults.async||u.async||!1,o.extensions&&(o.extensions.forEach(d=>{if(!d.name)throw new Error("extension name required");if("renderer"in d){const b=s.renderers[d.name];b?s.renderers[d.name]=function(...i){let r=d.renderer.apply(this,i);return r===!1&&(r=b.apply(this,i)),r}:s.renderers[d.name]=d.renderer}if("tokenizer"in d){if(!d.level||d.level!=="block"&&d.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const b=s[d.level];b?b.unshift(d.tokenizer):s[d.level]=[d.tokenizer],d.start&&(d.level==="block"?s.startBlock?s.startBlock.push(d.start):s.startBlock=[d.start]:d.level==="inline"&&(s.startInline?s.startInline.push(d.start):s.startInline=[d.start]))}"childTokens"in d&&d.childTokens&&(s.childTokens[d.name]=d.childTokens)}),u.extensions=s),o.renderer){const d=this.defaults.renderer||new tr(this.defaults);for(const b in o.renderer){const i=o.renderer[b],r=b,f=d[r];d[r]=(...p)=>{let h=i.apply(d,p);return h===!1&&(h=f.apply(d,p)),h||""}}u.renderer=d}if(o.tokenizer){const d=this.defaults.tokenizer||new er(this.defaults);for(const b in o.tokenizer){const i=o.tokenizer[b],r=b,f=d[r];d[r]=(...p)=>{let h=i.apply(d,p);return h===!1&&(h=f.apply(d,p)),h}}u.tokenizer=d}if(o.hooks){const d=this.defaults.hooks||new fi;for(const b in o.hooks){const i=o.hooks[b],r=b,f=d[r];fi.passThroughHooks.has(b)?d[r]=p=>{if(this.defaults.async)return Promise.resolve(i.call(d,p)).then(_=>f.call(d,_));const h=i.call(d,p);return f.call(d,h)}:d[r]=(...p)=>{let h=i.apply(d,p);return h===!1&&(h=f.apply(d,p)),h}}u.hooks=d}if(o.walkTokens){const d=this.defaults.walkTokens,b=o.walkTokens;u.walkTokens=function(i){let r=[];return r.push(b.call(this,i)),d&&(r=r.concat(d.call(this,i))),r}}this.defaults={...this.defaults,...u}}),this}setOptions(t){return this.defaults={...this.defaults,...t},this}}Ls=new WeakSet,Qr=function(t,s){return(o,u)=>{const d={...u},b={...this.defaults,...d};this.defaults.async===!0&&d.async===!1&&(b.silent||console.warn("marked(): The async option was set to true by an extension. The async: false option sent to parse will be ignored."),b.async=!0);const i=Ci(this,Ls,ml).call(this,!!b.silent,!!b.async);if(typeof o>"u"||o===null)return i(new Error("marked(): input parameter is undefined or null"));if(typeof o!="string")return i(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(o)+", string expected"));if(b.hooks&&(b.hooks.options=b),b.async)return Promise.resolve(b.hooks?b.hooks.preprocess(o):o).then(r=>t(r,b)).then(r=>b.walkTokens?Promise.all(this.walkTokens(r,b.walkTokens)).then(()=>r):r).then(r=>s(r,b)).then(r=>b.hooks?b.hooks.postprocess(r):r).catch(i);try{b.hooks&&(o=b.hooks.preprocess(o));const r=t(o,b);b.walkTokens&&this.walkTokens(r,b.walkTokens);let f=s(r,b);return b.hooks&&(f=b.hooks.postprocess(f)),f}catch(r){return i(r)}}},ml=function(t,s){return o=>{if(o.message+=`
Please report this to https://github.com/markedjs/marked.`,t){const u="<p>An error occurred:</p><pre>"+It(o.message+"",!0)+"</pre>";return s?Promise.resolve(u):u}if(s)return Promise.reject(o);throw o}};const Ds=new vf;function Ve(e,t){return Ds.parse(e,t)}Ve.options=Ve.setOptions=function(e){return Ds.setOptions(e),Ve.defaults=Ds.defaults,dl(Ve.defaults),Ve};Ve.getDefaults=kn;Ve.defaults=Os;Ve.use=function(...e){return Ds.use(...e),Ve.defaults=Ds.defaults,dl(Ve.defaults),Ve};Ve.walkTokens=function(e,t){return Ds.walkTokens(e,t)};Ve.parseInline=Ds.parseInline;Ve.Parser=es;Ve.parser=es.parse;Ve.Renderer=tr;Ve.TextRenderer=En;Ve.Lexer=Qt;Ve.lexer=Qt.lex;Ve.Tokenizer=er;Ve.Hooks=fi;Ve.parse=Ve;Ve.options;Ve.setOptions;Ve.use;Ve.walkTokens;Ve.parseInline;es.parse;Qt.lex;/*! @license DOMPurify 3.0.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.0.6/LICENSE */const{entries:_l,setPrototypeOf:Po,isFrozen:bf,getPrototypeOf:wf,getOwnPropertyDescriptor:gl}=Object;let{freeze:yt,seal:Kt,create:vl}=Object,{apply:en,construct:tn}=typeof Reflect<"u"&&Reflect;yt||(yt=function(t){return t});Kt||(Kt=function(t){return t});en||(en=function(t,s,o){return t.apply(s,o)});tn||(tn=function(t,s){return new t(...s)});const Mi=zt(Array.prototype.forEach),$o=zt(Array.prototype.pop),ei=zt(Array.prototype.push),zi=zt(String.prototype.toLowerCase),Dr=zt(String.prototype.toString),yf=zt(String.prototype.match),ti=zt(String.prototype.replace),Sf=zt(String.prototype.indexOf),xf=zt(String.prototype.trim),Mt=zt(RegExp.prototype.test),si=Cf(TypeError);function zt(e){return function(t){for(var s=arguments.length,o=new Array(s>1?s-1:0),u=1;u<s;u++)o[u-1]=arguments[u];return en(e,t,o)}}function Cf(e){return function(){for(var t=arguments.length,s=new Array(t),o=0;o<t;o++)s[o]=arguments[o];return tn(e,s)}}function Be(e,t){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:zi;Po&&Po(e,null);let o=t.length;for(;o--;){let u=t[o];if(typeof u=="string"){const d=s(u);d!==u&&(bf(t)||(t[o]=d),u=d)}e[u]=!0}return e}function Ps(e){const t=vl(null);for(const[s,o]of _l(e))gl(e,s)!==void 0&&(t[s]=o);return t}function Di(e,t){for(;e!==null;){const o=gl(e,t);if(o){if(o.get)return zt(o.get);if(typeof o.value=="function")return zt(o.value)}e=wf(e)}function s(o){return console.warn("fallback value for",o),null}return s}const Ho=yt(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Lr=yt(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Ir=yt(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),kf=yt(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Or=yt(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),Ef=yt(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),No=yt(["#text"]),Fo=yt(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),Br=yt(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),zo=yt(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Li=yt(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Tf=Kt(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Af=Kt(/<%[\w\W]*|[\w\W]*%>/gm),Rf=Kt(/\${[\w\W]*}/gm),Mf=Kt(/^data-[\-\w.\u00B7-\uFFFF]/),Df=Kt(/^aria-[\-\w]+$/),bl=Kt(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Lf=Kt(/^(?:\w+script|data):/i),If=Kt(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),wl=Kt(/^html$/i);var Uo=Object.freeze({__proto__:null,MUSTACHE_EXPR:Tf,ERB_EXPR:Af,TMPLIT_EXPR:Rf,DATA_ATTR:Mf,ARIA_ATTR:Df,IS_ALLOWED_URI:bl,IS_SCRIPT_OR_DATA:Lf,ATTR_WHITESPACE:If,DOCTYPE_NAME:wl});const Of=function(){return typeof window>"u"?null:window},Bf=function(t,s){if(typeof t!="object"||typeof t.createPolicy!="function")return null;let o=null;const u="data-tt-policy-suffix";s&&s.hasAttribute(u)&&(o=s.getAttribute(u));const d="dompurify"+(o?"#"+o:"");try{return t.createPolicy(d,{createHTML(b){return b},createScriptURL(b){return b}})}catch{return console.warn("TrustedTypes policy "+d+" could not be created."),null}};function yl(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Of();const t=Te=>yl(Te);if(t.version="3.0.6",t.removed=[],!e||!e.document||e.document.nodeType!==9)return t.isSupported=!1,t;let{document:s}=e;const o=s,u=o.currentScript,{DocumentFragment:d,HTMLTemplateElement:b,Node:i,Element:r,NodeFilter:f,NamedNodeMap:p=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:h,DOMParser:_,trustedTypes:m}=e,w=r.prototype,g=Di(w,"cloneNode"),l=Di(w,"nextSibling"),a=Di(w,"childNodes"),n=Di(w,"parentNode");if(typeof b=="function"){const Te=s.createElement("template");Te.content&&Te.content.ownerDocument&&(s=Te.content.ownerDocument)}let c,v="";const{implementation:x,createNodeIterator:k,createDocumentFragment:E,getElementsByTagName:C}=s,{importNode:A}=o;let z={};t.isSupported=typeof _l=="function"&&typeof n=="function"&&x&&x.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:G,ERB_EXPR:B,TMPLIT_EXPR:P,DATA_ATTR:R,ARIA_ATTR:Q,IS_SCRIPT_OR_DATA:se,ATTR_WHITESPACE:X}=Uo;let{IS_ALLOWED_URI:oe}=Uo,D=null;const U=Be({},[...Ho,...Lr,...Ir,...Or,...No]);let S=null;const T=Be({},[...Fo,...Br,...zo,...Li]);let K=Object.seal(vl(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Y=null,ne=null,ae=!0,W=!0,L=!1,ee=!0,te=!1,he=!1,H=!1,q=!1,y=!1,O=!1,V=!1,I=!0,$=!1;const Z="user-content-";let J=!0,N=!1,F={},j=null;const ie=Be({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let re=null;const le=Be({},["audio","video","img","source","image","track"]);let me=null;const de=Be({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Se="http://www.w3.org/1998/Math/MathML",Ee="http://www.w3.org/2000/svg",xe="http://www.w3.org/1999/xhtml";let we=xe,ke=!1,We=null;const $e=Be({},[Se,Ee,xe],Dr);let Me=null;const et=["application/xhtml+xml","text/html"],st="text/html";let He=null,vt=null;const Et=s.createElement("form"),at=function(ce){return ce instanceof RegExp||ce instanceof Function},Ne=function(){let ce=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(vt&&vt===ce)){if((!ce||typeof ce!="object")&&(ce={}),ce=Ps(ce),Me=et.indexOf(ce.PARSER_MEDIA_TYPE)===-1?Me=st:Me=ce.PARSER_MEDIA_TYPE,He=Me==="application/xhtml+xml"?Dr:zi,D="ALLOWED_TAGS"in ce?Be({},ce.ALLOWED_TAGS,He):U,S="ALLOWED_ATTR"in ce?Be({},ce.ALLOWED_ATTR,He):T,We="ALLOWED_NAMESPACES"in ce?Be({},ce.ALLOWED_NAMESPACES,Dr):$e,me="ADD_URI_SAFE_ATTR"in ce?Be(Ps(de),ce.ADD_URI_SAFE_ATTR,He):de,re="ADD_DATA_URI_TAGS"in ce?Be(Ps(le),ce.ADD_DATA_URI_TAGS,He):le,j="FORBID_CONTENTS"in ce?Be({},ce.FORBID_CONTENTS,He):ie,Y="FORBID_TAGS"in ce?Be({},ce.FORBID_TAGS,He):{},ne="FORBID_ATTR"in ce?Be({},ce.FORBID_ATTR,He):{},F="USE_PROFILES"in ce?ce.USE_PROFILES:!1,ae=ce.ALLOW_ARIA_ATTR!==!1,W=ce.ALLOW_DATA_ATTR!==!1,L=ce.ALLOW_UNKNOWN_PROTOCOLS||!1,ee=ce.ALLOW_SELF_CLOSE_IN_ATTR!==!1,te=ce.SAFE_FOR_TEMPLATES||!1,he=ce.WHOLE_DOCUMENT||!1,y=ce.RETURN_DOM||!1,O=ce.RETURN_DOM_FRAGMENT||!1,V=ce.RETURN_TRUSTED_TYPE||!1,q=ce.FORCE_BODY||!1,I=ce.SANITIZE_DOM!==!1,$=ce.SANITIZE_NAMED_PROPS||!1,J=ce.KEEP_CONTENT!==!1,N=ce.IN_PLACE||!1,oe=ce.ALLOWED_URI_REGEXP||bl,we=ce.NAMESPACE||xe,K=ce.CUSTOM_ELEMENT_HANDLING||{},ce.CUSTOM_ELEMENT_HANDLING&&at(ce.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(K.tagNameCheck=ce.CUSTOM_ELEMENT_HANDLING.tagNameCheck),ce.CUSTOM_ELEMENT_HANDLING&&at(ce.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(K.attributeNameCheck=ce.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),ce.CUSTOM_ELEMENT_HANDLING&&typeof ce.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(K.allowCustomizedBuiltInElements=ce.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),te&&(W=!1),O&&(y=!0),F&&(D=Be({},[...No]),S=[],F.html===!0&&(Be(D,Ho),Be(S,Fo)),F.svg===!0&&(Be(D,Lr),Be(S,Br),Be(S,Li)),F.svgFilters===!0&&(Be(D,Ir),Be(S,Br),Be(S,Li)),F.mathMl===!0&&(Be(D,Or),Be(S,zo),Be(S,Li))),ce.ADD_TAGS&&(D===U&&(D=Ps(D)),Be(D,ce.ADD_TAGS,He)),ce.ADD_ATTR&&(S===T&&(S=Ps(S)),Be(S,ce.ADD_ATTR,He)),ce.ADD_URI_SAFE_ATTR&&Be(me,ce.ADD_URI_SAFE_ATTR,He),ce.FORBID_CONTENTS&&(j===ie&&(j=Ps(j)),Be(j,ce.FORBID_CONTENTS,He)),J&&(D["#text"]=!0),he&&Be(D,["html","head","body"]),D.table&&(Be(D,["tbody"]),delete Y.tbody),ce.TRUSTED_TYPES_POLICY){if(typeof ce.TRUSTED_TYPES_POLICY.createHTML!="function")throw si('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof ce.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw si('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');c=ce.TRUSTED_TYPES_POLICY,v=c.createHTML("")}else c===void 0&&(c=Bf(m,u)),c!==null&&typeof v=="string"&&(v=c.createHTML(""));yt&&yt(ce),vt=ce}},it=Be({},["mi","mo","mn","ms","mtext"]),ut=Be({},["foreignobject","desc","title","annotation-xml"]),Pt=Be({},["title","style","font","a","script"]),rt=Be({},Lr);Be(rt,Ir),Be(rt,kf);const ht=Be({},Or);Be(ht,Ef);const Tt=function(ce){let ge=n(ce);(!ge||!ge.tagName)&&(ge={namespaceURI:we,tagName:"template"});const Ce=zi(ce.tagName),Ge=zi(ge.tagName);return We[ce.namespaceURI]?ce.namespaceURI===Ee?ge.namespaceURI===xe?Ce==="svg":ge.namespaceURI===Se?Ce==="svg"&&(Ge==="annotation-xml"||it[Ge]):!!rt[Ce]:ce.namespaceURI===Se?ge.namespaceURI===xe?Ce==="math":ge.namespaceURI===Ee?Ce==="math"&&ut[Ge]:!!ht[Ce]:ce.namespaceURI===xe?ge.namespaceURI===Ee&&!ut[Ge]||ge.namespaceURI===Se&&!it[Ge]?!1:!ht[Ce]&&(Pt[Ce]||!rt[Ce]):!!(Me==="application/xhtml+xml"&&We[ce.namespaceURI]):!1},lt=function(ce){ei(t.removed,{element:ce});try{ce.parentNode.removeChild(ce)}catch{ce.remove()}},nt=function(ce,ge){try{ei(t.removed,{attribute:ge.getAttributeNode(ce),from:ge})}catch{ei(t.removed,{attribute:null,from:ge})}if(ge.removeAttribute(ce),ce==="is"&&!S[ce])if(y||O)try{lt(ge)}catch{}else try{ge.setAttribute(ce,"")}catch{}},ps=function(ce){let ge=null,Ce=null;if(q)ce="<remove></remove>"+ce;else{const ft=yf(ce,/^[\r\n\t ]+/);Ce=ft&&ft[0]}Me==="application/xhtml+xml"&&we===xe&&(ce='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+ce+"</body></html>");const Ge=c?c.createHTML(ce):ce;if(we===xe)try{ge=new _().parseFromString(Ge,Me)}catch{}if(!ge||!ge.documentElement){ge=x.createDocument(we,"template",null);try{ge.documentElement.innerHTML=ke?v:Ge}catch{}}const dt=ge.body||ge.documentElement;return ce&&Ce&&dt.insertBefore(s.createTextNode(Ce),dt.childNodes[0]||null),we===xe?C.call(ge,he?"html":"body")[0]:he?ge.documentElement:dt},St=function(ce){return k.call(ce.ownerDocument||ce,ce,f.SHOW_ELEMENT|f.SHOW_COMMENT|f.SHOW_TEXT,null)},At=function(ce){return ce instanceof h&&(typeof ce.nodeName!="string"||typeof ce.textContent!="string"||typeof ce.removeChild!="function"||!(ce.attributes instanceof p)||typeof ce.removeAttribute!="function"||typeof ce.setAttribute!="function"||typeof ce.namespaceURI!="string"||typeof ce.insertBefore!="function"||typeof ce.hasChildNodes!="function")},xs=function(ce){return typeof i=="function"&&ce instanceof i},Rt=function(ce,ge,Ce){z[ce]&&Mi(z[ce],Ge=>{Ge.call(t,ge,Ce,vt)})},Tn=function(ce){let ge=null;if(Rt("beforeSanitizeElements",ce,null),At(ce))return lt(ce),!0;const Ce=He(ce.nodeName);if(Rt("uponSanitizeElement",ce,{tagName:Ce,allowedTags:D}),ce.hasChildNodes()&&!xs(ce.firstElementChild)&&Mt(/<[/\w]/g,ce.innerHTML)&&Mt(/<[/\w]/g,ce.textContent))return lt(ce),!0;if(!D[Ce]||Y[Ce]){if(!Y[Ce]&&Rn(Ce)&&(K.tagNameCheck instanceof RegExp&&Mt(K.tagNameCheck,Ce)||K.tagNameCheck instanceof Function&&K.tagNameCheck(Ce)))return!1;if(J&&!j[Ce]){const Ge=n(ce)||ce.parentNode,dt=a(ce)||ce.childNodes;if(dt&&Ge){const ft=dt.length;for(let xt=ft-1;xt>=0;--xt)Ge.insertBefore(g(dt[xt],!0),l(ce))}}return lt(ce),!0}return ce instanceof r&&!Tt(ce)||(Ce==="noscript"||Ce==="noembed"||Ce==="noframes")&&Mt(/<\/no(script|embed|frames)/i,ce.innerHTML)?(lt(ce),!0):(te&&ce.nodeType===3&&(ge=ce.textContent,Mi([G,B,P],Ge=>{ge=ti(ge,Ge," ")}),ce.textContent!==ge&&(ei(t.removed,{element:ce.cloneNode()}),ce.textContent=ge)),Rt("afterSanitizeElements",ce,null),!1)},An=function(ce,ge,Ce){if(I&&(ge==="id"||ge==="name")&&(Ce in s||Ce in Et))return!1;if(!(W&&!ne[ge]&&Mt(R,ge))){if(!(ae&&Mt(Q,ge))){if(!S[ge]||ne[ge]){if(!(Rn(ce)&&(K.tagNameCheck instanceof RegExp&&Mt(K.tagNameCheck,ce)||K.tagNameCheck instanceof Function&&K.tagNameCheck(ce))&&(K.attributeNameCheck instanceof RegExp&&Mt(K.attributeNameCheck,ge)||K.attributeNameCheck instanceof Function&&K.attributeNameCheck(ge))||ge==="is"&&K.allowCustomizedBuiltInElements&&(K.tagNameCheck instanceof RegExp&&Mt(K.tagNameCheck,Ce)||K.tagNameCheck instanceof Function&&K.tagNameCheck(Ce))))return!1}else if(!me[ge]){if(!Mt(oe,ti(Ce,X,""))){if(!((ge==="src"||ge==="xlink:href"||ge==="href")&&ce!=="script"&&Sf(Ce,"data:")===0&&re[ce])){if(!(L&&!Mt(se,ti(Ce,X,"")))){if(Ce)return!1}}}}}}return!0},Rn=function(ce){return ce.indexOf("-")>0},Mn=function(ce){Rt("beforeSanitizeAttributes",ce,null);const{attributes:ge}=ce;if(!ge)return;const Ce={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:S};let Ge=ge.length;for(;Ge--;){const dt=ge[Ge],{name:ft,namespaceURI:xt,value:Cs}=dt,Xs=He(ft);let Ct=ft==="value"?Cs:xf(Cs);if(Ce.attrName=Xs,Ce.attrValue=Ct,Ce.keepAttr=!0,Ce.forceKeepAttr=void 0,Rt("uponSanitizeAttribute",ce,Ce),Ct=Ce.attrValue,Ce.forceKeepAttr||(nt(ft,ce),!Ce.keepAttr))continue;if(!ee&&Mt(/\/>/i,Ct)){nt(ft,ce);continue}te&&Mi([G,B,P],Ln=>{Ct=ti(Ct,Ln," ")});const Dn=He(ce.nodeName);if(An(Dn,Xs,Ct)){if($&&(Xs==="id"||Xs==="name")&&(nt(ft,ce),Ct=Z+Ct),c&&typeof m=="object"&&typeof m.getAttributeType=="function"&&!xt)switch(m.getAttributeType(Dn,Xs)){case"TrustedHTML":{Ct=c.createHTML(Ct);break}case"TrustedScriptURL":{Ct=c.createScriptURL(Ct);break}}try{xt?ce.setAttributeNS(xt,ft,Ct):ce.setAttribute(ft,Ct),$o(t.removed)}catch{}}}Rt("afterSanitizeAttributes",ce,null)},kl=function Te(ce){let ge=null;const Ce=St(ce);for(Rt("beforeSanitizeShadowDOM",ce,null);ge=Ce.nextNode();)Rt("uponSanitizeShadowNode",ge,null),!Tn(ge)&&(ge.content instanceof d&&Te(ge.content),Mn(ge));Rt("afterSanitizeShadowDOM",ce,null)};return t.sanitize=function(Te){let ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ge=null,Ce=null,Ge=null,dt=null;if(ke=!Te,ke&&(Te="<!-->"),typeof Te!="string"&&!xs(Te))if(typeof Te.toString=="function"){if(Te=Te.toString(),typeof Te!="string")throw si("dirty is not a string, aborting")}else throw si("toString is not a function");if(!t.isSupported)return Te;if(H||Ne(ce),t.removed=[],typeof Te=="string"&&(N=!1),N){if(Te.nodeName){const Cs=He(Te.nodeName);if(!D[Cs]||Y[Cs])throw si("root node is forbidden and cannot be sanitized in-place")}}else if(Te instanceof i)ge=ps("<!---->"),Ce=ge.ownerDocument.importNode(Te,!0),Ce.nodeType===1&&Ce.nodeName==="BODY"||Ce.nodeName==="HTML"?ge=Ce:ge.appendChild(Ce);else{if(!y&&!te&&!he&&Te.indexOf("<")===-1)return c&&V?c.createHTML(Te):Te;if(ge=ps(Te),!ge)return y?null:V?v:""}ge&&q&&lt(ge.firstChild);const ft=St(N?Te:ge);for(;Ge=ft.nextNode();)Tn(Ge)||(Ge.content instanceof d&&kl(Ge.content),Mn(Ge));if(N)return Te;if(y){if(O)for(dt=E.call(ge.ownerDocument);ge.firstChild;)dt.appendChild(ge.firstChild);else dt=ge;return(S.shadowroot||S.shadowrootmode)&&(dt=A.call(o,dt,!0)),dt}let xt=he?ge.outerHTML:ge.innerHTML;return he&&D["!doctype"]&&ge.ownerDocument&&ge.ownerDocument.doctype&&ge.ownerDocument.doctype.name&&Mt(wl,ge.ownerDocument.doctype.name)&&(xt="<!DOCTYPE "+ge.ownerDocument.doctype.name+`>
`+xt),te&&Mi([G,B,P],Cs=>{xt=ti(xt,Cs," ")}),c&&V?c.createHTML(xt):xt},t.setConfig=function(){let Te=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Ne(Te),H=!0},t.clearConfig=function(){vt=null,H=!1},t.isValidAttribute=function(Te,ce,ge){vt||Ne({});const Ce=He(Te),Ge=He(ce);return An(Ce,Ge,ge)},t.addHook=function(Te,ce){typeof ce=="function"&&(z[Te]=z[Te]||[],ei(z[Te],ce))},t.removeHook=function(Te){if(z[Te])return $o(z[Te])},t.removeHooks=function(Te){z[Te]&&(z[Te]=[])},t.removeAllHooks=function(){z={}},t}var Pf=yl();const $f={class:"max-w-4xl mx-auto px-4 md:px-6 lg:px-12 py-4 md:py-6 lg:py-10 min-h-[100%] flex flex-col"},Hf={class:"bg-white rounded-2xl shadow-sm border border-slate-100 p-4 md:p-6 lg:p-8 flex-grow overflow-hidden"},Nf={class:"mb-6 pb-6 border-b border-slate-100 flex flex-col gap-4"},Ff={class:"relative mb-4 w-full md:w-auto"},zf={class:"text-4xl md:text-5xl font-extrabold text-slate-900 tracking-tight leading-normal whitespace-pre-wrap break-words break-all block",title:""},Uf={class:"flex flex-col gap-3 text-sm text-slate-500 font-medium"},Wf={class:"flex items-center gap-2"},jf={class:"flex items-center gap-2"},Vf={class:"flex items-center gap-2"},qf={key:0,class:"mb-4 pb-3 border-b border-slate-100"},Kf={class:"flex flex-wrap gap-2 mb-4"},Gf={class:"flex flex-col sm:flex-row justify-between items-center gap-4"},Zf={class:"flex items-center gap-2 text-slate-500"},Xf={key:0,class:"text-xs text-rose-500 bg-rose-50 px-2 py-0.5 rounded-full"},Yf={class:"flex items-center gap-3"},Jf=["disabled"],Qf={key:1,class:"mb-6 text-right"},ep={class:"flex items-center gap-3 justify-end"},tp={key:2},sp=["innerHTML"],ip={class:"mt-10 pt-6 border-t border-slate-100 text-center"},rp={key:0,class:"text-slate-400 italic text-sm"},np={key:1,class:"text-sm text-slate-500"},op=ct({__name:"MarkdownViewer",props:{file:{},className:{},isEditMode:{type:Boolean}},emits:["update-content","toggle-edit-mode","update-title","export-file"],setup(e,{emit:t}){const s=e,o=t,u=fe(s.file.content),d=fe(null),b=fe(!1);Ms(()=>s.file,c=>{u.value=c.content},{immediate:!0}),Ms(()=>s.isEditMode,c=>{c&&(u.value=s.file.content,_.value=s.file.content)});const i=async()=>{let c=s.file.name;!c.endsWith(".md")&&!c.endsWith(".markdown")&&!c.endsWith(".txt")&&(c+=".md");try{if("showSaveFilePicker"in window){const v=new Blob([s.file.content],{type:"text/markdown;charset=utf-8"}),k=await(await window.showSaveFilePicker({suggestedName:c,types:[{description:"Markdown",accept:{"text/markdown":[".md",".markdown"],"text/plain":[".txt"]}}]})).createWritable();await k.write(v),await k.close(),o("export-file",s.file)}else{const v=document.createElement("a"),x=URL.createObjectURL(new Blob([s.file.content],{type:"text/markdown;charset=utf-8"}));v.href=x,v.download=c,v.style.display="none",document.body.appendChild(v),v.click(),document.body.removeChild(v),URL.revokeObjectURL(x),o("export-file",s.file)}}catch(v){console.error(":",v)}},r=()=>{o("update-content",s.file.id,u.value),b.value=!1,o("toggle-edit-mode")},f=c=>{if(!d.value)return;const v=d.value,x=v.selectionStart,k=v.selectionEnd,E=u.value.substring(x,k);let C="",A=x;switch(c){case"h1":C=`# ${E||""}`,A=x+2+(E?E.length:2);break;case"h2":C=`## ${E||""}`,A=x+3+(E?E.length:4);break;case"quote":C=`> ${E||""}`,A=x+2+(E?E.length:4);break;case"bullet":C=`- ${E||""}`,A=x+2+(E?E.length:2);break;case"numbered":C=`1. ${E||""}`,A=x+3+(E?E.length:2);break;case"bold":C=`**${E||""}**`,A=x+2+(E?E.length:4);break;case"italic":C=`*${E||""}*`,A=x+1+(E?E.length:3);break;case"code":C=`\`${E||""}\``,A=x+1+(E?E.length:2);break;case"link":C=`[${E||""}](https://)`,A=x+(E?E.length+3:10);break;case"image":C=`![${E||""}](https://)`,A=x+(E?E.length+4:11);break;case"table":C=`| 1 | 2 |
| --- | --- |
| 1 | 2 |`,A=x+C.length;break;default:return}u.value=u.value.substring(0,x)+C+u.value.substring(k),v.focus(),setTimeout(()=>{v.setSelectionRange(A,A)},0),b.value=!0},p=()=>{u.value=s.file.content,o("toggle-edit-mode")};let h=null;const _=fe(s.file.content),m=()=>{b.value=!0,h&&clearTimeout(h),h=setTimeout(()=>{u.value!==_.value&&(o("update-content",s.file.id,u.value),_.value=u.value,b.value=!1)},3e3)};Si(()=>{h&&clearTimeout(h)});const w=Pe(()=>{const c=Ve.parse(s.file.content);return Pf.sanitize(c)}),g=Pe(()=>s.file.content.trim().split(/\s+/).length),l=Pe(()=>Math.max(1,Math.ceil(g.value/200))),a=Pe(()=>new Date(s.file.lastModified).toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"})),n=Pe(()=>s.file.name.replace(/\.(md|markdown|txt)$/i,""));return(c,v)=>(ue(),pe("div",{class:Ae(["h-full w-full overflow-y-auto bg-gradient-to-b from-brand-50 to-white",e.className])},[M("div",$f,[M("div",Hf,[M("div",Nf,[M("div",Ff,[M("div",null,[M("h1",zf,be(n.value),1)])]),M("div",Uf,[M("div",Wf,[_e(ve(cd),{class:"w-4 h-4"}),M("span",null,be(a.value),1)]),M("div",jf,[_e(ve(xn),{class:"w-4 h-4"}),M("span",null,be(l.value)+" min read",1)]),M("div",Vf,[v[13]||(v[13]=M("span",{class:"w-1 h-1 rounded-full bg-slate-300"},null,-1)),M("span",null,be(g.value)+" words",1)])])]),e.isEditMode?(ue(),pe("div",qf,[M("div",Kf,[M("button",{onClick:v[0]||(v[0]=x=>f("h1")),class:"p-2 rounded hover:bg-slate-100",title:" 1"},[_e(ve(gd),{class:"w-4 h-4"})]),M("button",{onClick:v[1]||(v[1]=x=>f("h2")),class:"p-2 rounded hover:bg-slate-100",title:" 2"},[_e(ve(vd),{class:"w-4 h-4"})]),v[14]||(v[14]=M("span",{class:"w-px h-6 bg-slate-200 mx-1"},null,-1)),M("button",{onClick:v[2]||(v[2]=x=>f("quote")),class:"p-2 rounded hover:bg-slate-100",title:""},[_e(ve(Ed),{class:"w-4 h-4"})]),M("button",{onClick:v[3]||(v[3]=x=>f("bullet")),class:"p-2 rounded hover:bg-slate-100",title:""},[_e(ve(Sd),{class:"w-4 h-4"})]),M("button",{onClick:v[4]||(v[4]=x=>f("numbered")),class:"p-2 rounded hover:bg-slate-100",title:""},[_e(ve(yd),{class:"w-4 h-4"})]),v[15]||(v[15]=M("span",{class:"w-px h-6 bg-slate-200 mx-1"},null,-1)),M("button",{onClick:v[5]||(v[5]=x=>f("bold")),class:"p-2 rounded hover:bg-slate-100",title:""},[_e(ve(ad),{class:"w-4 h-4"})]),M("button",{onClick:v[6]||(v[6]=x=>f("italic")),class:"p-2 rounded hover:bg-slate-100",title:""},[_e(ve(bd),{class:"w-4 h-4"})]),M("button",{onClick:v[7]||(v[7]=x=>f("code")),class:"p-2 rounded hover:bg-slate-100",title:""},[_e(ve(cl),{class:"w-4 h-4"})]),v[16]||(v[16]=M("span",{class:"w-px h-6 bg-slate-200 mx-1"},null,-1)),M("button",{onClick:v[8]||(v[8]=x=>f("link")),class:"p-2 rounded hover:bg-slate-100",title:""},[_e(ve(wd),{class:"w-4 h-4"})]),M("button",{onClick:v[9]||(v[9]=x=>f("image")),class:"p-2 rounded hover:bg-slate-100",title:""},[_e(ve(Cn),{class:"w-4 h-4"})]),M("button",{onClick:v[10]||(v[10]=x=>f("table")),class:"p-2 rounded hover:bg-slate-100",title:""},[_e(ve(Ld),{class:"w-4 h-4"})])]),M("div",Gf,[M("div",Zf,[_e(ve(Mo),{class:"w-4 h-4"}),v[17]||(v[17]=M("span",{class:"font-medium"},"",-1)),b.value?(ue(),pe("span",Xf,"")):Oe("",!0)]),M("div",Yf,[M("button",{onClick:p,class:"px-4 py-2 rounded-lg border border-slate-200 text-slate-600 hover:bg-slate-50 transition-all duration-200 transform hover:-translate-y-0.5",disabled:!e.isEditMode},[_e(ve(Od),{class:"w-4 h-4 mr-1 inline"}),v[18]||(v[18]=Je("  ",-1))],8,Jf),M("button",{onClick:r,class:"px-4 py-2 rounded-lg bg-brand-600 text-white hover:bg-brand-700 transition-all duration-200 transform hover:-translate-y-0.5 shadow-sm hover:shadow"},[_e(ve(Rd),{class:"w-4 h-4 mr-1 inline"}),v[19]||(v[19]=Je("  ",-1))])])])])):(ue(),pe("div",Qf,[M("div",ep,[M("button",{onClick:v[11]||(v[11]=x=>o("toggle-edit-mode")),class:"px-4 py-2 rounded-lg bg-slate-100 text-slate-700 hover:bg-slate-200 transition-all duration-200 transform hover:-translate-y-0.5 flex items-center gap-2 shadow-sm"},[_e(ve(Mo),{class:"w-4 h-4"}),v[20]||(v[20]=Je("  ",-1))]),M("button",{onClick:i,class:"px-4 py-2 rounded-lg border border-slate-200 text-slate-600 hover:bg-slate-50 transition-all duration-200 transform hover:-translate-y-0.5 flex items-center gap-2 shadow-sm"},[_e(ve(Yi),{class:"w-4 h-4"}),v[21]||(v[21]=Je("  ",-1))])])])),e.isEditMode?(ue(),pe("div",tp,[Xe(M("textarea",{ref_key:"textareaRef",ref:d,"onUpdate:modelValue":v[12]||(v[12]=x=>u.value=x),onInput:m,class:"w-full min-h-[60vh] max-h-[calc(100vh-350px)] p-5 rounded-lg border border-slate-200 bg-white focus:outline-none focus:ring-2 focus:ring-brand-500 focus:border-transparent text-slate-800 font-mono text-sm resize-none transition-all shadow-sm overflow-y-auto word-break-break-all whitespace-pre-wrap",placeholder:"Markdown...",spellcheck:"false",autocomplete:"off",autocorrect:"off",autocapitalize:"off"},null,544),[[Ye,u.value]])])):(ue(),pe("article",{key:3,class:"prose prose-slate prose-lg max-w-none prose-headings:font-bold prose-h1:text-3xl prose-h2:text-2xl prose-a:no-underline hover:prose-a:underline prose-img:rounded-xl prose-img:shadow-lg overflow-x-hidden break-words",innerHTML:w.value},null,8,sp)),M("div",ip,[e.isEditMode?(ue(),pe("div",np,be(u.value.length)+"  | "+be(u.value.trim().split(/\s+/).length)+"  ",1)):(ue(),pe("p",rp,"End of document"))])])])],2))}}),ap={class:"flex flex-col items-center justify-center min-h-[100vh] h-full text-center p-8 bg-white/50 backdrop-blur-sm animate-fade-in overflow-y-auto"},lp={class:"w-24 h-24 bg-brand-50 rounded-full flex items-center justify-center mb-6 shadow-sm"},cp=ct({__name:"EmptyState",emits:["upload-trigger"],setup(e,{emit:t}){const s=t;return(o,u)=>(ue(),pe("div",ap,[M("div",lp,[_e(ve(Ji),{class:"w-10 h-10 text-brand-500"})]),u[2]||(u[2]=M("h2",{class:"text-3xl font-bold text-slate-800 mb-3"},"Welcome to ZenReader",-1)),u[3]||(u[3]=M("p",{class:"text-slate-500 max-w-md mb-8 leading-relaxed"}," A minimalist space to read your Markdown files. Select a file from the history or open a new one to get started. ",-1)),M("button",{onClick:u[0]||(u[0]=d=>s("upload-trigger")),class:"group relative flex items-center gap-3 px-8 py-4 bg-brand-600 hover:bg-brand-500 text-white rounded-xl shadow-lg hover:shadow-brand-500/25 transition-all duration-300 transform hover:-translate-y-1"},[_e(ve(Zs),{class:"w-5 h-5 group-hover:scale-110 transition-transform"}),u[1]||(u[1]=M("span",{class:"font-semibold text-lg"},"Open Markdown File",-1))]),u[4]||(u[4]=qs('<div class="mt-12 grid grid-cols-3 gap-6 text-sm text-slate-400"><div class="flex flex-col items-center gap-2"><div class="w-2 h-2 rounded-full bg-slate-300"></div><span>Local Storage</span></div><div class="flex flex-col items-center gap-2"><div class="w-2 h-2 rounded-full bg-slate-300"></div><span>Syntax Highlighting</span></div><div class="flex flex-col items-center gap-2"><div class="w-2 h-2 rounded-full bg-slate-300"></div><span>Clean Typography</span></div></div>',1))]))}}),hp={class:"flex min-h-screen h-screen w-full bg-gray-50 font-sans"},up={class:"flex-1 relative flex flex-col min-w-0 transition-all duration-300"},dp={class:"flex-1 overflow-hidden"},fp={key:0,class:"h-full"},pp=ct({__name:"Reader",setup(e){const t=fe([]),s=fe(null),o=fe(!0),u=()=>Math.random().toString(36).substr(2,9);ls(()=>{const l=localStorage.getItem("zenreader_files");if(l)try{const a=JSON.parse(l);t.value=a,a.length>0&&(s.value=a[0].id)}catch(a){console.error("Failed to parse saved files",a)}window.innerWidth<768&&(o.value=!1)}),Ms(t,l=>{localStorage.setItem("zenreader_files",JSON.stringify(l))},{deep:!0});const d=async l=>{const a=l.target,n=a.files;if(!n||n.length===0)return;const c=Array.from(n),v=E=>new Promise((C,A)=>{const z=new FileReader;z.onload=G=>{var B;return C((B=G.target)==null?void 0:B.result)},z.onerror=G=>A(G),z.readAsText(E)}),k=(await Promise.all(c.map(v))).map((E,C)=>({id:u(),name:c[C].name,content:E,lastModified:Date.now()}));t.value=[...k,...t.value],s.value=k[0].id,window.innerWidth<768&&(o.value=!1),a.value=""},b=l=>{s.value=l,window.innerWidth<768&&(o.value=!1)},i=l=>{t.value=t.value.filter(a=>a.id!==l),s.value===l&&(s.value=null)},r=Pe(()=>t.value.find(l=>l.id===s.value)||null),f=fe(!1),p=(l,a)=>{const n=t.value.findIndex(c=>c.id===l);n!==-1&&(t.value[n]={...t.value[n],content:a,lastModified:Date.now()})},h=l=>{var a;if(r){const n=t.value.findIndex(c=>c.id===r.id);if(n!==-1){const c=((a=r.name.match(/\.(md|markdown|txt)$/i))==null?void 0:a[0])||"",v=c?`${l}${c}`:l;t.value[n]={...r,name:v,lastModified:Date.now()}}}},_=()=>{f.value=!f.value},m=(l,a)=>{const n=t.value.findIndex(c=>c.id===l);n!==-1&&(t.value[n]={...t.value[n],name:a,lastModified:Date.now()})},w=()=>{const l=document.getElementById("global-upload-trigger");l&&l.click()},g=()=>{o.value=!o.value};return(l,a)=>(ue(),pe("div",hp,[M("input",{id:"global-upload-trigger",type:"file",onChange:d,accept:".md,.markdown,.txt",multiple:"",class:"hidden"},null,32),_e(cf,{files:t.value,"active-file-id":s.value,"is-open":o.value,onSelectFile:b,onUpload:d,onDeleteFile:i,onToggle:g,onRenameFile:m},null,8,["files","active-file-id","is-open"]),M("main",up,[o.value?Oe("",!0):(ue(),pe("button",{key:0,onClick:a[0]||(a[0]=n=>o.value=!0),class:"absolute top-4 left-4 z-30 p-2 bg-white/80 backdrop-blur rounded-lg shadow-sm border border-slate-200 text-slate-600 hover:text-brand-600 transition-colors md:hidden"},[_e(ve(hl),{class:"w-6 h-6"})])),_e(ve(Zt),{to:"/",class:"absolute top-4 right-4 z-30 flex items-center gap-2 px-3 py-2 bg-white/80 backdrop-blur rounded-lg shadow-sm border border-slate-200 text-slate-600 hover:text-brand-600 transition-colors","aria-label":""},{default:Gt(()=>[_e(ve(fs),{class:"w-5 h-5"}),a[1]||(a[1]=M("span",{class:"hidden md:inline"},"",-1))]),_:1}),M("div",dp,[r.value?(ue(),pe("div",fp,[(ue(),$t(op,{key:r.value.id,file:r.value,"is-edit-mode":f.value,onUpdateContent:p,onToggleEditMode:_,onUpdateTitle:h,class:"animate-fade-in h-full w-full overflow-y-auto overflow-x-hidden"},null,8,["file","is-edit-mode"]))])):(ue(),$t(cp,{key:1,onUploadTrigger:w}))])])]))}}),mp={class:"bg-white rounded-2xl border border-slate-200 shadow-sm overflow-auto min-h-[100%] max-h-[calc(100vh-300px)]"},_p={class:"grid min-w-full",style:{"grid-template-columns":"40px 24px 1fr"}},gp={class:"bg-slate-50 border-r border-slate-200"},vp={class:"bg-slate-50 border-r border-slate-200"},bp=["onClick"],wp=ct({__name:"JsonTree",props:{data:{}},setup(e,{expose:t}){const s=e;let o=0;const u=(p,h)=>{const _=++o;if(h===null)return{id:_,type:"null",key:p,value:null};if(Array.isArray(h))return{id:_,type:"array",key:p,children:h.map(w=>u(void 0,w)),collapsed:!1};const m=typeof h;if(m==="object"){const w=Object.keys(h).map(g=>u(g,h[g]));return{id:_,type:"object",key:p,children:w,collapsed:!1}}return m==="string"?{id:_,type:"string",key:p,value:h}:m==="number"?{id:_,type:"number",key:p,value:h}:m==="boolean"?{id:_,type:"boolean",key:p,value:h}:{id:_,type:"null",key:p,value:null}},d=fe(u(void 0,s.data)),b=p=>{const h=_=>_.id===p?((_.type==="object"||_.type==="array")&&(_.collapsed=!_.collapsed),!0):_.children?_.children.some(h):!1;h(d.value)},i=p=>{const h=_=>{var m;(_.type==="object"||_.type==="array")&&(_.collapsed=p),(m=_.children)==null||m.forEach(h)};h(d.value)};t({expandAll:()=>i(!1),collapseAll:()=>i(!0)});const r=Pe(()=>{const p=[],h=(w,g,l,a)=>{p.push({id:l,depth:w,text:g,canToggle:a})},_=w=>w.type==="string"?'"'+String(w.value)+'"':w.type==="number"||w.type==="boolean"?String(w.value):w.type==="null"?"null":"",m=(w,g,l,a=!0)=>{if(w.type==="object"){const n=w.key&&a?'"'+w.key+'": ':"";h(g,n+"{",w.id,!0),!w.collapsed&&w.children&&w.children.forEach((c,v)=>m(c,g+1,v===w.children.length-1)),h(g,"}"+(l?"":","),w.id,!0)}else if(w.type==="array"){const n=w.key&&a?'"'+w.key+'": ':"";h(g,n+"[",w.id,!0),!w.collapsed&&w.children&&w.children.forEach((c,v)=>m(c,g+1,v===w.children.length-1,!1)),h(g,"]"+(l?"":","),w.id,!0)}else{const n=w.key?'"'+w.key+'": ':"";h(g,n+_(w)+(l?"":","),w.id,!1)}};return m(d.value,0,!0),p}),f=p=>/^".*":\s*$/.test(p)?"text-slate-800":/^\{|\}|\[|\]/.test(p)?"text-slate-700":/^".*"(,)?$/.test(p)?"text-emerald-700":/^(true|false)(,)?$/.test(p)?"text-purple-700":/^(null)(,)?$/.test(p)?"text-gray-500":/^-?\d+(\.\d+)?(,)?$/.test(p)?"text-orange-700":"text-slate-800";return(p,h)=>(ue(),pe("div",mp,[M("div",_p,[M("div",gp,[(ue(!0),pe(tt,null,Nt(r.value,(_,m)=>(ue(),pe("div",{key:_.id+"-"+m,class:"px-2 text-slate-400 tabular-nums text-sm h-7 leading-7"},be(m+1),1))),128))]),M("div",vp,[(ue(!0),pe(tt,null,Nt(r.value,_=>(ue(),pe("div",{key:_.id+"-a",class:"h-7 leading-7 flex items-center justify-center"},[_.canToggle?(ue(),pe("button",{key:0,onClick:m=>b(_.id),class:"text-slate-500 hover:text-brand-600"},"  ",8,bp)):Oe("",!0)]))),128))]),M("div",null,[(ue(!0),pe(tt,null,Nt(r.value,_=>(ue(),pe("div",{key:_.id+"-c",class:"h-7 leading-7"},[M("span",{style:Lt({marginLeft:_.depth*20+"px"}),class:Ae([f(_.text),"font-mono text-sm whitespace-pre-wrap break-words"])},be(_.text),7)]))),128))])])]))}}),yp={class:"min-h-[100vh] bg-gray-50"},Sp={class:"max-w-6xl mx-auto px-3 md:px-4 lg:px-6 py-3 md:py-4 lg:py-6 min-h-[100%] flex flex-col"},xp={class:"flex items-center justify-between mb-6"},Cp={class:"grid md:grid-cols-2 gap-6 flex-grow"},kp={class:"bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden min-h-[40vh] sm:min-h-[50vh]"},Ep={class:"bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden min-h-[40vh] sm:min-h-[50vh] max-h-[calc(100vh-320px)]"},Tp={key:1,class:"p-4 sm:p-8 text-slate-400 text-center min-h-[40vh] sm:min-h-[50vh] max-h-[calc(100vh-320px)] overflow-y-auto"},Ap=ct({__name:"JsonTool",setup(e){const t=fe(""),s=fe(null),o=fe(null),u=fe(null),d=()=>{try{o.value=JSON.parse(t.value),s.value={type:"success",msg:"JSON "}}catch{o.value=null,s.value={type:"error",msg:"JSON "}}},b=()=>{try{const f=JSON.parse(t.value);t.value=JSON.stringify(f,null,2),o.value=f,s.value={type:"success",msg:""}}catch{s.value={type:"error",msg:" JSON"}}},i=()=>{var f;return(f=u.value)==null?void 0:f.expandAll()},r=()=>{var f;return(f=u.value)==null?void 0:f.collapseAll()};return(f,p)=>(ue(),pe("div",yp,[M("div",Sp,[M("div",xp,[p[2]||(p[2]=M("h2",{class:"text-2xl font-bold text-slate-900"},"JSON ",-1)),_e(ve(Zt),{to:"/",class:"flex items-center gap-2 px-3 py-2 bg-white/80 backdrop-blur rounded-lg shadow-sm border border-slate-200 text-slate-600 hover:text-brand-600"},{default:Gt(()=>[_e(ve(fs),{class:"w-5 h-5"}),p[1]||(p[1]=M("span",{class:"hidden md:inline"},"",-1))]),_:1})]),M("div",{class:"bg-white rounded-2xl border border-slate-200 shadow-sm p-4 md:p-6 mb-6"},[M("div",{class:"flex flex-wrap gap-2 sm:gap-3"},[M("button",{onClick:d,class:"px-4 py-2 bg-slate-900 hover:bg-slate-800 text-white rounded-lg"},""),M("button",{onClick:b,class:"px-4 py-2 bg-brand-600 hover:bg-brand-500 text-white rounded-lg"},""),M("button",{onClick:i,class:"px-4 py-2 bg-white border border-slate-200 text-slate-700 rounded-lg"},""),M("button",{onClick:r,class:"px-4 py-2 bg-white border border-slate-200 text-slate-700 rounded-lg"},"")])]),s.value?(ue(),pe("div",{key:0,class:Ae([s.value.type==="success"?"bg-green-50 text-green-700 border-green-200":"bg-red-50 text-red-700 border-red-200","mb-4 border rounded-lg px-4 py-3"])},be(s.value.msg),3)):Oe("",!0),M("div",Cp,[M("div",kp,[Xe(M("textarea",{"onUpdate:modelValue":p[0]||(p[0]=h=>t.value=h),placeholder:" JSON",class:"w-full min-h-[40vh] sm:min-h-[50vh] max-h-[calc(100vh-320px)] p-4 font-mono text-sm outline-none resize-none overflow-y-auto whitespace-pre-wrap break-words",spellcheck:"false"},null,512),[[Ye,t.value]])]),M("div",Ep,[o.value!==null?(ue(),$t(wp,{key:0,data:o.value,ref_key:"treeRef",ref:u},null,8,["data"])):(ue(),pe("div",Tp,"  JSON  "))])])])]))}}),Rp={class:"min-h-[100vh] bg-gray-50"},Mp={class:"max-w-6xl mx-auto px-3 md:px-4 lg:px-6 py-3 md:py-4 lg:py-6 min-h-[100%] flex flex-col"},Dp={class:"flex items-center justify-between mb-6"},Lp={class:"text-2xl font-bold text-slate-900 flex items-center gap-2"},Ip={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-3 sm:gap-4 lg:gap-6 mb-6"},Op={class:"bg-white rounded-2xl border border-slate-200 shadow-sm p-6"},Bp={class:"text-lg sm:text-xl font-semibold text-slate-900 break-words"},Pp={class:"bg-white rounded-2xl border border-slate-200 shadow-sm p-6"},$p={class:"text-base font-semibold text-slate-900 break-words"},Hp={class:"bg-white rounded-2xl border border-slate-200 shadow-sm p-6"},Np={class:"text-base font-semibold text-slate-900 break-words"},Fp={class:"bg-white rounded-2xl border border-slate-200 shadow-sm p-6"},zp={class:"text-base font-semibold text-slate-900 break-words"},Up={class:"bg-white rounded-2xl border border-slate-200 shadow-sm p-6"},Wp={class:"text-base font-semibold text-slate-900 break-words"},jp={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4 lg:gap-6 mb-6"},Vp={class:"bg-white rounded-2xl border border-slate-200 shadow-sm p-6"},qp={class:"text-base font-semibold text-slate-900 break-words"},Kp={class:"bg-white rounded-2xl border border-slate-200 shadow-sm p-6"},Gp={class:"text-base font-semibold text-slate-900 break-words"},Zp={class:"bg-white rounded-2xl border border-slate-200 shadow-sm p-6"},Xp={class:"font-mono text-base text-slate-900 break-all"},Yp={class:"bg-white rounded-2xl border border-slate-200 shadow-sm p-6"},Jp={class:"font-mono text-base text-slate-900 break-all"},Qp={class:"grid md:grid-cols-2 gap-3 sm:gap-4 lg:gap-6 flex-grow"},em={class:"bg-white rounded-2xl border border-slate-200 shadow-sm p-6"},tm={class:"flex items-center gap-3 mb-4"},sm={class:"space-y-4"},im={class:"font-mono text-sm text-slate-700 break-words"},rm={class:"font-mono text-sm text-slate-700 break-words"},nm={class:"font-mono text-sm text-slate-700 break-words"},om={class:"bg-white rounded-2xl border border-slate-200 shadow-sm p-6"},am={class:"flex items-center gap-3 mb-3"},lm={class:"font-mono text-sm text-slate-700 mb-6 max-h-[calc(100vh-500px)] overflow-y-auto whitespace-pre-wrap break-words"},cm={class:"flex items-center gap-3 mb-3"},hm={class:"font-mono text-sm text-slate-700 max-h-[calc(100vh-500px)] overflow-y-auto whitespace-pre-wrap break-words"},um=ct({__name:"TimestampTool",setup(e){const t=fe(""),s=fe(""),o=fe(""),u=fe(Date.now()),d=Pe(()=>Math.floor(u.value/1e3));let b=null;const i=fe(""),r=fe(""),f=fe(""),p=fe(""),h=se=>String(se).padStart(2,"0"),_=se=>`${se.getFullYear()}-${h(se.getMonth()+1)}-${h(se.getDate())} ${h(se.getHours())}:${h(se.getMinutes())}:${h(se.getSeconds())}`,m=(se,X)=>{const oe=new Date(se),D=oe.getTime()+oe.getTimezoneOffset()*6e4;return new Date(D+36e5*X)},w=(se,X)=>`${_(se)} (${X})`,g=se=>{const X=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];return`${["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][se.getDay()]} ${X[se.getMonth()]} ${h(se.getDate())} ${se.getFullYear()} ${h(se.getHours())}:${h(se.getMinutes())}:${h(se.getSeconds())} GMT${se.getTimezoneOffset()>0?"-":"+"}${h(Math.floor(Math.abs(se.getTimezoneOffset())/60))}${h(Math.abs(se.getTimezoneOffset())%60)}`},l=se=>`${se.getFullYear()}-${h(se.getMonth()+1)}-${h(se.getDate())} ${h(se.getHours())}:${h(se.getMinutes())}:${h(se.getSeconds())}.${String(se.getMilliseconds()).padStart(3,"0")}`,a=()=>{const se=Date.now();u.value=se;const X=new Date(se);t.value=`${_(X)}`,s.value=`${g(X)}`,o.value=`${l(X)}`,i.value=w(m(se,8),"UTC+8"),r.value=w(m(se,0),"UTC0"),f.value=w(m(se,-5),"UTC-5"),p.value=w(m(se,-8),"UTC-8")};ls(()=>{a(),b=window.setInterval(a,1e3)}),Si(()=>{b&&window.clearInterval(b)});const n=fe(""),c=fe(null),v=fe(""),x=fe(""),k=fe(""),E=()=>{const se=n.value.trim();if(!/^\d+$/.test(se)){c.value={type:"error",msg:""},v.value="",x.value="",k.value="";return}let X;if(se.length===13){const oe=Number(se);X=new Date(oe)}else if(se.length===10){const oe=Number(se);X=new Date(oe*1e3)}else{c.value={type:"error",msg:" 10  13 "},v.value="",x.value="",k.value="";return}v.value=`${_(X)}`,x.value=`${g(X)}`,k.value=`${l(X)}`,c.value={type:"success",msg:""}},C=fe(""),A=fe(null),z=fe(""),G=fe(""),B=fe(null),P=fe(""),R=()=>{const se=C.value.trim();if(!se){A.value={type:"error",msg:""},z.value="";return}let X=new Date(se);if(isNaN(X.getTime())){const oe=se.match(/^(\d{4})[-\/]?(\d{2})[-\/]?(\d{2})(?:[ T](\d{2}):(\d{2})(?::(\d{2}))?)?$/);if(oe){const D=Number(oe[1]),U=Number(oe[2]),S=Number(oe[3]),T=Number(oe[4]??"0"),K=Number(oe[5]??"0"),Y=Number(oe[6]??"0");X=new Date(D,U-1,S,T,K,Y)}}if(isNaN(X.getTime())){A.value={type:"error",msg:""},z.value="";return}z.value=String(X.getTime()),A.value={type:"success",msg:""}},Q=()=>{const se=G.value.trim();if(!se){B.value={type:"error",msg:""},P.value="";return}const X=new Date(se);if(isNaN(X.getTime())){B.value={type:"error",msg:""},P.value="";return}P.value=String(X.getTime()),B.value={type:"success",msg:""}};return(se,X)=>(ue(),pe("div",Rp,[M("div",Mp,[M("div",Dp,[M("h2",Lp,[_e(ve(xn),{class:"w-5 h-5"}),X[3]||(X[3]=Je(" ",-1))]),_e(ve(Zt),{to:"/",class:"flex items-center gap-2 px-3 py-2 bg-white/80 backdrop-blur rounded-lg shadow-sm border border-slate-200 text-slate-600 hover:text-brand-600"},{default:Gt(()=>[_e(ve(fs),{class:"w-5 h-5"}),X[4]||(X[4]=M("span",{class:"hidden md:inline"},"",-1))]),_:1})]),M("div",Ip,[M("div",Op,[X[5]||(X[5]=M("div",{class:"text-slate-400 text-sm mb-1"},"",-1)),M("div",Bp,be(t.value),1)]),M("div",Pp,[X[6]||(X[6]=M("div",{class:"text-slate-400 text-sm mb-1"},"",-1)),M("div",$p,be(i.value),1)]),M("div",Hp,[X[7]||(X[7]=M("div",{class:"text-slate-400 text-sm mb-1"},"",-1)),M("div",Np,be(r.value),1)]),M("div",Fp,[X[8]||(X[8]=M("div",{class:"text-slate-400 text-sm mb-1"},"",-1)),M("div",zp,be(f.value),1)]),M("div",Up,[X[9]||(X[9]=M("div",{class:"text-slate-400 text-sm mb-1"},"",-1)),M("div",Wp,be(p.value),1)])]),M("div",jp,[M("div",Vp,[X[10]||(X[10]=M("div",{class:"text-slate-400 text-sm mb-1"},"",-1)),M("div",qp,be(s.value),1)]),M("div",Kp,[X[11]||(X[11]=M("div",{class:"text-slate-400 text-sm mb-1"},"LocalTime",-1)),M("div",Gp,be(o.value),1)]),M("div",Zp,[X[12]||(X[12]=M("div",{class:"text-slate-400 text-sm mb-1"},"(13)",-1)),M("div",Xp,be(u.value),1)]),M("div",Yp,[X[13]||(X[13]=M("div",{class:"text-slate-400 text-sm mb-1"},"(10)",-1)),M("div",Jp,be(d.value),1)])]),M("div",Qp,[M("div",em,[X[17]||(X[17]=M("div",{class:"text-slate-900 font-semibold mb-4"},"  ",-1)),M("div",tm,[Xe(M("input",{"onUpdate:modelValue":X[0]||(X[0]=oe=>n.value=oe),placeholder:" 10  13 ",class:"flex-1 px-4 py-2 rounded-lg border border-slate-200 shadow-sm font-mono text-sm outline-none"},null,512),[[Ye,n.value]]),M("button",{onClick:E,class:"px-4 py-2 bg-brand-600 hover:bg-brand-500 text-white rounded-lg"},"")]),c.value?(ue(),pe("div",{key:0,class:Ae([c.value.type==="success"?"bg-green-50 text-green-700 border-green-200":"bg-red-50 text-red-700 border-red-200","mb-4 border rounded-lg px-4 py-3"])},be(c.value.msg),3)):Oe("",!0),M("div",sm,[M("div",null,[X[14]||(X[14]=M("div",{class:"text-slate-400 text-xs mb-1"},"",-1)),M("div",im,be(v.value),1)]),M("div",null,[X[15]||(X[15]=M("div",{class:"text-slate-400 text-xs mb-1"},"",-1)),M("div",rm,be(x.value),1)]),M("div",null,[X[16]||(X[16]=M("div",{class:"text-slate-400 text-xs mb-1"},"LocalTime",-1)),M("div",nm,be(k.value),1)])])]),M("div",om,[X[18]||(X[18]=M("div",{class:"text-slate-900 font-semibold mb-4"},"  13",-1)),M("div",am,[Xe(M("input",{"onUpdate:modelValue":X[1]||(X[1]=oe=>C.value=oe),type:"text",placeholder:" 2025-11-25 12:34:56  ISO ",class:"flex-1 px-4 py-2 rounded-lg border border-slate-200 shadow-sm outline-none"},null,512),[[Ye,C.value]]),M("button",{onClick:R,class:"px-4 py-2 bg-brand-600 hover:bg-brand-500 text-white rounded-lg"},"")]),A.value?(ue(),pe("div",{key:0,class:Ae([A.value.type==="success"?"bg-green-50 text-green-700 border-green-200":"bg-red-50 text-red-700 border-red-200","mb-4 border rounded-lg px-4 py-3"])},be(A.value.msg),3)):Oe("",!0),M("div",lm,be(z.value),1),M("div",cm,[Xe(M("input",{"onUpdate:modelValue":X[2]||(X[2]=oe=>G.value=oe),type:"datetime-local",step:"1",class:"flex-1 px-4 py-2 rounded-lg border border-slate-200 shadow-sm outline-none"},null,512),[[Ye,G.value]]),M("button",{onClick:Q,class:"px-4 py-2 bg-slate-900 hover:bg-slate-800 text-white rounded-lg"},"")]),B.value?(ue(),pe("div",{key:1,class:Ae([B.value.type==="success"?"bg-green-50 text-green-700 border-green-200":"bg-red-50 text-red-700 border-red-200","mb-4 border rounded-lg px-4 py-3"])},be(B.value.msg),3)):Oe("",!0),M("div",hm,be(P.value),1)])])])]))}}),dm={class:"min-h-[100vh] bg-gray-50 p-4 md:p-6 lg:p-8"},fm={class:"max-w-4xl mx-auto min-h-[100%] flex flex-col"},pm={class:"mb-8 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},mm={class:"bg-white rounded-2xl shadow-md border border-slate-200 p-4 md:p-6 lg:p-8 flex-grow overflow-hidden"},_m={class:"mb-8"},gm={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 mb-3"},vm={for:"file-upload",class:"flex items-center gap-2 px-3 py-2 text-sm text-brand-600 hover:text-brand-700 hover:bg-brand-50 rounded-lg cursor-pointer transition-colors"},bm={class:"mt-2 text-xs text-slate-400 flex gap-4"},wm={class:"mb-8"},ym={class:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-4 min-h-[14vh] max-h-[calc(100vh-550px)] overflow-y-auto pr-2"},Sm=["onClick"],xm={class:"text-lg sm:text-xl font-bold font-mono"},Cm={class:"text-xs sm:text-sm font-medium"},km={class:"mb-6"},Em={class:"relative"},Tm=["value"],Am={class:"absolute top-3 right-3 flex gap-2"},Rm={class:"flex flex-wrap items-center justify-between gap-4 pt-4 border-t border-slate-100"},Mm=ct({__name:"CaseConverter",setup(e){const t=fe(""),s=fe("lower"),o=fe(!1),u=[{value:"upper",label:"",icon:"AB"},{value:"lower",label:"",icon:"ab"},{value:"title",label:"",icon:"Ab"},{value:"sentence",label:"",icon:"Abc"},{value:"camel",label:"",icon:"aB"},{value:"pascal",label:"",icon:"Ab"},{value:"snake",label:"",icon:"a_b"},{value:"kebab",label:"",icon:"a-b"},{value:"constant",label:"",icon:"A_B"}],d=(w,g)=>{if(!w)return"";switch(g){case"upper":return w.toUpperCase();case"lower":return w.toLowerCase();case"title":return w.toLowerCase().replace(/\b\w/g,l=>l.toUpperCase());case"sentence":return w.toLowerCase().replace(/(^\s*\w|[.!?]\s*\w)/g,l=>l.toUpperCase());case"camel":return w.toLowerCase().replace(/[^a-zA-Z0-9]+(.)/g,(l,a)=>a.toUpperCase()).replace(/^./,l=>l.toLowerCase());case"pascal":return w.toLowerCase().replace(/[^a-zA-Z0-9]+(.)/g,(l,a)=>a.toUpperCase()).replace(/^./,l=>l.toUpperCase());case"snake":return w.toLowerCase().replace(/[^a-zA-Z0-9]+/g,"_");case"kebab":return w.toLowerCase().replace(/[^a-zA-Z0-9]+/g,"-");case"constant":return w.toUpperCase().replace(/[^a-zA-Z0-9]+/g,"_");default:return w}},b=Pe(()=>d(t.value,s.value)),i=Pe(()=>t.value.length),r=Pe(()=>t.value.trim().split(/\s+/).filter(Boolean).length),f=Pe(()=>t.value.split(`
`).length),p=async()=>{try{await navigator.clipboard.writeText(b.value),o.value=!0,setTimeout(()=>o.value=!1,2e3)}catch(w){console.error(":",w)}},h=()=>{t.value=""},_=()=>{t.value=b.value},m=w=>{var l;const g=(l=w.target.files)==null?void 0:l[0];if(g&&g.type.includes("text")){const a=new FileReader;a.onload=n=>{var c,v;t.value=((v=(c=n.target)==null?void 0:c.result)==null?void 0:v.toString())||""},a.readAsText(g)}};return(w,g)=>(ue(),pe("div",dm,[M("div",fm,[M("div",pm,[g[2]||(g[2]=M("div",null,[M("h1",{class:"text-3xl sm:text-4xl font-bold text-slate-900 tracking-tight"},""),M("p",{class:"text-slate-600 text-lg mt-1"},"")],-1)),_e(ve(Zt),{to:"/",class:"flex items-center gap-2 px-3 py-2 bg-white/80 backdrop-blur rounded-lg shadow-sm border border-slate-200 text-slate-600 hover:text-brand-600 transition-colors","aria-label":""},{default:Gt(()=>[_e(ve(fs),{class:"w-5 h-5"}),g[1]||(g[1]=M("span",{class:"hidden md:inline"},"",-1))]),_:1})]),M("div",mm,[M("div",_m,[M("div",gm,[g[4]||(g[4]=M("label",{class:"block text-sm font-semibold text-slate-700"},"",-1)),M("input",{type:"file",onChange:m,accept:".txt,.md,.log,.json,.xml,.yaml,.yml,.csv",class:"hidden",id:"file-upload"},null,32),M("label",vm,[_e(ve(Zs),{class:"w-4 h-4"}),g[3]||(g[3]=Je("  ",-1))])]),Xe(M("textarea",{"onUpdate:modelValue":g[0]||(g[0]=l=>t.value=l),rows:"8",placeholder:"...",class:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-brand-500 focus:border-brand-500 outline-none resize-none font-mono text-sm bg-slate-50 min-h-[24vh] max-h-[calc(100vh-450px)] overflow-y-auto whitespace-pre-wrap break-words shadow-sm transition-all duration-200"},null,512),[[Ye,t.value]]),M("div",bm,[M("span",null,": "+be(i.value),1),M("span",null,": "+be(r.value),1),M("span",null,": "+be(f.value),1)])]),M("div",wm,[g[5]||(g[5]=M("h3",{class:"text-sm font-semibold text-slate-700 mb-3"},"",-1)),M("div",ym,[(ue(),pe(tt,null,Nt(u,l=>M("button",{key:l.value,onClick:a=>s.value=l.value,class:Ae(["group flex flex-col items-center justify-center gap-2 px-4 py-4 rounded-xl border-2 transition-all duration-200 hover:shadow-sm",s.value===l.value?"border-brand-500 bg-brand-50 text-brand-700 shadow-sm":"border-slate-200 hover:border-slate-300 hover:bg-slate-50 text-slate-600"])},[M("span",xm,be(l.icon),1),M("span",Cm,be(l.label),1)],10,Sm)),64))])]),M("div",km,[g[6]||(g[6]=M("label",{class:"block text-sm font-semibold text-slate-700 mb-3"},"",-1)),M("div",Em,[M("textarea",{value:b.value,readonly:"",rows:"8",placeholder:"...",class:"w-full px-4 py-3 border border-slate-200 rounded-xl bg-slate-50 font-mono text-sm resize-none pr-24 min-h-[24vh] max-h-[calc(100vh-450px)] overflow-y-auto whitespace-pre-wrap break-words shadow-sm transition-all duration-200"},null,8,Tm),M("div",Am,[M("button",{onClick:p,class:Ae(["px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200",o.value?"bg-green-100 text-green-700 shadow-sm":"bg-white border border-slate-200 text-slate-600 hover:bg-slate-50 hover:shadow-sm"])},[(ue(),$t(Ra(o.value?ve(hd):ve(dd)),{class:"w-4 h-4"}))],2),M("button",{onClick:_,class:"px-3 py-2 bg-white border border-slate-200 text-slate-600 rounded-lg text-sm font-medium transition-all duration-200 hover:bg-slate-50 hover:shadow-sm",title:""},[_e(ve(Ad),{class:"w-4 h-4"})])])])]),M("div",Rm,[g[8]||(g[8]=M("div",{class:"text-sm text-slate-500"},"    ",-1)),M("button",{onClick:h,class:"flex items-center gap-2 px-4 py-2 text-sm text-red-600 hover:text-red-700 hover:bg-red-50 rounded-lg transition-all duration-200"},[_e(ve(_r),{class:"w-4 h-4"}),g[7]||(g[7]=Je("  ",-1))])])])])]))}}),Dm={class:"min-h-screen bg-gray-50"},Lm={class:"max-w-6xl mx-auto px-6 py-8"},Im={class:"mb-6 relative"},Om={class:"text-2xl font-bold text-slate-900 flex items-center gap-2"},Bm={class:"grid md:grid-cols-2 gap-6"},Pm={class:"bg-white rounded-2xl border border-slate-200 shadow-sm p-6"},$m={class:"flex items-center gap-3 mb-3"},Hm={class:"space-y-6"},Nm={class:"bg-white rounded-2xl border border-slate-200 shadow-sm p-6"},Fm={class:"w-full h-[160px] p-4 font-mono text-sm bg-slate-50 rounded-xl overflow-auto whitespace-pre-wrap break-words"},zm={class:"bg-white rounded-2xl border border-slate-200 shadow-sm p-6"},Um={class:"w-full h-[160px] p-4 font-mono text-sm bg-slate-50 rounded-xl overflow-auto whitespace-pre-wrap break-words"},Wm={class:"bg-white rounded-2xl border border-slate-200 shadow-sm p-6"},jm={class:"w-full h-[160px] p-4 font-mono text-sm bg-slate-50 rounded-xl overflow-auto whitespace-pre-wrap break-words"},Vm=ct({__name:"StringAssembler",setup(e){const t=fe(""),s=fe("result"),o=fe(null),u=fe(""),d=fe(""),b=fe(""),i=()=>{const p=t.value.match(/\bString\s+(\w+)\s*=\s*/);p&&(s.value=p[1])},r=p=>{try{return JSON.parse('"'+p.replace(/"/g,'\\"')+'"')}catch{return p}},f=()=>{try{i();const p=[],h=/"([^"\\]|\\.)*"/g;let _;for(;(_=h.exec(t.value))!==null;){const g=_[0].slice(1,-1);p.push(r(g))}const m=p.join("");u.value=m,o.value={type:"success",msg:""},d.value=`String ${s.value} = """
${m}
""";`;const w=m.replace(/\\/g,"\\\\").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t").replace(/"/g,'\\"');b.value=`String ${s.value} = "${w}";`}catch{o.value={type:"error",msg:""}}};return(p,h)=>(ue(),pe("div",Dm,[M("div",Lm,[M("div",Im,[_e(ve(Zt),{to:"/",class:"absolute top-4 right-4 z-30 flex items-center gap-2 px-3 py-2 bg-white/80 backdrop-blur rounded-lg shadow-sm border border-slate-200 text-slate-600 hover:text-brand-600 transition-colors"},{default:Gt(()=>[_e(ve(fs),{class:"w-5 h-5"}),h[2]||(h[2]=M("span",{class:"hidden md:inline"},"",-1))]),_:1}),M("h2",Om,[_e(ve(ul),{class:"w-5 h-5"}),h[3]||(h[3]=Je(" ",-1))]),h[4]||(h[4]=M("p",{class:"text-slate-600 mt-1"}," Java  Java ",-1))]),M("div",Bm,[M("div",Pm,[M("div",$m,[h[5]||(h[5]=M("label",{class:"text-sm font-semibold text-slate-700"},"",-1)),Xe(M("input",{"onUpdate:modelValue":h[0]||(h[0]=_=>s.value=_),class:"px-3 py-2 border border-slate-200 rounded-lg text-sm w-40"},null,512),[[Ye,s.value]]),M("button",{onClick:f,class:"ml-auto px-4 py-2 bg-brand-600 hover:bg-brand-500 text-white rounded-lg"},"")]),Xe(M("textarea",{"onUpdate:modelValue":h[1]||(h[1]=_=>t.value=_),placeholder:"Java",class:"w-full h-[360px] p-4 font-mono text-sm outline-none resize-none border border-slate-200 rounded-xl bg-slate-50 overflow-auto whitespace-pre-wrap break-words"},null,512),[[Ye,t.value]]),o.value?(ue(),pe("div",{key:0,class:Ae([o.value.type==="success"?"bg-green-50 text-green-700 border-green-200":"bg-red-50 text-red-700 border-red-200","mt-3 border rounded-lg px-4 py-3"])},be(o.value.msg),3)):Oe("",!0)]),M("div",Hm,[M("div",Nm,[h[6]||(h[6]=M("div",{class:"text-sm font-semibold text-slate-700 mb-2"},"",-1)),M("pre",Fm,be(u.value),1)]),M("div",zm,[h[7]||(h[7]=M("div",{class:"text-sm font-semibold text-slate-700 mb-2"},"Java ",-1)),M("pre",Um,be(d.value),1)]),M("div",Wm,[h[8]||(h[8]=M("div",{class:"text-sm font-semibold text-slate-700 mb-2"},"Java ",-1)),M("pre",jm,be(b.value),1)])])])])]))}});var Ii=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function qm(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Oi(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Pr={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/var Wo;function Km(){return Wo||(Wo=1,(function(e,t){(function(s){e.exports=s()})(function(){return(function s(o,u,d){function b(f,p){if(!u[f]){if(!o[f]){var h=typeof Oi=="function"&&Oi;if(!p&&h)return h(f,!0);if(i)return i(f,!0);var _=new Error("Cannot find module '"+f+"'");throw _.code="MODULE_NOT_FOUND",_}var m=u[f]={exports:{}};o[f][0].call(m.exports,function(w){var g=o[f][1][w];return b(g||w)},m,m.exports,s,o,u,d)}return u[f].exports}for(var i=typeof Oi=="function"&&Oi,r=0;r<d.length;r++)b(d[r]);return b})({1:[function(s,o,u){var d=s("./utils"),b=s("./support"),i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";u.encode=function(r){for(var f,p,h,_,m,w,g,l=[],a=0,n=r.length,c=n,v=d.getTypeOf(r)!=="string";a<r.length;)c=n-a,h=v?(f=r[a++],p=a<n?r[a++]:0,a<n?r[a++]:0):(f=r.charCodeAt(a++),p=a<n?r.charCodeAt(a++):0,a<n?r.charCodeAt(a++):0),_=f>>2,m=(3&f)<<4|p>>4,w=1<c?(15&p)<<2|h>>6:64,g=2<c?63&h:64,l.push(i.charAt(_)+i.charAt(m)+i.charAt(w)+i.charAt(g));return l.join("")},u.decode=function(r){var f,p,h,_,m,w,g=0,l=0,a="data:";if(r.substr(0,a.length)===a)throw new Error("Invalid base64 input, it looks like a data url.");var n,c=3*(r=r.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(r.charAt(r.length-1)===i.charAt(64)&&c--,r.charAt(r.length-2)===i.charAt(64)&&c--,c%1!=0)throw new Error("Invalid base64 input, bad content length.");for(n=b.uint8array?new Uint8Array(0|c):new Array(0|c);g<r.length;)f=i.indexOf(r.charAt(g++))<<2|(_=i.indexOf(r.charAt(g++)))>>4,p=(15&_)<<4|(m=i.indexOf(r.charAt(g++)))>>2,h=(3&m)<<6|(w=i.indexOf(r.charAt(g++))),n[l++]=f,m!==64&&(n[l++]=p),w!==64&&(n[l++]=h);return n}},{"./support":30,"./utils":32}],2:[function(s,o,u){var d=s("./external"),b=s("./stream/DataWorker"),i=s("./stream/Crc32Probe"),r=s("./stream/DataLengthProbe");function f(p,h,_,m,w){this.compressedSize=p,this.uncompressedSize=h,this.crc32=_,this.compression=m,this.compressedContent=w}f.prototype={getContentWorker:function(){var p=new b(d.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new r("data_length")),h=this;return p.on("end",function(){if(this.streamInfo.data_length!==h.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),p},getCompressedWorker:function(){return new b(d.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},f.createWorkerFrom=function(p,h,_){return p.pipe(new i).pipe(new r("uncompressedSize")).pipe(h.compressWorker(_)).pipe(new r("compressedSize")).withStreamInfo("compression",h)},o.exports=f},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(s,o,u){var d=s("./stream/GenericWorker");u.STORE={magic:"\0\0",compressWorker:function(){return new d("STORE compression")},uncompressWorker:function(){return new d("STORE decompression")}},u.DEFLATE=s("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(s,o,u){var d=s("./utils"),b=(function(){for(var i,r=[],f=0;f<256;f++){i=f;for(var p=0;p<8;p++)i=1&i?3988292384^i>>>1:i>>>1;r[f]=i}return r})();o.exports=function(i,r){return i!==void 0&&i.length?d.getTypeOf(i)!=="string"?(function(f,p,h,_){var m=b,w=_+h;f^=-1;for(var g=_;g<w;g++)f=f>>>8^m[255&(f^p[g])];return-1^f})(0|r,i,i.length,0):(function(f,p,h,_){var m=b,w=_+h;f^=-1;for(var g=_;g<w;g++)f=f>>>8^m[255&(f^p.charCodeAt(g))];return-1^f})(0|r,i,i.length,0):0}},{"./utils":32}],5:[function(s,o,u){u.base64=!1,u.binary=!1,u.dir=!1,u.createFolders=!0,u.date=null,u.compression=null,u.compressionOptions=null,u.comment=null,u.unixPermissions=null,u.dosPermissions=null},{}],6:[function(s,o,u){var d=null;d=typeof Promise<"u"?Promise:s("lie"),o.exports={Promise:d}},{lie:37}],7:[function(s,o,u){var d=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",b=s("pako"),i=s("./utils"),r=s("./stream/GenericWorker"),f=d?"uint8array":"array";function p(h,_){r.call(this,"FlateWorker/"+h),this._pako=null,this._pakoAction=h,this._pakoOptions=_,this.meta={}}u.magic="\b\0",i.inherits(p,r),p.prototype.processChunk=function(h){this.meta=h.meta,this._pako===null&&this._createPako(),this._pako.push(i.transformTo(f,h.data),!1)},p.prototype.flush=function(){r.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},p.prototype.cleanUp=function(){r.prototype.cleanUp.call(this),this._pako=null},p.prototype._createPako=function(){this._pako=new b[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var h=this;this._pako.onData=function(_){h.push({data:_,meta:h.meta})}},u.compressWorker=function(h){return new p("Deflate",h)},u.uncompressWorker=function(){return new p("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(s,o,u){function d(m,w){var g,l="";for(g=0;g<w;g++)l+=String.fromCharCode(255&m),m>>>=8;return l}function b(m,w,g,l,a,n){var c,v,x=m.file,k=m.compression,E=n!==f.utf8encode,C=i.transformTo("string",n(x.name)),A=i.transformTo("string",f.utf8encode(x.name)),z=x.comment,G=i.transformTo("string",n(z)),B=i.transformTo("string",f.utf8encode(z)),P=A.length!==x.name.length,R=B.length!==z.length,Q="",se="",X="",oe=x.dir,D=x.date,U={crc32:0,compressedSize:0,uncompressedSize:0};w&&!g||(U.crc32=m.crc32,U.compressedSize=m.compressedSize,U.uncompressedSize=m.uncompressedSize);var S=0;w&&(S|=8),E||!P&&!R||(S|=2048);var T=0,K=0;oe&&(T|=16),a==="UNIX"?(K=798,T|=(function(ne,ae){var W=ne;return ne||(W=ae?16893:33204),(65535&W)<<16})(x.unixPermissions,oe)):(K=20,T|=(function(ne){return 63&(ne||0)})(x.dosPermissions)),c=D.getUTCHours(),c<<=6,c|=D.getUTCMinutes(),c<<=5,c|=D.getUTCSeconds()/2,v=D.getUTCFullYear()-1980,v<<=4,v|=D.getUTCMonth()+1,v<<=5,v|=D.getUTCDate(),P&&(se=d(1,1)+d(p(C),4)+A,Q+="up"+d(se.length,2)+se),R&&(X=d(1,1)+d(p(G),4)+B,Q+="uc"+d(X.length,2)+X);var Y="";return Y+=`
\0`,Y+=d(S,2),Y+=k.magic,Y+=d(c,2),Y+=d(v,2),Y+=d(U.crc32,4),Y+=d(U.compressedSize,4),Y+=d(U.uncompressedSize,4),Y+=d(C.length,2),Y+=d(Q.length,2),{fileRecord:h.LOCAL_FILE_HEADER+Y+C+Q,dirRecord:h.CENTRAL_FILE_HEADER+d(K,2)+Y+d(G.length,2)+"\0\0\0\0"+d(T,4)+d(l,4)+C+Q+G}}var i=s("../utils"),r=s("../stream/GenericWorker"),f=s("../utf8"),p=s("../crc32"),h=s("../signature");function _(m,w,g,l){r.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=w,this.zipPlatform=g,this.encodeFileName=l,this.streamFiles=m,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}i.inherits(_,r),_.prototype.push=function(m){var w=m.meta.percent||0,g=this.entriesCount,l=this._sources.length;this.accumulate?this.contentBuffer.push(m):(this.bytesWritten+=m.data.length,r.prototype.push.call(this,{data:m.data,meta:{currentFile:this.currentFile,percent:g?(w+100*(g-l-1))/g:100}}))},_.prototype.openedSource=function(m){this.currentSourceOffset=this.bytesWritten,this.currentFile=m.file.name;var w=this.streamFiles&&!m.file.dir;if(w){var g=b(m,w,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:g.fileRecord,meta:{percent:0}})}else this.accumulate=!0},_.prototype.closedSource=function(m){this.accumulate=!1;var w=this.streamFiles&&!m.file.dir,g=b(m,w,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(g.dirRecord),w)this.push({data:(function(l){return h.DATA_DESCRIPTOR+d(l.crc32,4)+d(l.compressedSize,4)+d(l.uncompressedSize,4)})(m),meta:{percent:100}});else for(this.push({data:g.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},_.prototype.flush=function(){for(var m=this.bytesWritten,w=0;w<this.dirRecords.length;w++)this.push({data:this.dirRecords[w],meta:{percent:100}});var g=this.bytesWritten-m,l=(function(a,n,c,v,x){var k=i.transformTo("string",x(v));return h.CENTRAL_DIRECTORY_END+"\0\0\0\0"+d(a,2)+d(a,2)+d(n,4)+d(c,4)+d(k.length,2)+k})(this.dirRecords.length,g,m,this.zipComment,this.encodeFileName);this.push({data:l,meta:{percent:100}})},_.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},_.prototype.registerPrevious=function(m){this._sources.push(m);var w=this;return m.on("data",function(g){w.processChunk(g)}),m.on("end",function(){w.closedSource(w.previous.streamInfo),w._sources.length?w.prepareNextSource():w.end()}),m.on("error",function(g){w.error(g)}),this},_.prototype.resume=function(){return!!r.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},_.prototype.error=function(m){var w=this._sources;if(!r.prototype.error.call(this,m))return!1;for(var g=0;g<w.length;g++)try{w[g].error(m)}catch{}return!0},_.prototype.lock=function(){r.prototype.lock.call(this);for(var m=this._sources,w=0;w<m.length;w++)m[w].lock()},o.exports=_},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(s,o,u){var d=s("../compressions"),b=s("./ZipFileWorker");u.generateWorker=function(i,r,f){var p=new b(r.streamFiles,f,r.platform,r.encodeFileName),h=0;try{i.forEach(function(_,m){h++;var w=(function(n,c){var v=n||c,x=d[v];if(!x)throw new Error(v+" is not a valid compression method !");return x})(m.options.compression,r.compression),g=m.options.compressionOptions||r.compressionOptions||{},l=m.dir,a=m.date;m._compressWorker(w,g).withStreamInfo("file",{name:_,dir:l,date:a,comment:m.comment||"",unixPermissions:m.unixPermissions,dosPermissions:m.dosPermissions}).pipe(p)}),p.entriesCount=h}catch(_){p.error(_)}return p}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(s,o,u){function d(){if(!(this instanceof d))return new d;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var b=new d;for(var i in this)typeof this[i]!="function"&&(b[i]=this[i]);return b}}(d.prototype=s("./object")).loadAsync=s("./load"),d.support=s("./support"),d.defaults=s("./defaults"),d.version="3.10.1",d.loadAsync=function(b,i){return new d().loadAsync(b,i)},d.external=s("./external"),o.exports=d},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(s,o,u){var d=s("./utils"),b=s("./external"),i=s("./utf8"),r=s("./zipEntries"),f=s("./stream/Crc32Probe"),p=s("./nodejsUtils");function h(_){return new b.Promise(function(m,w){var g=_.decompressed.getContentWorker().pipe(new f);g.on("error",function(l){w(l)}).on("end",function(){g.streamInfo.crc32!==_.decompressed.crc32?w(new Error("Corrupted zip : CRC32 mismatch")):m()}).resume()})}o.exports=function(_,m){var w=this;return m=d.extend(m||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:i.utf8decode}),p.isNode&&p.isStream(_)?b.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):d.prepareContent("the loaded zip file",_,!0,m.optimizedBinaryString,m.base64).then(function(g){var l=new r(m);return l.load(g),l}).then(function(g){var l=[b.Promise.resolve(g)],a=g.files;if(m.checkCRC32)for(var n=0;n<a.length;n++)l.push(h(a[n]));return b.Promise.all(l)}).then(function(g){for(var l=g.shift(),a=l.files,n=0;n<a.length;n++){var c=a[n],v=c.fileNameStr,x=d.resolve(c.fileNameStr);w.file(x,c.decompressed,{binary:!0,optimizedBinaryString:!0,date:c.date,dir:c.dir,comment:c.fileCommentStr.length?c.fileCommentStr:null,unixPermissions:c.unixPermissions,dosPermissions:c.dosPermissions,createFolders:m.createFolders}),c.dir||(w.file(x).unsafeOriginalName=v)}return l.zipComment.length&&(w.comment=l.zipComment),w})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(s,o,u){var d=s("../utils"),b=s("../stream/GenericWorker");function i(r,f){b.call(this,"Nodejs stream input adapter for "+r),this._upstreamEnded=!1,this._bindStream(f)}d.inherits(i,b),i.prototype._bindStream=function(r){var f=this;(this._stream=r).pause(),r.on("data",function(p){f.push({data:p,meta:{percent:0}})}).on("error",function(p){f.isPaused?this.generatedError=p:f.error(p)}).on("end",function(){f.isPaused?f._upstreamEnded=!0:f.end()})},i.prototype.pause=function(){return!!b.prototype.pause.call(this)&&(this._stream.pause(),!0)},i.prototype.resume=function(){return!!b.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},o.exports=i},{"../stream/GenericWorker":28,"../utils":32}],13:[function(s,o,u){var d=s("readable-stream").Readable;function b(i,r,f){d.call(this,r),this._helper=i;var p=this;i.on("data",function(h,_){p.push(h)||p._helper.pause(),f&&f(_)}).on("error",function(h){p.emit("error",h)}).on("end",function(){p.push(null)})}s("../utils").inherits(b,d),b.prototype._read=function(){this._helper.resume()},o.exports=b},{"../utils":32,"readable-stream":16}],14:[function(s,o,u){o.exports={isNode:typeof Buffer<"u",newBufferFrom:function(d,b){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(d,b);if(typeof d=="number")throw new Error('The "data" argument must not be a number');return new Buffer(d,b)},allocBuffer:function(d){if(Buffer.alloc)return Buffer.alloc(d);var b=new Buffer(d);return b.fill(0),b},isBuffer:function(d){return Buffer.isBuffer(d)},isStream:function(d){return d&&typeof d.on=="function"&&typeof d.pause=="function"&&typeof d.resume=="function"}}},{}],15:[function(s,o,u){function d(x,k,E){var C,A=i.getTypeOf(k),z=i.extend(E||{},p);z.date=z.date||new Date,z.compression!==null&&(z.compression=z.compression.toUpperCase()),typeof z.unixPermissions=="string"&&(z.unixPermissions=parseInt(z.unixPermissions,8)),z.unixPermissions&&16384&z.unixPermissions&&(z.dir=!0),z.dosPermissions&&16&z.dosPermissions&&(z.dir=!0),z.dir&&(x=a(x)),z.createFolders&&(C=l(x))&&n.call(this,C,!0);var G=A==="string"&&z.binary===!1&&z.base64===!1;E&&E.binary!==void 0||(z.binary=!G),(k instanceof h&&k.uncompressedSize===0||z.dir||!k||k.length===0)&&(z.base64=!1,z.binary=!0,k="",z.compression="STORE",A="string");var B=null;B=k instanceof h||k instanceof r?k:w.isNode&&w.isStream(k)?new g(x,k):i.prepareContent(x,k,z.binary,z.optimizedBinaryString,z.base64);var P=new _(x,B,z);this.files[x]=P}var b=s("./utf8"),i=s("./utils"),r=s("./stream/GenericWorker"),f=s("./stream/StreamHelper"),p=s("./defaults"),h=s("./compressedObject"),_=s("./zipObject"),m=s("./generate"),w=s("./nodejsUtils"),g=s("./nodejs/NodejsStreamInputAdapter"),l=function(x){x.slice(-1)==="/"&&(x=x.substring(0,x.length-1));var k=x.lastIndexOf("/");return 0<k?x.substring(0,k):""},a=function(x){return x.slice(-1)!=="/"&&(x+="/"),x},n=function(x,k){return k=k!==void 0?k:p.createFolders,x=a(x),this.files[x]||d.call(this,x,null,{dir:!0,createFolders:k}),this.files[x]};function c(x){return Object.prototype.toString.call(x)==="[object RegExp]"}var v={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(x){var k,E,C;for(k in this.files)C=this.files[k],(E=k.slice(this.root.length,k.length))&&k.slice(0,this.root.length)===this.root&&x(E,C)},filter:function(x){var k=[];return this.forEach(function(E,C){x(E,C)&&k.push(C)}),k},file:function(x,k,E){if(arguments.length!==1)return x=this.root+x,d.call(this,x,k,E),this;if(c(x)){var C=x;return this.filter(function(z,G){return!G.dir&&C.test(z)})}var A=this.files[this.root+x];return A&&!A.dir?A:null},folder:function(x){if(!x)return this;if(c(x))return this.filter(function(A,z){return z.dir&&x.test(A)});var k=this.root+x,E=n.call(this,k),C=this.clone();return C.root=E.name,C},remove:function(x){x=this.root+x;var k=this.files[x];if(k||(x.slice(-1)!=="/"&&(x+="/"),k=this.files[x]),k&&!k.dir)delete this.files[x];else for(var E=this.filter(function(A,z){return z.name.slice(0,x.length)===x}),C=0;C<E.length;C++)delete this.files[E[C].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(x){var k,E={};try{if((E=i.extend(x||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:b.utf8encode})).type=E.type.toLowerCase(),E.compression=E.compression.toUpperCase(),E.type==="binarystring"&&(E.type="string"),!E.type)throw new Error("No output type specified.");i.checkSupport(E.type),E.platform!=="darwin"&&E.platform!=="freebsd"&&E.platform!=="linux"&&E.platform!=="sunos"||(E.platform="UNIX"),E.platform==="win32"&&(E.platform="DOS");var C=E.comment||this.comment||"";k=m.generateWorker(this,E,C)}catch(A){(k=new r("error")).error(A)}return new f(k,E.type||"string",E.mimeType)},generateAsync:function(x,k){return this.generateInternalStream(x).accumulate(k)},generateNodeStream:function(x,k){return(x=x||{}).type||(x.type="nodebuffer"),this.generateInternalStream(x).toNodejsStream(k)}};o.exports=v},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(s,o,u){o.exports=s("stream")},{stream:void 0}],17:[function(s,o,u){var d=s("./DataReader");function b(i){d.call(this,i);for(var r=0;r<this.data.length;r++)i[r]=255&i[r]}s("../utils").inherits(b,d),b.prototype.byteAt=function(i){return this.data[this.zero+i]},b.prototype.lastIndexOfSignature=function(i){for(var r=i.charCodeAt(0),f=i.charCodeAt(1),p=i.charCodeAt(2),h=i.charCodeAt(3),_=this.length-4;0<=_;--_)if(this.data[_]===r&&this.data[_+1]===f&&this.data[_+2]===p&&this.data[_+3]===h)return _-this.zero;return-1},b.prototype.readAndCheckSignature=function(i){var r=i.charCodeAt(0),f=i.charCodeAt(1),p=i.charCodeAt(2),h=i.charCodeAt(3),_=this.readData(4);return r===_[0]&&f===_[1]&&p===_[2]&&h===_[3]},b.prototype.readData=function(i){if(this.checkOffset(i),i===0)return[];var r=this.data.slice(this.zero+this.index,this.zero+this.index+i);return this.index+=i,r},o.exports=b},{"../utils":32,"./DataReader":18}],18:[function(s,o,u){var d=s("../utils");function b(i){this.data=i,this.length=i.length,this.index=0,this.zero=0}b.prototype={checkOffset:function(i){this.checkIndex(this.index+i)},checkIndex:function(i){if(this.length<this.zero+i||i<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+i+"). Corrupted zip ?")},setIndex:function(i){this.checkIndex(i),this.index=i},skip:function(i){this.setIndex(this.index+i)},byteAt:function(){},readInt:function(i){var r,f=0;for(this.checkOffset(i),r=this.index+i-1;r>=this.index;r--)f=(f<<8)+this.byteAt(r);return this.index+=i,f},readString:function(i){return d.transformTo("string",this.readData(i))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var i=this.readInt(4);return new Date(Date.UTC(1980+(i>>25&127),(i>>21&15)-1,i>>16&31,i>>11&31,i>>5&63,(31&i)<<1))}},o.exports=b},{"../utils":32}],19:[function(s,o,u){var d=s("./Uint8ArrayReader");function b(i){d.call(this,i)}s("../utils").inherits(b,d),b.prototype.readData=function(i){this.checkOffset(i);var r=this.data.slice(this.zero+this.index,this.zero+this.index+i);return this.index+=i,r},o.exports=b},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(s,o,u){var d=s("./DataReader");function b(i){d.call(this,i)}s("../utils").inherits(b,d),b.prototype.byteAt=function(i){return this.data.charCodeAt(this.zero+i)},b.prototype.lastIndexOfSignature=function(i){return this.data.lastIndexOf(i)-this.zero},b.prototype.readAndCheckSignature=function(i){return i===this.readData(4)},b.prototype.readData=function(i){this.checkOffset(i);var r=this.data.slice(this.zero+this.index,this.zero+this.index+i);return this.index+=i,r},o.exports=b},{"../utils":32,"./DataReader":18}],21:[function(s,o,u){var d=s("./ArrayReader");function b(i){d.call(this,i)}s("../utils").inherits(b,d),b.prototype.readData=function(i){if(this.checkOffset(i),i===0)return new Uint8Array(0);var r=this.data.subarray(this.zero+this.index,this.zero+this.index+i);return this.index+=i,r},o.exports=b},{"../utils":32,"./ArrayReader":17}],22:[function(s,o,u){var d=s("../utils"),b=s("../support"),i=s("./ArrayReader"),r=s("./StringReader"),f=s("./NodeBufferReader"),p=s("./Uint8ArrayReader");o.exports=function(h){var _=d.getTypeOf(h);return d.checkSupport(_),_!=="string"||b.uint8array?_==="nodebuffer"?new f(h):b.uint8array?new p(d.transformTo("uint8array",h)):new i(d.transformTo("array",h)):new r(h)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(s,o,u){u.LOCAL_FILE_HEADER="PK",u.CENTRAL_FILE_HEADER="PK",u.CENTRAL_DIRECTORY_END="PK",u.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",u.ZIP64_CENTRAL_DIRECTORY_END="PK",u.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(s,o,u){var d=s("./GenericWorker"),b=s("../utils");function i(r){d.call(this,"ConvertWorker to "+r),this.destType=r}b.inherits(i,d),i.prototype.processChunk=function(r){this.push({data:b.transformTo(this.destType,r.data),meta:r.meta})},o.exports=i},{"../utils":32,"./GenericWorker":28}],25:[function(s,o,u){var d=s("./GenericWorker"),b=s("../crc32");function i(){d.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}s("../utils").inherits(i,d),i.prototype.processChunk=function(r){this.streamInfo.crc32=b(r.data,this.streamInfo.crc32||0),this.push(r)},o.exports=i},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(s,o,u){var d=s("../utils"),b=s("./GenericWorker");function i(r){b.call(this,"DataLengthProbe for "+r),this.propName=r,this.withStreamInfo(r,0)}d.inherits(i,b),i.prototype.processChunk=function(r){if(r){var f=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=f+r.data.length}b.prototype.processChunk.call(this,r)},o.exports=i},{"../utils":32,"./GenericWorker":28}],27:[function(s,o,u){var d=s("../utils"),b=s("./GenericWorker");function i(r){b.call(this,"DataWorker");var f=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,r.then(function(p){f.dataIsReady=!0,f.data=p,f.max=p&&p.length||0,f.type=d.getTypeOf(p),f.isPaused||f._tickAndRepeat()},function(p){f.error(p)})}d.inherits(i,b),i.prototype.cleanUp=function(){b.prototype.cleanUp.call(this),this.data=null},i.prototype.resume=function(){return!!b.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,d.delay(this._tickAndRepeat,[],this)),!0)},i.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(d.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},i.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var r=null,f=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":r=this.data.substring(this.index,f);break;case"uint8array":r=this.data.subarray(this.index,f);break;case"array":case"nodebuffer":r=this.data.slice(this.index,f)}return this.index=f,this.push({data:r,meta:{percent:this.max?this.index/this.max*100:0}})},o.exports=i},{"../utils":32,"./GenericWorker":28}],28:[function(s,o,u){function d(b){this.name=b||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}d.prototype={push:function(b){this.emit("data",b)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(b){this.emit("error",b)}return!0},error:function(b){return!this.isFinished&&(this.isPaused?this.generatedError=b:(this.isFinished=!0,this.emit("error",b),this.previous&&this.previous.error(b),this.cleanUp()),!0)},on:function(b,i){return this._listeners[b].push(i),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(b,i){if(this._listeners[b])for(var r=0;r<this._listeners[b].length;r++)this._listeners[b][r].call(this,i)},pipe:function(b){return b.registerPrevious(this)},registerPrevious:function(b){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=b.streamInfo,this.mergeStreamInfo(),this.previous=b;var i=this;return b.on("data",function(r){i.processChunk(r)}),b.on("end",function(){i.end()}),b.on("error",function(r){i.error(r)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var b=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),b=!0),this.previous&&this.previous.resume(),!b},flush:function(){},processChunk:function(b){this.push(b)},withStreamInfo:function(b,i){return this.extraStreamInfo[b]=i,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var b in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,b)&&(this.streamInfo[b]=this.extraStreamInfo[b])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var b="Worker "+this.name;return this.previous?this.previous+" -> "+b:b}},o.exports=d},{}],29:[function(s,o,u){var d=s("../utils"),b=s("./ConvertWorker"),i=s("./GenericWorker"),r=s("../base64"),f=s("../support"),p=s("../external"),h=null;if(f.nodestream)try{h=s("../nodejs/NodejsStreamOutputAdapter")}catch{}function _(w,g){return new p.Promise(function(l,a){var n=[],c=w._internalType,v=w._outputType,x=w._mimeType;w.on("data",function(k,E){n.push(k),g&&g(E)}).on("error",function(k){n=[],a(k)}).on("end",function(){try{var k=(function(E,C,A){switch(E){case"blob":return d.newBlob(d.transformTo("arraybuffer",C),A);case"base64":return r.encode(C);default:return d.transformTo(E,C)}})(v,(function(E,C){var A,z=0,G=null,B=0;for(A=0;A<C.length;A++)B+=C[A].length;switch(E){case"string":return C.join("");case"array":return Array.prototype.concat.apply([],C);case"uint8array":for(G=new Uint8Array(B),A=0;A<C.length;A++)G.set(C[A],z),z+=C[A].length;return G;case"nodebuffer":return Buffer.concat(C);default:throw new Error("concat : unsupported type '"+E+"'")}})(c,n),x);l(k)}catch(E){a(E)}n=[]}).resume()})}function m(w,g,l){var a=g;switch(g){case"blob":case"arraybuffer":a="uint8array";break;case"base64":a="string"}try{this._internalType=a,this._outputType=g,this._mimeType=l,d.checkSupport(a),this._worker=w.pipe(new b(a)),w.lock()}catch(n){this._worker=new i("error"),this._worker.error(n)}}m.prototype={accumulate:function(w){return _(this,w)},on:function(w,g){var l=this;return w==="data"?this._worker.on(w,function(a){g.call(l,a.data,a.meta)}):this._worker.on(w,function(){d.delay(g,arguments,l)}),this},resume:function(){return d.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(w){if(d.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new h(this,{objectMode:this._outputType!=="nodebuffer"},w)}},o.exports=m},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(s,o,u){if(u.base64=!0,u.array=!0,u.string=!0,u.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",u.nodebuffer=typeof Buffer<"u",u.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")u.blob=!1;else{var d=new ArrayBuffer(0);try{u.blob=new Blob([d],{type:"application/zip"}).size===0}catch{try{var b=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);b.append(d),u.blob=b.getBlob("application/zip").size===0}catch{u.blob=!1}}}try{u.nodestream=!!s("readable-stream").Readable}catch{u.nodestream=!1}},{"readable-stream":16}],31:[function(s,o,u){for(var d=s("./utils"),b=s("./support"),i=s("./nodejsUtils"),r=s("./stream/GenericWorker"),f=new Array(256),p=0;p<256;p++)f[p]=252<=p?6:248<=p?5:240<=p?4:224<=p?3:192<=p?2:1;f[254]=f[254]=1;function h(){r.call(this,"utf-8 decode"),this.leftOver=null}function _(){r.call(this,"utf-8 encode")}u.utf8encode=function(m){return b.nodebuffer?i.newBufferFrom(m,"utf-8"):(function(w){var g,l,a,n,c,v=w.length,x=0;for(n=0;n<v;n++)(64512&(l=w.charCodeAt(n)))==55296&&n+1<v&&(64512&(a=w.charCodeAt(n+1)))==56320&&(l=65536+(l-55296<<10)+(a-56320),n++),x+=l<128?1:l<2048?2:l<65536?3:4;for(g=b.uint8array?new Uint8Array(x):new Array(x),n=c=0;c<x;n++)(64512&(l=w.charCodeAt(n)))==55296&&n+1<v&&(64512&(a=w.charCodeAt(n+1)))==56320&&(l=65536+(l-55296<<10)+(a-56320),n++),l<128?g[c++]=l:(l<2048?g[c++]=192|l>>>6:(l<65536?g[c++]=224|l>>>12:(g[c++]=240|l>>>18,g[c++]=128|l>>>12&63),g[c++]=128|l>>>6&63),g[c++]=128|63&l);return g})(m)},u.utf8decode=function(m){return b.nodebuffer?d.transformTo("nodebuffer",m).toString("utf-8"):(function(w){var g,l,a,n,c=w.length,v=new Array(2*c);for(g=l=0;g<c;)if((a=w[g++])<128)v[l++]=a;else if(4<(n=f[a]))v[l++]=65533,g+=n-1;else{for(a&=n===2?31:n===3?15:7;1<n&&g<c;)a=a<<6|63&w[g++],n--;1<n?v[l++]=65533:a<65536?v[l++]=a:(a-=65536,v[l++]=55296|a>>10&1023,v[l++]=56320|1023&a)}return v.length!==l&&(v.subarray?v=v.subarray(0,l):v.length=l),d.applyFromCharCode(v)})(m=d.transformTo(b.uint8array?"uint8array":"array",m))},d.inherits(h,r),h.prototype.processChunk=function(m){var w=d.transformTo(b.uint8array?"uint8array":"array",m.data);if(this.leftOver&&this.leftOver.length){if(b.uint8array){var g=w;(w=new Uint8Array(g.length+this.leftOver.length)).set(this.leftOver,0),w.set(g,this.leftOver.length)}else w=this.leftOver.concat(w);this.leftOver=null}var l=(function(n,c){var v;for((c=c||n.length)>n.length&&(c=n.length),v=c-1;0<=v&&(192&n[v])==128;)v--;return v<0||v===0?c:v+f[n[v]]>c?v:c})(w),a=w;l!==w.length&&(b.uint8array?(a=w.subarray(0,l),this.leftOver=w.subarray(l,w.length)):(a=w.slice(0,l),this.leftOver=w.slice(l,w.length))),this.push({data:u.utf8decode(a),meta:m.meta})},h.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:u.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},u.Utf8DecodeWorker=h,d.inherits(_,r),_.prototype.processChunk=function(m){this.push({data:u.utf8encode(m.data),meta:m.meta})},u.Utf8EncodeWorker=_},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(s,o,u){var d=s("./support"),b=s("./base64"),i=s("./nodejsUtils"),r=s("./external");function f(g){return g}function p(g,l){for(var a=0;a<g.length;++a)l[a]=255&g.charCodeAt(a);return l}s("setimmediate"),u.newBlob=function(g,l){u.checkSupport("blob");try{return new Blob([g],{type:l})}catch{try{var a=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return a.append(g),a.getBlob(l)}catch{throw new Error("Bug : can't construct the Blob.")}}};var h={stringifyByChunk:function(g,l,a){var n=[],c=0,v=g.length;if(v<=a)return String.fromCharCode.apply(null,g);for(;c<v;)l==="array"||l==="nodebuffer"?n.push(String.fromCharCode.apply(null,g.slice(c,Math.min(c+a,v)))):n.push(String.fromCharCode.apply(null,g.subarray(c,Math.min(c+a,v)))),c+=a;return n.join("")},stringifyByChar:function(g){for(var l="",a=0;a<g.length;a++)l+=String.fromCharCode(g[a]);return l},applyCanBeUsed:{uint8array:(function(){try{return d.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}})(),nodebuffer:(function(){try{return d.nodebuffer&&String.fromCharCode.apply(null,i.allocBuffer(1)).length===1}catch{return!1}})()}};function _(g){var l=65536,a=u.getTypeOf(g),n=!0;if(a==="uint8array"?n=h.applyCanBeUsed.uint8array:a==="nodebuffer"&&(n=h.applyCanBeUsed.nodebuffer),n)for(;1<l;)try{return h.stringifyByChunk(g,a,l)}catch{l=Math.floor(l/2)}return h.stringifyByChar(g)}function m(g,l){for(var a=0;a<g.length;a++)l[a]=g[a];return l}u.applyFromCharCode=_;var w={};w.string={string:f,array:function(g){return p(g,new Array(g.length))},arraybuffer:function(g){return w.string.uint8array(g).buffer},uint8array:function(g){return p(g,new Uint8Array(g.length))},nodebuffer:function(g){return p(g,i.allocBuffer(g.length))}},w.array={string:_,array:f,arraybuffer:function(g){return new Uint8Array(g).buffer},uint8array:function(g){return new Uint8Array(g)},nodebuffer:function(g){return i.newBufferFrom(g)}},w.arraybuffer={string:function(g){return _(new Uint8Array(g))},array:function(g){return m(new Uint8Array(g),new Array(g.byteLength))},arraybuffer:f,uint8array:function(g){return new Uint8Array(g)},nodebuffer:function(g){return i.newBufferFrom(new Uint8Array(g))}},w.uint8array={string:_,array:function(g){return m(g,new Array(g.length))},arraybuffer:function(g){return g.buffer},uint8array:f,nodebuffer:function(g){return i.newBufferFrom(g)}},w.nodebuffer={string:_,array:function(g){return m(g,new Array(g.length))},arraybuffer:function(g){return w.nodebuffer.uint8array(g).buffer},uint8array:function(g){return m(g,new Uint8Array(g.length))},nodebuffer:f},u.transformTo=function(g,l){if(l=l||"",!g)return l;u.checkSupport(g);var a=u.getTypeOf(l);return w[a][g](l)},u.resolve=function(g){for(var l=g.split("/"),a=[],n=0;n<l.length;n++){var c=l[n];c==="."||c===""&&n!==0&&n!==l.length-1||(c===".."?a.pop():a.push(c))}return a.join("/")},u.getTypeOf=function(g){return typeof g=="string"?"string":Object.prototype.toString.call(g)==="[object Array]"?"array":d.nodebuffer&&i.isBuffer(g)?"nodebuffer":d.uint8array&&g instanceof Uint8Array?"uint8array":d.arraybuffer&&g instanceof ArrayBuffer?"arraybuffer":void 0},u.checkSupport=function(g){if(!d[g.toLowerCase()])throw new Error(g+" is not supported by this platform")},u.MAX_VALUE_16BITS=65535,u.MAX_VALUE_32BITS=-1,u.pretty=function(g){var l,a,n="";for(a=0;a<(g||"").length;a++)n+="\\x"+((l=g.charCodeAt(a))<16?"0":"")+l.toString(16).toUpperCase();return n},u.delay=function(g,l,a){setImmediate(function(){g.apply(a||null,l||[])})},u.inherits=function(g,l){function a(){}a.prototype=l.prototype,g.prototype=new a},u.extend=function(){var g,l,a={};for(g=0;g<arguments.length;g++)for(l in arguments[g])Object.prototype.hasOwnProperty.call(arguments[g],l)&&a[l]===void 0&&(a[l]=arguments[g][l]);return a},u.prepareContent=function(g,l,a,n,c){return r.Promise.resolve(l).then(function(v){return d.blob&&(v instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(v))!==-1)&&typeof FileReader<"u"?new r.Promise(function(x,k){var E=new FileReader;E.onload=function(C){x(C.target.result)},E.onerror=function(C){k(C.target.error)},E.readAsArrayBuffer(v)}):v}).then(function(v){var x=u.getTypeOf(v);return x?(x==="arraybuffer"?v=u.transformTo("uint8array",v):x==="string"&&(c?v=b.decode(v):a&&n!==!0&&(v=(function(k){return p(k,d.uint8array?new Uint8Array(k.length):new Array(k.length))})(v))),v):r.Promise.reject(new Error("Can't read the data of '"+g+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(s,o,u){var d=s("./reader/readerFor"),b=s("./utils"),i=s("./signature"),r=s("./zipEntry"),f=s("./support");function p(h){this.files=[],this.loadOptions=h}p.prototype={checkSignature:function(h){if(!this.reader.readAndCheckSignature(h)){this.reader.index-=4;var _=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+b.pretty(_)+", expected "+b.pretty(h)+")")}},isSignature:function(h,_){var m=this.reader.index;this.reader.setIndex(h);var w=this.reader.readString(4)===_;return this.reader.setIndex(m),w},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var h=this.reader.readData(this.zipCommentLength),_=f.uint8array?"uint8array":"array",m=b.transformTo(_,h);this.zipComment=this.loadOptions.decodeFileName(m)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var h,_,m,w=this.zip64EndOfCentralSize-44;0<w;)h=this.reader.readInt(2),_=this.reader.readInt(4),m=this.reader.readData(_),this.zip64ExtensibleData[h]={id:h,length:_,value:m}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var h,_;for(h=0;h<this.files.length;h++)_=this.files[h],this.reader.setIndex(_.localHeaderOffset),this.checkSignature(i.LOCAL_FILE_HEADER),_.readLocalPart(this.reader),_.handleUTF8(),_.processAttributes()},readCentralDir:function(){var h;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(i.CENTRAL_FILE_HEADER);)(h=new r({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(h);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var h=this.reader.lastIndexOfSignature(i.CENTRAL_DIRECTORY_END);if(h<0)throw this.isSignature(0,i.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(h);var _=h;if(this.checkSignature(i.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===b.MAX_VALUE_16BITS||this.diskWithCentralDirStart===b.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===b.MAX_VALUE_16BITS||this.centralDirRecords===b.MAX_VALUE_16BITS||this.centralDirSize===b.MAX_VALUE_32BITS||this.centralDirOffset===b.MAX_VALUE_32BITS){if(this.zip64=!0,(h=this.reader.lastIndexOfSignature(i.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(h),this.checkSignature(i.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,i.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(i.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(i.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var m=this.centralDirOffset+this.centralDirSize;this.zip64&&(m+=20,m+=12+this.zip64EndOfCentralSize);var w=_-m;if(0<w)this.isSignature(_,i.CENTRAL_FILE_HEADER)||(this.reader.zero=w);else if(w<0)throw new Error("Corrupted zip: missing "+Math.abs(w)+" bytes.")},prepareReader:function(h){this.reader=d(h)},load:function(h){this.prepareReader(h),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},o.exports=p},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(s,o,u){var d=s("./reader/readerFor"),b=s("./utils"),i=s("./compressedObject"),r=s("./crc32"),f=s("./utf8"),p=s("./compressions"),h=s("./support");function _(m,w){this.options=m,this.loadOptions=w}_.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(m){var w,g;if(m.skip(22),this.fileNameLength=m.readInt(2),g=m.readInt(2),this.fileName=m.readData(this.fileNameLength),m.skip(g),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((w=(function(l){for(var a in p)if(Object.prototype.hasOwnProperty.call(p,a)&&p[a].magic===l)return p[a];return null})(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+b.pretty(this.compressionMethod)+" unknown (inner file : "+b.transformTo("string",this.fileName)+")");this.decompressed=new i(this.compressedSize,this.uncompressedSize,this.crc32,w,m.readData(this.compressedSize))},readCentralPart:function(m){this.versionMadeBy=m.readInt(2),m.skip(2),this.bitFlag=m.readInt(2),this.compressionMethod=m.readString(2),this.date=m.readDate(),this.crc32=m.readInt(4),this.compressedSize=m.readInt(4),this.uncompressedSize=m.readInt(4);var w=m.readInt(2);if(this.extraFieldsLength=m.readInt(2),this.fileCommentLength=m.readInt(2),this.diskNumberStart=m.readInt(2),this.internalFileAttributes=m.readInt(2),this.externalFileAttributes=m.readInt(4),this.localHeaderOffset=m.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");m.skip(w),this.readExtraFields(m),this.parseZIP64ExtraField(m),this.fileComment=m.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var m=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),m==0&&(this.dosPermissions=63&this.externalFileAttributes),m==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var m=d(this.extraFields[1].value);this.uncompressedSize===b.MAX_VALUE_32BITS&&(this.uncompressedSize=m.readInt(8)),this.compressedSize===b.MAX_VALUE_32BITS&&(this.compressedSize=m.readInt(8)),this.localHeaderOffset===b.MAX_VALUE_32BITS&&(this.localHeaderOffset=m.readInt(8)),this.diskNumberStart===b.MAX_VALUE_32BITS&&(this.diskNumberStart=m.readInt(4))}},readExtraFields:function(m){var w,g,l,a=m.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});m.index+4<a;)w=m.readInt(2),g=m.readInt(2),l=m.readData(g),this.extraFields[w]={id:w,length:g,value:l};m.setIndex(a)},handleUTF8:function(){var m=h.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=f.utf8decode(this.fileName),this.fileCommentStr=f.utf8decode(this.fileComment);else{var w=this.findExtraFieldUnicodePath();if(w!==null)this.fileNameStr=w;else{var g=b.transformTo(m,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(g)}var l=this.findExtraFieldUnicodeComment();if(l!==null)this.fileCommentStr=l;else{var a=b.transformTo(m,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(a)}}},findExtraFieldUnicodePath:function(){var m=this.extraFields[28789];if(m){var w=d(m.value);return w.readInt(1)!==1||r(this.fileName)!==w.readInt(4)?null:f.utf8decode(w.readData(m.length-5))}return null},findExtraFieldUnicodeComment:function(){var m=this.extraFields[25461];if(m){var w=d(m.value);return w.readInt(1)!==1||r(this.fileComment)!==w.readInt(4)?null:f.utf8decode(w.readData(m.length-5))}return null}},o.exports=_},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(s,o,u){function d(w,g,l){this.name=w,this.dir=l.dir,this.date=l.date,this.comment=l.comment,this.unixPermissions=l.unixPermissions,this.dosPermissions=l.dosPermissions,this._data=g,this._dataBinary=l.binary,this.options={compression:l.compression,compressionOptions:l.compressionOptions}}var b=s("./stream/StreamHelper"),i=s("./stream/DataWorker"),r=s("./utf8"),f=s("./compressedObject"),p=s("./stream/GenericWorker");d.prototype={internalStream:function(w){var g=null,l="string";try{if(!w)throw new Error("No output type specified.");var a=(l=w.toLowerCase())==="string"||l==="text";l!=="binarystring"&&l!=="text"||(l="string"),g=this._decompressWorker();var n=!this._dataBinary;n&&!a&&(g=g.pipe(new r.Utf8EncodeWorker)),!n&&a&&(g=g.pipe(new r.Utf8DecodeWorker))}catch(c){(g=new p("error")).error(c)}return new b(g,l,"")},async:function(w,g){return this.internalStream(w).accumulate(g)},nodeStream:function(w,g){return this.internalStream(w||"nodebuffer").toNodejsStream(g)},_compressWorker:function(w,g){if(this._data instanceof f&&this._data.compression.magic===w.magic)return this._data.getCompressedWorker();var l=this._decompressWorker();return this._dataBinary||(l=l.pipe(new r.Utf8EncodeWorker)),f.createWorkerFrom(l,w,g)},_decompressWorker:function(){return this._data instanceof f?this._data.getContentWorker():this._data instanceof p?this._data:new i(this._data)}};for(var h=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],_=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},m=0;m<h.length;m++)d.prototype[h[m]]=_;o.exports=d},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(s,o,u){(function(d){var b,i,r=d.MutationObserver||d.WebKitMutationObserver;if(r){var f=0,p=new r(w),h=d.document.createTextNode("");p.observe(h,{characterData:!0}),b=function(){h.data=f=++f%2}}else if(d.setImmediate||d.MessageChannel===void 0)b="document"in d&&"onreadystatechange"in d.document.createElement("script")?function(){var g=d.document.createElement("script");g.onreadystatechange=function(){w(),g.onreadystatechange=null,g.parentNode.removeChild(g),g=null},d.document.documentElement.appendChild(g)}:function(){setTimeout(w,0)};else{var _=new d.MessageChannel;_.port1.onmessage=w,b=function(){_.port2.postMessage(0)}}var m=[];function w(){var g,l;i=!0;for(var a=m.length;a;){for(l=m,m=[],g=-1;++g<a;)l[g]();a=m.length}i=!1}o.exports=function(g){m.push(g)!==1||i||b()}}).call(this,typeof Ii<"u"?Ii:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(s,o,u){var d=s("immediate");function b(){}var i={},r=["REJECTED"],f=["FULFILLED"],p=["PENDING"];function h(a){if(typeof a!="function")throw new TypeError("resolver must be a function");this.state=p,this.queue=[],this.outcome=void 0,a!==b&&g(this,a)}function _(a,n,c){this.promise=a,typeof n=="function"&&(this.onFulfilled=n,this.callFulfilled=this.otherCallFulfilled),typeof c=="function"&&(this.onRejected=c,this.callRejected=this.otherCallRejected)}function m(a,n,c){d(function(){var v;try{v=n(c)}catch(x){return i.reject(a,x)}v===a?i.reject(a,new TypeError("Cannot resolve promise with itself")):i.resolve(a,v)})}function w(a){var n=a&&a.then;if(a&&(typeof a=="object"||typeof a=="function")&&typeof n=="function")return function(){n.apply(a,arguments)}}function g(a,n){var c=!1;function v(E){c||(c=!0,i.reject(a,E))}function x(E){c||(c=!0,i.resolve(a,E))}var k=l(function(){n(x,v)});k.status==="error"&&v(k.value)}function l(a,n){var c={};try{c.value=a(n),c.status="success"}catch(v){c.status="error",c.value=v}return c}(o.exports=h).prototype.finally=function(a){if(typeof a!="function")return this;var n=this.constructor;return this.then(function(c){return n.resolve(a()).then(function(){return c})},function(c){return n.resolve(a()).then(function(){throw c})})},h.prototype.catch=function(a){return this.then(null,a)},h.prototype.then=function(a,n){if(typeof a!="function"&&this.state===f||typeof n!="function"&&this.state===r)return this;var c=new this.constructor(b);return this.state!==p?m(c,this.state===f?a:n,this.outcome):this.queue.push(new _(c,a,n)),c},_.prototype.callFulfilled=function(a){i.resolve(this.promise,a)},_.prototype.otherCallFulfilled=function(a){m(this.promise,this.onFulfilled,a)},_.prototype.callRejected=function(a){i.reject(this.promise,a)},_.prototype.otherCallRejected=function(a){m(this.promise,this.onRejected,a)},i.resolve=function(a,n){var c=l(w,n);if(c.status==="error")return i.reject(a,c.value);var v=c.value;if(v)g(a,v);else{a.state=f,a.outcome=n;for(var x=-1,k=a.queue.length;++x<k;)a.queue[x].callFulfilled(n)}return a},i.reject=function(a,n){a.state=r,a.outcome=n;for(var c=-1,v=a.queue.length;++c<v;)a.queue[c].callRejected(n);return a},h.resolve=function(a){return a instanceof this?a:i.resolve(new this(b),a)},h.reject=function(a){var n=new this(b);return i.reject(n,a)},h.all=function(a){var n=this;if(Object.prototype.toString.call(a)!=="[object Array]")return this.reject(new TypeError("must be an array"));var c=a.length,v=!1;if(!c)return this.resolve([]);for(var x=new Array(c),k=0,E=-1,C=new this(b);++E<c;)A(a[E],E);return C;function A(z,G){n.resolve(z).then(function(B){x[G]=B,++k!==c||v||(v=!0,i.resolve(C,x))},function(B){v||(v=!0,i.reject(C,B))})}},h.race=function(a){var n=this;if(Object.prototype.toString.call(a)!=="[object Array]")return this.reject(new TypeError("must be an array"));var c=a.length,v=!1;if(!c)return this.resolve([]);for(var x=-1,k=new this(b);++x<c;)E=a[x],n.resolve(E).then(function(C){v||(v=!0,i.resolve(k,C))},function(C){v||(v=!0,i.reject(k,C))});var E;return k}},{immediate:36}],38:[function(s,o,u){var d={};(0,s("./lib/utils/common").assign)(d,s("./lib/deflate"),s("./lib/inflate"),s("./lib/zlib/constants")),o.exports=d},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(s,o,u){var d=s("./zlib/deflate"),b=s("./utils/common"),i=s("./utils/strings"),r=s("./zlib/messages"),f=s("./zlib/zstream"),p=Object.prototype.toString,h=0,_=-1,m=0,w=8;function g(a){if(!(this instanceof g))return new g(a);this.options=b.assign({level:_,method:w,chunkSize:16384,windowBits:15,memLevel:8,strategy:m,to:""},a||{});var n=this.options;n.raw&&0<n.windowBits?n.windowBits=-n.windowBits:n.gzip&&0<n.windowBits&&n.windowBits<16&&(n.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new f,this.strm.avail_out=0;var c=d.deflateInit2(this.strm,n.level,n.method,n.windowBits,n.memLevel,n.strategy);if(c!==h)throw new Error(r[c]);if(n.header&&d.deflateSetHeader(this.strm,n.header),n.dictionary){var v;if(v=typeof n.dictionary=="string"?i.string2buf(n.dictionary):p.call(n.dictionary)==="[object ArrayBuffer]"?new Uint8Array(n.dictionary):n.dictionary,(c=d.deflateSetDictionary(this.strm,v))!==h)throw new Error(r[c]);this._dict_set=!0}}function l(a,n){var c=new g(n);if(c.push(a,!0),c.err)throw c.msg||r[c.err];return c.result}g.prototype.push=function(a,n){var c,v,x=this.strm,k=this.options.chunkSize;if(this.ended)return!1;v=n===~~n?n:n===!0?4:0,typeof a=="string"?x.input=i.string2buf(a):p.call(a)==="[object ArrayBuffer]"?x.input=new Uint8Array(a):x.input=a,x.next_in=0,x.avail_in=x.input.length;do{if(x.avail_out===0&&(x.output=new b.Buf8(k),x.next_out=0,x.avail_out=k),(c=d.deflate(x,v))!==1&&c!==h)return this.onEnd(c),!(this.ended=!0);x.avail_out!==0&&(x.avail_in!==0||v!==4&&v!==2)||(this.options.to==="string"?this.onData(i.buf2binstring(b.shrinkBuf(x.output,x.next_out))):this.onData(b.shrinkBuf(x.output,x.next_out)))}while((0<x.avail_in||x.avail_out===0)&&c!==1);return v===4?(c=d.deflateEnd(this.strm),this.onEnd(c),this.ended=!0,c===h):v!==2||(this.onEnd(h),!(x.avail_out=0))},g.prototype.onData=function(a){this.chunks.push(a)},g.prototype.onEnd=function(a){a===h&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=b.flattenChunks(this.chunks)),this.chunks=[],this.err=a,this.msg=this.strm.msg},u.Deflate=g,u.deflate=l,u.deflateRaw=function(a,n){return(n=n||{}).raw=!0,l(a,n)},u.gzip=function(a,n){return(n=n||{}).gzip=!0,l(a,n)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(s,o,u){var d=s("./zlib/inflate"),b=s("./utils/common"),i=s("./utils/strings"),r=s("./zlib/constants"),f=s("./zlib/messages"),p=s("./zlib/zstream"),h=s("./zlib/gzheader"),_=Object.prototype.toString;function m(g){if(!(this instanceof m))return new m(g);this.options=b.assign({chunkSize:16384,windowBits:0,to:""},g||{});var l=this.options;l.raw&&0<=l.windowBits&&l.windowBits<16&&(l.windowBits=-l.windowBits,l.windowBits===0&&(l.windowBits=-15)),!(0<=l.windowBits&&l.windowBits<16)||g&&g.windowBits||(l.windowBits+=32),15<l.windowBits&&l.windowBits<48&&(15&l.windowBits)==0&&(l.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new p,this.strm.avail_out=0;var a=d.inflateInit2(this.strm,l.windowBits);if(a!==r.Z_OK)throw new Error(f[a]);this.header=new h,d.inflateGetHeader(this.strm,this.header)}function w(g,l){var a=new m(l);if(a.push(g,!0),a.err)throw a.msg||f[a.err];return a.result}m.prototype.push=function(g,l){var a,n,c,v,x,k,E=this.strm,C=this.options.chunkSize,A=this.options.dictionary,z=!1;if(this.ended)return!1;n=l===~~l?l:l===!0?r.Z_FINISH:r.Z_NO_FLUSH,typeof g=="string"?E.input=i.binstring2buf(g):_.call(g)==="[object ArrayBuffer]"?E.input=new Uint8Array(g):E.input=g,E.next_in=0,E.avail_in=E.input.length;do{if(E.avail_out===0&&(E.output=new b.Buf8(C),E.next_out=0,E.avail_out=C),(a=d.inflate(E,r.Z_NO_FLUSH))===r.Z_NEED_DICT&&A&&(k=typeof A=="string"?i.string2buf(A):_.call(A)==="[object ArrayBuffer]"?new Uint8Array(A):A,a=d.inflateSetDictionary(this.strm,k)),a===r.Z_BUF_ERROR&&z===!0&&(a=r.Z_OK,z=!1),a!==r.Z_STREAM_END&&a!==r.Z_OK)return this.onEnd(a),!(this.ended=!0);E.next_out&&(E.avail_out!==0&&a!==r.Z_STREAM_END&&(E.avail_in!==0||n!==r.Z_FINISH&&n!==r.Z_SYNC_FLUSH)||(this.options.to==="string"?(c=i.utf8border(E.output,E.next_out),v=E.next_out-c,x=i.buf2string(E.output,c),E.next_out=v,E.avail_out=C-v,v&&b.arraySet(E.output,E.output,c,v,0),this.onData(x)):this.onData(b.shrinkBuf(E.output,E.next_out)))),E.avail_in===0&&E.avail_out===0&&(z=!0)}while((0<E.avail_in||E.avail_out===0)&&a!==r.Z_STREAM_END);return a===r.Z_STREAM_END&&(n=r.Z_FINISH),n===r.Z_FINISH?(a=d.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,a===r.Z_OK):n!==r.Z_SYNC_FLUSH||(this.onEnd(r.Z_OK),!(E.avail_out=0))},m.prototype.onData=function(g){this.chunks.push(g)},m.prototype.onEnd=function(g){g===r.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=b.flattenChunks(this.chunks)),this.chunks=[],this.err=g,this.msg=this.strm.msg},u.Inflate=m,u.inflate=w,u.inflateRaw=function(g,l){return(l=l||{}).raw=!0,w(g,l)},u.ungzip=w},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(s,o,u){var d=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";u.assign=function(r){for(var f=Array.prototype.slice.call(arguments,1);f.length;){var p=f.shift();if(p){if(typeof p!="object")throw new TypeError(p+"must be non-object");for(var h in p)p.hasOwnProperty(h)&&(r[h]=p[h])}}return r},u.shrinkBuf=function(r,f){return r.length===f?r:r.subarray?r.subarray(0,f):(r.length=f,r)};var b={arraySet:function(r,f,p,h,_){if(f.subarray&&r.subarray)r.set(f.subarray(p,p+h),_);else for(var m=0;m<h;m++)r[_+m]=f[p+m]},flattenChunks:function(r){var f,p,h,_,m,w;for(f=h=0,p=r.length;f<p;f++)h+=r[f].length;for(w=new Uint8Array(h),f=_=0,p=r.length;f<p;f++)m=r[f],w.set(m,_),_+=m.length;return w}},i={arraySet:function(r,f,p,h,_){for(var m=0;m<h;m++)r[_+m]=f[p+m]},flattenChunks:function(r){return[].concat.apply([],r)}};u.setTyped=function(r){r?(u.Buf8=Uint8Array,u.Buf16=Uint16Array,u.Buf32=Int32Array,u.assign(u,b)):(u.Buf8=Array,u.Buf16=Array,u.Buf32=Array,u.assign(u,i))},u.setTyped(d)},{}],42:[function(s,o,u){var d=s("./common"),b=!0,i=!0;try{String.fromCharCode.apply(null,[0])}catch{b=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{i=!1}for(var r=new d.Buf8(256),f=0;f<256;f++)r[f]=252<=f?6:248<=f?5:240<=f?4:224<=f?3:192<=f?2:1;function p(h,_){if(_<65537&&(h.subarray&&i||!h.subarray&&b))return String.fromCharCode.apply(null,d.shrinkBuf(h,_));for(var m="",w=0;w<_;w++)m+=String.fromCharCode(h[w]);return m}r[254]=r[254]=1,u.string2buf=function(h){var _,m,w,g,l,a=h.length,n=0;for(g=0;g<a;g++)(64512&(m=h.charCodeAt(g)))==55296&&g+1<a&&(64512&(w=h.charCodeAt(g+1)))==56320&&(m=65536+(m-55296<<10)+(w-56320),g++),n+=m<128?1:m<2048?2:m<65536?3:4;for(_=new d.Buf8(n),g=l=0;l<n;g++)(64512&(m=h.charCodeAt(g)))==55296&&g+1<a&&(64512&(w=h.charCodeAt(g+1)))==56320&&(m=65536+(m-55296<<10)+(w-56320),g++),m<128?_[l++]=m:(m<2048?_[l++]=192|m>>>6:(m<65536?_[l++]=224|m>>>12:(_[l++]=240|m>>>18,_[l++]=128|m>>>12&63),_[l++]=128|m>>>6&63),_[l++]=128|63&m);return _},u.buf2binstring=function(h){return p(h,h.length)},u.binstring2buf=function(h){for(var _=new d.Buf8(h.length),m=0,w=_.length;m<w;m++)_[m]=h.charCodeAt(m);return _},u.buf2string=function(h,_){var m,w,g,l,a=_||h.length,n=new Array(2*a);for(m=w=0;m<a;)if((g=h[m++])<128)n[w++]=g;else if(4<(l=r[g]))n[w++]=65533,m+=l-1;else{for(g&=l===2?31:l===3?15:7;1<l&&m<a;)g=g<<6|63&h[m++],l--;1<l?n[w++]=65533:g<65536?n[w++]=g:(g-=65536,n[w++]=55296|g>>10&1023,n[w++]=56320|1023&g)}return p(n,w)},u.utf8border=function(h,_){var m;for((_=_||h.length)>h.length&&(_=h.length),m=_-1;0<=m&&(192&h[m])==128;)m--;return m<0||m===0?_:m+r[h[m]]>_?m:_}},{"./common":41}],43:[function(s,o,u){o.exports=function(d,b,i,r){for(var f=65535&d|0,p=d>>>16&65535|0,h=0;i!==0;){for(i-=h=2e3<i?2e3:i;p=p+(f=f+b[r++]|0)|0,--h;);f%=65521,p%=65521}return f|p<<16|0}},{}],44:[function(s,o,u){o.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(s,o,u){var d=(function(){for(var b,i=[],r=0;r<256;r++){b=r;for(var f=0;f<8;f++)b=1&b?3988292384^b>>>1:b>>>1;i[r]=b}return i})();o.exports=function(b,i,r,f){var p=d,h=f+r;b^=-1;for(var _=f;_<h;_++)b=b>>>8^p[255&(b^i[_])];return-1^b}},{}],46:[function(s,o,u){var d,b=s("../utils/common"),i=s("./trees"),r=s("./adler32"),f=s("./crc32"),p=s("./messages"),h=0,_=4,m=0,w=-2,g=-1,l=4,a=2,n=8,c=9,v=286,x=30,k=19,E=2*v+1,C=15,A=3,z=258,G=z+A+1,B=42,P=113,R=1,Q=2,se=3,X=4;function oe(y,O){return y.msg=p[O],O}function D(y){return(y<<1)-(4<y?9:0)}function U(y){for(var O=y.length;0<=--O;)y[O]=0}function S(y){var O=y.state,V=O.pending;V>y.avail_out&&(V=y.avail_out),V!==0&&(b.arraySet(y.output,O.pending_buf,O.pending_out,V,y.next_out),y.next_out+=V,O.pending_out+=V,y.total_out+=V,y.avail_out-=V,O.pending-=V,O.pending===0&&(O.pending_out=0))}function T(y,O){i._tr_flush_block(y,0<=y.block_start?y.block_start:-1,y.strstart-y.block_start,O),y.block_start=y.strstart,S(y.strm)}function K(y,O){y.pending_buf[y.pending++]=O}function Y(y,O){y.pending_buf[y.pending++]=O>>>8&255,y.pending_buf[y.pending++]=255&O}function ne(y,O){var V,I,$=y.max_chain_length,Z=y.strstart,J=y.prev_length,N=y.nice_match,F=y.strstart>y.w_size-G?y.strstart-(y.w_size-G):0,j=y.window,ie=y.w_mask,re=y.prev,le=y.strstart+z,me=j[Z+J-1],de=j[Z+J];y.prev_length>=y.good_match&&($>>=2),N>y.lookahead&&(N=y.lookahead);do if(j[(V=O)+J]===de&&j[V+J-1]===me&&j[V]===j[Z]&&j[++V]===j[Z+1]){Z+=2,V++;do;while(j[++Z]===j[++V]&&j[++Z]===j[++V]&&j[++Z]===j[++V]&&j[++Z]===j[++V]&&j[++Z]===j[++V]&&j[++Z]===j[++V]&&j[++Z]===j[++V]&&j[++Z]===j[++V]&&Z<le);if(I=z-(le-Z),Z=le-z,J<I){if(y.match_start=O,N<=(J=I))break;me=j[Z+J-1],de=j[Z+J]}}while((O=re[O&ie])>F&&--$!=0);return J<=y.lookahead?J:y.lookahead}function ae(y){var O,V,I,$,Z,J,N,F,j,ie,re=y.w_size;do{if($=y.window_size-y.lookahead-y.strstart,y.strstart>=re+(re-G)){for(b.arraySet(y.window,y.window,re,re,0),y.match_start-=re,y.strstart-=re,y.block_start-=re,O=V=y.hash_size;I=y.head[--O],y.head[O]=re<=I?I-re:0,--V;);for(O=V=re;I=y.prev[--O],y.prev[O]=re<=I?I-re:0,--V;);$+=re}if(y.strm.avail_in===0)break;if(J=y.strm,N=y.window,F=y.strstart+y.lookahead,j=$,ie=void 0,ie=J.avail_in,j<ie&&(ie=j),V=ie===0?0:(J.avail_in-=ie,b.arraySet(N,J.input,J.next_in,ie,F),J.state.wrap===1?J.adler=r(J.adler,N,ie,F):J.state.wrap===2&&(J.adler=f(J.adler,N,ie,F)),J.next_in+=ie,J.total_in+=ie,ie),y.lookahead+=V,y.lookahead+y.insert>=A)for(Z=y.strstart-y.insert,y.ins_h=y.window[Z],y.ins_h=(y.ins_h<<y.hash_shift^y.window[Z+1])&y.hash_mask;y.insert&&(y.ins_h=(y.ins_h<<y.hash_shift^y.window[Z+A-1])&y.hash_mask,y.prev[Z&y.w_mask]=y.head[y.ins_h],y.head[y.ins_h]=Z,Z++,y.insert--,!(y.lookahead+y.insert<A)););}while(y.lookahead<G&&y.strm.avail_in!==0)}function W(y,O){for(var V,I;;){if(y.lookahead<G){if(ae(y),y.lookahead<G&&O===h)return R;if(y.lookahead===0)break}if(V=0,y.lookahead>=A&&(y.ins_h=(y.ins_h<<y.hash_shift^y.window[y.strstart+A-1])&y.hash_mask,V=y.prev[y.strstart&y.w_mask]=y.head[y.ins_h],y.head[y.ins_h]=y.strstart),V!==0&&y.strstart-V<=y.w_size-G&&(y.match_length=ne(y,V)),y.match_length>=A)if(I=i._tr_tally(y,y.strstart-y.match_start,y.match_length-A),y.lookahead-=y.match_length,y.match_length<=y.max_lazy_match&&y.lookahead>=A){for(y.match_length--;y.strstart++,y.ins_h=(y.ins_h<<y.hash_shift^y.window[y.strstart+A-1])&y.hash_mask,V=y.prev[y.strstart&y.w_mask]=y.head[y.ins_h],y.head[y.ins_h]=y.strstart,--y.match_length!=0;);y.strstart++}else y.strstart+=y.match_length,y.match_length=0,y.ins_h=y.window[y.strstart],y.ins_h=(y.ins_h<<y.hash_shift^y.window[y.strstart+1])&y.hash_mask;else I=i._tr_tally(y,0,y.window[y.strstart]),y.lookahead--,y.strstart++;if(I&&(T(y,!1),y.strm.avail_out===0))return R}return y.insert=y.strstart<A-1?y.strstart:A-1,O===_?(T(y,!0),y.strm.avail_out===0?se:X):y.last_lit&&(T(y,!1),y.strm.avail_out===0)?R:Q}function L(y,O){for(var V,I,$;;){if(y.lookahead<G){if(ae(y),y.lookahead<G&&O===h)return R;if(y.lookahead===0)break}if(V=0,y.lookahead>=A&&(y.ins_h=(y.ins_h<<y.hash_shift^y.window[y.strstart+A-1])&y.hash_mask,V=y.prev[y.strstart&y.w_mask]=y.head[y.ins_h],y.head[y.ins_h]=y.strstart),y.prev_length=y.match_length,y.prev_match=y.match_start,y.match_length=A-1,V!==0&&y.prev_length<y.max_lazy_match&&y.strstart-V<=y.w_size-G&&(y.match_length=ne(y,V),y.match_length<=5&&(y.strategy===1||y.match_length===A&&4096<y.strstart-y.match_start)&&(y.match_length=A-1)),y.prev_length>=A&&y.match_length<=y.prev_length){for($=y.strstart+y.lookahead-A,I=i._tr_tally(y,y.strstart-1-y.prev_match,y.prev_length-A),y.lookahead-=y.prev_length-1,y.prev_length-=2;++y.strstart<=$&&(y.ins_h=(y.ins_h<<y.hash_shift^y.window[y.strstart+A-1])&y.hash_mask,V=y.prev[y.strstart&y.w_mask]=y.head[y.ins_h],y.head[y.ins_h]=y.strstart),--y.prev_length!=0;);if(y.match_available=0,y.match_length=A-1,y.strstart++,I&&(T(y,!1),y.strm.avail_out===0))return R}else if(y.match_available){if((I=i._tr_tally(y,0,y.window[y.strstart-1]))&&T(y,!1),y.strstart++,y.lookahead--,y.strm.avail_out===0)return R}else y.match_available=1,y.strstart++,y.lookahead--}return y.match_available&&(I=i._tr_tally(y,0,y.window[y.strstart-1]),y.match_available=0),y.insert=y.strstart<A-1?y.strstart:A-1,O===_?(T(y,!0),y.strm.avail_out===0?se:X):y.last_lit&&(T(y,!1),y.strm.avail_out===0)?R:Q}function ee(y,O,V,I,$){this.good_length=y,this.max_lazy=O,this.nice_length=V,this.max_chain=I,this.func=$}function te(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=n,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new b.Buf16(2*E),this.dyn_dtree=new b.Buf16(2*(2*x+1)),this.bl_tree=new b.Buf16(2*(2*k+1)),U(this.dyn_ltree),U(this.dyn_dtree),U(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new b.Buf16(C+1),this.heap=new b.Buf16(2*v+1),U(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new b.Buf16(2*v+1),U(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function he(y){var O;return y&&y.state?(y.total_in=y.total_out=0,y.data_type=a,(O=y.state).pending=0,O.pending_out=0,O.wrap<0&&(O.wrap=-O.wrap),O.status=O.wrap?B:P,y.adler=O.wrap===2?0:1,O.last_flush=h,i._tr_init(O),m):oe(y,w)}function H(y){var O=he(y);return O===m&&(function(V){V.window_size=2*V.w_size,U(V.head),V.max_lazy_match=d[V.level].max_lazy,V.good_match=d[V.level].good_length,V.nice_match=d[V.level].nice_length,V.max_chain_length=d[V.level].max_chain,V.strstart=0,V.block_start=0,V.lookahead=0,V.insert=0,V.match_length=V.prev_length=A-1,V.match_available=0,V.ins_h=0})(y.state),O}function q(y,O,V,I,$,Z){if(!y)return w;var J=1;if(O===g&&(O=6),I<0?(J=0,I=-I):15<I&&(J=2,I-=16),$<1||c<$||V!==n||I<8||15<I||O<0||9<O||Z<0||l<Z)return oe(y,w);I===8&&(I=9);var N=new te;return(y.state=N).strm=y,N.wrap=J,N.gzhead=null,N.w_bits=I,N.w_size=1<<N.w_bits,N.w_mask=N.w_size-1,N.hash_bits=$+7,N.hash_size=1<<N.hash_bits,N.hash_mask=N.hash_size-1,N.hash_shift=~~((N.hash_bits+A-1)/A),N.window=new b.Buf8(2*N.w_size),N.head=new b.Buf16(N.hash_size),N.prev=new b.Buf16(N.w_size),N.lit_bufsize=1<<$+6,N.pending_buf_size=4*N.lit_bufsize,N.pending_buf=new b.Buf8(N.pending_buf_size),N.d_buf=1*N.lit_bufsize,N.l_buf=3*N.lit_bufsize,N.level=O,N.strategy=Z,N.method=V,H(y)}d=[new ee(0,0,0,0,function(y,O){var V=65535;for(V>y.pending_buf_size-5&&(V=y.pending_buf_size-5);;){if(y.lookahead<=1){if(ae(y),y.lookahead===0&&O===h)return R;if(y.lookahead===0)break}y.strstart+=y.lookahead,y.lookahead=0;var I=y.block_start+V;if((y.strstart===0||y.strstart>=I)&&(y.lookahead=y.strstart-I,y.strstart=I,T(y,!1),y.strm.avail_out===0)||y.strstart-y.block_start>=y.w_size-G&&(T(y,!1),y.strm.avail_out===0))return R}return y.insert=0,O===_?(T(y,!0),y.strm.avail_out===0?se:X):(y.strstart>y.block_start&&(T(y,!1),y.strm.avail_out),R)}),new ee(4,4,8,4,W),new ee(4,5,16,8,W),new ee(4,6,32,32,W),new ee(4,4,16,16,L),new ee(8,16,32,32,L),new ee(8,16,128,128,L),new ee(8,32,128,256,L),new ee(32,128,258,1024,L),new ee(32,258,258,4096,L)],u.deflateInit=function(y,O){return q(y,O,n,15,8,0)},u.deflateInit2=q,u.deflateReset=H,u.deflateResetKeep=he,u.deflateSetHeader=function(y,O){return y&&y.state?y.state.wrap!==2?w:(y.state.gzhead=O,m):w},u.deflate=function(y,O){var V,I,$,Z;if(!y||!y.state||5<O||O<0)return y?oe(y,w):w;if(I=y.state,!y.output||!y.input&&y.avail_in!==0||I.status===666&&O!==_)return oe(y,y.avail_out===0?-5:w);if(I.strm=y,V=I.last_flush,I.last_flush=O,I.status===B)if(I.wrap===2)y.adler=0,K(I,31),K(I,139),K(I,8),I.gzhead?(K(I,(I.gzhead.text?1:0)+(I.gzhead.hcrc?2:0)+(I.gzhead.extra?4:0)+(I.gzhead.name?8:0)+(I.gzhead.comment?16:0)),K(I,255&I.gzhead.time),K(I,I.gzhead.time>>8&255),K(I,I.gzhead.time>>16&255),K(I,I.gzhead.time>>24&255),K(I,I.level===9?2:2<=I.strategy||I.level<2?4:0),K(I,255&I.gzhead.os),I.gzhead.extra&&I.gzhead.extra.length&&(K(I,255&I.gzhead.extra.length),K(I,I.gzhead.extra.length>>8&255)),I.gzhead.hcrc&&(y.adler=f(y.adler,I.pending_buf,I.pending,0)),I.gzindex=0,I.status=69):(K(I,0),K(I,0),K(I,0),K(I,0),K(I,0),K(I,I.level===9?2:2<=I.strategy||I.level<2?4:0),K(I,3),I.status=P);else{var J=n+(I.w_bits-8<<4)<<8;J|=(2<=I.strategy||I.level<2?0:I.level<6?1:I.level===6?2:3)<<6,I.strstart!==0&&(J|=32),J+=31-J%31,I.status=P,Y(I,J),I.strstart!==0&&(Y(I,y.adler>>>16),Y(I,65535&y.adler)),y.adler=1}if(I.status===69)if(I.gzhead.extra){for($=I.pending;I.gzindex<(65535&I.gzhead.extra.length)&&(I.pending!==I.pending_buf_size||(I.gzhead.hcrc&&I.pending>$&&(y.adler=f(y.adler,I.pending_buf,I.pending-$,$)),S(y),$=I.pending,I.pending!==I.pending_buf_size));)K(I,255&I.gzhead.extra[I.gzindex]),I.gzindex++;I.gzhead.hcrc&&I.pending>$&&(y.adler=f(y.adler,I.pending_buf,I.pending-$,$)),I.gzindex===I.gzhead.extra.length&&(I.gzindex=0,I.status=73)}else I.status=73;if(I.status===73)if(I.gzhead.name){$=I.pending;do{if(I.pending===I.pending_buf_size&&(I.gzhead.hcrc&&I.pending>$&&(y.adler=f(y.adler,I.pending_buf,I.pending-$,$)),S(y),$=I.pending,I.pending===I.pending_buf_size)){Z=1;break}Z=I.gzindex<I.gzhead.name.length?255&I.gzhead.name.charCodeAt(I.gzindex++):0,K(I,Z)}while(Z!==0);I.gzhead.hcrc&&I.pending>$&&(y.adler=f(y.adler,I.pending_buf,I.pending-$,$)),Z===0&&(I.gzindex=0,I.status=91)}else I.status=91;if(I.status===91)if(I.gzhead.comment){$=I.pending;do{if(I.pending===I.pending_buf_size&&(I.gzhead.hcrc&&I.pending>$&&(y.adler=f(y.adler,I.pending_buf,I.pending-$,$)),S(y),$=I.pending,I.pending===I.pending_buf_size)){Z=1;break}Z=I.gzindex<I.gzhead.comment.length?255&I.gzhead.comment.charCodeAt(I.gzindex++):0,K(I,Z)}while(Z!==0);I.gzhead.hcrc&&I.pending>$&&(y.adler=f(y.adler,I.pending_buf,I.pending-$,$)),Z===0&&(I.status=103)}else I.status=103;if(I.status===103&&(I.gzhead.hcrc?(I.pending+2>I.pending_buf_size&&S(y),I.pending+2<=I.pending_buf_size&&(K(I,255&y.adler),K(I,y.adler>>8&255),y.adler=0,I.status=P)):I.status=P),I.pending!==0){if(S(y),y.avail_out===0)return I.last_flush=-1,m}else if(y.avail_in===0&&D(O)<=D(V)&&O!==_)return oe(y,-5);if(I.status===666&&y.avail_in!==0)return oe(y,-5);if(y.avail_in!==0||I.lookahead!==0||O!==h&&I.status!==666){var N=I.strategy===2?(function(F,j){for(var ie;;){if(F.lookahead===0&&(ae(F),F.lookahead===0)){if(j===h)return R;break}if(F.match_length=0,ie=i._tr_tally(F,0,F.window[F.strstart]),F.lookahead--,F.strstart++,ie&&(T(F,!1),F.strm.avail_out===0))return R}return F.insert=0,j===_?(T(F,!0),F.strm.avail_out===0?se:X):F.last_lit&&(T(F,!1),F.strm.avail_out===0)?R:Q})(I,O):I.strategy===3?(function(F,j){for(var ie,re,le,me,de=F.window;;){if(F.lookahead<=z){if(ae(F),F.lookahead<=z&&j===h)return R;if(F.lookahead===0)break}if(F.match_length=0,F.lookahead>=A&&0<F.strstart&&(re=de[le=F.strstart-1])===de[++le]&&re===de[++le]&&re===de[++le]){me=F.strstart+z;do;while(re===de[++le]&&re===de[++le]&&re===de[++le]&&re===de[++le]&&re===de[++le]&&re===de[++le]&&re===de[++le]&&re===de[++le]&&le<me);F.match_length=z-(me-le),F.match_length>F.lookahead&&(F.match_length=F.lookahead)}if(F.match_length>=A?(ie=i._tr_tally(F,1,F.match_length-A),F.lookahead-=F.match_length,F.strstart+=F.match_length,F.match_length=0):(ie=i._tr_tally(F,0,F.window[F.strstart]),F.lookahead--,F.strstart++),ie&&(T(F,!1),F.strm.avail_out===0))return R}return F.insert=0,j===_?(T(F,!0),F.strm.avail_out===0?se:X):F.last_lit&&(T(F,!1),F.strm.avail_out===0)?R:Q})(I,O):d[I.level].func(I,O);if(N!==se&&N!==X||(I.status=666),N===R||N===se)return y.avail_out===0&&(I.last_flush=-1),m;if(N===Q&&(O===1?i._tr_align(I):O!==5&&(i._tr_stored_block(I,0,0,!1),O===3&&(U(I.head),I.lookahead===0&&(I.strstart=0,I.block_start=0,I.insert=0))),S(y),y.avail_out===0))return I.last_flush=-1,m}return O!==_?m:I.wrap<=0?1:(I.wrap===2?(K(I,255&y.adler),K(I,y.adler>>8&255),K(I,y.adler>>16&255),K(I,y.adler>>24&255),K(I,255&y.total_in),K(I,y.total_in>>8&255),K(I,y.total_in>>16&255),K(I,y.total_in>>24&255)):(Y(I,y.adler>>>16),Y(I,65535&y.adler)),S(y),0<I.wrap&&(I.wrap=-I.wrap),I.pending!==0?m:1)},u.deflateEnd=function(y){var O;return y&&y.state?(O=y.state.status)!==B&&O!==69&&O!==73&&O!==91&&O!==103&&O!==P&&O!==666?oe(y,w):(y.state=null,O===P?oe(y,-3):m):w},u.deflateSetDictionary=function(y,O){var V,I,$,Z,J,N,F,j,ie=O.length;if(!y||!y.state||(Z=(V=y.state).wrap)===2||Z===1&&V.status!==B||V.lookahead)return w;for(Z===1&&(y.adler=r(y.adler,O,ie,0)),V.wrap=0,ie>=V.w_size&&(Z===0&&(U(V.head),V.strstart=0,V.block_start=0,V.insert=0),j=new b.Buf8(V.w_size),b.arraySet(j,O,ie-V.w_size,V.w_size,0),O=j,ie=V.w_size),J=y.avail_in,N=y.next_in,F=y.input,y.avail_in=ie,y.next_in=0,y.input=O,ae(V);V.lookahead>=A;){for(I=V.strstart,$=V.lookahead-(A-1);V.ins_h=(V.ins_h<<V.hash_shift^V.window[I+A-1])&V.hash_mask,V.prev[I&V.w_mask]=V.head[V.ins_h],V.head[V.ins_h]=I,I++,--$;);V.strstart=I,V.lookahead=A-1,ae(V)}return V.strstart+=V.lookahead,V.block_start=V.strstart,V.insert=V.lookahead,V.lookahead=0,V.match_length=V.prev_length=A-1,V.match_available=0,y.next_in=N,y.input=F,y.avail_in=J,V.wrap=Z,m},u.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(s,o,u){o.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(s,o,u){o.exports=function(d,b){var i,r,f,p,h,_,m,w,g,l,a,n,c,v,x,k,E,C,A,z,G,B,P,R,Q;i=d.state,r=d.next_in,R=d.input,f=r+(d.avail_in-5),p=d.next_out,Q=d.output,h=p-(b-d.avail_out),_=p+(d.avail_out-257),m=i.dmax,w=i.wsize,g=i.whave,l=i.wnext,a=i.window,n=i.hold,c=i.bits,v=i.lencode,x=i.distcode,k=(1<<i.lenbits)-1,E=(1<<i.distbits)-1;e:do{c<15&&(n+=R[r++]<<c,c+=8,n+=R[r++]<<c,c+=8),C=v[n&k];t:for(;;){if(n>>>=A=C>>>24,c-=A,(A=C>>>16&255)===0)Q[p++]=65535&C;else{if(!(16&A)){if((64&A)==0){C=v[(65535&C)+(n&(1<<A)-1)];continue t}if(32&A){i.mode=12;break e}d.msg="invalid literal/length code",i.mode=30;break e}z=65535&C,(A&=15)&&(c<A&&(n+=R[r++]<<c,c+=8),z+=n&(1<<A)-1,n>>>=A,c-=A),c<15&&(n+=R[r++]<<c,c+=8,n+=R[r++]<<c,c+=8),C=x[n&E];s:for(;;){if(n>>>=A=C>>>24,c-=A,!(16&(A=C>>>16&255))){if((64&A)==0){C=x[(65535&C)+(n&(1<<A)-1)];continue s}d.msg="invalid distance code",i.mode=30;break e}if(G=65535&C,c<(A&=15)&&(n+=R[r++]<<c,(c+=8)<A&&(n+=R[r++]<<c,c+=8)),m<(G+=n&(1<<A)-1)){d.msg="invalid distance too far back",i.mode=30;break e}if(n>>>=A,c-=A,(A=p-h)<G){if(g<(A=G-A)&&i.sane){d.msg="invalid distance too far back",i.mode=30;break e}if(P=a,(B=0)===l){if(B+=w-A,A<z){for(z-=A;Q[p++]=a[B++],--A;);B=p-G,P=Q}}else if(l<A){if(B+=w+l-A,(A-=l)<z){for(z-=A;Q[p++]=a[B++],--A;);if(B=0,l<z){for(z-=A=l;Q[p++]=a[B++],--A;);B=p-G,P=Q}}}else if(B+=l-A,A<z){for(z-=A;Q[p++]=a[B++],--A;);B=p-G,P=Q}for(;2<z;)Q[p++]=P[B++],Q[p++]=P[B++],Q[p++]=P[B++],z-=3;z&&(Q[p++]=P[B++],1<z&&(Q[p++]=P[B++]))}else{for(B=p-G;Q[p++]=Q[B++],Q[p++]=Q[B++],Q[p++]=Q[B++],2<(z-=3););z&&(Q[p++]=Q[B++],1<z&&(Q[p++]=Q[B++]))}break}}break}}while(r<f&&p<_);r-=z=c>>3,n&=(1<<(c-=z<<3))-1,d.next_in=r,d.next_out=p,d.avail_in=r<f?f-r+5:5-(r-f),d.avail_out=p<_?_-p+257:257-(p-_),i.hold=n,i.bits=c}},{}],49:[function(s,o,u){var d=s("../utils/common"),b=s("./adler32"),i=s("./crc32"),r=s("./inffast"),f=s("./inftrees"),p=1,h=2,_=0,m=-2,w=1,g=852,l=592;function a(B){return(B>>>24&255)+(B>>>8&65280)+((65280&B)<<8)+((255&B)<<24)}function n(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new d.Buf16(320),this.work=new d.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function c(B){var P;return B&&B.state?(P=B.state,B.total_in=B.total_out=P.total=0,B.msg="",P.wrap&&(B.adler=1&P.wrap),P.mode=w,P.last=0,P.havedict=0,P.dmax=32768,P.head=null,P.hold=0,P.bits=0,P.lencode=P.lendyn=new d.Buf32(g),P.distcode=P.distdyn=new d.Buf32(l),P.sane=1,P.back=-1,_):m}function v(B){var P;return B&&B.state?((P=B.state).wsize=0,P.whave=0,P.wnext=0,c(B)):m}function x(B,P){var R,Q;return B&&B.state?(Q=B.state,P<0?(R=0,P=-P):(R=1+(P>>4),P<48&&(P&=15)),P&&(P<8||15<P)?m:(Q.window!==null&&Q.wbits!==P&&(Q.window=null),Q.wrap=R,Q.wbits=P,v(B))):m}function k(B,P){var R,Q;return B?(Q=new n,(B.state=Q).window=null,(R=x(B,P))!==_&&(B.state=null),R):m}var E,C,A=!0;function z(B){if(A){var P;for(E=new d.Buf32(512),C=new d.Buf32(32),P=0;P<144;)B.lens[P++]=8;for(;P<256;)B.lens[P++]=9;for(;P<280;)B.lens[P++]=7;for(;P<288;)B.lens[P++]=8;for(f(p,B.lens,0,288,E,0,B.work,{bits:9}),P=0;P<32;)B.lens[P++]=5;f(h,B.lens,0,32,C,0,B.work,{bits:5}),A=!1}B.lencode=E,B.lenbits=9,B.distcode=C,B.distbits=5}function G(B,P,R,Q){var se,X=B.state;return X.window===null&&(X.wsize=1<<X.wbits,X.wnext=0,X.whave=0,X.window=new d.Buf8(X.wsize)),Q>=X.wsize?(d.arraySet(X.window,P,R-X.wsize,X.wsize,0),X.wnext=0,X.whave=X.wsize):(Q<(se=X.wsize-X.wnext)&&(se=Q),d.arraySet(X.window,P,R-Q,se,X.wnext),(Q-=se)?(d.arraySet(X.window,P,R-Q,Q,0),X.wnext=Q,X.whave=X.wsize):(X.wnext+=se,X.wnext===X.wsize&&(X.wnext=0),X.whave<X.wsize&&(X.whave+=se))),0}u.inflateReset=v,u.inflateReset2=x,u.inflateResetKeep=c,u.inflateInit=function(B){return k(B,15)},u.inflateInit2=k,u.inflate=function(B,P){var R,Q,se,X,oe,D,U,S,T,K,Y,ne,ae,W,L,ee,te,he,H,q,y,O,V,I,$=0,Z=new d.Buf8(4),J=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!B||!B.state||!B.output||!B.input&&B.avail_in!==0)return m;(R=B.state).mode===12&&(R.mode=13),oe=B.next_out,se=B.output,U=B.avail_out,X=B.next_in,Q=B.input,D=B.avail_in,S=R.hold,T=R.bits,K=D,Y=U,O=_;e:for(;;)switch(R.mode){case w:if(R.wrap===0){R.mode=13;break}for(;T<16;){if(D===0)break e;D--,S+=Q[X++]<<T,T+=8}if(2&R.wrap&&S===35615){Z[R.check=0]=255&S,Z[1]=S>>>8&255,R.check=i(R.check,Z,2,0),T=S=0,R.mode=2;break}if(R.flags=0,R.head&&(R.head.done=!1),!(1&R.wrap)||(((255&S)<<8)+(S>>8))%31){B.msg="incorrect header check",R.mode=30;break}if((15&S)!=8){B.msg="unknown compression method",R.mode=30;break}if(T-=4,y=8+(15&(S>>>=4)),R.wbits===0)R.wbits=y;else if(y>R.wbits){B.msg="invalid window size",R.mode=30;break}R.dmax=1<<y,B.adler=R.check=1,R.mode=512&S?10:12,T=S=0;break;case 2:for(;T<16;){if(D===0)break e;D--,S+=Q[X++]<<T,T+=8}if(R.flags=S,(255&R.flags)!=8){B.msg="unknown compression method",R.mode=30;break}if(57344&R.flags){B.msg="unknown header flags set",R.mode=30;break}R.head&&(R.head.text=S>>8&1),512&R.flags&&(Z[0]=255&S,Z[1]=S>>>8&255,R.check=i(R.check,Z,2,0)),T=S=0,R.mode=3;case 3:for(;T<32;){if(D===0)break e;D--,S+=Q[X++]<<T,T+=8}R.head&&(R.head.time=S),512&R.flags&&(Z[0]=255&S,Z[1]=S>>>8&255,Z[2]=S>>>16&255,Z[3]=S>>>24&255,R.check=i(R.check,Z,4,0)),T=S=0,R.mode=4;case 4:for(;T<16;){if(D===0)break e;D--,S+=Q[X++]<<T,T+=8}R.head&&(R.head.xflags=255&S,R.head.os=S>>8),512&R.flags&&(Z[0]=255&S,Z[1]=S>>>8&255,R.check=i(R.check,Z,2,0)),T=S=0,R.mode=5;case 5:if(1024&R.flags){for(;T<16;){if(D===0)break e;D--,S+=Q[X++]<<T,T+=8}R.length=S,R.head&&(R.head.extra_len=S),512&R.flags&&(Z[0]=255&S,Z[1]=S>>>8&255,R.check=i(R.check,Z,2,0)),T=S=0}else R.head&&(R.head.extra=null);R.mode=6;case 6:if(1024&R.flags&&(D<(ne=R.length)&&(ne=D),ne&&(R.head&&(y=R.head.extra_len-R.length,R.head.extra||(R.head.extra=new Array(R.head.extra_len)),d.arraySet(R.head.extra,Q,X,ne,y)),512&R.flags&&(R.check=i(R.check,Q,ne,X)),D-=ne,X+=ne,R.length-=ne),R.length))break e;R.length=0,R.mode=7;case 7:if(2048&R.flags){if(D===0)break e;for(ne=0;y=Q[X+ne++],R.head&&y&&R.length<65536&&(R.head.name+=String.fromCharCode(y)),y&&ne<D;);if(512&R.flags&&(R.check=i(R.check,Q,ne,X)),D-=ne,X+=ne,y)break e}else R.head&&(R.head.name=null);R.length=0,R.mode=8;case 8:if(4096&R.flags){if(D===0)break e;for(ne=0;y=Q[X+ne++],R.head&&y&&R.length<65536&&(R.head.comment+=String.fromCharCode(y)),y&&ne<D;);if(512&R.flags&&(R.check=i(R.check,Q,ne,X)),D-=ne,X+=ne,y)break e}else R.head&&(R.head.comment=null);R.mode=9;case 9:if(512&R.flags){for(;T<16;){if(D===0)break e;D--,S+=Q[X++]<<T,T+=8}if(S!==(65535&R.check)){B.msg="header crc mismatch",R.mode=30;break}T=S=0}R.head&&(R.head.hcrc=R.flags>>9&1,R.head.done=!0),B.adler=R.check=0,R.mode=12;break;case 10:for(;T<32;){if(D===0)break e;D--,S+=Q[X++]<<T,T+=8}B.adler=R.check=a(S),T=S=0,R.mode=11;case 11:if(R.havedict===0)return B.next_out=oe,B.avail_out=U,B.next_in=X,B.avail_in=D,R.hold=S,R.bits=T,2;B.adler=R.check=1,R.mode=12;case 12:if(P===5||P===6)break e;case 13:if(R.last){S>>>=7&T,T-=7&T,R.mode=27;break}for(;T<3;){if(D===0)break e;D--,S+=Q[X++]<<T,T+=8}switch(R.last=1&S,T-=1,3&(S>>>=1)){case 0:R.mode=14;break;case 1:if(z(R),R.mode=20,P!==6)break;S>>>=2,T-=2;break e;case 2:R.mode=17;break;case 3:B.msg="invalid block type",R.mode=30}S>>>=2,T-=2;break;case 14:for(S>>>=7&T,T-=7&T;T<32;){if(D===0)break e;D--,S+=Q[X++]<<T,T+=8}if((65535&S)!=(S>>>16^65535)){B.msg="invalid stored block lengths",R.mode=30;break}if(R.length=65535&S,T=S=0,R.mode=15,P===6)break e;case 15:R.mode=16;case 16:if(ne=R.length){if(D<ne&&(ne=D),U<ne&&(ne=U),ne===0)break e;d.arraySet(se,Q,X,ne,oe),D-=ne,X+=ne,U-=ne,oe+=ne,R.length-=ne;break}R.mode=12;break;case 17:for(;T<14;){if(D===0)break e;D--,S+=Q[X++]<<T,T+=8}if(R.nlen=257+(31&S),S>>>=5,T-=5,R.ndist=1+(31&S),S>>>=5,T-=5,R.ncode=4+(15&S),S>>>=4,T-=4,286<R.nlen||30<R.ndist){B.msg="too many length or distance symbols",R.mode=30;break}R.have=0,R.mode=18;case 18:for(;R.have<R.ncode;){for(;T<3;){if(D===0)break e;D--,S+=Q[X++]<<T,T+=8}R.lens[J[R.have++]]=7&S,S>>>=3,T-=3}for(;R.have<19;)R.lens[J[R.have++]]=0;if(R.lencode=R.lendyn,R.lenbits=7,V={bits:R.lenbits},O=f(0,R.lens,0,19,R.lencode,0,R.work,V),R.lenbits=V.bits,O){B.msg="invalid code lengths set",R.mode=30;break}R.have=0,R.mode=19;case 19:for(;R.have<R.nlen+R.ndist;){for(;ee=($=R.lencode[S&(1<<R.lenbits)-1])>>>16&255,te=65535&$,!((L=$>>>24)<=T);){if(D===0)break e;D--,S+=Q[X++]<<T,T+=8}if(te<16)S>>>=L,T-=L,R.lens[R.have++]=te;else{if(te===16){for(I=L+2;T<I;){if(D===0)break e;D--,S+=Q[X++]<<T,T+=8}if(S>>>=L,T-=L,R.have===0){B.msg="invalid bit length repeat",R.mode=30;break}y=R.lens[R.have-1],ne=3+(3&S),S>>>=2,T-=2}else if(te===17){for(I=L+3;T<I;){if(D===0)break e;D--,S+=Q[X++]<<T,T+=8}T-=L,y=0,ne=3+(7&(S>>>=L)),S>>>=3,T-=3}else{for(I=L+7;T<I;){if(D===0)break e;D--,S+=Q[X++]<<T,T+=8}T-=L,y=0,ne=11+(127&(S>>>=L)),S>>>=7,T-=7}if(R.have+ne>R.nlen+R.ndist){B.msg="invalid bit length repeat",R.mode=30;break}for(;ne--;)R.lens[R.have++]=y}}if(R.mode===30)break;if(R.lens[256]===0){B.msg="invalid code -- missing end-of-block",R.mode=30;break}if(R.lenbits=9,V={bits:R.lenbits},O=f(p,R.lens,0,R.nlen,R.lencode,0,R.work,V),R.lenbits=V.bits,O){B.msg="invalid literal/lengths set",R.mode=30;break}if(R.distbits=6,R.distcode=R.distdyn,V={bits:R.distbits},O=f(h,R.lens,R.nlen,R.ndist,R.distcode,0,R.work,V),R.distbits=V.bits,O){B.msg="invalid distances set",R.mode=30;break}if(R.mode=20,P===6)break e;case 20:R.mode=21;case 21:if(6<=D&&258<=U){B.next_out=oe,B.avail_out=U,B.next_in=X,B.avail_in=D,R.hold=S,R.bits=T,r(B,Y),oe=B.next_out,se=B.output,U=B.avail_out,X=B.next_in,Q=B.input,D=B.avail_in,S=R.hold,T=R.bits,R.mode===12&&(R.back=-1);break}for(R.back=0;ee=($=R.lencode[S&(1<<R.lenbits)-1])>>>16&255,te=65535&$,!((L=$>>>24)<=T);){if(D===0)break e;D--,S+=Q[X++]<<T,T+=8}if(ee&&(240&ee)==0){for(he=L,H=ee,q=te;ee=($=R.lencode[q+((S&(1<<he+H)-1)>>he)])>>>16&255,te=65535&$,!(he+(L=$>>>24)<=T);){if(D===0)break e;D--,S+=Q[X++]<<T,T+=8}S>>>=he,T-=he,R.back+=he}if(S>>>=L,T-=L,R.back+=L,R.length=te,ee===0){R.mode=26;break}if(32&ee){R.back=-1,R.mode=12;break}if(64&ee){B.msg="invalid literal/length code",R.mode=30;break}R.extra=15&ee,R.mode=22;case 22:if(R.extra){for(I=R.extra;T<I;){if(D===0)break e;D--,S+=Q[X++]<<T,T+=8}R.length+=S&(1<<R.extra)-1,S>>>=R.extra,T-=R.extra,R.back+=R.extra}R.was=R.length,R.mode=23;case 23:for(;ee=($=R.distcode[S&(1<<R.distbits)-1])>>>16&255,te=65535&$,!((L=$>>>24)<=T);){if(D===0)break e;D--,S+=Q[X++]<<T,T+=8}if((240&ee)==0){for(he=L,H=ee,q=te;ee=($=R.distcode[q+((S&(1<<he+H)-1)>>he)])>>>16&255,te=65535&$,!(he+(L=$>>>24)<=T);){if(D===0)break e;D--,S+=Q[X++]<<T,T+=8}S>>>=he,T-=he,R.back+=he}if(S>>>=L,T-=L,R.back+=L,64&ee){B.msg="invalid distance code",R.mode=30;break}R.offset=te,R.extra=15&ee,R.mode=24;case 24:if(R.extra){for(I=R.extra;T<I;){if(D===0)break e;D--,S+=Q[X++]<<T,T+=8}R.offset+=S&(1<<R.extra)-1,S>>>=R.extra,T-=R.extra,R.back+=R.extra}if(R.offset>R.dmax){B.msg="invalid distance too far back",R.mode=30;break}R.mode=25;case 25:if(U===0)break e;if(ne=Y-U,R.offset>ne){if((ne=R.offset-ne)>R.whave&&R.sane){B.msg="invalid distance too far back",R.mode=30;break}ae=ne>R.wnext?(ne-=R.wnext,R.wsize-ne):R.wnext-ne,ne>R.length&&(ne=R.length),W=R.window}else W=se,ae=oe-R.offset,ne=R.length;for(U<ne&&(ne=U),U-=ne,R.length-=ne;se[oe++]=W[ae++],--ne;);R.length===0&&(R.mode=21);break;case 26:if(U===0)break e;se[oe++]=R.length,U--,R.mode=21;break;case 27:if(R.wrap){for(;T<32;){if(D===0)break e;D--,S|=Q[X++]<<T,T+=8}if(Y-=U,B.total_out+=Y,R.total+=Y,Y&&(B.adler=R.check=R.flags?i(R.check,se,Y,oe-Y):b(R.check,se,Y,oe-Y)),Y=U,(R.flags?S:a(S))!==R.check){B.msg="incorrect data check",R.mode=30;break}T=S=0}R.mode=28;case 28:if(R.wrap&&R.flags){for(;T<32;){if(D===0)break e;D--,S+=Q[X++]<<T,T+=8}if(S!==(4294967295&R.total)){B.msg="incorrect length check",R.mode=30;break}T=S=0}R.mode=29;case 29:O=1;break e;case 30:O=-3;break e;case 31:return-4;case 32:default:return m}return B.next_out=oe,B.avail_out=U,B.next_in=X,B.avail_in=D,R.hold=S,R.bits=T,(R.wsize||Y!==B.avail_out&&R.mode<30&&(R.mode<27||P!==4))&&G(B,B.output,B.next_out,Y-B.avail_out)?(R.mode=31,-4):(K-=B.avail_in,Y-=B.avail_out,B.total_in+=K,B.total_out+=Y,R.total+=Y,R.wrap&&Y&&(B.adler=R.check=R.flags?i(R.check,se,Y,B.next_out-Y):b(R.check,se,Y,B.next_out-Y)),B.data_type=R.bits+(R.last?64:0)+(R.mode===12?128:0)+(R.mode===20||R.mode===15?256:0),(K==0&&Y===0||P===4)&&O===_&&(O=-5),O)},u.inflateEnd=function(B){if(!B||!B.state)return m;var P=B.state;return P.window&&(P.window=null),B.state=null,_},u.inflateGetHeader=function(B,P){var R;return B&&B.state?(2&(R=B.state).wrap)==0?m:((R.head=P).done=!1,_):m},u.inflateSetDictionary=function(B,P){var R,Q=P.length;return B&&B.state?(R=B.state).wrap!==0&&R.mode!==11?m:R.mode===11&&b(1,P,Q,0)!==R.check?-3:G(B,P,Q,Q)?(R.mode=31,-4):(R.havedict=1,_):m},u.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(s,o,u){var d=s("../utils/common"),b=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],i=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],r=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],f=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];o.exports=function(p,h,_,m,w,g,l,a){var n,c,v,x,k,E,C,A,z,G=a.bits,B=0,P=0,R=0,Q=0,se=0,X=0,oe=0,D=0,U=0,S=0,T=null,K=0,Y=new d.Buf16(16),ne=new d.Buf16(16),ae=null,W=0;for(B=0;B<=15;B++)Y[B]=0;for(P=0;P<m;P++)Y[h[_+P]]++;for(se=G,Q=15;1<=Q&&Y[Q]===0;Q--);if(Q<se&&(se=Q),Q===0)return w[g++]=20971520,w[g++]=20971520,a.bits=1,0;for(R=1;R<Q&&Y[R]===0;R++);for(se<R&&(se=R),B=D=1;B<=15;B++)if(D<<=1,(D-=Y[B])<0)return-1;if(0<D&&(p===0||Q!==1))return-1;for(ne[1]=0,B=1;B<15;B++)ne[B+1]=ne[B]+Y[B];for(P=0;P<m;P++)h[_+P]!==0&&(l[ne[h[_+P]]++]=P);if(E=p===0?(T=ae=l,19):p===1?(T=b,K-=257,ae=i,W-=257,256):(T=r,ae=f,-1),B=R,k=g,oe=P=S=0,v=-1,x=(U=1<<(X=se))-1,p===1&&852<U||p===2&&592<U)return 1;for(;;){for(C=B-oe,z=l[P]<E?(A=0,l[P]):l[P]>E?(A=ae[W+l[P]],T[K+l[P]]):(A=96,0),n=1<<B-oe,R=c=1<<X;w[k+(S>>oe)+(c-=n)]=C<<24|A<<16|z|0,c!==0;);for(n=1<<B-1;S&n;)n>>=1;if(n!==0?(S&=n-1,S+=n):S=0,P++,--Y[B]==0){if(B===Q)break;B=h[_+l[P]]}if(se<B&&(S&x)!==v){for(oe===0&&(oe=se),k+=R,D=1<<(X=B-oe);X+oe<Q&&!((D-=Y[X+oe])<=0);)X++,D<<=1;if(U+=1<<X,p===1&&852<U||p===2&&592<U)return 1;w[v=S&x]=se<<24|X<<16|k-g|0}}return S!==0&&(w[k+S]=B-oe<<24|64<<16|0),a.bits=se,0}},{"../utils/common":41}],51:[function(s,o,u){o.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(s,o,u){var d=s("../utils/common"),b=0,i=1;function r($){for(var Z=$.length;0<=--Z;)$[Z]=0}var f=0,p=29,h=256,_=h+1+p,m=30,w=19,g=2*_+1,l=15,a=16,n=7,c=256,v=16,x=17,k=18,E=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],C=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],A=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],z=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],G=new Array(2*(_+2));r(G);var B=new Array(2*m);r(B);var P=new Array(512);r(P);var R=new Array(256);r(R);var Q=new Array(p);r(Q);var se,X,oe,D=new Array(m);function U($,Z,J,N,F){this.static_tree=$,this.extra_bits=Z,this.extra_base=J,this.elems=N,this.max_length=F,this.has_stree=$&&$.length}function S($,Z){this.dyn_tree=$,this.max_code=0,this.stat_desc=Z}function T($){return $<256?P[$]:P[256+($>>>7)]}function K($,Z){$.pending_buf[$.pending++]=255&Z,$.pending_buf[$.pending++]=Z>>>8&255}function Y($,Z,J){$.bi_valid>a-J?($.bi_buf|=Z<<$.bi_valid&65535,K($,$.bi_buf),$.bi_buf=Z>>a-$.bi_valid,$.bi_valid+=J-a):($.bi_buf|=Z<<$.bi_valid&65535,$.bi_valid+=J)}function ne($,Z,J){Y($,J[2*Z],J[2*Z+1])}function ae($,Z){for(var J=0;J|=1&$,$>>>=1,J<<=1,0<--Z;);return J>>>1}function W($,Z,J){var N,F,j=new Array(l+1),ie=0;for(N=1;N<=l;N++)j[N]=ie=ie+J[N-1]<<1;for(F=0;F<=Z;F++){var re=$[2*F+1];re!==0&&($[2*F]=ae(j[re]++,re))}}function L($){var Z;for(Z=0;Z<_;Z++)$.dyn_ltree[2*Z]=0;for(Z=0;Z<m;Z++)$.dyn_dtree[2*Z]=0;for(Z=0;Z<w;Z++)$.bl_tree[2*Z]=0;$.dyn_ltree[2*c]=1,$.opt_len=$.static_len=0,$.last_lit=$.matches=0}function ee($){8<$.bi_valid?K($,$.bi_buf):0<$.bi_valid&&($.pending_buf[$.pending++]=$.bi_buf),$.bi_buf=0,$.bi_valid=0}function te($,Z,J,N){var F=2*Z,j=2*J;return $[F]<$[j]||$[F]===$[j]&&N[Z]<=N[J]}function he($,Z,J){for(var N=$.heap[J],F=J<<1;F<=$.heap_len&&(F<$.heap_len&&te(Z,$.heap[F+1],$.heap[F],$.depth)&&F++,!te(Z,N,$.heap[F],$.depth));)$.heap[J]=$.heap[F],J=F,F<<=1;$.heap[J]=N}function H($,Z,J){var N,F,j,ie,re=0;if($.last_lit!==0)for(;N=$.pending_buf[$.d_buf+2*re]<<8|$.pending_buf[$.d_buf+2*re+1],F=$.pending_buf[$.l_buf+re],re++,N===0?ne($,F,Z):(ne($,(j=R[F])+h+1,Z),(ie=E[j])!==0&&Y($,F-=Q[j],ie),ne($,j=T(--N),J),(ie=C[j])!==0&&Y($,N-=D[j],ie)),re<$.last_lit;);ne($,c,Z)}function q($,Z){var J,N,F,j=Z.dyn_tree,ie=Z.stat_desc.static_tree,re=Z.stat_desc.has_stree,le=Z.stat_desc.elems,me=-1;for($.heap_len=0,$.heap_max=g,J=0;J<le;J++)j[2*J]!==0?($.heap[++$.heap_len]=me=J,$.depth[J]=0):j[2*J+1]=0;for(;$.heap_len<2;)j[2*(F=$.heap[++$.heap_len]=me<2?++me:0)]=1,$.depth[F]=0,$.opt_len--,re&&($.static_len-=ie[2*F+1]);for(Z.max_code=me,J=$.heap_len>>1;1<=J;J--)he($,j,J);for(F=le;J=$.heap[1],$.heap[1]=$.heap[$.heap_len--],he($,j,1),N=$.heap[1],$.heap[--$.heap_max]=J,$.heap[--$.heap_max]=N,j[2*F]=j[2*J]+j[2*N],$.depth[F]=($.depth[J]>=$.depth[N]?$.depth[J]:$.depth[N])+1,j[2*J+1]=j[2*N+1]=F,$.heap[1]=F++,he($,j,1),2<=$.heap_len;);$.heap[--$.heap_max]=$.heap[1],(function(de,Se){var Ee,xe,we,ke,We,$e,Me=Se.dyn_tree,et=Se.max_code,st=Se.stat_desc.static_tree,He=Se.stat_desc.has_stree,vt=Se.stat_desc.extra_bits,Et=Se.stat_desc.extra_base,at=Se.stat_desc.max_length,Ne=0;for(ke=0;ke<=l;ke++)de.bl_count[ke]=0;for(Me[2*de.heap[de.heap_max]+1]=0,Ee=de.heap_max+1;Ee<g;Ee++)at<(ke=Me[2*Me[2*(xe=de.heap[Ee])+1]+1]+1)&&(ke=at,Ne++),Me[2*xe+1]=ke,et<xe||(de.bl_count[ke]++,We=0,Et<=xe&&(We=vt[xe-Et]),$e=Me[2*xe],de.opt_len+=$e*(ke+We),He&&(de.static_len+=$e*(st[2*xe+1]+We)));if(Ne!==0){do{for(ke=at-1;de.bl_count[ke]===0;)ke--;de.bl_count[ke]--,de.bl_count[ke+1]+=2,de.bl_count[at]--,Ne-=2}while(0<Ne);for(ke=at;ke!==0;ke--)for(xe=de.bl_count[ke];xe!==0;)et<(we=de.heap[--Ee])||(Me[2*we+1]!==ke&&(de.opt_len+=(ke-Me[2*we+1])*Me[2*we],Me[2*we+1]=ke),xe--)}})($,Z),W(j,me,$.bl_count)}function y($,Z,J){var N,F,j=-1,ie=Z[1],re=0,le=7,me=4;for(ie===0&&(le=138,me=3),Z[2*(J+1)+1]=65535,N=0;N<=J;N++)F=ie,ie=Z[2*(N+1)+1],++re<le&&F===ie||(re<me?$.bl_tree[2*F]+=re:F!==0?(F!==j&&$.bl_tree[2*F]++,$.bl_tree[2*v]++):re<=10?$.bl_tree[2*x]++:$.bl_tree[2*k]++,j=F,me=(re=0)===ie?(le=138,3):F===ie?(le=6,3):(le=7,4))}function O($,Z,J){var N,F,j=-1,ie=Z[1],re=0,le=7,me=4;for(ie===0&&(le=138,me=3),N=0;N<=J;N++)if(F=ie,ie=Z[2*(N+1)+1],!(++re<le&&F===ie)){if(re<me)for(;ne($,F,$.bl_tree),--re!=0;);else F!==0?(F!==j&&(ne($,F,$.bl_tree),re--),ne($,v,$.bl_tree),Y($,re-3,2)):re<=10?(ne($,x,$.bl_tree),Y($,re-3,3)):(ne($,k,$.bl_tree),Y($,re-11,7));j=F,me=(re=0)===ie?(le=138,3):F===ie?(le=6,3):(le=7,4)}}r(D);var V=!1;function I($,Z,J,N){Y($,(f<<1)+(N?1:0),3),(function(F,j,ie,re){ee(F),K(F,ie),K(F,~ie),d.arraySet(F.pending_buf,F.window,j,ie,F.pending),F.pending+=ie})($,Z,J)}u._tr_init=function($){V||((function(){var Z,J,N,F,j,ie=new Array(l+1);for(F=N=0;F<p-1;F++)for(Q[F]=N,Z=0;Z<1<<E[F];Z++)R[N++]=F;for(R[N-1]=F,F=j=0;F<16;F++)for(D[F]=j,Z=0;Z<1<<C[F];Z++)P[j++]=F;for(j>>=7;F<m;F++)for(D[F]=j<<7,Z=0;Z<1<<C[F]-7;Z++)P[256+j++]=F;for(J=0;J<=l;J++)ie[J]=0;for(Z=0;Z<=143;)G[2*Z+1]=8,Z++,ie[8]++;for(;Z<=255;)G[2*Z+1]=9,Z++,ie[9]++;for(;Z<=279;)G[2*Z+1]=7,Z++,ie[7]++;for(;Z<=287;)G[2*Z+1]=8,Z++,ie[8]++;for(W(G,_+1,ie),Z=0;Z<m;Z++)B[2*Z+1]=5,B[2*Z]=ae(Z,5);se=new U(G,E,h+1,_,l),X=new U(B,C,0,m,l),oe=new U(new Array(0),A,0,w,n)})(),V=!0),$.l_desc=new S($.dyn_ltree,se),$.d_desc=new S($.dyn_dtree,X),$.bl_desc=new S($.bl_tree,oe),$.bi_buf=0,$.bi_valid=0,L($)},u._tr_stored_block=I,u._tr_flush_block=function($,Z,J,N){var F,j,ie=0;0<$.level?($.strm.data_type===2&&($.strm.data_type=(function(re){var le,me=4093624447;for(le=0;le<=31;le++,me>>>=1)if(1&me&&re.dyn_ltree[2*le]!==0)return b;if(re.dyn_ltree[18]!==0||re.dyn_ltree[20]!==0||re.dyn_ltree[26]!==0)return i;for(le=32;le<h;le++)if(re.dyn_ltree[2*le]!==0)return i;return b})($)),q($,$.l_desc),q($,$.d_desc),ie=(function(re){var le;for(y(re,re.dyn_ltree,re.l_desc.max_code),y(re,re.dyn_dtree,re.d_desc.max_code),q(re,re.bl_desc),le=w-1;3<=le&&re.bl_tree[2*z[le]+1]===0;le--);return re.opt_len+=3*(le+1)+5+5+4,le})($),F=$.opt_len+3+7>>>3,(j=$.static_len+3+7>>>3)<=F&&(F=j)):F=j=J+5,J+4<=F&&Z!==-1?I($,Z,J,N):$.strategy===4||j===F?(Y($,2+(N?1:0),3),H($,G,B)):(Y($,4+(N?1:0),3),(function(re,le,me,de){var Se;for(Y(re,le-257,5),Y(re,me-1,5),Y(re,de-4,4),Se=0;Se<de;Se++)Y(re,re.bl_tree[2*z[Se]+1],3);O(re,re.dyn_ltree,le-1),O(re,re.dyn_dtree,me-1)})($,$.l_desc.max_code+1,$.d_desc.max_code+1,ie+1),H($,$.dyn_ltree,$.dyn_dtree)),L($),N&&ee($)},u._tr_tally=function($,Z,J){return $.pending_buf[$.d_buf+2*$.last_lit]=Z>>>8&255,$.pending_buf[$.d_buf+2*$.last_lit+1]=255&Z,$.pending_buf[$.l_buf+$.last_lit]=255&J,$.last_lit++,Z===0?$.dyn_ltree[2*J]++:($.matches++,Z--,$.dyn_ltree[2*(R[J]+h+1)]++,$.dyn_dtree[2*T(Z)]++),$.last_lit===$.lit_bufsize-1},u._tr_align=function($){Y($,2,3),ne($,c,G),(function(Z){Z.bi_valid===16?(K(Z,Z.bi_buf),Z.bi_buf=0,Z.bi_valid=0):8<=Z.bi_valid&&(Z.pending_buf[Z.pending++]=255&Z.bi_buf,Z.bi_buf>>=8,Z.bi_valid-=8)})($)}},{"../utils/common":41}],53:[function(s,o,u){o.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(s,o,u){(function(d){(function(b,i){if(!b.setImmediate){var r,f,p,h,_=1,m={},w=!1,g=b.document,l=Object.getPrototypeOf&&Object.getPrototypeOf(b);l=l&&l.setTimeout?l:b,r={}.toString.call(b.process)==="[object process]"?function(v){process.nextTick(function(){n(v)})}:(function(){if(b.postMessage&&!b.importScripts){var v=!0,x=b.onmessage;return b.onmessage=function(){v=!1},b.postMessage("","*"),b.onmessage=x,v}})()?(h="setImmediate$"+Math.random()+"$",b.addEventListener?b.addEventListener("message",c,!1):b.attachEvent("onmessage",c),function(v){b.postMessage(h+v,"*")}):b.MessageChannel?((p=new MessageChannel).port1.onmessage=function(v){n(v.data)},function(v){p.port2.postMessage(v)}):g&&"onreadystatechange"in g.createElement("script")?(f=g.documentElement,function(v){var x=g.createElement("script");x.onreadystatechange=function(){n(v),x.onreadystatechange=null,f.removeChild(x),x=null},f.appendChild(x)}):function(v){setTimeout(n,0,v)},l.setImmediate=function(v){typeof v!="function"&&(v=new Function(""+v));for(var x=new Array(arguments.length-1),k=0;k<x.length;k++)x[k]=arguments[k+1];var E={callback:v,args:x};return m[_]=E,r(_),_++},l.clearImmediate=a}function a(v){delete m[v]}function n(v){if(w)setTimeout(n,0,v);else{var x=m[v];if(x){w=!0;try{(function(k){var E=k.callback,C=k.args;switch(C.length){case 0:E();break;case 1:E(C[0]);break;case 2:E(C[0],C[1]);break;case 3:E(C[0],C[1],C[2]);break;default:E.apply(i,C)}})(x)}finally{a(v),w=!1}}}}function c(v){v.source===b&&typeof v.data=="string"&&v.data.indexOf(h)===0&&n(+v.data.slice(h.length))}})(typeof self>"u"?d===void 0?this:d:self)}).call(this,typeof Ii<"u"?Ii:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(Pr)),Pr.exports}var Gm=Km();const sn=qm(Gm),Zm={class:"min-h-screen bg-gray-50"},Xm={class:"max-w-6xl mx-auto px-6 py-8"},Ym={class:"mb-6 relative"},Jm={class:"text-2xl font-bold text-slate-900 flex items-center gap-2"},Qm={class:"bg-white rounded-2xl border border-slate-200 shadow-sm p-6 mb-6"},e_={class:"flex flex-wrap items-center gap-3"},t_={for:"img-upload",class:"flex items-center gap-2 px-4 py-2 bg-slate-900 hover:bg-slate-800 text-white rounded-lg cursor-pointer"},s_={for:"zip-upload",class:"flex items-center gap-2 px-4 py-2 bg-slate-900/80 hover:bg-slate-800 text-white rounded-lg cursor-pointer"},i_={class:"relative mb-8"},r_={class:"relative flex justify-center items-center py-8 px-6"},n_={class:"relative z-10 flex items-center justify-center w-10 h-10 bg-white/20 rounded-xl group-hover:bg-white/30 transition-colors duration-300"},o_={class:"relative z-10 flex items-center justify-center w-10 h-10 bg-white/20 rounded-xl group-hover:bg-white/30 transition-colors duration-300"},a_={key:0,class:"mt-6"},l_={class:"bg-white rounded-2xl border border-slate-200 shadow-sm p-6"},c_={class:"flex items-center justify-between mb-4"},h_={class:"text-xs text-slate-500"},u_={class:"bg-slate-50 rounded-lg p-4 mb-4"},d_={class:"flex items-center justify-between mb-2"},f_={class:"text-sm text-slate-600"},p_={class:"w-full bg-slate-200 rounded-full h-2"},m_={class:"flex gap-4 mt-2 text-xs"},__={class:"text-green-600"},g_={class:"text-amber-600"},v_={class:"text-red-600"},b_={class:"text-slate-500"},w_={class:"space-y-3"},y_={class:"flex gap-2"},S_=["onClick"],x_=["src"],C_=["onClick"],k_=["src"],E_={class:"flex-1 min-w-0"},T_={class:"text-sm font-medium text-slate-800 truncate"},A_={class:"flex items-center gap-2 mt-1 mb-2"},R_={key:0,class:"text-xs text-slate-500"},M_={key:1,class:"text-xs text-red-500"},D_={key:0,class:"w-full bg-slate-200 rounded-full h-1.5 mb-2"},L_={class:"flex gap-1"},I_=["onClick"],O_=["onClick"],B_=["onClick"],P_=["onClick","disabled"],$_=["onClick"],H_=["onClick"],N_={key:1,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50"},F_={class:"bg-white rounded-2xl shadow-lg w-[90vw] max-w-4xl p-4"},z_={class:"flex items-center justify-between mb-3"},U_={class:"flex items-center gap-2"},W_={key:0,class:"grid md:grid-cols-2 gap-4"},j_={class:"rounded-xl border border-slate-200 overflow-hidden"},V_=["src"],q_={class:"rounded-xl border border-slate-200 overflow-hidden"},K_=["src"],G_={key:1,class:"relative w-full"},Z_={class:"relative overflow-hidden rounded-xl border border-slate-200"},X_=["src"],Y_=["src"],J_={key:2,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50"},Q_={class:"bg-white rounded-2xl shadow-lg w-[90vw] max-w-4xl p-6"},eg={class:"flex items-center justify-between mb-4"},tg={class:"mb-4"},sg={class:"grid grid-cols-2 gap-4"},ig={class:"flex justify-end gap-3"},rg={key:3,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50"},ng={class:"bg-white rounded-2xl shadow-lg w-[90vw] max-w-4xl p-6"},og={class:"flex items-center justify-between mb-4"},ag={class:"text-lg font-semibold text-slate-700"},lg={class:"mb-4"},cg={class:"grid grid-cols-2 gap-4"},hg={class:"flex justify-end gap-3"},ug="220f559f00abe3a002d2e6c6802e72d5",dg="https://api.imgbb.com/1/upload",fg=ct({__name:"ImageTools",setup(e){const t=fe([]),s=fe(null),o=fe("manual"),u=fe("bottom-right"),d=Ut({x:50,y:50,w:200,h:80}),b=async y=>{try{const O=new FormData;O.append("image",y);const I=await(await fetch(`${dg}?expiration=600&key=${ug}`,{method:"POST",body:O})).json();return I.success===!0&&I.status===200&&I.data&&I.data.url?I.data.url:(console.error("ImgBB upload failed:",I),null)}catch(O){return console.error("Error uploading to ImgBB:",O),null}},i=async y=>{console.log(` ${y.length} ImgBB...`);for(let O=0;O<y.length;O++){const V=y[O];console.log(` ${O+1}/${y.length} : ${V.name}`);try{const I=await b(V.file);I?(V.url=I,console.log(` ${V.name} `)):console.warn(` ${V.name} URL`)}catch(I){console.error(` ${V.name} :`,I)}}console.log("")},r=Pe(()=>t.value.filter(y=>y.status==="processed"&&y.processedUrl).length),f=Pe(()=>t.value.filter(y=>y.status==="error").length),p=Pe(()=>t.value.filter(y=>y.status==="pending").length),h=Pe(()=>t.value.filter(y=>y.status==="processing").length),_=Pe(()=>r.value+f.value),m=y=>y.status==="processed"&&y.processedUrl?"":y.status==="processing"?"":y.status==="error"?"":"",w=async y=>{y.status="pending",y.error=void 0,s.value=y.id,await z()},g=async y=>{const O=y.target,V=Array.from(O.files||[]);if(!V.length)return;const I=V.filter(J=>/\.zip$/i.test(J.name)),Z=V.filter(J=>/^image\//.test(J.type)).map(J=>({id:Math.random().toString(36).slice(2),file:J,name:J.name,type:J.type,url:URL.createObjectURL(J),status:"pending"}));t.value=[...Z,...t.value],s.value=Z[0].id,O.value="";for(const J of I)await se(J);Z.length>0&&await i(Z)},l=()=>t.value.find(y=>y.id===s.value)||null,a=async y=>{const O=await new Promise(($,Z)=>{const J=document.createElement("img");J.onload=()=>$(J),J.onerror=Z,J.src=y.url}),V=document.createElement("canvas");V.width=O.naturalWidth,V.height=O.naturalHeight,V.getContext("2d").drawImage(O,0,0),y.canvas=V},n=async()=>{const y=l();y&&(y.canvas||await a(y))},c=fe(2),v=fe(3),x=fe("smart");fe(null);const k=Ut({x:1,y:1}),E=async()=>{await n();const y=l();if(!y||!y.canvas)return;const O=y.canvas.getContext("2d"),{x:V,y:I,w:$,h:Z}=d,J=Math.max(0,Math.floor(V/(k.x||1))),N=Math.max(0,Math.floor(I/(k.y||1))),F=Math.max(1,Math.floor($/(k.x||1))),j=Math.max(1,Math.floor(Z/(k.y||1)));if(x.value==="copy"){O.save(),O.globalAlpha=.95,O.filter=`blur(${c.value}px)`;const ie=(me,de,Se,Ee)=>{const xe=document.createElement("canvas");xe.width=Math.max(1,Se),xe.height=Math.max(1,Ee),xe.getContext("2d").drawImage(y.canvas,me,de,Math.max(1,Se),Math.max(1,Ee),0,0,xe.width,xe.height);const ke=document.createElement("canvas");ke.width=F,ke.height=j;const We=ke.getContext("2d");return We.imageSmoothingEnabled=!0,We.drawImage(xe,0,0,F,j),ke},re=ie(J,Math.max(0,N-j),F,Math.min(j,N)),le=ie(Math.max(0,J-F),N,Math.min(F,J),j);re.width&&re.height?O.drawImage(re,J,N):le.width&&le.height&&O.drawImage(le,J,N),O.restore()}else if(x.value==="smooth"){const ie=document.createElement("canvas");ie.width=F,ie.height=j;const re=ie.getContext("2d"),le=Math.max(5,Math.floor(Math.min(F,j)*.1));let me=0,de=0,Se=0,Ee=0;try{const we=O.getImageData(Math.max(0,J-le),Math.max(0,N-le),F+2*le,le).data,ke=O.getImageData(Math.max(0,J-le),Math.min(y.canvas.height-le,N+j),F+2*le,le).data,We=O.getImageData(Math.max(0,J-le),Math.max(0,N-le),le,j+2*le).data,$e=O.getImageData(Math.min(y.canvas.width-le,J+F),Math.max(0,N-le),le,j+2*le).data,Me=[...we,...ke,...We,...$e];for(let et=0;et<Me.length;et+=4)me+=Me[et],de+=Me[et+1],Se+=Me[et+2],Ee++}catch{}Ee>0&&(re.fillStyle=`rgb(${me/Ee},${de/Ee},${Se/Ee})`,re.fillRect(0,0,F,j));const xe=Math.max(1,c.value*2);for(let we=0;we<F*j*.01;we++){const ke=Math.floor(Math.random()*F),We=Math.floor(Math.random()*j),$e=Math.max(1,Math.random()*xe),Me=Math.max(0,Math.min(y.canvas.width-1,J+ke+(Math.random()-.5)*le*2)),et=Math.max(0,Math.min(y.canvas.height-1,N+We+(Math.random()-.5)*le*2));try{const st=O.getImageData(Me,et,1,1).data;re.fillStyle=`rgba(${st[0]},${st[1]},${st[2]},0.3)`,re.fillRect(ke,We,$e,$e)}catch{}}O.save(),O.beginPath(),O.rect(J,N,F,j),O.clip(),O.drawImage(ie,J,N),c.value>0&&(O.filter=`blur(${c.value}px)`,O.drawImage(ie,J,N)),O.restore()}else await A();await P(y)},C=async()=>{await n();const y=l();if(!y||!y.canvas)return;const O=y.canvas;O.getContext("2d");const V=24;let I=0,$=0,Z=Math.floor(O.width*.25),J=Math.floor(O.height*.15);u.value.includes("right")?I=O.width-Z-V:I=V,u.value.includes("bottom")?$=O.height-J-V:$=V,d.x=I,d.y=$,d.w=Z,d.h=J,await E()},A=async()=>{await n();const y=l();if(!y||!y.canvas)return;const O=y.canvas.getContext("2d"),{x:V,y:I,w:$,h:Z}=d,J=Math.max(0,Math.floor(V/(k.x||1))),N=Math.max(0,Math.floor(I/(k.y||1))),F=Math.max(1,Math.floor($/(k.x||1))),j=Math.max(1,Math.floor(Z/(k.y||1))),ie=document.createElement("canvas");ie.width=F,ie.height=j;const re=ie.getContext("2d"),le=Math.max(5,Math.floor(Math.min(F,j)*.15)),me=[],de={top:[],bottom:[],left:[],right:[]};try{const Ne=O.getImageData(Math.max(0,J-le),Math.max(0,N-le),F+2*le,le),it=O.getImageData(Math.max(0,J-le),Math.min(y.canvas.height-le,N+j),F+2*le,le),ut=O.getImageData(Math.max(0,J-le),Math.max(0,N-le),le,j+2*le),Pt=O.getImageData(Math.min(y.canvas.width-le,J+F),Math.max(0,N-le),le,j+2*le);me.push(...Ne.data,...it.data,...ut.data,...Pt.data);const rt=(ht,Tt)=>{const lt=ht.data;for(let nt=0;nt<lt.length;nt+=4)de[Tt].push({r:lt[nt],g:lt[nt+1],b:lt[nt+2]})};rt(Ne,"top"),rt(it,"bottom"),rt(ut,"left"),rt(Pt,"right")}catch{}let Se=0,Ee=0,xe=0,we=0;for(let Ne=0;Ne<me.length;Ne+=4)Se+=me[Ne],Ee+=me[Ne+1],xe+=me[Ne+2],we++;we>0&&(re.fillStyle=`rgb(${Se/we},${Ee/we},${xe/we})`,re.fillRect(0,0,F,j));const ke=Math.max(8,Math.floor(Math.min(F,j)/(v.value+1))),We=Math.max(F,j)*2,$e=(Ne,it,ut,Pt,rt)=>{try{const ht=O.getImageData(Ne,it,rt,rt),Tt=O.getImageData(ut,Pt,rt,rt);let lt=0;for(let nt=0;nt<ht.data.length;nt+=4){const ps=ht.data[nt]-Tt.data[nt],St=ht.data[nt+1]-Tt.data[nt+1],At=ht.data[nt+2]-Tt.data[nt+2];lt+=Math.sqrt(ps*ps+St*St+At*At)}return lt/(rt*rt)}catch{return 1/0}},Me=(Ne,it,ut)=>{let Pt=0,rt=0,ht=1/0;const Tt=v.value*20+10;for(let lt=0;lt<Tt;lt++){const nt=Math.random()*Math.PI*2,ps=Math.random()*We,St=Math.floor(J+Math.cos(nt)*ps),At=Math.floor(N+Math.sin(nt)*ps);if(St>=0&&At>=0&&St+ut<y.canvas.width&&At+ut<y.canvas.height&&(St+ut<J||St>J+F||At+ut<N||At>N+j)){let xs=0;if(it===0&&de.top.length>0){const Rt=Math.max(0,N-le);xs+=$e(St,At,St,Rt,ut)}if(Ne===0&&de.left.length>0){const Rt=Math.max(0,J-le);xs+=$e(St,At,Rt,At,ut)}xs<ht&&(ht=xs,Pt=St,rt=At)}}return{x:Pt,y:rt,score:ht}},et=v.value+1;for(let Ne=0;Ne<et;Ne++){const it=Math.max(4,ke-Ne*2),ut=Math.ceil(F*j/(it*it))*(Ne+1);for(let Pt=0;Pt<ut;Pt++){const rt=Math.floor(Math.random()*(F-it)),ht=Math.floor(Math.random()*(j-it)),Tt=Me(rt,ht,it);Tt.score<1e3&&(re.globalAlpha=.3+Ne*.2,re.drawImage(y.canvas,Tt.x,Tt.y,it,it,rt,ht,it,it))}}re.globalAlpha=1;const st=document.createElement("canvas");st.width=F,st.height=j;const He=st.getContext("2d"),vt=He.createRadialGradient(F/2,j/2,0,F/2,j/2,Math.min(F,j)/2);vt.addColorStop(0,"rgba(255,255,255,1)"),vt.addColorStop(1,"rgba(255,255,255,0)"),He.fillStyle=vt,He.fillRect(0,0,F,j);const Et=document.createElement("canvas");Et.width=F,Et.height=j;const at=Et.getContext("2d");if(at.drawImage(ie,0,0),at.globalCompositeOperation="destination-in",at.drawImage(st,0,0),at.globalCompositeOperation="source-over",c.value>0){const Ne=document.createElement("canvas");Ne.width=F,Ne.height=j;const it=Ne.getContext("2d");it.filter=`blur(${c.value*.5}px)`,it.drawImage(Et,0,0),at.globalAlpha=.7,at.drawImage(Ne,0,0),at.globalAlpha=1}O.save(),O.beginPath(),O.rect(J,N,F,j),O.clip(),O.drawImage(Et,J,N),O.restore(),await P(y)},z=async()=>{const y=l();if(y)try{y.status="processing",y.error=void 0,o.value==="manual"?await E():o.value==="corner"?await C():await A(),y.status="processed"}catch(O){y.status="error",y.error=O instanceof Error?O.message:""}},G=async()=>{for(const y of t.value)s.value=y.id,await z()},B=y=>/\.png$/i.test(y)?"image/png":/\.jpe?g$/i.test(y)?"image/jpeg":/\.webp$/i.test(y)?"image/webp":/\.bmp$/i.test(y)?"image/bmp":"image/png",P=async y=>{const O=y.type||B(y.name),V=await new Promise(I=>y.canvas.toBlob($=>I($),O,1));y.processedBlob=V,y.processedUrl=URL.createObjectURL(V)},R=async()=>{for(const y of t.value){const O=y.processedUrl||y.url,V=y.processedBlob?y.name.replace(/\.[^.]+$/,"")+"_processed"+(y.type.includes("png")?".png":y.type.includes("jpeg")?".jpg":y.type.includes("webp")?".webp":".png"):y.name,I=document.createElement("a");I.href=O,I.download=V,document.body.appendChild(I),I.click(),I.remove()}},Q=async()=>{const y=new sn;for(const I of t.value)I.processedBlob?y.file(I.name.replace(/\.[^.]+$/,"")+"_processed"+(I.type.includes("png")?".png":I.type.includes("jpeg")?".jpg":I.type.includes("webp")?".webp":".png"),I.processedBlob):y.file(I.name,I.file);const O=await y.generateAsync({type:"blob"}),V=document.createElement("a");V.href=URL.createObjectURL(O),V.download="images_processed.zip",document.body.appendChild(V),V.click(),V.remove()},se=async y=>{const O=await sn.loadAsync(await y.arrayBuffer()),V=[],I=/\.(png|jpe?g|webp|bmp)$/i,$=[];O.forEach((J,N)=>{!N.dir&&I.test(J)&&$.push(N.async("blob").then(F=>{V.push({name:J.split("/").pop()||J,blob:F})}))}),await Promise.all($);const Z=V.map(({name:J,blob:N})=>{const F=B(J),j=new File([N],J,{type:F});return{id:Math.random().toString(36).slice(2),file:j,name:J,type:F,url:URL.createObjectURL(j),status:"pending"}});t.value=[...Z,...t.value],!s.value&&Z.length&&(s.value=Z[0].id),Z.length>0&&await i(Z)},X=fe(!1),oe=fe("side"),D=fe(null),U=()=>t.value.find(y=>y.id===D.value)||l(),S=y=>{D.value=y.id,X.value=!0,oe.value="side"},T=y=>{const O=document.createElement("a");O.href=y.url,O.download=y.name,document.body.appendChild(O),O.click(),O.remove()},K=y=>{if(!y.processedUrl)return;const O=document.createElement("a");O.href=y.processedUrl;const V=y.name.replace(/\.[^.]+$/,"")+"_processed"+(y.type.includes("png")?".png":y.type.includes("jpeg")?".jpg":y.type.includes("webp")?".webp":".png");O.download=V,document.body.appendChild(O),O.click(),O.remove()},Y=y=>{t.value=t.value.filter(O=>O.id!==y.id)},ne=async y=>{s.value=y,await n(),o.value==="manual"&&(he.value=!0)},ae=()=>{for(const y of t.value)s.value=y.id,d.x=H.x,d.y=H.y,d.w=H.w,d.h=H.h;te.value=!1},W=y=>{s.value=y.id,q.x=d.x,q.y=d.y,q.w=d.w,q.h=d.h,he.value=!0},L=()=>{d.x=q.x,d.y=q.y,d.w=q.w,d.h=q.h,he.value=!1};fe(!1);const ee=fe(50),te=fe(!1),he=fe(!1),H=Ut({x:50,y:50,w:200,h:80}),q=Ut({x:50,y:50,w:200,h:80});return(y,O)=>{var V,I,$,Z,J,N,F;return ue(),pe("div",Zm,[M("div",Xm,[M("div",Ym,[_e(ve(Zt),{to:"/",class:"absolute top-4 right-4 z-30 flex items-center gap-2 px-3 py-2 bg-white/80 backdrop-blur rounded-lg shadow-sm border border-slate-200 text-slate-600 hover:text-brand-600"},{default:Gt(()=>[_e(ve(fs),{class:"w-5 h-5"}),O[16]||(O[16]=M("span",{class:"hidden md:inline"},"",-1))]),_:1}),M("h2",Jm,[_e(ve(Cn),{class:"w-5 h-5"}),O[17]||(O[17]=Je(" ",-1))]),O[18]||(O[18]=M("p",{class:"text-slate-600 mt-1"},"",-1))]),M("div",Qm,[M("div",e_,[M("input",{id:"img-upload",type:"file",accept:"image/*",multiple:"",class:"hidden",onChange:g},null,32),M("label",t_,[_e(ve(Zs),{class:"w-4 h-4"}),O[19]||(O[19]=Je(" ",-1))]),M("input",{id:"zip-upload",type:"file",accept:".zip",class:"hidden",onChange:g},null,32),M("label",s_,[_e(ve(Zs),{class:"w-4 h-4"}),O[20]||(O[20]=Je("  ZIP",-1))]),M("button",{onClick:R,class:"px-4 py-2 bg-white border border-slate-200 text-slate-700 rounded-lg"},[_e(ve(Yi),{class:"w-4 h-4 inline"}),O[21]||(O[21]=Je(" ",-1))]),M("button",{onClick:Q,class:"px-4 py-2 bg-white border border-slate-200 text-slate-700 rounded-lg"},[_e(ve(Yi),{class:"w-4 h-4 inline"}),O[22]||(O[22]=Je("  ZIP",-1))])])]),M("div",i_,[O[28]||(O[28]=M("div",{class:"absolute inset-0 bg-gradient-to-r from-blue-50 via-indigo-50 to-purple-50 rounded-3xl opacity-60"},null,-1)),O[29]||(O[29]=M("div",{class:"absolute inset-0 bg-gradient-to-br from-brand-400/10 via-transparent to-brand-600/10 rounded-3xl"},null,-1)),M("div",r_,[M("button",{onClick:G,class:"group relative px-16 py-5 bg-gradient-to-r from-brand-600 via-brand-700 to-brand-800 hover:from-brand-700 hover:via-brand-800 hover:to-brand-900 text-white rounded-2xl text-2xl font-extrabold shadow-xl hover:shadow-2xl transform hover:scale-110 transition-all duration-500 ease-out flex items-center gap-4 border border-brand-300/50 hover:border-brand-200/80 backdrop-blur-sm"},[O[23]||(O[23]=M("div",{class:"absolute inset-0 bg-gradient-to-r from-white/20 via-white/10 to-white/20 rounded-2xl opacity-0 group-hover:opacity-100 transition-opacity duration-300"},null,-1)),M("div",n_,[_e(ve(Do),{class:"w-6 h-6 group-hover:animate-pulse"})]),O[24]||(O[24]=M("span",{class:"relative z-10 flex items-center gap-3"},"   ",-1)),M("div",o_,[_e(ve(Do),{class:"w-6 h-6 group-hover:animate-pulse"})]),O[25]||(O[25]=M("div",{class:"absolute -top-1 -right-1 w-3 h-3 bg-yellow-400 rounded-full animate-ping"},null,-1)),O[26]||(O[26]=M("div",{class:"absolute -bottom-1 -left-1 w-2 h-2 bg-blue-400 rounded-full animate-pulse"},null,-1))]),O[27]||(O[27]=M("div",{class:"absolute -bottom-2 left-1/2 transform -translate-x-1/2 text-xs text-slate-500 bg-white/80 px-3 py-1 rounded-full shadow-sm"},"  ",-1))])]),t.value.length?(ue(),pe("div",a_,[M("div",l_,[M("div",c_,[O[30]||(O[30]=M("div",{class:"text-sm font-semibold text-slate-700"},"",-1)),M("div",h_," "+be(t.value.length)+" ",1)]),M("div",u_,[M("div",d_,[O[31]||(O[31]=M("span",{class:"text-sm font-medium text-slate-700"},"",-1)),M("span",f_,be(_.value)+"/"+be(t.value.length)+" ",1)]),M("div",p_,[M("div",{class:"bg-brand-600 h-2 rounded-full transition-all duration-300",style:Lt({width:_.value/t.value.length*100+"%"})},null,4)]),M("div",m_,[M("span",__," : "+be(r.value),1),M("span",g_," : "+be(h.value),1),M("span",v_," : "+be(f.value),1),M("span",b_," : "+be(p.value),1)])]),M("div",w_,[(ue(!0),pe(tt,null,Nt(t.value,j=>(ue(),pe("div",{key:j.id,class:"flex items-center gap-3 p-3 border border-slate-200 rounded-lg hover:border-brand-200"},[M("div",y_,[M("div",{class:"relative group cursor-pointer",onClick:ie=>ne(j.id)},[M("img",{src:j.url,class:"w-14 h-10 object-cover rounded border"},null,8,x_),O[32]||(O[32]=M("div",{class:"absolute inset-0 bg-black/0 group-hover:bg-black/10 transition-colors flex items-center justify-center"},[M("span",{class:"text-white text-sm bg-black/50 px-2 py-1 rounded opacity-0 group-hover:opacity-100"},"")],-1))],8,S_),j.processedUrl?(ue(),pe("div",{key:0,class:"relative group cursor-pointer",onClick:ie=>ne(j.id)},[M("img",{src:j.processedUrl,class:"w-14 h-10 object-cover rounded border"},null,8,k_),O[33]||(O[33]=M("div",{class:"absolute inset-0 bg-black/0 group-hover:bg-black/10 transition-colors flex items-center justify-center"},[M("span",{class:"text-white text-sm bg-black/50 px-2 py-1 rounded opacity-0 group-hover:opacity-100"},"")],-1))],8,C_)):Oe("",!0)]),M("div",E_,[M("div",T_,be(j.name),1),M("div",A_,[M("span",{class:Ae(["text-sm px-2 py-0.5 rounded font-medium",{"bg-green-100 text-green-700":j.status==="processed"&&j.processedUrl,"bg-red-100 text-red-700":j.status==="error","bg-amber-100 text-amber-700":j.status==="processing","bg-slate-100 text-slate-600":j.status==="pending"}])},be(m(j)),3),j.status==="processing"?(ue(),pe("span",R_,"...")):Oe("",!0),j.error?(ue(),pe("span",M_,": "+be(j.error),1)):Oe("",!0)]),j.status==="processing"?(ue(),pe("div",D_,[...O[34]||(O[34]=[M("div",{class:"bg-amber-500 h-1.5 rounded-full transition-all duration-300 animate-pulse",style:{width:"60%"}},null,-1)])])):Oe("",!0),M("div",L_,[M("button",{onClick:ie=>S(j),class:"px-2 py-1 bg-slate-100 hover:bg-slate-200 text-slate-700 rounded text-xs"},"",8,I_),o.value==="manual"&&j.status!=="processing"?(ue(),pe("button",{key:0,onClick:ie=>W(j),class:"px-2 py-1 bg-slate-100 hover:bg-slate-200 text-slate-700 rounded text-xs"},"",8,O_)):Oe("",!0),M("button",{onClick:ie=>T(j),class:"px-2 py-1 bg-white border border-slate-200 text-slate-700 rounded text-xs"},"",8,B_),M("button",{onClick:ie=>K(j),disabled:!j.processedUrl,class:"px-2 py-1 bg-white border border-slate-200 text-slate-700 rounded text-xs disabled:opacity-50"},"",8,P_),j.status==="error"?(ue(),pe("button",{key:1,onClick:ie=>w(j),class:"px-2 py-1 bg-blue-100 hover:bg-blue-200 text-blue-700 rounded text-xs"},"",8,$_)):Oe("",!0)])]),M("button",{onClick:ie=>Y(j),class:"px-2 py-1 bg-red-50 hover:bg-red-100 text-red-600 rounded text-xs"},"",8,H_)]))),128))])])])):Oe("",!0),X.value?(ue(),pe("div",N_,[M("div",F_,[M("div",z_,[O[35]||(O[35]=M("div",{class:"text-sm font-semibold text-slate-700"},"",-1)),M("div",U_,[M("button",{class:"px-3 py-1.5 text-sm bg-slate-100 hover:bg-slate-200 rounded-lg",onClick:O[0]||(O[0]=j=>oe.value="side")},""),M("button",{class:"px-3 py-1.5 text-sm bg-slate-100 hover:bg-slate-200 rounded-lg",onClick:O[1]||(O[1]=j=>oe.value="slider")},""),M("button",{class:"px-3 py-1.5 text-sm bg-slate-100 hover:bg-slate-200 rounded-lg",onClick:O[2]||(O[2]=j=>X.value=!1)},"")])]),oe.value==="side"?(ue(),pe("div",W_,[M("div",j_,[M("img",{src:(V=U())==null?void 0:V.url,class:"w-full max-h-[70vh] object-contain"},null,8,V_)]),M("div",q_,[M("img",{src:((I=U())==null?void 0:I.processedUrl)||(($=U())==null?void 0:$.url),class:"w-full max-h-[70vh] object-contain"},null,8,K_)])])):(ue(),pe("div",G_,[M("div",Z_,[M("img",{src:(Z=U())==null?void 0:Z.url,class:"w-full max-h-[70vh] object-contain"},null,8,X_),M("img",{src:((J=U())==null?void 0:J.processedUrl)||((N=U())==null?void 0:N.url),class:"w-full max-h-[70vh] object-contain absolute inset-0",style:Lt({clipPath:"inset(0 "+(100-ee.value)+"% 0 0)"})},null,12,Y_),Xe(M("input",{type:"range",min:"0",max:"100","onUpdate:modelValue":O[3]||(O[3]=j=>ee.value=j),class:"absolute bottom-3 left-1/2 -translate-x-1/2 w-1/2"},null,512),[[Ye,ee.value]])])]))])])):Oe("",!0),te.value?(ue(),pe("div",J_,[M("div",Q_,[M("div",eg,[O[36]||(O[36]=M("div",{class:"text-lg font-semibold text-slate-700"},"",-1)),M("button",{onClick:O[4]||(O[4]=j=>te.value=!1),class:"px-3 py-1.5 text-sm bg-slate-100 hover:bg-slate-200 rounded-lg"},"")]),M("div",tg,[O[41]||(O[41]=M("p",{class:"text-slate-600 mb-4"},"",-1)),M("div",sg,[M("div",null,[O[37]||(O[37]=M("label",{class:"text-sm text-slate-600"},"X",-1)),Xe(M("input",{type:"number","onUpdate:modelValue":O[5]||(O[5]=j=>H.x=j),class:"w-full px-3 py-2 border border-slate-200 rounded-lg"},null,512),[[Ye,H.x]])]),M("div",null,[O[38]||(O[38]=M("label",{class:"text-sm text-slate-600"},"Y",-1)),Xe(M("input",{type:"number","onUpdate:modelValue":O[6]||(O[6]=j=>H.y=j),class:"w-full px-3 py-2 border border-slate-200 rounded-lg"},null,512),[[Ye,H.y]])]),M("div",null,[O[39]||(O[39]=M("label",{class:"text-sm text-slate-600"},"",-1)),Xe(M("input",{type:"number","onUpdate:modelValue":O[7]||(O[7]=j=>H.w=j),class:"w-full px-3 py-2 border border-slate-200 rounded-lg"},null,512),[[Ye,H.w]])]),M("div",null,[O[40]||(O[40]=M("label",{class:"text-sm text-slate-600"},"",-1)),Xe(M("input",{type:"number","onUpdate:modelValue":O[8]||(O[8]=j=>H.h=j),class:"w-full px-3 py-2 border border-slate-200 rounded-lg"},null,512),[[Ye,H.h]])])])]),M("div",ig,[M("button",{onClick:O[9]||(O[9]=j=>te.value=!1),class:"px-4 py-2 bg-white border border-slate-200 text-slate-700 rounded-lg"},""),M("button",{onClick:ae,class:"px-4 py-2 bg-brand-600 hover:bg-brand-500 text-white rounded-lg"},"")])])])):Oe("",!0),he.value?(ue(),pe("div",rg,[M("div",ng,[M("div",og,[M("div",ag," - "+be((F=l())==null?void 0:F.name),1),M("button",{onClick:O[10]||(O[10]=j=>he.value=!1),class:"px-3 py-1.5 text-sm bg-slate-100 hover:bg-slate-200 rounded-lg"},"")]),M("div",lg,[O[46]||(O[46]=M("p",{class:"text-slate-600 mb-4"},"",-1)),M("div",cg,[M("div",null,[O[42]||(O[42]=M("label",{class:"text-sm text-slate-600"},"X",-1)),Xe(M("input",{type:"number","onUpdate:modelValue":O[11]||(O[11]=j=>q.x=j),class:"w-full px-3 py-2 border border-slate-200 rounded-lg"},null,512),[[Ye,q.x]])]),M("div",null,[O[43]||(O[43]=M("label",{class:"text-sm text-slate-600"},"Y",-1)),Xe(M("input",{type:"number","onUpdate:modelValue":O[12]||(O[12]=j=>q.y=j),class:"w-full px-3 py-2 border border-slate-200 rounded-lg"},null,512),[[Ye,q.y]])]),M("div",null,[O[44]||(O[44]=M("label",{class:"text-sm text-slate-600"},"",-1)),Xe(M("input",{type:"number","onUpdate:modelValue":O[13]||(O[13]=j=>q.w=j),class:"w-full px-3 py-2 border border-slate-200 rounded-lg"},null,512),[[Ye,q.w]])]),M("div",null,[O[45]||(O[45]=M("label",{class:"text-sm text-slate-600"},"",-1)),Xe(M("input",{type:"number","onUpdate:modelValue":O[14]||(O[14]=j=>q.h=j),class:"w-full px-3 py-2 border border-slate-200 rounded-lg"},null,512),[[Ye,q.h]])])])]),M("div",hg,[M("button",{onClick:O[15]||(O[15]=j=>he.value=!1),class:"px-4 py-2 bg-white border border-slate-200 text-slate-700 rounded-lg"},""),M("button",{onClick:L,class:"px-4 py-2 bg-brand-600 hover:bg-brand-500 text-white rounded-lg"},"")])])])):Oe("",!0)])])}}}),pg={key:0,class:"fixed top-4 left-4 right-4 z-20 flex items-center justify-between"},mg={class:"flex items-center gap-1"},_g=["disabled"],gg={class:"flex items-center gap-2"},vg={key:0,class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24"},bg={key:1,class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24"},wg={class:"text-xs"},yg={class:"text-sm"},Sg={class:"text-center"},xg=["onMousedown","onClick"],Cg=["src"],kg={key:0,class:"absolute -bottom-6 left-0 bg-black/70 text-white text-xs px-2 py-1 rounded whitespace-nowrap"},Eg={key:1,class:"absolute inset-0 flex items-center justify-center pointer-events-none"},Tg=ct({__name:"ImageToolsNew",setup(e){const t=fe([]),s=fe(),o=fe(new Set),u=fe(!1),d=fe(1),b=fe({x:0,y:0}),i=fe(!0),r=Ut({width:2e3,height:1200,backgroundColor:i.value?"#000000":"#f8fafc",gridSize:50,showGrid:!1,snapToGrid:!1}),f=fe(!1),p=fe();ls(async()=>{"showDirectoryPicker"in window&&(f.value=!0)});const h=async()=>{if("showDirectoryPicker"in window)try{const N=await window.showDirectoryPicker();await B(N)}catch{console.log("")}},_=Ut({isDragging:!1,draggedItem:null,startPos:{x:0,y:0},startImagePos:{x:0,y:0},isDragged:!1,selectedImagesStartPos:new Map}),m=fe(!1),w=fe({x:0,y:0}),g=fe({x:0,y:0}),l=fe(!0),a=fe("select"),n=Ut({isSelecting:!1,startX:0,startY:0,currentX:0,currentY:0});ls(()=>{c()});const c=()=>{var N;a.value="select",m.value=!1,(N=s.value)==null||N.classList.remove("cursor-grab","cursor-grabbing"),window.removeEventListener("mousedown",V),window.removeEventListener("mousemove",y),window.removeEventListener("mouseup",I)},v=()=>{var N;a.value="move",m.value=!0,(N=s.value)==null||N.classList.add("cursor-grab"),window.addEventListener("mousedown",V,{passive:!1}),window.addEventListener("mouseup",I)},x=()=>{i.value=!i.value,r.backgroundColor=i.value?"#000000":"#f8fafc"},k=Yu(),E=()=>{k.push("/")},C=N=>{N.key==="Delete"&&o.value.size>0&&Y(),N.key==="Escape"&&T(),N.key==="a"&&N.ctrlKey&&(N.preventDefault(),K()),N.key==="F2"&&(N.preventDefault(),O())},A=async(N,F)=>{const j=Array.from(N);for(const ie of j)ie.type.startsWith("image/")?await z(ie,F):ie.name.endsWith(".zip")&&await G(ie)},z=async(N,F)=>{var Ee;const j=URL.createObjectURL(N),ie=Math.random().toString(36).slice(2),re=new Image;await new Promise((xe,we)=>{re.onload=xe,re.onerror=we,re.src=j});const le=Math.min(120,Math.max(50,re.width/8));let me=Math.random()*(r.width-le),de=Math.random()*(r.height-le);if(F){me=F.x-le/2,de=F.y-le/2;const xe=window.innerWidth/d.value,we=window.innerHeight/d.value,ke=(Ee=s.value)==null?void 0:Ee.getBoundingClientRect(),We=ke?ke.left/d.value:0,$e=ke?ke.top/d.value:0,Me=Math.max(r.width,xe-We)-le,et=Math.max(r.height,we-$e)-le,st=-We,He=-$e;me=Math.max(st,Math.min(Me,me)),de=Math.max(He,Math.min(et,de))}const Se={id:ie,file:N,name:N.name,type:N.type,url:j,position:{id:ie,x:me,y:de,width:le,height:le*(re.height/re.width),rotation:0,scale:1,zIndex:Date.now()},isSelected:!1,isDragging:!1};t.value.push(Se)},G=async N=>{const j=await new sn().loadAsync(N),ie=[];for(const[re,le]of Object.entries(j.files))if(!le.dir&&le.name.match(/\.(jpg|jpeg|png|gif|webp|bmp)$/i)){const me=await le.async("blob"),de=new File([me],le.name,{type:"image/*"});ie.push(de)}await A(ie)},B=async N=>{const F=[];for await(const[j,ie]of N.entries())if(ie.kind==="file"&&j.match(/\.(jpg|jpeg|png|gif|webp|bmp)$/i)){const re=await ie.getFile();F.push(re)}await A(F)},P=N=>{N.preventDefault(),u.value=!0},R=N=>{var F;N.preventDefault(),(F=s.value)!=null&&F.contains(N.relatedTarget)||(u.value=!1)},Q=async N=>{var ie,re;N.preventDefault(),u.value=!1;const F=Array.from(((ie=N.dataTransfer)==null?void 0:ie.files)||[]),j=(re=s.value)==null?void 0:re.getBoundingClientRect();if(j){const le=(N.clientX-j.left)/d.value,me=(N.clientY-j.top)/d.value;await A(F,{x:le,y:me})}else await A(F)},se=N=>{var re;if(a.value!=="select"||m.value||N.target.closest(".image-item"))return;N.preventDefault();const F=(re=s.value)==null?void 0:re.getBoundingClientRect();if(!F)return;const j=(N.clientX-F.left)/d.value-b.value.x/d.value,ie=(N.clientY-F.top)/d.value-b.value.y/d.value;n.isSelecting=!0,n.startX=j,n.startY=ie,n.currentX=j,n.currentY=ie,window.addEventListener("mousemove",X,{passive:!1}),window.addEventListener("mouseup",oe)},X=N=>{var j;if(!n.isSelecting)return;N.preventDefault();const F=(j=s.value)==null?void 0:j.getBoundingClientRect();F&&(n.currentX=(N.clientX-F.left)/d.value-b.value.x/d.value,n.currentY=(N.clientY-F.top)/d.value-b.value.y/d.value)},oe=N=>{if(!n.isSelecting)return;N.preventDefault();const F={x:Math.min(n.startX,n.currentX),y:Math.min(n.startY,n.currentY),width:Math.abs(n.currentX-n.startX),height:Math.abs(n.currentY-n.startY)};D(F),n.isSelecting=!1,window.removeEventListener("mousemove",X),window.removeEventListener("mouseup",oe)},D=N=>{T(),t.value.forEach(F=>{const j={x:F.position.x,y:F.position.y,width:F.position.width,height:F.position.height};U(j,N)&&(F.isSelected=!0,o.value.add(F.id))})},U=(N,F)=>N.x<F.x+F.width&&N.x+N.width>F.x&&N.y<F.y+F.height&&N.y+N.height>F.y,S=(N,F)=>{F.ctrlKey||F.metaKey?(N.isSelected=!N.isSelected,N.isSelected?o.value.add(N.id):o.value.delete(N.id)):(T(),N.isSelected=!0,o.value.add(N.id))},T=()=>{t.value.forEach(N=>{N.isSelected=!1}),o.value.clear()},K=()=>{t.value.forEach(N=>{N.isSelected=!0}),o.value=new Set(t.value.map(N=>N.id))},Y=()=>{t.value=t.value.filter(N=>!o.value.has(N.id)),o.value.clear()},ne=(N,F)=>{if(m.value){F.preventDefault(),F.stopPropagation();return}F.preventDefault();const j=F.ctrlKey||F.metaKey||o.value.size>1;!N.isSelected&&!j&&(T(),N.isSelected=!0,o.value.add(N.id)),_.isDragging=!0,_.draggedItem=N,_.startPos={x:F.clientX,y:F.clientY},_.startImagePos={x:N.position.x,y:N.position.y},_.isDragged=!1,o.value.size>1?(_.selectedImagesStartPos=new Map,t.value.forEach(ie=>{ie.isSelected&&(_.selectedImagesStartPos.set(ie.id,{x:ie.position.x,y:ie.position.y}),ie.isDragging=!0,ie.position.zIndex=Date.now())})):(N.isDragging=!0,N.position.zIndex=Date.now()),F.target instanceof HTMLElement&&(F.target.style.willChange="transform"),window.addEventListener("mousemove",ee,{passive:!1}),window.addEventListener("mouseup",he)};let ae=null,W=0,L=0;const ee=N=>{N.preventDefault(),_.isDragging&&(W=N.clientX,L=N.clientY,ae&&cancelAnimationFrame(ae),ae=requestAnimationFrame(()=>{var ie;const F=(W-_.startPos.x)/d.value,j=(L-_.startPos.y)/d.value;if(o.value.size>1&&_.selectedImagesStartPos.size>0)t.value.forEach(re=>{var le;if(re.isSelected&&_.selectedImagesStartPos.has(re.id)){const me=_.selectedImagesStartPos.get(re.id);let de=me.x+F,Se=me.y+j;const Ee=window.innerWidth/d.value,xe=window.innerHeight/d.value,we=(le=s.value)==null?void 0:le.getBoundingClientRect(),ke=we?we.left/d.value:0,We=we?we.top/d.value:0,$e=Math.max(r.width,Ee-ke)-re.position.width,Me=Math.max(r.height,xe-We)-re.position.height,et=-ke,st=-We;if(de=Math.max(et,Math.min($e,de)),Se=Math.max(st,Math.min(Me,Se)),r.snapToGrid){const He=r.gridSize,vt=8,Et=Math.round(de/He)*He;Math.abs(de-Et)<vt&&(de=de+(Et-de)*.3);const at=Math.round(Se/He)*He;Math.abs(Se-at)<vt&&(Se=Se+(at-Se)*.3)}re.position.x=de,re.position.y=Se}});else if(_.draggedItem){let re=_.startImagePos.x+F,le=_.startImagePos.y+j;const me=window.innerWidth/d.value,de=window.innerHeight/d.value,Se=(ie=s.value)==null?void 0:ie.getBoundingClientRect(),Ee=Se?Se.left/d.value:0,xe=Se?Se.top/d.value:0,we=Math.max(r.width,me-Ee)-_.draggedItem.position.width,ke=Math.max(r.height,de-xe)-_.draggedItem.position.height,We=-Ee,$e=-xe;if(re=Math.max(We,Math.min(we,re)),le=Math.max($e,Math.min(ke,le)),r.snapToGrid){const Me=r.gridSize,et=8,st=Math.round(re/Me)*Me;Math.abs(re-st)<et&&(re=re+(st-re)*.3);const He=Math.round(le/Me)*Me;Math.abs(le-He)<et&&(le=le+(He-le)*.3)}_.draggedItem.position.x=re,_.draggedItem.position.y=le,_.isDragged=!0}}))},te=N=>{var ke;const F=N.position.width,j=N.position.height,ie=window.innerWidth/d.value,re=window.innerHeight/d.value,le=(ke=s.value)==null?void 0:ke.getBoundingClientRect(),me=le?le.left/d.value:0,de=le?le.top/d.value:0,Se=Math.max(r.width,ie-me)-F,Ee=Math.max(r.height,re-de)-j,xe=-me,we=-de;N.position.x=Math.max(xe,Math.min(Se,N.position.x)),N.position.y=Math.max(we,Math.min(Ee,N.position.y))},he=N=>{ae&&(cancelAnimationFrame(ae),ae=null),o.value.size>1?(t.value.forEach(F=>{F.isSelected&&(F.isDragging=!1,te(F))}),_.selectedImagesStartPos.clear()):_.draggedItem&&(te(_.draggedItem),_.draggedItem.isDragging=!1,N&&N.target instanceof HTMLElement&&(N.target.style.willChange="")),_.isDragging=!1,_.draggedItem=null,_.isDragged=!1,window.removeEventListener("mousemove",ee),window.removeEventListener("mouseup",he)},H=()=>{d.value=Math.min(d.value+.1,3)},q=()=>{d.value=Math.max(d.value-.1,.1)},y=N=>{if(!m.value||!w.value)return;N.preventDefault();const F=N.clientX-w.value.x,j=N.clientY-w.value.y;b.value.x=g.value.x+F,b.value.y=g.value.y+j},O=()=>{m.value?c():v()},V=N=>{m.value&&(N.preventDefault(),N.stopPropagation(),w.value={x:N.clientX,y:N.clientY},g.value={x:b.value.x,y:b.value.y},window.addEventListener("mousemove",y,{passive:!1}))},I=()=>{window.removeEventListener("mousemove",y)},$=()=>{d.value=1,b.value={x:0,y:0}},Z=N=>{if(N.preventDefault(),N.ctrlKey){const F=N.deltaY>0?-.1:.1;d.value=Math.max(.1,Math.min(3,d.value+F))}else b.value.x-=N.deltaX*.5,b.value.y-=N.deltaY*.5},J=async()=>{const N=document.createElement("canvas");N.width=r.width,N.height=r.height;const F=N.getContext("2d");F.fillStyle=i.value?"#000000":"#f8fafc",F.fillRect(0,0,N.width,N.height);const j=[...t.value].sort((ie,re)=>ie.position.zIndex-re.position.zIndex);for(const ie of j){const re=new Image;await new Promise(le=>{re.onload=le,re.src=ie.url}),F.save(),F.translate(ie.position.x+ie.position.width/2,ie.position.y+ie.position.height/2),F.rotate(ie.position.rotation*Math.PI/180),F.drawImage(re,-ie.position.width/2,-ie.position.height/2,ie.position.width,ie.position.height),F.restore()}N.toBlob(ie=>{if(ie){const re=URL.createObjectURL(ie),le=document.createElement("a");le.href=re,le.download="canvas-export.png",le.click(),URL.revokeObjectURL(re)}})};return ls(()=>{window.addEventListener("keydown",C)}),ls(()=>()=>{window.removeEventListener("keydown",C)}),(N,F)=>(ue(),pe("div",{class:Ae([i.value?"bg-black":"bg-slate-50","h-screen relative overflow-hidden"])},[l.value?(ue(),pe("div",pg,[M("div",{class:Ae([i.value?"bg-slate-800 border-slate-700":"bg-white border-slate-200","rounded-xl shadow-lg border p-2 flex items-center gap-2 transition-colors duration-300"])},[M("div",{class:Ae([i.value?"border-slate-600":"border-slate-200","flex items-center gap-1 border-r pr-2"])},[M("button",{onClick:E,class:Ae([i.value?"hover:bg-gray-800 text-white":"hover:bg-slate-100 text-slate-800","p-2 rounded-lg transition-colors"]),title:""},[_e(ve(fs),{class:"w-4 h-4"})],2),M("input",{ref_key:"fileInputRef",ref:p,type:"file",multiple:"",accept:"image/*,.zip",class:"hidden",onChange:F[0]||(F[0]=j=>A(j.target.files))},null,544),M("button",{onClick:F[1]||(F[1]=j=>{var ie;return(ie=p.value)==null?void 0:ie.click()}),class:Ae([i.value?"hover:bg-gray-800 text-white":"hover:bg-slate-100 text-slate-800","p-2 rounded-lg transition-colors"]),title:""},[_e(ve(Zs),{class:"w-4 h-4"})],2),f.value?(ue(),pe("button",{key:0,onClick:h,class:Ae([i.value?"hover:bg-gray-800 text-white":"hover:bg-slate-100 text-slate-800","p-2 rounded-lg transition-colors"]),title:""},[_e(ve(pd),{class:"w-4 h-4"})],2)):Oe("",!0),M("button",{onClick:J,class:Ae([i.value?"hover:bg-gray-800 text-white":"hover:bg-slate-100 text-slate-800","p-2 rounded-lg transition-colors"]),title:""},[_e(ve(Yi),{class:"w-4 h-4"})],2)],2),M("div",{class:Ae([i.value?"border-slate-600":"border-slate-200","flex items-center gap-1 border-r pr-2"])},[M("button",{onClick:q,class:Ae([i.value?"hover:bg-slate-700 text-white":"hover:bg-slate-100 text-slate-800","p-2 rounded-lg transition-colors"])},[_e(ve(Pd),{class:"w-4 h-4"})],2),M("span",{class:Ae([i.value?"text-white":"text-slate-800","px-2 text-sm min-w-[3rem] text-center"])},be(Math.round(d.value*100))+"% ",3),M("button",{onClick:H,class:Ae([i.value?"hover:bg-slate-700 text-white":"hover:bg-slate-100 text-slate-800","p-2 rounded-lg transition-colors"])},[_e(ve(Bd),{class:"w-4 h-4"})],2),M("button",{onClick:$,class:Ae([i.value?"hover:bg-slate-700 text-white":"hover:bg-slate-100 text-slate-800","p-2 rounded-lg transition-colors"]),title:""},[_e(ve(Td),{class:"w-4 h-4"})],2)],2),M("div",mg,[M("button",{onClick:K,class:Ae([i.value?"hover:bg-slate-700 text-white":"hover:bg-slate-100 text-slate-800","p-2 rounded-lg transition-colors"]),title:""},"  ",2),M("button",{onClick:T,class:Ae([i.value?"hover:bg-slate-700 text-white":"hover:bg-slate-100 text-slate-800","p-2 rounded-lg transition-colors"]),title:""},"  ",2),M("button",{onClick:Y,disabled:o.value.size===0,class:Ae([[i.value?"hover:bg-slate-700 text-white":"hover:bg-slate-100 text-slate-800",o.value.size===0?"opacity-50 cursor-not-allowed":""],"p-2 rounded-lg transition-colors"]),title:""},[_e(ve(_r),{class:"w-4 h-4"})],10,_g)])],2),M("div",{class:Ae([i.value?"bg-gray-900 text-white border-slate-700":"bg-white text-slate-800 border-slate-200","rounded-xl shadow-lg border p-2 flex items-center gap-2 transition-colors duration-300"])},[M("button",{onClick:x,class:Ae([i.value?"bg-gray-800 text-white hover:bg-gray-700":"bg-white text-slate-800 hover:bg-slate-50","p-2 rounded-lg border transition-colors shadow-sm"]),title:"/"},[M("div",gg,[i.value?(ue(),pe("svg",vg,[...F[2]||(F[2]=[M("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"},null,-1),M("circle",{cx:"12",cy:"12",r:"4",fill:"white"},null,-1)])])):(ue(),pe("svg",bg,[...F[3]||(F[3]=[M("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"},null,-1),M("circle",{cx:"12",cy:"12",r:"4",fill:"black"},null,-1)])])),M("span",wg,be(i.value?"":""),1)])],2),M("button",{onClick:v,class:Ae([[m.value?i.value?"bg-blue-600 text-white":"bg-blue-500 text-white":i.value?"hover:bg-gray-800 text-white":"hover:bg-slate-100 text-slate-800"],"p-3 rounded-lg transition-colors border-2"]),style:Lt({borderColor:m.value?i.value?"#2563eb":"#3b82f6":"transparent"}),title:""},[_e(ve(md),{class:"w-5 h-5"})],6),M("button",{onClick:c,class:Ae([[a.value==="select"?i.value?"bg-blue-600 text-white":"bg-blue-500 text-white":i.value?"hover:bg-gray-800 text-white":"hover:bg-slate-100 text-slate-800"],"p-3 rounded-lg transition-colors border-2"]),style:Lt({borderColor:a.value==="select"?i.value?"#2563eb":"#3b82f6":"transparent"}),title:""},[_e(ve(Cd),{class:"w-5 h-5"})],6)],2),M("div",{class:Ae([i.value?"bg-gray-900 text-white border-gray-700":"bg-white text-slate-800 border-slate-200","rounded-xl shadow-lg border px-4 py-2 transition-colors duration-300"])},[M("div",yg," : "+be(t.value.length)+" | : "+be(o.value.size),1)],2)])):Oe("",!0),M("div",{ref_key:"panelRef",ref:s,class:Ae(["absolute inset-0 overflow-hidden",[i.value?"bg-black":"bg-slate-50",_.isDragging?"cursor-grabbing":""]]),onDragover:P,onDragleave:R,onDrop:Q,onWheel:Z},[M("div",{class:"relative",style:Lt({transform:`translate(${b.value.x}px, ${b.value.y}px) scale(${d.value})`,transformOrigin:"0 0"})},[M("div",{class:Ae([i.value?"bg-black":"bg-slate-50","absolute inset-0 transition-colors duration-300"])},null,2),r.showGrid?(ue(),pe("div",{key:0,class:"absolute inset-0 opacity-20",style:Lt({backgroundImage:i.value?`
              linear-gradient(to right, #6b7280 1px, transparent 1px),
              linear-gradient(to bottom, #6b7280 1px, transparent 1px)
            `:`
              linear-gradient(to right, #e2e8f0 1px, transparent 1px),
              linear-gradient(to bottom, #e2e8f0 1px, transparent 1px)
            `,backgroundSize:`${r.gridSize}px ${r.gridSize}px`})},null,4)):Oe("",!0),u.value?(ue(),pe("div",{key:1,class:Ae(["absolute inset-0 bg-brand-500/10 border-2 border-dashed border-brand-500 flex items-center justify-center z-10",{"bg-slate-500/20":i.value}])},[M("div",{class:Ae([i.value?"bg-gray-900 text-white border-gray-700":"bg-white text-slate-800 border-brand-200","rounded-lg p-6 shadow-lg border"])},[M("div",Sg,[_e(ve(Zs),{class:"w-12 h-12 text-brand-500 mx-auto mb-2"}),M("p",{class:Ae([i.value?"text-white":"text-brand-700","text-lg font-semibold"])},"",2),M("p",{class:Ae([i.value?"text-slate-300":"text-brand-600","text-sm"])}," JPGPNGGIFWebP ",2)])],2)],2)):Oe("",!0),M("div",{class:"relative panel-container",style:Lt({width:r.width+"px",height:r.height+"px"}),onMousedown:se},[n.isSelecting?(ue(),pe("div",{key:0,class:"absolute border-2 border-blue-500 bg-blue-200/20 pointer-events-none z-50",style:Lt({left:Math.min(n.startX,n.currentX)+"px",top:Math.min(n.startY,n.currentY)+"px",width:Math.abs(n.currentX-n.startX)+"px",height:Math.abs(n.currentY-n.startY)+"px"})},null,4)):Oe("",!0),(ue(!0),pe(tt,null,Nt(t.value,j=>(ue(),pe("div",{key:j.id,class:Ae(["absolute cursor-move select-none image-item",{"ring-2 ring-brand-500 ring-offset-2":j.isSelected,"ring-2 ring-amber-400 ring-offset-2":j.isDragging,"hover:shadow-lg transition-shadow":!j.isDragging,"is-dragging":j.isDragging,"optimized-element":!0}]),style:Lt({left:j.position.x+"px",top:j.position.y+"px",width:j.position.width+"px",height:j.position.height+"px",transform:`rotate(${j.position.rotation}deg) scale(${j.position.scale})`,transformOrigin:"center",zIndex:j.position.zIndex,willChange:j.isDragging?"transform":"auto"}),onMousedown:ie=>ne(j,ie),onClick:ie=>S(j,ie)},[M("img",{src:j.url,class:"w-full h-full object-cover rounded-xl shadow-md pointer-events-none",draggable:"false"},null,8,Cg),j.isSelected?(ue(),pe("div",kg,be(j.name),1)):Oe("",!0)],46,xg))),128))],36)],4)],34),M("div",{class:Ae([i.value?"bg-gray-900/90 text-white border-gray-700":"bg-white/90 text-slate-600 border-slate-200","fixed bottom-4 left-4 backdrop-blur-sm rounded-lg p-3 text-xs border transition-colors duration-300"])},[...F[4]||(F[4]=[M("div",{class:"font-medium mb-1"},":",-1),M("div",null,"Ctrl+A:  | Delete:  | Esc: ",-1),M("div",null,"Ctrl+:  | : ",-1),M("div",{class:"mt-1"},"F2: ",-1)])],2),t.value.length===0&&!u.value?(ue(),pe("div",Eg,[M("div",{class:Ae([(i.value,"text-slate-400"),"text-center"])},[_e(ve(fd),{class:"w-16 h-16 mx-auto mb-4 opacity-50"}),F[5]||(F[5]=M("p",{class:"text-xl font-medium"},"",-1)),F[6]||(F[6]=M("p",{class:"text-sm mt-2"}," JPGPNGGIFWebP  ZIP ",-1))],2)])):Oe("",!0)],2))}}),Sl=(e,t)=>{const s=e.__vccOpts||e;for(const[o,u]of t)s[o]=u;return s},Ag=Sl(Tg,[["__scopeId","data-v-19d50ba1"]]),Rg={class:"min-h-screen bg-gradient-to-b from-brand-50 to-white"},Mg={class:"max-w-4xl mx-auto px-4 py-8"},Dg={class:"flex items-center justify-between mb-8"},Lg={class:"bg-white rounded-xl shadow-sm border border-slate-200 p-6 mb-6"},Ig={key:0,class:"mt-6"},Og={class:"flex flex-col md:flex-row gap-6"},Bg={class:"flex-1"},Pg=["src"],$g={class:"flex-1"},Hg={class:"text-sm text-slate-600 space-y-2"},Ng={key:0,class:"bg-white rounded-xl shadow-sm border border-slate-200 p-6"},Fg={class:"flex items-center justify-between mb-4"},zg={key:0,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Ug={key:1,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Wg={class:"relative"},jg={class:"absolute top-2 right-2 text-xs text-slate-500 bg-white px-2 py-1 rounded"},Vg={key:1,class:"bg-white rounded-xl shadow-sm border border-slate-200 p-6"},qg=ct({__name:"ImageToBase64",setup(e){const t=fe(),s=fe(),o=fe(!1),u=fe(""),d=fe(""),b=fe(""),i=fe(""),r=fe(0),f=fe(0),p=fe(!1),h=a=>{const n=a.target;n.files&&n.files[0]&&m(n.files[0])},_=a=>{a.preventDefault(),o.value=!1,a.dataTransfer&&a.dataTransfer.files[0]&&m(a.dataTransfer.files[0])},m=a=>{if(!a.type.startsWith("image/")){alert("");return}b.value=a.name,i.value=w(a.size);const n=new FileReader;n.onload=c=>{var k;const v=(k=c.target)==null?void 0:k.result;u.value=v,d.value=v;const x=new Image;x.onload=()=>{r.value=x.width,f.value=x.height},x.src=v},n.readAsDataURL(a)},w=a=>{if(a===0)return"0 Bytes";const n=1024,c=["Bytes","KB","MB","GB"],v=Math.floor(Math.log(a)/Math.log(n));return parseFloat((a/Math.pow(n,v)).toFixed(2))+" "+c[v]},g=async()=>{var a;try{await navigator.clipboard.writeText(d.value),p.value=!0,setTimeout(()=>{p.value=!1},2e3)}catch{(a=s.value)==null||a.select(),document.execCommand("copy"),p.value=!0,setTimeout(()=>{p.value=!1},2e3)}},l=()=>{var a;(a=s.value)==null||a.select()};return ls(()=>{}),(a,n)=>(ue(),pe("div",Rg,[M("div",Mg,[M("div",Dg,[n[5]||(n[5]=M("div",{class:"text-center flex-1"},[M("h1",{class:"text-3xl font-bold text-slate-900 mb-2"},"BASE64"),M("p",{class:"text-slate-600"},"BASE64")],-1)),_e(ve(Zt),{to:"/",class:"flex items-center gap-2 px-3 py-2 bg-white/80 backdrop-blur rounded-lg shadow-sm border border-slate-200 text-slate-600 hover:text-brand-600"},{default:Gt(()=>[_e(ve(fs),{class:"w-5 h-5"}),n[4]||(n[4]=M("span",{class:"hidden md:inline"},"",-1))]),_:1})]),M("div",Lg,[M("div",{class:Ae(["border-2 border-dashed border-slate-300 rounded-lg p-8 text-center cursor-pointer hover:border-brand-300 transition-colors",{"border-brand-400 bg-brand-50":o.value}]),onDragover:n[0]||(n[0]=Fi(c=>o.value=!0,["prevent"])),onDragleave:n[1]||(n[1]=c=>o.value=!1),onDrop:_,onClick:n[2]||(n[2]=c=>a.$refs.fileInput.click())},[M("input",{ref_key:"fileInput",ref:t,type:"file",accept:"image/*",class:"hidden",onChange:h},null,544),n[6]||(n[6]=qs('<div class="w-16 h-16 mx-auto mb-4 bg-brand-100 rounded-full flex items-center justify-center"><svg class="w-8 h-8 text-brand-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg></div><h3 class="text-lg font-semibold text-slate-900 mb-2"></h3><p class="text-slate-500 text-sm"> JPGPNGGIFWEBP </p>',3))],34),u.value?(ue(),pe("div",Ig,[n[10]||(n[10]=M("h4",{class:"text-sm font-medium text-slate-700 mb-3"},"",-1)),M("div",Og,[M("div",Bg,[M("img",{src:u.value,class:"max-w-full max-h-64 rounded-lg border border-slate-200",alt:""},null,8,Pg)]),M("div",$g,[M("div",Hg,[M("div",null,[n[7]||(n[7]=M("span",{class:"font-medium"},"",-1)),Je(be(b.value),1)]),M("div",null,[n[8]||(n[8]=M("span",{class:"font-medium"},"",-1)),Je(be(i.value),1)]),M("div",null,[n[9]||(n[9]=M("span",{class:"font-medium"},"",-1)),Je(be(r.value)+"  "+be(f.value)+" ",1)])])])])])):Oe("",!0)]),d.value?(ue(),pe("div",Ng,[M("div",Fg,[n[13]||(n[13]=M("h3",{class:"text-lg font-semibold text-slate-900"},"BASE64",-1)),M("button",{onClick:g,class:Ae(["flex items-center gap-2 px-4 py-2 bg-brand-500 text-white rounded-lg hover:bg-brand-600 transition-colors",{"bg-green-500":p.value}])},[p.value?(ue(),pe("svg",Ug,[...n[12]||(n[12]=[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])])):(ue(),pe("svg",zg,[...n[11]||(n[11]=[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"},null,-1)])])),Je(" "+be(p.value?"":""),1)],2)]),M("div",Wg,[Xe(M("textarea",{ref_key:"base64Textarea",ref:s,"onUpdate:modelValue":n[3]||(n[3]=c=>d.value=c),readonly:"",class:"w-full h-40 p-3 border border-slate-300 rounded-lg bg-slate-50 text-sm font-mono resize-none",onClick:l},null,512),[[Ye,d.value]]),M("div",jg,be(d.value.length)+"  ",1)]),n[14]||(n[14]=M("div",{class:"mt-3 text-xs text-slate-500"},"  ",-1))])):(ue(),pe("div",Vg,[...n[15]||(n[15]=[qs('<h3 class="text-lg font-semibold text-slate-900 mb-4"></h3><div class="space-y-3 text-slate-600"><div class="flex items-start gap-3"><div class="w-6 h-6 bg-brand-100 text-brand-600 rounded-full flex items-center justify-center text-sm font-medium">1</div><p></p></div><div class="flex items-start gap-3"><div class="w-6 h-6 bg-brand-100 text-brand-600 rounded-full flex items-center justify-center text-sm font-medium">2</div><p>BASE64</p></div><div class="flex items-start gap-3"><div class="w-6 h-6 bg-brand-100 text-brand-600 rounded-full flex items-center justify-center text-sm font-medium">3</div><p>BASE64</p></div></div>',2)])]))])]))}});var $r={exports:{}},jo;function Kg(){return jo||(jo=1,(function(e,t){(function(s,o){e.exports=o()})(globalThis,(()=>(()=>{var s={4567:function(b,i,r){var f=this&&this.__decorate||function(n,c,v,x){var k,E=arguments.length,C=E<3?c:x===null?x=Object.getOwnPropertyDescriptor(c,v):x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(n,c,v,x);else for(var A=n.length-1;A>=0;A--)(k=n[A])&&(C=(E<3?k(C):E>3?k(c,v,C):k(c,v))||C);return E>3&&C&&Object.defineProperty(c,v,C),C},p=this&&this.__param||function(n,c){return function(v,x){c(v,x,n)}};Object.defineProperty(i,"__esModule",{value:!0}),i.AccessibilityManager=void 0;const h=r(9042),_=r(9924),m=r(844),w=r(4725),g=r(2585),l=r(3656);let a=i.AccessibilityManager=class extends m.Disposable{constructor(n,c,v,x){super(),this._terminal=n,this._coreBrowserService=v,this._renderService=x,this._rowColumns=new WeakMap,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=this._coreBrowserService.mainDocument.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=this._coreBrowserService.mainDocument.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let k=0;k<this._terminal.rows;k++)this._rowElements[k]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[k]);if(this._topBoundaryFocusListener=k=>this._handleBoundaryFocus(k,0),this._bottomBoundaryFocusListener=k=>this._handleBoundaryFocus(k,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=this._coreBrowserService.mainDocument.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new _.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._terminal.onResize((k=>this._handleResize(k.rows)))),this.register(this._terminal.onRender((k=>this._refreshRows(k.start,k.end)))),this.register(this._terminal.onScroll((()=>this._refreshRows()))),this.register(this._terminal.onA11yChar((k=>this._handleChar(k)))),this.register(this._terminal.onLineFeed((()=>this._handleChar(`
`)))),this.register(this._terminal.onA11yTab((k=>this._handleTab(k)))),this.register(this._terminal.onKey((k=>this._handleKey(k.key)))),this.register(this._terminal.onBlur((()=>this._clearLiveRegion()))),this.register(this._renderService.onDimensionsChange((()=>this._refreshRowsDimensions()))),this.register((0,l.addDisposableDomListener)(document,"selectionchange",(()=>this._handleSelectionChange()))),this.register(this._coreBrowserService.onDprChange((()=>this._refreshRowsDimensions()))),this._refreshRows(),this.register((0,m.toDisposable)((()=>{this._accessibilityContainer.remove(),this._rowElements.length=0})))}_handleTab(n){for(let c=0;c<n;c++)this._handleChar(" ")}_handleChar(n){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==n&&(this._charsToAnnounce+=n):this._charsToAnnounce+=n,n===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=h.tooMuchOutput)))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0}_handleKey(n){this._clearLiveRegion(),new RegExp("\\p{Control}","u").test(n)||this._charsToConsume.push(n)}_refreshRows(n,c){this._liveRegionDebouncer.refresh(n,c,this._terminal.rows)}_renderRows(n,c){const v=this._terminal.buffer,x=v.lines.length.toString();for(let k=n;k<=c;k++){const E=v.lines.get(v.ydisp+k),C=[],A=(E==null?void 0:E.translateToString(!0,void 0,void 0,C))||"",z=(v.ydisp+k+1).toString(),G=this._rowElements[k];G&&(A.length===0?(G.innerText="",this._rowColumns.set(G,[0,1])):(G.textContent=A,this._rowColumns.set(G,C)),G.setAttribute("aria-posinset",z),G.setAttribute("aria-setsize",x))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(n,c){const v=n.target,x=this._rowElements[c===0?1:this._rowElements.length-2];if(v.getAttribute("aria-posinset")===(c===0?"1":`${this._terminal.buffer.lines.length}`)||n.relatedTarget!==x)return;let k,E;if(c===0?(k=v,E=this._rowElements.pop(),this._rowContainer.removeChild(E)):(k=this._rowElements.shift(),E=v,this._rowContainer.removeChild(k)),k.removeEventListener("focus",this._topBoundaryFocusListener),E.removeEventListener("focus",this._bottomBoundaryFocusListener),c===0){const C=this._createAccessibilityTreeNode();this._rowElements.unshift(C),this._rowContainer.insertAdjacentElement("afterbegin",C)}else{const C=this._createAccessibilityTreeNode();this._rowElements.push(C),this._rowContainer.appendChild(C)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(c===0?-1:1),this._rowElements[c===0?1:this._rowElements.length-2].focus(),n.preventDefault(),n.stopImmediatePropagation()}_handleSelectionChange(){var A;if(this._rowElements.length===0)return;const n=document.getSelection();if(!n)return;if(n.isCollapsed)return void(this._rowContainer.contains(n.anchorNode)&&this._terminal.clearSelection());if(!n.anchorNode||!n.focusNode)return void console.error("anchorNode and/or focusNode are null");let c={node:n.anchorNode,offset:n.anchorOffset},v={node:n.focusNode,offset:n.focusOffset};if((c.node.compareDocumentPosition(v.node)&Node.DOCUMENT_POSITION_PRECEDING||c.node===v.node&&c.offset>v.offset)&&([c,v]=[v,c]),c.node.compareDocumentPosition(this._rowElements[0])&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_FOLLOWING)&&(c={node:this._rowElements[0].childNodes[0],offset:0}),!this._rowContainer.contains(c.node))return;const x=this._rowElements.slice(-1)[0];if(v.node.compareDocumentPosition(x)&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_PRECEDING)&&(v={node:x,offset:((A=x.textContent)==null?void 0:A.length)??0}),!this._rowContainer.contains(v.node))return;const k=({node:z,offset:G})=>{const B=z instanceof Text?z.parentNode:z;let P=parseInt(B==null?void 0:B.getAttribute("aria-posinset"),10)-1;if(isNaN(P))return console.warn("row is invalid. Race condition?"),null;const R=this._rowColumns.get(B);if(!R)return console.warn("columns is null. Race condition?"),null;let Q=G<R.length?R[G]:R.slice(-1)[0]+1;return Q>=this._terminal.cols&&(++P,Q=0),{row:P,column:Q}},E=k(c),C=k(v);if(E&&C){if(E.row>C.row||E.row===C.row&&E.column>=C.column)throw new Error("invalid range");this._terminal.select(E.column,E.row,(C.row-E.row)*this._terminal.cols-E.column+C.column)}}_handleResize(n){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let c=this._rowContainer.children.length;c<this._terminal.rows;c++)this._rowElements[c]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[c]);for(;this._rowElements.length>n;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){const n=this._coreBrowserService.mainDocument.createElement("div");return n.setAttribute("role","listitem"),n.tabIndex=-1,this._refreshRowDimensions(n),n}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let n=0;n<this._terminal.rows;n++)this._refreshRowDimensions(this._rowElements[n])}}_refreshRowDimensions(n){n.style.height=`${this._renderService.dimensions.css.cell.height}px`}};i.AccessibilityManager=a=f([p(1,g.IInstantiationService),p(2,w.ICoreBrowserService),p(3,w.IRenderService)],a)},3614:(b,i)=>{function r(_){return _.replace(/\r?\n/g,"\r")}function f(_,m){return m?"\x1B[200~"+_+"\x1B[201~":_}function p(_,m,w,g){_=f(_=r(_),w.decPrivateModes.bracketedPasteMode&&g.rawOptions.ignoreBracketedPasteMode!==!0),w.triggerDataEvent(_,!0),m.value=""}function h(_,m,w){const g=w.getBoundingClientRect(),l=_.clientX-g.left-10,a=_.clientY-g.top-10;m.style.width="20px",m.style.height="20px",m.style.left=`${l}px`,m.style.top=`${a}px`,m.style.zIndex="1000",m.focus()}Object.defineProperty(i,"__esModule",{value:!0}),i.rightClickHandler=i.moveTextAreaUnderMouseCursor=i.paste=i.handlePasteEvent=i.copyHandler=i.bracketTextForPaste=i.prepareTextForTerminal=void 0,i.prepareTextForTerminal=r,i.bracketTextForPaste=f,i.copyHandler=function(_,m){_.clipboardData&&_.clipboardData.setData("text/plain",m.selectionText),_.preventDefault()},i.handlePasteEvent=function(_,m,w,g){_.stopPropagation(),_.clipboardData&&p(_.clipboardData.getData("text/plain"),m,w,g)},i.paste=p,i.moveTextAreaUnderMouseCursor=h,i.rightClickHandler=function(_,m,w,g,l){h(_,m,w),l&&g.rightClickSelect(_),m.value=g.selectionText,m.select()}},7239:(b,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ColorContrastCache=void 0;const f=r(1505);i.ColorContrastCache=class{constructor(){this._color=new f.TwoKeyMap,this._css=new f.TwoKeyMap}setCss(p,h,_){this._css.set(p,h,_)}getCss(p,h){return this._css.get(p,h)}setColor(p,h,_){this._color.set(p,h,_)}getColor(p,h){return this._color.get(p,h)}clear(){this._color.clear(),this._css.clear()}}},3656:(b,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.addDisposableDomListener=void 0,i.addDisposableDomListener=function(r,f,p,h){r.addEventListener(f,p,h);let _=!1;return{dispose:()=>{_||(_=!0,r.removeEventListener(f,p,h))}}}},3551:function(b,i,r){var f=this&&this.__decorate||function(a,n,c,v){var x,k=arguments.length,E=k<3?n:v===null?v=Object.getOwnPropertyDescriptor(n,c):v;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(a,n,c,v);else for(var C=a.length-1;C>=0;C--)(x=a[C])&&(E=(k<3?x(E):k>3?x(n,c,E):x(n,c))||E);return k>3&&E&&Object.defineProperty(n,c,E),E},p=this&&this.__param||function(a,n){return function(c,v){n(c,v,a)}};Object.defineProperty(i,"__esModule",{value:!0}),i.Linkifier=void 0;const h=r(3656),_=r(8460),m=r(844),w=r(2585),g=r(4725);let l=i.Linkifier=class extends m.Disposable{get currentLink(){return this._currentLink}constructor(a,n,c,v,x){super(),this._element=a,this._mouseService=n,this._renderService=c,this._bufferService=v,this._linkProviderService=x,this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new _.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new _.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,m.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,m.toDisposable)((()=>{var k;this._lastMouseEvent=void 0,(k=this._activeProviderReplies)==null||k.clear()}))),this.register(this._bufferService.onResize((()=>{this._clearCurrentLink(),this._wasResized=!0}))),this.register((0,h.addDisposableDomListener)(this._element,"mouseleave",(()=>{this._isMouseOut=!0,this._clearCurrentLink()}))),this.register((0,h.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,h.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,h.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(a){this._lastMouseEvent=a;const n=this._positionFromMouseEvent(a,this._element,this._mouseService);if(!n)return;this._isMouseOut=!1;const c=a.composedPath();for(let v=0;v<c.length;v++){const x=c[v];if(x.classList.contains("xterm"))break;if(x.classList.contains("xterm-hover"))return}this._lastBufferCell&&n.x===this._lastBufferCell.x&&n.y===this._lastBufferCell.y||(this._handleHover(n),this._lastBufferCell=n)}_handleHover(a){if(this._activeLine!==a.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(a,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,a)||(this._clearCurrentLink(),this._askForLink(a,!0))}_askForLink(a,n){var v,x;this._activeProviderReplies&&n||((v=this._activeProviderReplies)==null||v.forEach((k=>{k==null||k.forEach((E=>{E.link.dispose&&E.link.dispose()}))})),this._activeProviderReplies=new Map,this._activeLine=a.y);let c=!1;for(const[k,E]of this._linkProviderService.linkProviders.entries())n?(x=this._activeProviderReplies)!=null&&x.get(k)&&(c=this._checkLinkProviderResult(k,a,c)):E.provideLinks(a.y,(C=>{var z,G;if(this._isMouseOut)return;const A=C==null?void 0:C.map((B=>({link:B})));(z=this._activeProviderReplies)==null||z.set(k,A),c=this._checkLinkProviderResult(k,a,c),((G=this._activeProviderReplies)==null?void 0:G.size)===this._linkProviderService.linkProviders.length&&this._removeIntersectingLinks(a.y,this._activeProviderReplies)}))}_removeIntersectingLinks(a,n){const c=new Set;for(let v=0;v<n.size;v++){const x=n.get(v);if(x)for(let k=0;k<x.length;k++){const E=x[k],C=E.link.range.start.y<a?0:E.link.range.start.x,A=E.link.range.end.y>a?this._bufferService.cols:E.link.range.end.x;for(let z=C;z<=A;z++){if(c.has(z)){x.splice(k--,1);break}c.add(z)}}}}_checkLinkProviderResult(a,n,c){var k;if(!this._activeProviderReplies)return c;const v=this._activeProviderReplies.get(a);let x=!1;for(let E=0;E<a;E++)this._activeProviderReplies.has(E)&&!this._activeProviderReplies.get(E)||(x=!0);if(!x&&v){const E=v.find((C=>this._linkAtPosition(C.link,n)));E&&(c=!0,this._handleNewLink(E))}if(this._activeProviderReplies.size===this._linkProviderService.linkProviders.length&&!c)for(let E=0;E<this._activeProviderReplies.size;E++){const C=(k=this._activeProviderReplies.get(E))==null?void 0:k.find((A=>this._linkAtPosition(A.link,n)));if(C){c=!0,this._handleNewLink(C);break}}return c}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(a){if(!this._currentLink)return;const n=this._positionFromMouseEvent(a,this._element,this._mouseService);n&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,n)&&this._currentLink.link.activate(a,this._currentLink.link.text)}_clearCurrentLink(a,n){this._currentLink&&this._lastMouseEvent&&(!a||!n||this._currentLink.link.range.start.y>=a&&this._currentLink.link.range.end.y<=n)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,m.disposeArray)(this._linkCacheDisposables))}_handleNewLink(a){if(!this._lastMouseEvent)return;const n=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);n&&this._linkAtPosition(a.link,n)&&(this._currentLink=a,this._currentLink.state={decorations:{underline:a.link.decorations===void 0||a.link.decorations.underline,pointerCursor:a.link.decorations===void 0||a.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,a.link,this._lastMouseEvent),a.link.decorations={},Object.defineProperties(a.link.decorations,{pointerCursor:{get:()=>{var c,v;return(v=(c=this._currentLink)==null?void 0:c.state)==null?void 0:v.decorations.pointerCursor},set:c=>{var v;(v=this._currentLink)!=null&&v.state&&this._currentLink.state.decorations.pointerCursor!==c&&(this._currentLink.state.decorations.pointerCursor=c,this._currentLink.state.isHovered&&this._element.classList.toggle("xterm-cursor-pointer",c))}},underline:{get:()=>{var c,v;return(v=(c=this._currentLink)==null?void 0:c.state)==null?void 0:v.decorations.underline},set:c=>{var v,x,k;(v=this._currentLink)!=null&&v.state&&((k=(x=this._currentLink)==null?void 0:x.state)==null?void 0:k.decorations.underline)!==c&&(this._currentLink.state.decorations.underline=c,this._currentLink.state.isHovered&&this._fireUnderlineEvent(a.link,c))}}}),this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange((c=>{if(!this._currentLink)return;const v=c.start===0?0:c.start+1+this._bufferService.buffer.ydisp,x=this._bufferService.buffer.ydisp+1+c.end;if(this._currentLink.link.range.start.y>=v&&this._currentLink.link.range.end.y<=x&&(this._clearCurrentLink(v,x),this._lastMouseEvent)){const k=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);k&&this._askForLink(k,!1)}}))))}_linkHover(a,n,c){var v;(v=this._currentLink)!=null&&v.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(n,!0),this._currentLink.state.decorations.pointerCursor&&a.classList.add("xterm-cursor-pointer")),n.hover&&n.hover(c,n.text)}_fireUnderlineEvent(a,n){const c=a.range,v=this._bufferService.buffer.ydisp,x=this._createLinkUnderlineEvent(c.start.x-1,c.start.y-v-1,c.end.x,c.end.y-v-1,void 0);(n?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(x)}_linkLeave(a,n,c){var v;(v=this._currentLink)!=null&&v.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(n,!1),this._currentLink.state.decorations.pointerCursor&&a.classList.remove("xterm-cursor-pointer")),n.leave&&n.leave(c,n.text)}_linkAtPosition(a,n){const c=a.range.start.y*this._bufferService.cols+a.range.start.x,v=a.range.end.y*this._bufferService.cols+a.range.end.x,x=n.y*this._bufferService.cols+n.x;return c<=x&&x<=v}_positionFromMouseEvent(a,n,c){const v=c.getCoords(a,n,this._bufferService.cols,this._bufferService.rows);if(v)return{x:v[0],y:v[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(a,n,c,v,x){return{x1:a,y1:n,x2:c,y2:v,cols:this._bufferService.cols,fg:x}}};i.Linkifier=l=f([p(1,g.IMouseService),p(2,g.IRenderService),p(3,w.IBufferService),p(4,g.ILinkProviderService)],l)},9042:(b,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.tooMuchOutput=i.promptLabel=void 0,i.promptLabel="Terminal input",i.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(b,i,r){var f=this&&this.__decorate||function(g,l,a,n){var c,v=arguments.length,x=v<3?l:n===null?n=Object.getOwnPropertyDescriptor(l,a):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(g,l,a,n);else for(var k=g.length-1;k>=0;k--)(c=g[k])&&(x=(v<3?c(x):v>3?c(l,a,x):c(l,a))||x);return v>3&&x&&Object.defineProperty(l,a,x),x},p=this&&this.__param||function(g,l){return function(a,n){l(a,n,g)}};Object.defineProperty(i,"__esModule",{value:!0}),i.OscLinkProvider=void 0;const h=r(511),_=r(2585);let m=i.OscLinkProvider=class{constructor(g,l,a){this._bufferService=g,this._optionsService=l,this._oscLinkService=a}provideLinks(g,l){var A;const a=this._bufferService.buffer.lines.get(g-1);if(!a)return void l(void 0);const n=[],c=this._optionsService.rawOptions.linkHandler,v=new h.CellData,x=a.getTrimmedLength();let k=-1,E=-1,C=!1;for(let z=0;z<x;z++)if(E!==-1||a.hasContent(z)){if(a.loadCell(z,v),v.hasExtendedAttrs()&&v.extended.urlId){if(E===-1){E=z,k=v.extended.urlId;continue}C=v.extended.urlId!==k}else E!==-1&&(C=!0);if(C||E!==-1&&z===x-1){const G=(A=this._oscLinkService.getLinkData(k))==null?void 0:A.uri;if(G){const B={start:{x:E+1,y:g},end:{x:z+(C||z!==x-1?0:1),y:g}};let P=!1;if(!(c!=null&&c.allowNonHttpProtocols))try{const R=new URL(G);["http:","https:"].includes(R.protocol)||(P=!0)}catch{P=!0}P||n.push({text:G,range:B,activate:(R,Q)=>c?c.activate(R,Q,B):w(0,Q),hover:(R,Q)=>{var se;return(se=c==null?void 0:c.hover)==null?void 0:se.call(c,R,Q,B)},leave:(R,Q)=>{var se;return(se=c==null?void 0:c.leave)==null?void 0:se.call(c,R,Q,B)}})}C=!1,v.hasExtendedAttrs()&&v.extended.urlId?(E=z,k=v.extended.urlId):(E=-1,k=-1)}}l(n)}};function w(g,l){if(confirm(`Do you want to navigate to ${l}?

WARNING: This link could potentially be dangerous`)){const a=window.open();if(a){try{a.opener=null}catch{}a.location.href=l}else console.warn("Opening link blocked as opener could not be cleared")}}i.OscLinkProvider=m=f([p(0,_.IBufferService),p(1,_.IOptionsService),p(2,_.IOscLinkService)],m)},6193:(b,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.RenderDebouncer=void 0,i.RenderDebouncer=class{constructor(r,f){this._renderCallback=r,this._coreBrowserService=f,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(r){return this._refreshCallbacks.push(r),this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame((()=>this._innerRefresh()))),this._animationFrame}refresh(r,f,p){this._rowCount=p,r=r!==void 0?r:0,f=f!==void 0?f:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,r):r,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,f):f,this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame((()=>this._innerRefresh())))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();const r=Math.max(this._rowStart,0),f=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(r,f),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(const r of this._refreshCallbacks)r(0);this._refreshCallbacks=[]}}},3236:(b,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Terminal=void 0;const f=r(3614),p=r(3656),h=r(3551),_=r(9042),m=r(3730),w=r(1680),g=r(3107),l=r(5744),a=r(2950),n=r(1296),c=r(428),v=r(4269),x=r(5114),k=r(8934),E=r(3230),C=r(9312),A=r(4725),z=r(6731),G=r(8055),B=r(8969),P=r(8460),R=r(844),Q=r(6114),se=r(8437),X=r(2584),oe=r(7399),D=r(5941),U=r(9074),S=r(2585),T=r(5435),K=r(4567),Y=r(779);class ne extends B.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor(W={}){super(W),this.browser=Q,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new R.MutableDisposable),this._onCursorMove=this.register(new P.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new P.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new P.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new P.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new P.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new P.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new P.EventEmitter),this._onBlur=this.register(new P.EventEmitter),this._onA11yCharEmitter=this.register(new P.EventEmitter),this._onA11yTabEmitter=this.register(new P.EventEmitter),this._onWillOpen=this.register(new P.EventEmitter),this._setup(),this._decorationService=this._instantiationService.createInstance(U.DecorationService),this._instantiationService.setService(S.IDecorationService,this._decorationService),this._linkProviderService=this._instantiationService.createInstance(Y.LinkProviderService),this._instantiationService.setService(A.ILinkProviderService,this._linkProviderService),this._linkProviderService.registerLinkProvider(this._instantiationService.createInstance(m.OscLinkProvider)),this.register(this._inputHandler.onRequestBell((()=>this._onBell.fire()))),this.register(this._inputHandler.onRequestRefreshRows(((L,ee)=>this.refresh(L,ee)))),this.register(this._inputHandler.onRequestSendFocus((()=>this._reportFocus()))),this.register(this._inputHandler.onRequestReset((()=>this.reset()))),this.register(this._inputHandler.onRequestWindowsOptionsReport((L=>this._reportWindowsOptions(L)))),this.register(this._inputHandler.onColor((L=>this._handleColorEvent(L)))),this.register((0,P.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,P.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,P.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,P.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize((L=>this._afterResize(L.cols,L.rows)))),this.register((0,R.toDisposable)((()=>{var L,ee;this._customKeyEventHandler=void 0,(ee=(L=this.element)==null?void 0:L.parentNode)==null||ee.removeChild(this.element)})))}_handleColorEvent(W){if(this._themeService)for(const L of W){let ee,te="";switch(L.index){case 256:ee="foreground",te="10";break;case 257:ee="background",te="11";break;case 258:ee="cursor",te="12";break;default:ee="ansi",te="4;"+L.index}switch(L.type){case 0:const he=G.color.toColorRGB(ee==="ansi"?this._themeService.colors.ansi[L.index]:this._themeService.colors[ee]);this.coreService.triggerDataEvent(`${X.C0.ESC}]${te};${(0,D.toRgbString)(he)}${X.C1_ESCAPED.ST}`);break;case 1:if(ee==="ansi")this._themeService.modifyColors((H=>H.ansi[L.index]=G.channels.toColor(...L.color)));else{const H=ee;this._themeService.modifyColors((q=>q[H]=G.channels.toColor(...L.color)))}break;case 2:this._themeService.restoreColor(L.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(W){W?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(K.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(W){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(X.C0.ESC+"[I"),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){var W;return(W=this.textarea)==null?void 0:W.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(X.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;const W=this.buffer.ybase+this.buffer.y,L=this.buffer.lines.get(W);if(!L)return;const ee=Math.min(this.buffer.x,this.cols-1),te=this._renderService.dimensions.css.cell.height,he=L.getWidth(ee),H=this._renderService.dimensions.css.cell.width*he,q=this.buffer.y*this._renderService.dimensions.css.cell.height,y=ee*this._renderService.dimensions.css.cell.width;this.textarea.style.left=y+"px",this.textarea.style.top=q+"px",this.textarea.style.width=H+"px",this.textarea.style.height=te+"px",this.textarea.style.lineHeight=te+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,p.addDisposableDomListener)(this.element,"copy",(L=>{this.hasSelection()&&(0,f.copyHandler)(L,this._selectionService)})));const W=L=>(0,f.handlePasteEvent)(L,this.textarea,this.coreService,this.optionsService);this.register((0,p.addDisposableDomListener)(this.textarea,"paste",W)),this.register((0,p.addDisposableDomListener)(this.element,"paste",W)),Q.isFirefox?this.register((0,p.addDisposableDomListener)(this.element,"mousedown",(L=>{L.button===2&&(0,f.rightClickHandler)(L,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)}))):this.register((0,p.addDisposableDomListener)(this.element,"contextmenu",(L=>{(0,f.rightClickHandler)(L,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)}))),Q.isLinux&&this.register((0,p.addDisposableDomListener)(this.element,"auxclick",(L=>{L.button===1&&(0,f.moveTextAreaUnderMouseCursor)(L,this.textarea,this.screenElement)})))}_bindKeys(){this.register((0,p.addDisposableDomListener)(this.textarea,"keyup",(W=>this._keyUp(W)),!0)),this.register((0,p.addDisposableDomListener)(this.textarea,"keydown",(W=>this._keyDown(W)),!0)),this.register((0,p.addDisposableDomListener)(this.textarea,"keypress",(W=>this._keyPress(W)),!0)),this.register((0,p.addDisposableDomListener)(this.textarea,"compositionstart",(()=>this._compositionHelper.compositionstart()))),this.register((0,p.addDisposableDomListener)(this.textarea,"compositionupdate",(W=>this._compositionHelper.compositionupdate(W)))),this.register((0,p.addDisposableDomListener)(this.textarea,"compositionend",(()=>this._compositionHelper.compositionend()))),this.register((0,p.addDisposableDomListener)(this.textarea,"input",(W=>this._inputEvent(W)),!0)),this.register(this.onRender((()=>this._compositionHelper.updateCompositionElements())))}open(W){var ee;if(!W)throw new Error("Terminal requires a parent element.");if(W.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),((ee=this.element)==null?void 0:ee.ownerDocument.defaultView)&&this._coreBrowserService)return void(this.element.ownerDocument.defaultView!==this._coreBrowserService.window&&(this._coreBrowserService.window=this.element.ownerDocument.defaultView));this._document=W.ownerDocument,this.options.documentOverride&&this.options.documentOverride instanceof Document&&(this._document=this.optionsService.rawOptions.documentOverride),this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),W.appendChild(this.element);const L=this._document.createDocumentFragment();this._viewportElement=this._document.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),L.appendChild(this._viewportElement),this._viewportScrollArea=this._document.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=this._document.createElement("div"),this.screenElement.classList.add("xterm-screen"),this.register((0,p.addDisposableDomListener)(this.screenElement,"mousemove",(te=>this.updateCursorStyle(te)))),this._helperContainer=this._document.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),L.appendChild(this.screenElement),this.textarea=this._document.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",_.promptLabel),Q.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this.register(this._instantiationService.createInstance(x.CoreBrowserService,this.textarea,W.ownerDocument.defaultView??window,this._document??typeof window<"u"?window.document:null)),this._instantiationService.setService(A.ICoreBrowserService,this._coreBrowserService),this.register((0,p.addDisposableDomListener)(this.textarea,"focus",(te=>this._handleTextAreaFocus(te)))),this.register((0,p.addDisposableDomListener)(this.textarea,"blur",(()=>this._handleTextAreaBlur()))),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(c.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(A.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(z.ThemeService),this._instantiationService.setService(A.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(v.CharacterJoinerService),this._instantiationService.setService(A.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(E.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(A.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange((te=>this._onRender.fire(te)))),this.onResize((te=>this._renderService.resize(te.cols,te.rows))),this._compositionView=this._document.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(a.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this._mouseService=this._instantiationService.createInstance(k.MouseService),this._instantiationService.setService(A.IMouseService,this._mouseService),this.linkifier=this.register(this._instantiationService.createInstance(h.Linkifier,this.screenElement)),this.element.appendChild(L);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this.viewport=this._instantiationService.createInstance(w.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines((te=>this.scrollLines(te.amount,te.suppressScrollEvent,1))),this.register(this._inputHandler.onRequestSyncScrollBar((()=>this.viewport.syncScrollArea()))),this.register(this.viewport),this.register(this.onCursorMove((()=>{this._renderService.handleCursorMove(),this._syncTextArea()}))),this.register(this.onResize((()=>this._renderService.handleResize(this.cols,this.rows)))),this.register(this.onBlur((()=>this._renderService.handleBlur()))),this.register(this.onFocus((()=>this._renderService.handleFocus()))),this.register(this._renderService.onDimensionsChange((()=>this.viewport.syncScrollArea()))),this._selectionService=this.register(this._instantiationService.createInstance(C.SelectionService,this.element,this.screenElement,this.linkifier)),this._instantiationService.setService(A.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines((te=>this.scrollLines(te.amount,te.suppressScrollEvent)))),this.register(this._selectionService.onSelectionChange((()=>this._onSelectionChange.fire()))),this.register(this._selectionService.onRequestRedraw((te=>this._renderService.handleSelectionChanged(te.start,te.end,te.columnSelectMode)))),this.register(this._selectionService.onLinuxMouseSelection((te=>{this.textarea.value=te,this.textarea.focus(),this.textarea.select()}))),this.register(this._onScroll.event((te=>{this.viewport.syncScrollArea(),this._selectionService.refresh()}))),this.register((0,p.addDisposableDomListener)(this._viewportElement,"scroll",(()=>this._selectionService.refresh()))),this.register(this._instantiationService.createInstance(g.BufferDecorationRenderer,this.screenElement)),this.register((0,p.addDisposableDomListener)(this.element,"mousedown",(te=>this._selectionService.handleMouseDown(te)))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(K.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",(te=>this._handleScreenReaderModeOptionChange(te)))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(l.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",(te=>{!this._overviewRulerRenderer&&te&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(l.OverviewRulerRenderer,this._viewportElement,this.screenElement)))})),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(n.DomRenderer,this,this._document,this.element,this.screenElement,this._viewportElement,this._helperContainer,this.linkifier)}bindMouse(){const W=this,L=this.element;function ee(H){const q=W._mouseService.getMouseReportCoords(H,W.screenElement);if(!q)return!1;let y,O;switch(H.overrideType||H.type){case"mousemove":O=32,H.buttons===void 0?(y=3,H.button!==void 0&&(y=H.button<3?H.button:3)):y=1&H.buttons?0:4&H.buttons?1:2&H.buttons?2:3;break;case"mouseup":O=0,y=H.button<3?H.button:3;break;case"mousedown":O=1,y=H.button<3?H.button:3;break;case"wheel":if(W._customWheelEventHandler&&W._customWheelEventHandler(H)===!1||W.viewport.getLinesScrolled(H)===0)return!1;O=H.deltaY<0?0:1,y=4;break;default:return!1}return!(O===void 0||y===void 0||y>4)&&W.coreMouseService.triggerMouseEvent({col:q.col,row:q.row,x:q.x,y:q.y,button:y,action:O,ctrl:H.ctrlKey,alt:H.altKey,shift:H.shiftKey})}const te={mouseup:null,wheel:null,mousedrag:null,mousemove:null},he={mouseup:H=>(ee(H),H.buttons||(this._document.removeEventListener("mouseup",te.mouseup),te.mousedrag&&this._document.removeEventListener("mousemove",te.mousedrag)),this.cancel(H)),wheel:H=>(ee(H),this.cancel(H,!0)),mousedrag:H=>{H.buttons&&ee(H)},mousemove:H=>{H.buttons||ee(H)}};this.register(this.coreMouseService.onProtocolChange((H=>{H?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(H)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&H?te.mousemove||(L.addEventListener("mousemove",he.mousemove),te.mousemove=he.mousemove):(L.removeEventListener("mousemove",te.mousemove),te.mousemove=null),16&H?te.wheel||(L.addEventListener("wheel",he.wheel,{passive:!1}),te.wheel=he.wheel):(L.removeEventListener("wheel",te.wheel),te.wheel=null),2&H?te.mouseup||(te.mouseup=he.mouseup):(this._document.removeEventListener("mouseup",te.mouseup),te.mouseup=null),4&H?te.mousedrag||(te.mousedrag=he.mousedrag):(this._document.removeEventListener("mousemove",te.mousedrag),te.mousedrag=null)}))),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,p.addDisposableDomListener)(L,"mousedown",(H=>{if(H.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(H))return ee(H),te.mouseup&&this._document.addEventListener("mouseup",te.mouseup),te.mousedrag&&this._document.addEventListener("mousemove",te.mousedrag),this.cancel(H)}))),this.register((0,p.addDisposableDomListener)(L,"wheel",(H=>{if(!te.wheel){if(this._customWheelEventHandler&&this._customWheelEventHandler(H)===!1)return!1;if(!this.buffer.hasScrollback){const q=this.viewport.getLinesScrolled(H);if(q===0)return;const y=X.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(H.deltaY<0?"A":"B");let O="";for(let V=0;V<Math.abs(q);V++)O+=y;return this.coreService.triggerDataEvent(O,!0),this.cancel(H,!0)}return this.viewport.handleWheel(H)?this.cancel(H):void 0}}),{passive:!1})),this.register((0,p.addDisposableDomListener)(L,"touchstart",(H=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(H),this.cancel(H)}),{passive:!0})),this.register((0,p.addDisposableDomListener)(L,"touchmove",(H=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(H)?void 0:this.cancel(H)}),{passive:!1}))}refresh(W,L){var ee;(ee=this._renderService)==null||ee.refreshRows(W,L)}updateCursorStyle(W){var L;(L=this._selectionService)!=null&&L.shouldColumnSelect(W)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(W,L,ee=0){var te;ee===1?(super.scrollLines(W,L,ee),this.refresh(0,this.rows-1)):(te=this.viewport)==null||te.scrollLines(W)}paste(W){(0,f.paste)(W,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(W){this._customKeyEventHandler=W}attachCustomWheelEventHandler(W){this._customWheelEventHandler=W}registerLinkProvider(W){return this._linkProviderService.registerLinkProvider(W)}registerCharacterJoiner(W){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");const L=this._characterJoinerService.register(W);return this.refresh(0,this.rows-1),L}deregisterCharacterJoiner(W){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(W)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(W){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+W)}registerDecoration(W){return this._decorationService.registerDecoration(W)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(W,L,ee){this._selectionService.setSelection(W,L,ee)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){var W;(W=this._selectionService)==null||W.clearSelection()}selectAll(){var W;(W=this._selectionService)==null||W.selectAll()}selectLines(W,L){var ee;(ee=this._selectionService)==null||ee.selectLines(W,L)}_keyDown(W){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(W)===!1)return!1;const L=this.browser.isMac&&this.options.macOptionIsMeta&&W.altKey;if(!L&&!this._compositionHelper.keydown(W))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;L||W.key!=="Dead"&&W.key!=="AltGraph"||(this._unprocessedDeadKey=!0);const ee=(0,oe.evaluateKeyboardEvent)(W,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(W),ee.type===3||ee.type===2){const te=this.rows-1;return this.scrollLines(ee.type===2?-te:te),this.cancel(W,!0)}return ee.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,W)||(ee.cancel&&this.cancel(W,!0),!ee.key||!!(W.key&&!W.ctrlKey&&!W.altKey&&!W.metaKey&&W.key.length===1&&W.key.charCodeAt(0)>=65&&W.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(ee.key!==X.C0.ETX&&ee.key!==X.C0.CR||(this.textarea.value=""),this._onKey.fire({key:ee.key,domEvent:W}),this._showCursor(),this.coreService.triggerDataEvent(ee.key,!0),!this.optionsService.rawOptions.screenReaderMode||W.altKey||W.ctrlKey?this.cancel(W,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(W,L){const ee=W.isMac&&!this.options.macOptionIsMeta&&L.altKey&&!L.ctrlKey&&!L.metaKey||W.isWindows&&L.altKey&&L.ctrlKey&&!L.metaKey||W.isWindows&&L.getModifierState("AltGraph");return L.type==="keypress"?ee:ee&&(!L.keyCode||L.keyCode>47)}_keyUp(W){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(W)===!1||((function(L){return L.keyCode===16||L.keyCode===17||L.keyCode===18})(W)||this.focus(),this.updateCursorStyle(W),this._keyPressHandled=!1)}_keyPress(W){let L;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(W)===!1)return!1;if(this.cancel(W),W.charCode)L=W.charCode;else if(W.which===null||W.which===void 0)L=W.keyCode;else{if(W.which===0||W.charCode===0)return!1;L=W.which}return!(!L||(W.altKey||W.ctrlKey||W.metaKey)&&!this._isThirdLevelShift(this.browser,W)||(L=String.fromCharCode(L),this._onKey.fire({key:L,domEvent:W}),this._showCursor(),this.coreService.triggerDataEvent(L,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(W){if(W.data&&W.inputType==="insertText"&&(!W.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;const L=W.data;return this.coreService.triggerDataEvent(L,!0),this.cancel(W),!0}return!1}resize(W,L){W!==this.cols||L!==this.rows?super.resize(W,L):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(W,L){var ee,te;(ee=this._charSizeService)==null||ee.measure(),(te=this.viewport)==null||te.syncScrollArea(!0)}clear(){var W;if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let L=1;L<this.rows;L++)this.buffer.lines.push(this.buffer.getBlankLine(se.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),(W=this.viewport)==null||W.reset(),this.refresh(0,this.rows-1)}}reset(){var L,ee;this.options.rows=this.rows,this.options.cols=this.cols;const W=this._customKeyEventHandler;this._setup(),super.reset(),(L=this._selectionService)==null||L.reset(),this._decorationService.reset(),(ee=this.viewport)==null||ee.reset(),this._customKeyEventHandler=W,this.refresh(0,this.rows-1)}clearTextureAtlas(){var W;(W=this._renderService)==null||W.clearTextureAtlas()}_reportFocus(){var W;(W=this.element)!=null&&W.classList.contains("focus")?this.coreService.triggerDataEvent(X.C0.ESC+"[I"):this.coreService.triggerDataEvent(X.C0.ESC+"[O")}_reportWindowsOptions(W){if(this._renderService)switch(W){case T.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:const L=this._renderService.dimensions.css.canvas.width.toFixed(0),ee=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${X.C0.ESC}[4;${ee};${L}t`);break;case T.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:const te=this._renderService.dimensions.css.cell.width.toFixed(0),he=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${X.C0.ESC}[6;${he};${te}t`)}}cancel(W,L){if(this.options.cancelEvents||L)return W.preventDefault(),W.stopPropagation(),!1}}i.Terminal=ne},9924:(b,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TimeBasedDebouncer=void 0,i.TimeBasedDebouncer=class{constructor(r,f=1e3){this._renderCallback=r,this._debounceThresholdMS=f,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(r,f,p){this._rowCount=p,r=r!==void 0?r:0,f=f!==void 0?f:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,r):r,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,f):f;const h=Date.now();if(h-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=h,this._innerRefresh();else if(!this._additionalRefreshRequested){const _=h-this._lastRefreshMs,m=this._debounceThresholdMS-_;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout((()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0}),m)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;const r=Math.max(this._rowStart,0),f=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(r,f)}}},1680:function(b,i,r){var f=this&&this.__decorate||function(a,n,c,v){var x,k=arguments.length,E=k<3?n:v===null?v=Object.getOwnPropertyDescriptor(n,c):v;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(a,n,c,v);else for(var C=a.length-1;C>=0;C--)(x=a[C])&&(E=(k<3?x(E):k>3?x(n,c,E):x(n,c))||E);return k>3&&E&&Object.defineProperty(n,c,E),E},p=this&&this.__param||function(a,n){return function(c,v){n(c,v,a)}};Object.defineProperty(i,"__esModule",{value:!0}),i.Viewport=void 0;const h=r(3656),_=r(4725),m=r(8460),w=r(844),g=r(2585);let l=i.Viewport=class extends w.Disposable{constructor(a,n,c,v,x,k,E,C){super(),this._viewportElement=a,this._scrollArea=n,this._bufferService=c,this._optionsService=v,this._charSizeService=x,this._renderService=k,this._coreBrowserService=E,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new m.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,h.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate((A=>this._activeBuffer=A.activeBuffer))),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange((A=>this._renderDimensions=A))),this._handleThemeChange(C.colors),this.register(C.onChangeColors((A=>this._handleThemeChange(A)))),this.register(this._optionsService.onSpecificOptionChange("scrollback",(()=>this.syncScrollArea()))),setTimeout((()=>this.syncScrollArea()))}_handleThemeChange(a){this._viewportElement.style.backgroundColor=a.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame((()=>this.syncScrollArea()))}_refresh(a){if(a)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame((()=>this._innerRefresh())))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderDimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderDimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;const n=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderDimensions.css.canvas.height);this._lastRecordedBufferHeight!==n&&(this._lastRecordedBufferHeight=n,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}const a=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==a&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=a),this._refreshAnimationFrame=null}syncScrollArea(a=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(a);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(a)}_handleScroll(a){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});const n=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:n,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;const a=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(a*(this._smoothScrollState.target-this._smoothScrollState.origin)),a<1?this._coreBrowserService.window.requestAnimationFrame((()=>this._smoothScroll())):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(a,n){const c=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(n<0&&this._viewportElement.scrollTop!==0||n>0&&c<this._lastRecordedBufferHeight)||(a.cancelable&&a.preventDefault(),!1)}handleWheel(a){const n=this._getPixelsScrolled(a);return n!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+n:this._smoothScrollState.target+=n,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=n,this._bubbleScroll(a,n))}scrollLines(a){if(a!==0)if(this._optionsService.rawOptions.smoothScrollDuration){const n=a*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+n,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:a,suppressScrollEvent:!1})}_getPixelsScrolled(a){if(a.deltaY===0||a.shiftKey)return 0;let n=this._applyScrollModifier(a.deltaY,a);return a.deltaMode===WheelEvent.DOM_DELTA_LINE?n*=this._currentRowHeight:a.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(n*=this._currentRowHeight*this._bufferService.rows),n}getBufferElements(a,n){var C;let c,v="";const x=[],k=n??this._bufferService.buffer.lines.length,E=this._bufferService.buffer.lines;for(let A=a;A<k;A++){const z=E.get(A);if(!z)continue;const G=(C=E.get(A+1))==null?void 0:C.isWrapped;if(v+=z.translateToString(!G),!G||A===E.length-1){const B=document.createElement("div");B.textContent=v,x.push(B),v.length>0&&(c=B),v=""}}return{bufferElements:x,cursorElement:c}}getLinesScrolled(a){if(a.deltaY===0||a.shiftKey)return 0;let n=this._applyScrollModifier(a.deltaY,a);return a.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(n/=this._currentRowHeight+0,this._wheelPartialScroll+=n,n=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):a.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(n*=this._bufferService.rows),n}_applyScrollModifier(a,n){const c=this._optionsService.rawOptions.fastScrollModifier;return c==="alt"&&n.altKey||c==="ctrl"&&n.ctrlKey||c==="shift"&&n.shiftKey?a*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:a*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(a){this._lastTouchY=a.touches[0].pageY}handleTouchMove(a){const n=this._lastTouchY-a.touches[0].pageY;return this._lastTouchY=a.touches[0].pageY,n!==0&&(this._viewportElement.scrollTop+=n,this._bubbleScroll(a,n))}};i.Viewport=l=f([p(2,g.IBufferService),p(3,g.IOptionsService),p(4,_.ICharSizeService),p(5,_.IRenderService),p(6,_.ICoreBrowserService),p(7,_.IThemeService)],l)},3107:function(b,i,r){var f=this&&this.__decorate||function(g,l,a,n){var c,v=arguments.length,x=v<3?l:n===null?n=Object.getOwnPropertyDescriptor(l,a):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(g,l,a,n);else for(var k=g.length-1;k>=0;k--)(c=g[k])&&(x=(v<3?c(x):v>3?c(l,a,x):c(l,a))||x);return v>3&&x&&Object.defineProperty(l,a,x),x},p=this&&this.__param||function(g,l){return function(a,n){l(a,n,g)}};Object.defineProperty(i,"__esModule",{value:!0}),i.BufferDecorationRenderer=void 0;const h=r(4725),_=r(844),m=r(2585);let w=i.BufferDecorationRenderer=class extends _.Disposable{constructor(g,l,a,n,c){super(),this._screenElement=g,this._bufferService=l,this._coreBrowserService=a,this._decorationService=n,this._renderService=c,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange((()=>this._doRefreshDecorations()))),this.register(this._renderService.onDimensionsChange((()=>{this._dimensionsChanged=!0,this._queueRefresh()}))),this.register(this._coreBrowserService.onDprChange((()=>this._queueRefresh()))),this.register(this._bufferService.buffers.onBufferActivate((()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt}))),this.register(this._decorationService.onDecorationRegistered((()=>this._queueRefresh()))),this.register(this._decorationService.onDecorationRemoved((v=>this._removeDecoration(v)))),this.register((0,_.toDisposable)((()=>{this._container.remove(),this._decorationElements.clear()})))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback((()=>{this._doRefreshDecorations(),this._animationFrame=void 0})))}_doRefreshDecorations(){for(const g of this._decorationService.decorations)this._renderDecoration(g);this._dimensionsChanged=!1}_renderDecoration(g){this._refreshStyle(g),this._dimensionsChanged&&this._refreshXPosition(g)}_createElement(g){var n;const l=this._coreBrowserService.mainDocument.createElement("div");l.classList.add("xterm-decoration"),l.classList.toggle("xterm-decoration-top-layer",((n=g==null?void 0:g.options)==null?void 0:n.layer)==="top"),l.style.width=`${Math.round((g.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,l.style.height=(g.options.height||1)*this._renderService.dimensions.css.cell.height+"px",l.style.top=(g.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",l.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;const a=g.options.x??0;return a&&a>this._bufferService.cols&&(l.style.display="none"),this._refreshXPosition(g,l),l}_refreshStyle(g){const l=g.marker.line-this._bufferService.buffers.active.ydisp;if(l<0||l>=this._bufferService.rows)g.element&&(g.element.style.display="none",g.onRenderEmitter.fire(g.element));else{let a=this._decorationElements.get(g);a||(a=this._createElement(g),g.element=a,this._decorationElements.set(g,a),this._container.appendChild(a),g.onDispose((()=>{this._decorationElements.delete(g),a.remove()}))),a.style.top=l*this._renderService.dimensions.css.cell.height+"px",a.style.display=this._altBufferIsActive?"none":"block",g.onRenderEmitter.fire(a)}}_refreshXPosition(g,l=g.element){if(!l)return;const a=g.options.x??0;(g.options.anchor||"left")==="right"?l.style.right=a?a*this._renderService.dimensions.css.cell.width+"px":"":l.style.left=a?a*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(g){var l;(l=this._decorationElements.get(g))==null||l.remove(),this._decorationElements.delete(g),g.dispose()}};i.BufferDecorationRenderer=w=f([p(1,m.IBufferService),p(2,h.ICoreBrowserService),p(3,m.IDecorationService),p(4,h.IRenderService)],w)},5871:(b,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ColorZoneStore=void 0,i.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(r){if(r.options.overviewRulerOptions){for(const f of this._zones)if(f.color===r.options.overviewRulerOptions.color&&f.position===r.options.overviewRulerOptions.position){if(this._lineIntersectsZone(f,r.marker.line))return;if(this._lineAdjacentToZone(f,r.marker.line,r.options.overviewRulerOptions.position))return void this._addLineToZone(f,r.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=r.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=r.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=r.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=r.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:r.options.overviewRulerOptions.color,position:r.options.overviewRulerOptions.position,startBufferLine:r.marker.line,endBufferLine:r.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(r){this._linePadding=r}_lineIntersectsZone(r,f){return f>=r.startBufferLine&&f<=r.endBufferLine}_lineAdjacentToZone(r,f,p){return f>=r.startBufferLine-this._linePadding[p||"full"]&&f<=r.endBufferLine+this._linePadding[p||"full"]}_addLineToZone(r,f){r.startBufferLine=Math.min(r.startBufferLine,f),r.endBufferLine=Math.max(r.endBufferLine,f)}}},5744:function(b,i,r){var f=this&&this.__decorate||function(c,v,x,k){var E,C=arguments.length,A=C<3?v:k===null?k=Object.getOwnPropertyDescriptor(v,x):k;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")A=Reflect.decorate(c,v,x,k);else for(var z=c.length-1;z>=0;z--)(E=c[z])&&(A=(C<3?E(A):C>3?E(v,x,A):E(v,x))||A);return C>3&&A&&Object.defineProperty(v,x,A),A},p=this&&this.__param||function(c,v){return function(x,k){v(x,k,c)}};Object.defineProperty(i,"__esModule",{value:!0}),i.OverviewRulerRenderer=void 0;const h=r(5871),_=r(4725),m=r(844),w=r(2585),g={full:0,left:0,center:0,right:0},l={full:0,left:0,center:0,right:0},a={full:0,left:0,center:0,right:0};let n=i.OverviewRulerRenderer=class extends m.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(c,v,x,k,E,C,A){var G;super(),this._viewportElement=c,this._screenElement=v,this._bufferService=x,this._decorationService=k,this._renderService=E,this._optionsService=C,this._coreBrowserService=A,this._colorZoneStore=new h.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=this._coreBrowserService.mainDocument.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),(G=this._viewportElement.parentElement)==null||G.insertBefore(this._canvas,this._viewportElement);const z=this._canvas.getContext("2d");if(!z)throw new Error("Ctx cannot be null");this._ctx=z,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,m.toDisposable)((()=>{var B;(B=this._canvas)==null||B.remove()})))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered((()=>this._queueRefresh(void 0,!0)))),this.register(this._decorationService.onDecorationRemoved((()=>this._queueRefresh(void 0,!0))))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange((()=>this._queueRefresh()))),this.register(this._bufferService.buffers.onBufferActivate((()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"}))),this.register(this._bufferService.onScroll((()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())})))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender((()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)}))),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",(()=>this._queueRefresh(!0)))),this.register(this._coreBrowserService.onDprChange((()=>this._queueRefresh(!0)))),this._queueRefresh(!0)}_refreshDrawConstants(){const c=Math.floor(this._canvas.width/3),v=Math.ceil(this._canvas.width/3);l.full=this._canvas.width,l.left=c,l.center=v,l.right=c,this._refreshDrawHeightConstants(),a.full=0,a.left=0,a.center=l.left,a.right=l.left+l.center}_refreshDrawHeightConstants(){g.full=Math.round(2*this._coreBrowserService.dpr);const c=this._canvas.height/this._bufferService.buffer.lines.length,v=Math.round(Math.max(Math.min(c,12),6)*this._coreBrowserService.dpr);g.left=v,g.center=v,g.right=v}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*g.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*g.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*g.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*g.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowserService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowserService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(const v of this._decorationService.decorations)this._colorZoneStore.addDecoration(v);this._ctx.lineWidth=1;const c=this._colorZoneStore.zones;for(const v of c)v.position!=="full"&&this._renderColorZone(v);for(const v of c)v.position==="full"&&this._renderColorZone(v);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(c){this._ctx.fillStyle=c.color,this._ctx.fillRect(a[c.position||"full"],Math.round((this._canvas.height-1)*(c.startBufferLine/this._bufferService.buffers.active.lines.length)-g[c.position||"full"]/2),l[c.position||"full"],Math.round((this._canvas.height-1)*((c.endBufferLine-c.startBufferLine)/this._bufferService.buffers.active.lines.length)+g[c.position||"full"]))}_queueRefresh(c,v){this._shouldUpdateDimensions=c||this._shouldUpdateDimensions,this._shouldUpdateAnchor=v||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame((()=>{this._refreshDecorations(),this._animationFrame=void 0})))}};i.OverviewRulerRenderer=n=f([p(2,w.IBufferService),p(3,w.IDecorationService),p(4,_.IRenderService),p(5,w.IOptionsService),p(6,_.ICoreBrowserService)],n)},2950:function(b,i,r){var f=this&&this.__decorate||function(g,l,a,n){var c,v=arguments.length,x=v<3?l:n===null?n=Object.getOwnPropertyDescriptor(l,a):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(g,l,a,n);else for(var k=g.length-1;k>=0;k--)(c=g[k])&&(x=(v<3?c(x):v>3?c(l,a,x):c(l,a))||x);return v>3&&x&&Object.defineProperty(l,a,x),x},p=this&&this.__param||function(g,l){return function(a,n){l(a,n,g)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CompositionHelper=void 0;const h=r(4725),_=r(2585),m=r(2584);let w=i.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(g,l,a,n,c,v){this._textarea=g,this._compositionView=l,this._bufferService=a,this._optionsService=n,this._coreService=c,this._renderService=v,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(g){this._compositionView.textContent=g.data,this.updateCompositionElements(),setTimeout((()=>{this._compositionPosition.end=this._textarea.value.length}),0)}compositionend(){this._finalizeComposition(!0)}keydown(g){if(this._isComposing||this._isSendingComposition){if(g.keyCode===229||g.keyCode===16||g.keyCode===17||g.keyCode===18)return!1;this._finalizeComposition(!1)}return g.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(g){if(this._compositionView.classList.remove("active"),this._isComposing=!1,g){const l={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout((()=>{if(this._isSendingComposition){let a;this._isSendingComposition=!1,l.start+=this._dataAlreadySent.length,a=this._isComposing?this._textarea.value.substring(l.start,l.end):this._textarea.value.substring(l.start),a.length>0&&this._coreService.triggerDataEvent(a,!0)}}),0)}else{this._isSendingComposition=!1;const l=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(l,!0)}}_handleAnyTextareaChanges(){const g=this._textarea.value;setTimeout((()=>{if(!this._isComposing){const l=this._textarea.value,a=l.replace(g,"");this._dataAlreadySent=a,l.length>g.length?this._coreService.triggerDataEvent(a,!0):l.length<g.length?this._coreService.triggerDataEvent(`${m.C0.DEL}`,!0):l.length===g.length&&l!==g&&this._coreService.triggerDataEvent(l,!0)}}),0)}updateCompositionElements(g){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){const l=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),a=this._renderService.dimensions.css.cell.height,n=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,c=l*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=c+"px",this._compositionView.style.top=n+"px",this._compositionView.style.height=a+"px",this._compositionView.style.lineHeight=a+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";const v=this._compositionView.getBoundingClientRect();this._textarea.style.left=c+"px",this._textarea.style.top=n+"px",this._textarea.style.width=Math.max(v.width,1)+"px",this._textarea.style.height=Math.max(v.height,1)+"px",this._textarea.style.lineHeight=v.height+"px"}g||setTimeout((()=>this.updateCompositionElements(!0)),0)}}};i.CompositionHelper=w=f([p(2,_.IBufferService),p(3,_.IOptionsService),p(4,_.ICoreService),p(5,h.IRenderService)],w)},9806:(b,i)=>{function r(f,p,h){const _=h.getBoundingClientRect(),m=f.getComputedStyle(h),w=parseInt(m.getPropertyValue("padding-left")),g=parseInt(m.getPropertyValue("padding-top"));return[p.clientX-_.left-w,p.clientY-_.top-g]}Object.defineProperty(i,"__esModule",{value:!0}),i.getCoords=i.getCoordsRelativeToElement=void 0,i.getCoordsRelativeToElement=r,i.getCoords=function(f,p,h,_,m,w,g,l,a){if(!w)return;const n=r(f,p,h);return n?(n[0]=Math.ceil((n[0]+(a?g/2:0))/g),n[1]=Math.ceil(n[1]/l),n[0]=Math.min(Math.max(n[0],1),_+(a?1:0)),n[1]=Math.min(Math.max(n[1],1),m),n):void 0}},9504:(b,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.moveToCellSequence=void 0;const f=r(2584);function p(l,a,n,c){const v=l-h(l,n),x=a-h(a,n),k=Math.abs(v-x)-(function(E,C,A){let z=0;const G=E-h(E,A),B=C-h(C,A);for(let P=0;P<Math.abs(G-B);P++){const R=_(E,C)==="A"?-1:1,Q=A.buffer.lines.get(G+R*P);Q!=null&&Q.isWrapped&&z++}return z})(l,a,n);return g(k,w(_(l,a),c))}function h(l,a){let n=0,c=a.buffer.lines.get(l),v=c==null?void 0:c.isWrapped;for(;v&&l>=0&&l<a.rows;)n++,c=a.buffer.lines.get(--l),v=c==null?void 0:c.isWrapped;return n}function _(l,a){return l>a?"A":"B"}function m(l,a,n,c,v,x){let k=l,E=a,C="";for(;k!==n||E!==c;)k+=v?1:-1,v&&k>x.cols-1?(C+=x.buffer.translateBufferLineToString(E,!1,l,k),k=0,l=0,E++):!v&&k<0&&(C+=x.buffer.translateBufferLineToString(E,!1,0,l+1),k=x.cols-1,l=k,E--);return C+x.buffer.translateBufferLineToString(E,!1,l,k)}function w(l,a){const n=a?"O":"[";return f.C0.ESC+n+l}function g(l,a){l=Math.floor(l);let n="";for(let c=0;c<l;c++)n+=a;return n}i.moveToCellSequence=function(l,a,n,c){const v=n.buffer.x,x=n.buffer.y;if(!n.buffer.hasScrollback)return(function(C,A,z,G,B,P){return p(A,G,B,P).length===0?"":g(m(C,A,C,A-h(A,B),!1,B).length,w("D",P))})(v,x,0,a,n,c)+p(x,a,n,c)+(function(C,A,z,G,B,P){let R;R=p(A,G,B,P).length>0?G-h(G,B):A;const Q=G,se=(function(X,oe,D,U,S,T){let K;return K=p(D,U,S,T).length>0?U-h(U,S):oe,X<D&&K<=U||X>=D&&K<U?"C":"D"})(C,A,z,G,B,P);return g(m(C,R,z,Q,se==="C",B).length,w(se,P))})(v,x,l,a,n,c);let k;if(x===a)return k=v>l?"D":"C",g(Math.abs(v-l),w(k,c));k=x>a?"D":"C";const E=Math.abs(x-a);return g((function(C,A){return A.cols-C})(x>a?l:v,n)+(E-1)*n.cols+1+((x>a?v:l)-1),w(k,c))}},1296:function(b,i,r){var f=this&&this.__decorate||function(P,R,Q,se){var X,oe=arguments.length,D=oe<3?R:se===null?se=Object.getOwnPropertyDescriptor(R,Q):se;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")D=Reflect.decorate(P,R,Q,se);else for(var U=P.length-1;U>=0;U--)(X=P[U])&&(D=(oe<3?X(D):oe>3?X(R,Q,D):X(R,Q))||D);return oe>3&&D&&Object.defineProperty(R,Q,D),D},p=this&&this.__param||function(P,R){return function(Q,se){R(Q,se,P)}};Object.defineProperty(i,"__esModule",{value:!0}),i.DomRenderer=void 0;const h=r(3787),_=r(2550),m=r(2223),w=r(6171),g=r(6052),l=r(4725),a=r(8055),n=r(8460),c=r(844),v=r(2585),x="xterm-dom-renderer-owner-",k="xterm-rows",E="xterm-fg-",C="xterm-bg-",A="xterm-focus",z="xterm-selection";let G=1,B=i.DomRenderer=class extends c.Disposable{constructor(P,R,Q,se,X,oe,D,U,S,T,K,Y,ne){super(),this._terminal=P,this._document=R,this._element=Q,this._screenElement=se,this._viewportElement=X,this._helperContainer=oe,this._linkifier2=D,this._charSizeService=S,this._optionsService=T,this._bufferService=K,this._coreBrowserService=Y,this._themeService=ne,this._terminalClass=G++,this._rowElements=[],this._selectionRenderModel=(0,g.createSelectionRenderModel)(),this.onRequestRedraw=this.register(new n.EventEmitter).event,this._rowContainer=this._document.createElement("div"),this._rowContainer.classList.add(k),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=this._document.createElement("div"),this._selectionContainer.classList.add(z),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,w.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange((()=>this._handleOptionsChanged()))),this.register(this._themeService.onChangeColors((ae=>this._injectCss(ae)))),this._injectCss(this._themeService.colors),this._rowFactory=U.createInstance(h.DomRendererRowFactory,document),this._element.classList.add(x+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline((ae=>this._handleLinkHover(ae)))),this.register(this._linkifier2.onHideLinkUnderline((ae=>this._handleLinkLeave(ae)))),this.register((0,c.toDisposable)((()=>{this._element.classList.remove(x+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()}))),this._widthCache=new _.WidthCache(this._document,this._helperContainer),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){const P=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*P,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*P),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/P),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/P),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(const Q of this._rowElements)Q.style.width=`${this.dimensions.css.canvas.width}px`,Q.style.height=`${this.dimensions.css.cell.height}px`,Q.style.lineHeight=`${this.dimensions.css.cell.height}px`,Q.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));const R=`${this._terminalSelector} .${k} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=R,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(P){this._themeStyleElement||(this._themeStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let R=`${this._terminalSelector} .${k} { color: ${P.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;R+=`${this._terminalSelector} .${k} .xterm-dim { color: ${a.color.multiplyOpacity(P.foreground,.5).css};}`,R+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`;const Q=`blink_underline_${this._terminalClass}`,se=`blink_bar_${this._terminalClass}`,X=`blink_block_${this._terminalClass}`;R+=`@keyframes ${Q} { 50% {  border-bottom-style: hidden; }}`,R+=`@keyframes ${se} { 50% {  box-shadow: none; }}`,R+=`@keyframes ${X} { 0% {  background-color: ${P.cursor.css};  color: ${P.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${P.cursor.css}; }}`,R+=`${this._terminalSelector} .${k}.${A} .xterm-cursor.xterm-cursor-blink.xterm-cursor-underline { animation: ${Q} 1s step-end infinite;}${this._terminalSelector} .${k}.${A} .xterm-cursor.xterm-cursor-blink.xterm-cursor-bar { animation: ${se} 1s step-end infinite;}${this._terminalSelector} .${k}.${A} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: ${X} 1s step-end infinite;}${this._terminalSelector} .${k} .xterm-cursor.xterm-cursor-block { background-color: ${P.cursor.css}; color: ${P.cursorAccent.css};}${this._terminalSelector} .${k} .xterm-cursor.xterm-cursor-block:not(.xterm-cursor-blink) { background-color: ${P.cursor.css} !important; color: ${P.cursorAccent.css} !important;}${this._terminalSelector} .${k} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${P.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${k} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${P.cursor.css} inset;}${this._terminalSelector} .${k} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${P.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,R+=`${this._terminalSelector} .${z} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${z} div { position: absolute; background-color: ${P.selectionBackgroundOpaque.css};}${this._terminalSelector} .${z} div { position: absolute; background-color: ${P.selectionInactiveBackgroundOpaque.css};}`;for(const[oe,D]of P.ansi.entries())R+=`${this._terminalSelector} .${E}${oe} { color: ${D.css}; }${this._terminalSelector} .${E}${oe}.xterm-dim { color: ${a.color.multiplyOpacity(D,.5).css}; }${this._terminalSelector} .${C}${oe} { background-color: ${D.css}; }`;R+=`${this._terminalSelector} .${E}${m.INVERTED_DEFAULT_COLOR} { color: ${a.color.opaque(P.background).css}; }${this._terminalSelector} .${E}${m.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${a.color.multiplyOpacity(a.color.opaque(P.background),.5).css}; }${this._terminalSelector} .${C}${m.INVERTED_DEFAULT_COLOR} { background-color: ${P.foreground.css}; }`,this._themeStyleElement.textContent=R}_setDefaultSpacing(){const P=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${P}px`,this._rowFactory.defaultSpacing=P}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(P,R){for(let Q=this._rowElements.length;Q<=R;Q++){const se=this._document.createElement("div");this._rowContainer.appendChild(se),this._rowElements.push(se)}for(;this._rowElements.length>R;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(P,R){this._refreshRowElements(P,R),this._updateDimensions(),this.handleSelectionChanged(this._selectionRenderModel.selectionStart,this._selectionRenderModel.selectionEnd,this._selectionRenderModel.columnSelectMode)}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(A),this.renderRows(0,this._bufferService.rows-1)}handleFocus(){this._rowContainer.classList.add(A),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(P,R,Q){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(P,R,Q),this.renderRows(0,this._bufferService.rows-1),!P||!R)return;this._selectionRenderModel.update(this._terminal,P,R,Q);const se=this._selectionRenderModel.viewportStartRow,X=this._selectionRenderModel.viewportEndRow,oe=this._selectionRenderModel.viewportCappedStartRow,D=this._selectionRenderModel.viewportCappedEndRow;if(oe>=this._bufferService.rows||D<0)return;const U=this._document.createDocumentFragment();if(Q){const S=P[0]>R[0];U.appendChild(this._createSelectionElement(oe,S?R[0]:P[0],S?P[0]:R[0],D-oe+1))}else{const S=se===oe?P[0]:0,T=oe===X?R[0]:this._bufferService.cols;U.appendChild(this._createSelectionElement(oe,S,T));const K=D-oe-1;if(U.appendChild(this._createSelectionElement(oe+1,0,this._bufferService.cols,K)),oe!==D){const Y=X===D?R[0]:this._bufferService.cols;U.appendChild(this._createSelectionElement(D,0,Y))}}this._selectionContainer.appendChild(U)}_createSelectionElement(P,R,Q,se=1){const X=this._document.createElement("div"),oe=R*this.dimensions.css.cell.width;let D=this.dimensions.css.cell.width*(Q-R);return oe+D>this.dimensions.css.canvas.width&&(D=this.dimensions.css.canvas.width-oe),X.style.height=se*this.dimensions.css.cell.height+"px",X.style.top=P*this.dimensions.css.cell.height+"px",X.style.left=`${oe}px`,X.style.width=`${D}px`,X}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(const P of this._rowElements)P.replaceChildren()}renderRows(P,R){const Q=this._bufferService.buffer,se=Q.ybase+Q.y,X=Math.min(Q.x,this._bufferService.cols-1),oe=this._optionsService.rawOptions.cursorBlink,D=this._optionsService.rawOptions.cursorStyle,U=this._optionsService.rawOptions.cursorInactiveStyle;for(let S=P;S<=R;S++){const T=S+Q.ydisp,K=this._rowElements[S],Y=Q.lines.get(T);if(!K||!Y)break;K.replaceChildren(...this._rowFactory.createRow(Y,T,T===se,D,U,X,oe,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${x}${this._terminalClass}`}_handleLinkHover(P){this._setCellUnderline(P.x1,P.x2,P.y1,P.y2,P.cols,!0)}_handleLinkLeave(P){this._setCellUnderline(P.x1,P.x2,P.y1,P.y2,P.cols,!1)}_setCellUnderline(P,R,Q,se,X,oe){Q<0&&(P=0),se<0&&(R=0);const D=this._bufferService.rows-1;Q=Math.max(Math.min(Q,D),0),se=Math.max(Math.min(se,D),0),X=Math.min(X,this._bufferService.cols);const U=this._bufferService.buffer,S=U.ybase+U.y,T=Math.min(U.x,X-1),K=this._optionsService.rawOptions.cursorBlink,Y=this._optionsService.rawOptions.cursorStyle,ne=this._optionsService.rawOptions.cursorInactiveStyle;for(let ae=Q;ae<=se;++ae){const W=ae+U.ydisp,L=this._rowElements[ae],ee=U.lines.get(W);if(!L||!ee)break;L.replaceChildren(...this._rowFactory.createRow(ee,W,W===S,Y,ne,T,K,this.dimensions.css.cell.width,this._widthCache,oe?ae===Q?P:0:-1,oe?(ae===se?R:X)-1:-1))}}};i.DomRenderer=B=f([p(7,v.IInstantiationService),p(8,l.ICharSizeService),p(9,v.IOptionsService),p(10,v.IBufferService),p(11,l.ICoreBrowserService),p(12,l.IThemeService)],B)},3787:function(b,i,r){var f=this&&this.__decorate||function(k,E,C,A){var z,G=arguments.length,B=G<3?E:A===null?A=Object.getOwnPropertyDescriptor(E,C):A;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")B=Reflect.decorate(k,E,C,A);else for(var P=k.length-1;P>=0;P--)(z=k[P])&&(B=(G<3?z(B):G>3?z(E,C,B):z(E,C))||B);return G>3&&B&&Object.defineProperty(E,C,B),B},p=this&&this.__param||function(k,E){return function(C,A){E(C,A,k)}};Object.defineProperty(i,"__esModule",{value:!0}),i.DomRendererRowFactory=void 0;const h=r(2223),_=r(643),m=r(511),w=r(2585),g=r(8055),l=r(4725),a=r(4269),n=r(6171),c=r(3734);let v=i.DomRendererRowFactory=class{constructor(k,E,C,A,z,G,B){this._document=k,this._characterJoinerService=E,this._optionsService=C,this._coreBrowserService=A,this._coreService=z,this._decorationService=G,this._themeService=B,this._workCell=new m.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(k,E,C){this._selectionStart=k,this._selectionEnd=E,this._columnSelectMode=C}createRow(k,E,C,A,z,G,B,P,R,Q,se){const X=[],oe=this._characterJoinerService.getJoinedCharacters(E),D=this._themeService.colors;let U,S=k.getNoBgTrimmedLength();C&&S<G+1&&(S=G+1);let T=0,K="",Y=0,ne=0,ae=0,W=!1,L=0,ee=!1,te=0;const he=[],H=Q!==-1&&se!==-1;for(let q=0;q<S;q++){k.loadCell(q,this._workCell);let y=this._workCell.getWidth();if(y===0)continue;let O=!1,V=q,I=this._workCell;if(oe.length>0&&q===oe[0][0]){O=!0;const we=oe.shift();I=new a.JoinedCellData(this._workCell,k.translateToString(!0,we[0],we[1]),we[1]-we[0]),V=we[1]-1,y=I.getWidth()}const $=this._isCellInSelection(q,E),Z=C&&q===G,J=H&&q>=Q&&q<=se;let N=!1;this._decorationService.forEachDecorationAtCell(q,E,void 0,(we=>{N=!0}));let F=I.getChars()||_.WHITESPACE_CELL_CHAR;if(F===" "&&(I.isUnderline()||I.isOverline())&&(F=""),te=y*P-R.get(F,I.isBold(),I.isItalic()),U){if(T&&($&&ee||!$&&!ee&&I.bg===Y)&&($&&ee&&D.selectionForeground||I.fg===ne)&&I.extended.ext===ae&&J===W&&te===L&&!Z&&!O&&!N){I.isInvisible()?K+=_.WHITESPACE_CELL_CHAR:K+=F,T++;continue}T&&(U.textContent=K),U=this._document.createElement("span"),T=0,K=""}else U=this._document.createElement("span");if(Y=I.bg,ne=I.fg,ae=I.extended.ext,W=J,L=te,ee=$,O&&G>=q&&G<=V&&(G=q),!this._coreService.isCursorHidden&&Z&&this._coreService.isCursorInitialized){if(he.push("xterm-cursor"),this._coreBrowserService.isFocused)B&&he.push("xterm-cursor-blink"),he.push(A==="bar"?"xterm-cursor-bar":A==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(z)switch(z){case"outline":he.push("xterm-cursor-outline");break;case"block":he.push("xterm-cursor-block");break;case"bar":he.push("xterm-cursor-bar");break;case"underline":he.push("xterm-cursor-underline")}}if(I.isBold()&&he.push("xterm-bold"),I.isItalic()&&he.push("xterm-italic"),I.isDim()&&he.push("xterm-dim"),K=I.isInvisible()?_.WHITESPACE_CELL_CHAR:I.getChars()||_.WHITESPACE_CELL_CHAR,I.isUnderline()&&(he.push(`xterm-underline-${I.extended.underlineStyle}`),K===" "&&(K=""),!I.isUnderlineColorDefault()))if(I.isUnderlineColorRGB())U.style.textDecorationColor=`rgb(${c.AttributeData.toColorRGB(I.getUnderlineColor()).join(",")})`;else{let we=I.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&I.isBold()&&we<8&&(we+=8),U.style.textDecorationColor=D.ansi[we].css}I.isOverline()&&(he.push("xterm-overline"),K===" "&&(K="")),I.isStrikethrough()&&he.push("xterm-strikethrough"),J&&(U.style.textDecoration="underline");let j=I.getFgColor(),ie=I.getFgColorMode(),re=I.getBgColor(),le=I.getBgColorMode();const me=!!I.isInverse();if(me){const we=j;j=re,re=we;const ke=ie;ie=le,le=ke}let de,Se,Ee,xe=!1;switch(this._decorationService.forEachDecorationAtCell(q,E,void 0,(we=>{we.options.layer!=="top"&&xe||(we.backgroundColorRGB&&(le=50331648,re=we.backgroundColorRGB.rgba>>8&16777215,de=we.backgroundColorRGB),we.foregroundColorRGB&&(ie=50331648,j=we.foregroundColorRGB.rgba>>8&16777215,Se=we.foregroundColorRGB),xe=we.options.layer==="top")})),!xe&&$&&(de=this._coreBrowserService.isFocused?D.selectionBackgroundOpaque:D.selectionInactiveBackgroundOpaque,re=de.rgba>>8&16777215,le=50331648,xe=!0,D.selectionForeground&&(ie=50331648,j=D.selectionForeground.rgba>>8&16777215,Se=D.selectionForeground)),xe&&he.push("xterm-decoration-top"),le){case 16777216:case 33554432:Ee=D.ansi[re],he.push(`xterm-bg-${re}`);break;case 50331648:Ee=g.channels.toColor(re>>16,re>>8&255,255&re),this._addStyle(U,`background-color:#${x((re>>>0).toString(16),"0",6)}`);break;default:me?(Ee=D.foreground,he.push(`xterm-bg-${h.INVERTED_DEFAULT_COLOR}`)):Ee=D.background}switch(de||I.isDim()&&(de=g.color.multiplyOpacity(Ee,.5)),ie){case 16777216:case 33554432:I.isBold()&&j<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(j+=8),this._applyMinimumContrast(U,Ee,D.ansi[j],I,de,void 0)||he.push(`xterm-fg-${j}`);break;case 50331648:const we=g.channels.toColor(j>>16&255,j>>8&255,255&j);this._applyMinimumContrast(U,Ee,we,I,de,Se)||this._addStyle(U,`color:#${x(j.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(U,Ee,D.foreground,I,de,Se)||me&&he.push(`xterm-fg-${h.INVERTED_DEFAULT_COLOR}`)}he.length&&(U.className=he.join(" "),he.length=0),Z||O||N?U.textContent=K:T++,te!==this.defaultSpacing&&(U.style.letterSpacing=`${te}px`),X.push(U),q=V}return U&&T&&(U.textContent=K),X}_applyMinimumContrast(k,E,C,A,z,G){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,n.treatGlyphAsBackgroundColor)(A.getCode()))return!1;const B=this._getContrastCache(A);let P;if(z||G||(P=B.getColor(E.rgba,C.rgba)),P===void 0){const R=this._optionsService.rawOptions.minimumContrastRatio/(A.isDim()?2:1);P=g.color.ensureContrastRatio(z||E,G||C,R),B.setColor((z||E).rgba,(G||C).rgba,P??null)}return!!P&&(this._addStyle(k,`color:${P.css}`),!0)}_getContrastCache(k){return k.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(k,E){k.setAttribute("style",`${k.getAttribute("style")||""}${E};`)}_isCellInSelection(k,E){const C=this._selectionStart,A=this._selectionEnd;return!(!C||!A)&&(this._columnSelectMode?C[0]<=A[0]?k>=C[0]&&E>=C[1]&&k<A[0]&&E<=A[1]:k<C[0]&&E>=C[1]&&k>=A[0]&&E<=A[1]:E>C[1]&&E<A[1]||C[1]===A[1]&&E===C[1]&&k>=C[0]&&k<A[0]||C[1]<A[1]&&E===A[1]&&k<A[0]||C[1]<A[1]&&E===C[1]&&k>=C[0])}};function x(k,E,C){for(;k.length<C;)k=E+k;return k}i.DomRendererRowFactory=v=f([p(1,l.ICharacterJoinerService),p(2,w.IOptionsService),p(3,l.ICoreBrowserService),p(4,w.ICoreService),p(5,w.IDecorationService),p(6,l.IThemeService)],v)},2550:(b,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WidthCache=void 0,i.WidthCache=class{constructor(r,f){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=r.createElement("div"),this._container.classList.add("xterm-width-cache-measure-container"),this._container.setAttribute("aria-hidden","true"),this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";const p=r.createElement("span");p.classList.add("xterm-char-measure-element");const h=r.createElement("span");h.classList.add("xterm-char-measure-element"),h.style.fontWeight="bold";const _=r.createElement("span");_.classList.add("xterm-char-measure-element"),_.style.fontStyle="italic";const m=r.createElement("span");m.classList.add("xterm-char-measure-element"),m.style.fontWeight="bold",m.style.fontStyle="italic",this._measureElements=[p,h,_,m],this._container.appendChild(p),this._container.appendChild(h),this._container.appendChild(_),this._container.appendChild(m),f.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(r,f,p,h){r===this._font&&f===this._fontSize&&p===this._weight&&h===this._weightBold||(this._font=r,this._fontSize=f,this._weight=p,this._weightBold=h,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${p}`,this._measureElements[1].style.fontWeight=`${h}`,this._measureElements[2].style.fontWeight=`${p}`,this._measureElements[3].style.fontWeight=`${h}`,this.clear())}get(r,f,p){let h=0;if(!f&&!p&&r.length===1&&(h=r.charCodeAt(0))<256){if(this._flat[h]!==-9999)return this._flat[h];const w=this._measure(r,0);return w>0&&(this._flat[h]=w),w}let _=r;f&&(_+="B"),p&&(_+="I");let m=this._holey.get(_);if(m===void 0){let w=0;f&&(w|=1),p&&(w|=2),m=this._measure(r,w),m>0&&this._holey.set(_,m)}return m}_measure(r,f){const p=this._measureElements[f];return p.textContent=r.repeat(32),p.offsetWidth/32}}},2223:(b,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TEXT_BASELINE=i.DIM_OPACITY=i.INVERTED_DEFAULT_COLOR=void 0;const f=r(6114);i.INVERTED_DEFAULT_COLOR=257,i.DIM_OPACITY=.5,i.TEXT_BASELINE=f.isFirefox||f.isLegacyEdge?"bottom":"ideographic"},6171:(b,i)=>{function r(p){return 57508<=p&&p<=57558}function f(p){return p>=128512&&p<=128591||p>=127744&&p<=128511||p>=128640&&p<=128767||p>=9728&&p<=9983||p>=9984&&p<=10175||p>=65024&&p<=65039||p>=129280&&p<=129535||p>=127462&&p<=127487}Object.defineProperty(i,"__esModule",{value:!0}),i.computeNextVariantOffset=i.createRenderDimensions=i.treatGlyphAsBackgroundColor=i.allowRescaling=i.isEmoji=i.isRestrictedPowerlineGlyph=i.isPowerlineGlyph=i.throwIfFalsy=void 0,i.throwIfFalsy=function(p){if(!p)throw new Error("value must not be falsy");return p},i.isPowerlineGlyph=r,i.isRestrictedPowerlineGlyph=function(p){return 57520<=p&&p<=57527},i.isEmoji=f,i.allowRescaling=function(p,h,_,m){return h===1&&_>Math.ceil(1.5*m)&&p!==void 0&&p>255&&!f(p)&&!r(p)&&!(function(w){return 57344<=w&&w<=63743})(p)},i.treatGlyphAsBackgroundColor=function(p){return r(p)||(function(h){return 9472<=h&&h<=9631})(p)},i.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}},i.computeNextVariantOffset=function(p,h,_=0){return(p-(2*Math.round(h)-_))%(2*Math.round(h))}},6052:(b,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.createSelectionRenderModel=void 0;class r{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(p,h,_,m=!1){if(this.selectionStart=h,this.selectionEnd=_,!h||!_||h[0]===_[0]&&h[1]===_[1])return void this.clear();const w=p.buffers.active.ydisp,g=h[1]-w,l=_[1]-w,a=Math.max(g,0),n=Math.min(l,p.rows-1);a>=p.rows||n<0?this.clear():(this.hasSelection=!0,this.columnSelectMode=m,this.viewportStartRow=g,this.viewportEndRow=l,this.viewportCappedStartRow=a,this.viewportCappedEndRow=n,this.startCol=h[0],this.endCol=_[0])}isCellSelected(p,h,_){return!!this.hasSelection&&(_-=p.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?h>=this.startCol&&_>=this.viewportCappedStartRow&&h<this.endCol&&_<=this.viewportCappedEndRow:h<this.startCol&&_>=this.viewportCappedStartRow&&h>=this.endCol&&_<=this.viewportCappedEndRow:_>this.viewportStartRow&&_<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&_===this.viewportStartRow&&h>=this.startCol&&h<this.endCol||this.viewportStartRow<this.viewportEndRow&&_===this.viewportEndRow&&h<this.endCol||this.viewportStartRow<this.viewportEndRow&&_===this.viewportStartRow&&h>=this.startCol)}}i.createSelectionRenderModel=function(){return new r}},456:(b,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.SelectionModel=void 0,i.SelectionModel=class{constructor(r){this._bufferService=r,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){const r=this.selectionStart[0]+this.selectionStartLength;return r>this._bufferService.cols?r%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(r/this._bufferService.cols)-1]:[r%this._bufferService.cols,this.selectionStart[1]+Math.floor(r/this._bufferService.cols)]:[r,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){const r=this.selectionStart[0]+this.selectionStartLength;return r>this._bufferService.cols?[r%this._bufferService.cols,this.selectionStart[1]+Math.floor(r/this._bufferService.cols)]:[Math.max(r,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){const r=this.selectionStart,f=this.selectionEnd;return!(!r||!f)&&(r[1]>f[1]||r[1]===f[1]&&r[0]>f[0])}handleTrim(r){return this.selectionStart&&(this.selectionStart[1]-=r),this.selectionEnd&&(this.selectionEnd[1]-=r),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(b,i,r){var f=this&&this.__decorate||function(n,c,v,x){var k,E=arguments.length,C=E<3?c:x===null?x=Object.getOwnPropertyDescriptor(c,v):x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(n,c,v,x);else for(var A=n.length-1;A>=0;A--)(k=n[A])&&(C=(E<3?k(C):E>3?k(c,v,C):k(c,v))||C);return E>3&&C&&Object.defineProperty(c,v,C),C},p=this&&this.__param||function(n,c){return function(v,x){c(v,x,n)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CharSizeService=void 0;const h=r(2585),_=r(8460),m=r(844);let w=i.CharSizeService=class extends m.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(n,c,v){super(),this._optionsService=v,this.width=0,this.height=0,this._onCharSizeChange=this.register(new _.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event;try{this._measureStrategy=this.register(new a(this._optionsService))}catch{this._measureStrategy=this.register(new l(n,c,this._optionsService))}this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],(()=>this.measure())))}measure(){const n=this._measureStrategy.measure();n.width===this.width&&n.height===this.height||(this.width=n.width,this.height=n.height,this._onCharSizeChange.fire())}};i.CharSizeService=w=f([p(2,h.IOptionsService)],w);class g extends m.Disposable{constructor(){super(...arguments),this._result={width:0,height:0}}_validateAndSet(c,v){c!==void 0&&c>0&&v!==void 0&&v>0&&(this._result.width=c,this._result.height=v)}}class l extends g{constructor(c,v,x){super(),this._document=c,this._parentElement=v,this._optionsService=x,this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){return this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`,this._validateAndSet(Number(this._measureElement.offsetWidth)/32,Number(this._measureElement.offsetHeight)),this._result}}class a extends g{constructor(c){super(),this._optionsService=c,this._canvas=new OffscreenCanvas(100,100),this._ctx=this._canvas.getContext("2d");const v=this._ctx.measureText("W");if(!("width"in v&&"fontBoundingBoxAscent"in v&&"fontBoundingBoxDescent"in v))throw new Error("Required font metrics not supported")}measure(){this._ctx.font=`${this._optionsService.rawOptions.fontSize}px ${this._optionsService.rawOptions.fontFamily}`;const c=this._ctx.measureText("W");return this._validateAndSet(c.width,c.fontBoundingBoxAscent+c.fontBoundingBoxDescent),this._result}}},4269:function(b,i,r){var f=this&&this.__decorate||function(a,n,c,v){var x,k=arguments.length,E=k<3?n:v===null?v=Object.getOwnPropertyDescriptor(n,c):v;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(a,n,c,v);else for(var C=a.length-1;C>=0;C--)(x=a[C])&&(E=(k<3?x(E):k>3?x(n,c,E):x(n,c))||E);return k>3&&E&&Object.defineProperty(n,c,E),E},p=this&&this.__param||function(a,n){return function(c,v){n(c,v,a)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CharacterJoinerService=i.JoinedCellData=void 0;const h=r(3734),_=r(643),m=r(511),w=r(2585);class g extends h.AttributeData{constructor(n,c,v){super(),this.content=0,this.combinedData="",this.fg=n.fg,this.bg=n.bg,this.combinedData=c,this._width=v}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(n){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}i.JoinedCellData=g;let l=i.CharacterJoinerService=class xl{constructor(n){this._bufferService=n,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new m.CellData}register(n){const c={id:this._nextCharacterJoinerId++,handler:n};return this._characterJoiners.push(c),c.id}deregister(n){for(let c=0;c<this._characterJoiners.length;c++)if(this._characterJoiners[c].id===n)return this._characterJoiners.splice(c,1),!0;return!1}getJoinedCharacters(n){if(this._characterJoiners.length===0)return[];const c=this._bufferService.buffer.lines.get(n);if(!c||c.length===0)return[];const v=[],x=c.translateToString(!0);let k=0,E=0,C=0,A=c.getFg(0),z=c.getBg(0);for(let G=0;G<c.getTrimmedLength();G++)if(c.loadCell(G,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==A||this._workCell.bg!==z){if(G-k>1){const B=this._getJoinedRanges(x,C,E,c,k);for(let P=0;P<B.length;P++)v.push(B[P])}k=G,C=E,A=this._workCell.fg,z=this._workCell.bg}E+=this._workCell.getChars().length||_.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-k>1){const G=this._getJoinedRanges(x,C,E,c,k);for(let B=0;B<G.length;B++)v.push(G[B])}return v}_getJoinedRanges(n,c,v,x,k){const E=n.substring(c,v);let C=[];try{C=this._characterJoiners[0].handler(E)}catch(A){console.error(A)}for(let A=1;A<this._characterJoiners.length;A++)try{const z=this._characterJoiners[A].handler(E);for(let G=0;G<z.length;G++)xl._mergeRanges(C,z[G])}catch(z){console.error(z)}return this._stringRangesToCellRanges(C,x,k),C}_stringRangesToCellRanges(n,c,v){let x=0,k=!1,E=0,C=n[x];if(C){for(let A=v;A<this._bufferService.cols;A++){const z=c.getWidth(A),G=c.getString(A).length||_.WHITESPACE_CELL_CHAR.length;if(z!==0){if(!k&&C[0]<=E&&(C[0]=A,k=!0),C[1]<=E){if(C[1]=A,C=n[++x],!C)break;C[0]<=E?(C[0]=A,k=!0):k=!1}E+=G}}C&&(C[1]=this._bufferService.cols)}}static _mergeRanges(n,c){let v=!1;for(let x=0;x<n.length;x++){const k=n[x];if(v){if(c[1]<=k[0])return n[x-1][1]=c[1],n;if(c[1]<=k[1])return n[x-1][1]=Math.max(c[1],k[1]),n.splice(x,1),n;n.splice(x,1),x--}else{if(c[1]<=k[0])return n.splice(x,0,c),n;if(c[1]<=k[1])return k[0]=Math.min(c[0],k[0]),n;c[0]<k[1]&&(k[0]=Math.min(c[0],k[0]),v=!0)}}return v?n[n.length-1][1]=c[1]:n.push(c),n}};i.CharacterJoinerService=l=f([p(0,w.IBufferService)],l)},5114:(b,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CoreBrowserService=void 0;const f=r(844),p=r(8460),h=r(3656);class _ extends f.Disposable{constructor(g,l,a){super(),this._textarea=g,this._window=l,this.mainDocument=a,this._isFocused=!1,this._cachedIsFocused=void 0,this._screenDprMonitor=new m(this._window),this._onDprChange=this.register(new p.EventEmitter),this.onDprChange=this._onDprChange.event,this._onWindowChange=this.register(new p.EventEmitter),this.onWindowChange=this._onWindowChange.event,this.register(this.onWindowChange((n=>this._screenDprMonitor.setWindow(n)))),this.register((0,p.forwardEvent)(this._screenDprMonitor.onDprChange,this._onDprChange)),this._textarea.addEventListener("focus",(()=>this._isFocused=!0)),this._textarea.addEventListener("blur",(()=>this._isFocused=!1))}get window(){return this._window}set window(g){this._window!==g&&(this._window=g,this._onWindowChange.fire(this._window))}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask((()=>this._cachedIsFocused=void 0))),this._cachedIsFocused}}i.CoreBrowserService=_;class m extends f.Disposable{constructor(g){super(),this._parentWindow=g,this._windowResizeListener=this.register(new f.MutableDisposable),this._onDprChange=this.register(new p.EventEmitter),this.onDprChange=this._onDprChange.event,this._outerListener=()=>this._setDprAndFireIfDiffers(),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._updateDpr(),this._setWindowResizeListener(),this.register((0,f.toDisposable)((()=>this.clearListener())))}setWindow(g){this._parentWindow=g,this._setWindowResizeListener(),this._setDprAndFireIfDiffers()}_setWindowResizeListener(){this._windowResizeListener.value=(0,h.addDisposableDomListener)(this._parentWindow,"resize",(()=>this._setDprAndFireIfDiffers()))}_setDprAndFireIfDiffers(){this._parentWindow.devicePixelRatio!==this._currentDevicePixelRatio&&this._onDprChange.fire(this._parentWindow.devicePixelRatio),this._updateDpr()}_updateDpr(){var g;this._outerListener&&((g=this._resolutionMediaMatchList)==null||g.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._outerListener=void 0)}}},779:(b,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.LinkProviderService=void 0;const f=r(844);class p extends f.Disposable{constructor(){super(),this.linkProviders=[],this.register((0,f.toDisposable)((()=>this.linkProviders.length=0)))}registerLinkProvider(_){return this.linkProviders.push(_),{dispose:()=>{const m=this.linkProviders.indexOf(_);m!==-1&&this.linkProviders.splice(m,1)}}}}i.LinkProviderService=p},8934:function(b,i,r){var f=this&&this.__decorate||function(w,g,l,a){var n,c=arguments.length,v=c<3?g:a===null?a=Object.getOwnPropertyDescriptor(g,l):a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")v=Reflect.decorate(w,g,l,a);else for(var x=w.length-1;x>=0;x--)(n=w[x])&&(v=(c<3?n(v):c>3?n(g,l,v):n(g,l))||v);return c>3&&v&&Object.defineProperty(g,l,v),v},p=this&&this.__param||function(w,g){return function(l,a){g(l,a,w)}};Object.defineProperty(i,"__esModule",{value:!0}),i.MouseService=void 0;const h=r(4725),_=r(9806);let m=i.MouseService=class{constructor(w,g){this._renderService=w,this._charSizeService=g}getCoords(w,g,l,a,n){return(0,_.getCoords)(window,w,g,l,a,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,n)}getMouseReportCoords(w,g){const l=(0,_.getCoordsRelativeToElement)(window,w,g);if(this._charSizeService.hasValidSize)return l[0]=Math.min(Math.max(l[0],0),this._renderService.dimensions.css.canvas.width-1),l[1]=Math.min(Math.max(l[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(l[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(l[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(l[0]),y:Math.floor(l[1])}}};i.MouseService=m=f([p(0,h.IRenderService),p(1,h.ICharSizeService)],m)},3230:function(b,i,r){var f=this&&this.__decorate||function(n,c,v,x){var k,E=arguments.length,C=E<3?c:x===null?x=Object.getOwnPropertyDescriptor(c,v):x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(n,c,v,x);else for(var A=n.length-1;A>=0;A--)(k=n[A])&&(C=(E<3?k(C):E>3?k(c,v,C):k(c,v))||C);return E>3&&C&&Object.defineProperty(c,v,C),C},p=this&&this.__param||function(n,c){return function(v,x){c(v,x,n)}};Object.defineProperty(i,"__esModule",{value:!0}),i.RenderService=void 0;const h=r(6193),_=r(4725),m=r(8460),w=r(844),g=r(7226),l=r(2585);let a=i.RenderService=class extends w.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(n,c,v,x,k,E,C,A){super(),this._rowCount=n,this._charSizeService=x,this._renderer=this.register(new w.MutableDisposable),this._pausedResizeTask=new g.DebouncedIdleTask,this._observerDisposable=this.register(new w.MutableDisposable),this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new m.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new m.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new m.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new m.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new h.RenderDebouncer(((z,G)=>this._renderRows(z,G)),C),this.register(this._renderDebouncer),this.register(C.onDprChange((()=>this.handleDevicePixelRatioChange()))),this.register(E.onResize((()=>this._fullRefresh()))),this.register(E.buffers.onBufferActivate((()=>{var z;return(z=this._renderer.value)==null?void 0:z.clear()}))),this.register(v.onOptionChange((()=>this._handleOptionsChanged()))),this.register(this._charSizeService.onCharSizeChange((()=>this.handleCharSizeChanged()))),this.register(k.onDecorationRegistered((()=>this._fullRefresh()))),this.register(k.onDecorationRemoved((()=>this._fullRefresh()))),this.register(v.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio","rescaleOverlappingGlyphs"],(()=>{this.clear(),this.handleResize(E.cols,E.rows),this._fullRefresh()}))),this.register(v.onMultipleOptionChange(["cursorBlink","cursorStyle"],(()=>this.refreshRows(E.buffer.y,E.buffer.y,!0)))),this.register(A.onChangeColors((()=>this._fullRefresh()))),this._registerIntersectionObserver(C.window,c),this.register(C.onWindowChange((z=>this._registerIntersectionObserver(z,c))))}_registerIntersectionObserver(n,c){if("IntersectionObserver"in n){const v=new n.IntersectionObserver((x=>this._handleIntersectionChange(x[x.length-1])),{threshold:0});v.observe(c),this._observerDisposable.value=(0,w.toDisposable)((()=>v.disconnect()))}}_handleIntersectionChange(n){this._isPaused=n.isIntersecting===void 0?n.intersectionRatio===0:!n.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(n,c,v=!1){this._isPaused?this._needsFullRefresh=!0:(v||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(n,c,this._rowCount))}_renderRows(n,c){this._renderer.value&&(n=Math.min(n,this._rowCount-1),c=Math.min(c,this._rowCount-1),this._renderer.value.renderRows(n,c),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:n,end:c}),this._onRender.fire({start:n,end:c}),this._isNextRenderRedrawOnly=!0)}resize(n,c){this._rowCount=c,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(n){this._renderer.value=n,this._renderer.value&&(this._renderer.value.onRequestRedraw((c=>this.refreshRows(c.start,c.end,!0))),this._needsSelectionRefresh=!0,this._fullRefresh())}addRefreshCallback(n){return this._renderDebouncer.addRefreshCallback(n)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){var n,c;this._renderer.value&&((c=(n=this._renderer.value).clearTextureAtlas)==null||c.call(n),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(n,c){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set((()=>{var v;return(v=this._renderer.value)==null?void 0:v.handleResize(n,c)})):this._renderer.value.handleResize(n,c),this._fullRefresh())}handleCharSizeChanged(){var n;(n=this._renderer.value)==null||n.handleCharSizeChanged()}handleBlur(){var n;(n=this._renderer.value)==null||n.handleBlur()}handleFocus(){var n;(n=this._renderer.value)==null||n.handleFocus()}handleSelectionChanged(n,c,v){var x;this._selectionState.start=n,this._selectionState.end=c,this._selectionState.columnSelectMode=v,(x=this._renderer.value)==null||x.handleSelectionChanged(n,c,v)}handleCursorMove(){var n;(n=this._renderer.value)==null||n.handleCursorMove()}clear(){var n;(n=this._renderer.value)==null||n.clear()}};i.RenderService=a=f([p(2,l.IOptionsService),p(3,_.ICharSizeService),p(4,l.IDecorationService),p(5,l.IBufferService),p(6,_.ICoreBrowserService),p(7,_.IThemeService)],a)},9312:function(b,i,r){var f=this&&this.__decorate||function(C,A,z,G){var B,P=arguments.length,R=P<3?A:G===null?G=Object.getOwnPropertyDescriptor(A,z):G;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")R=Reflect.decorate(C,A,z,G);else for(var Q=C.length-1;Q>=0;Q--)(B=C[Q])&&(R=(P<3?B(R):P>3?B(A,z,R):B(A,z))||R);return P>3&&R&&Object.defineProperty(A,z,R),R},p=this&&this.__param||function(C,A){return function(z,G){A(z,G,C)}};Object.defineProperty(i,"__esModule",{value:!0}),i.SelectionService=void 0;const h=r(9806),_=r(9504),m=r(456),w=r(4725),g=r(8460),l=r(844),a=r(6114),n=r(4841),c=r(511),v=r(2585),x="",k=new RegExp(x,"g");let E=i.SelectionService=class extends l.Disposable{constructor(C,A,z,G,B,P,R,Q,se){super(),this._element=C,this._screenElement=A,this._linkifier=z,this._bufferService=G,this._coreService=B,this._mouseService=P,this._optionsService=R,this._renderService=Q,this._coreBrowserService=se,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new c.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new g.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new g.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new g.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new g.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=X=>this._handleMouseMove(X),this._mouseUpListener=X=>this._handleMouseUp(X),this._coreService.onUserInput((()=>{this.hasSelection&&this.clearSelection()})),this._trimListener=this._bufferService.buffer.lines.onTrim((X=>this._handleTrim(X))),this.register(this._bufferService.buffers.onBufferActivate((X=>this._handleBufferActivate(X)))),this.enable(),this._model=new m.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,l.toDisposable)((()=>{this._removeMouseDownListeners()})))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){const C=this._model.finalSelectionStart,A=this._model.finalSelectionEnd;return!(!C||!A||C[0]===A[0]&&C[1]===A[1])}get selectionText(){const C=this._model.finalSelectionStart,A=this._model.finalSelectionEnd;if(!C||!A)return"";const z=this._bufferService.buffer,G=[];if(this._activeSelectionMode===3){if(C[0]===A[0])return"";const B=C[0]<A[0]?C[0]:A[0],P=C[0]<A[0]?A[0]:C[0];for(let R=C[1];R<=A[1];R++){const Q=z.translateBufferLineToString(R,!0,B,P);G.push(Q)}}else{const B=C[1]===A[1]?A[0]:void 0;G.push(z.translateBufferLineToString(C[1],!0,C[0],B));for(let P=C[1]+1;P<=A[1]-1;P++){const R=z.lines.get(P),Q=z.translateBufferLineToString(P,!0);R!=null&&R.isWrapped?G[G.length-1]+=Q:G.push(Q)}if(C[1]!==A[1]){const P=z.lines.get(A[1]),R=z.translateBufferLineToString(A[1],!0,0,A[0]);P&&P.isWrapped?G[G.length-1]+=R:G.push(R)}}return G.map((B=>B.replace(k," "))).join(a.isWindows?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(C){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame((()=>this._refresh()))),a.isLinux&&C&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(C){const A=this._getMouseBufferCoords(C),z=this._model.finalSelectionStart,G=this._model.finalSelectionEnd;return!!(z&&G&&A)&&this._areCoordsInSelection(A,z,G)}isCellInSelection(C,A){const z=this._model.finalSelectionStart,G=this._model.finalSelectionEnd;return!(!z||!G)&&this._areCoordsInSelection([C,A],z,G)}_areCoordsInSelection(C,A,z){return C[1]>A[1]&&C[1]<z[1]||A[1]===z[1]&&C[1]===A[1]&&C[0]>=A[0]&&C[0]<z[0]||A[1]<z[1]&&C[1]===z[1]&&C[0]<z[0]||A[1]<z[1]&&C[1]===A[1]&&C[0]>=A[0]}_selectWordAtCursor(C,A){var B,P;const z=(P=(B=this._linkifier.currentLink)==null?void 0:B.link)==null?void 0:P.range;if(z)return this._model.selectionStart=[z.start.x-1,z.start.y-1],this._model.selectionStartLength=(0,n.getRangeLength)(z,this._bufferService.cols),this._model.selectionEnd=void 0,!0;const G=this._getMouseBufferCoords(C);return!!G&&(this._selectWordAt(G,A),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(C,A){this._model.clearSelection(),C=Math.max(C,0),A=Math.min(A,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,C],this._model.selectionEnd=[this._bufferService.cols,A],this.refresh(),this._onSelectionChange.fire()}_handleTrim(C){this._model.handleTrim(C)&&this.refresh()}_getMouseBufferCoords(C){const A=this._mouseService.getCoords(C,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(A)return A[0]--,A[1]--,A[1]+=this._bufferService.buffer.ydisp,A}_getMouseEventScrollAmount(C){let A=(0,h.getCoordsRelativeToElement)(this._coreBrowserService.window,C,this._screenElement)[1];const z=this._renderService.dimensions.css.canvas.height;return A>=0&&A<=z?0:(A>z&&(A-=z),A=Math.min(Math.max(A,-50),50),A/=50,A/Math.abs(A)+Math.round(14*A))}shouldForceSelection(C){return a.isMac?C.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:C.shiftKey}handleMouseDown(C){if(this._mouseDownTimeStamp=C.timeStamp,(C.button!==2||!this.hasSelection)&&C.button===0){if(!this._enabled){if(!this.shouldForceSelection(C))return;C.stopPropagation()}C.preventDefault(),this._dragScrollAmount=0,this._enabled&&C.shiftKey?this._handleIncrementalClick(C):C.detail===1?this._handleSingleClick(C):C.detail===2?this._handleDoubleClick(C):C.detail===3&&this._handleTripleClick(C),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval((()=>this._dragScroll()),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(C){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(C))}_handleSingleClick(C){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(C)?3:0,this._model.selectionStart=this._getMouseBufferCoords(C),!this._model.selectionStart)return;this._model.selectionEnd=void 0;const A=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);A&&A.length!==this._model.selectionStart[0]&&A.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(C){this._selectWordAtCursor(C,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(C){const A=this._getMouseBufferCoords(C);A&&(this._activeSelectionMode=2,this._selectLineAt(A[1]))}shouldColumnSelect(C){return C.altKey&&!(a.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(C){if(C.stopImmediatePropagation(),!this._model.selectionStart)return;const A=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(C),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(C),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));const z=this._bufferService.buffer;if(this._model.selectionEnd[1]<z.lines.length){const G=z.lines.get(this._model.selectionEnd[1]);G&&G.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]<this._bufferService.cols&&this._model.selectionEnd[0]++}A&&A[0]===this._model.selectionEnd[0]&&A[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});const C=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(C.ydisp+this._bufferService.rows,C.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=C.ydisp),this.refresh()}}_handleMouseUp(C){const A=C.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&A<500&&C.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){const z=this._mouseService.getCoords(C,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(z&&z[0]!==void 0&&z[1]!==void 0){const G=(0,_.moveToCellSequence)(z[0]-1,z[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(G,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){const C=this._model.finalSelectionStart,A=this._model.finalSelectionEnd,z=!(!C||!A||C[0]===A[0]&&C[1]===A[1]);z?C&&A&&(this._oldSelectionStart&&this._oldSelectionEnd&&C[0]===this._oldSelectionStart[0]&&C[1]===this._oldSelectionStart[1]&&A[0]===this._oldSelectionEnd[0]&&A[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(C,A,z)):this._oldHasSelection&&this._fireOnSelectionChange(C,A,z)}_fireOnSelectionChange(C,A,z){this._oldSelectionStart=C,this._oldSelectionEnd=A,this._oldHasSelection=z,this._onSelectionChange.fire()}_handleBufferActivate(C){this.clearSelection(),this._trimListener.dispose(),this._trimListener=C.activeBuffer.lines.onTrim((A=>this._handleTrim(A)))}_convertViewportColToCharacterIndex(C,A){let z=A;for(let G=0;A>=G;G++){const B=C.loadCell(G,this._workCell).getChars().length;this._workCell.getWidth()===0?z--:B>1&&A!==G&&(z+=B-1)}return z}setSelection(C,A,z){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[C,A],this._model.selectionStartLength=z,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(C){this._isClickInSelection(C)||(this._selectWordAtCursor(C,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(C,A,z=!0,G=!0){if(C[0]>=this._bufferService.cols)return;const B=this._bufferService.buffer,P=B.lines.get(C[1]);if(!P)return;const R=B.translateBufferLineToString(C[1],!1);let Q=this._convertViewportColToCharacterIndex(P,C[0]),se=Q;const X=C[0]-Q;let oe=0,D=0,U=0,S=0;if(R.charAt(Q)===" "){for(;Q>0&&R.charAt(Q-1)===" ";)Q--;for(;se<R.length&&R.charAt(se+1)===" ";)se++}else{let Y=C[0],ne=C[0];P.getWidth(Y)===0&&(oe++,Y--),P.getWidth(ne)===2&&(D++,ne++);const ae=P.getString(ne).length;for(ae>1&&(S+=ae-1,se+=ae-1);Y>0&&Q>0&&!this._isCharWordSeparator(P.loadCell(Y-1,this._workCell));){P.loadCell(Y-1,this._workCell);const W=this._workCell.getChars().length;this._workCell.getWidth()===0?(oe++,Y--):W>1&&(U+=W-1,Q-=W-1),Q--,Y--}for(;ne<P.length&&se+1<R.length&&!this._isCharWordSeparator(P.loadCell(ne+1,this._workCell));){P.loadCell(ne+1,this._workCell);const W=this._workCell.getChars().length;this._workCell.getWidth()===2?(D++,ne++):W>1&&(S+=W-1,se+=W-1),se++,ne++}}se++;let T=Q+X-oe+U,K=Math.min(this._bufferService.cols,se-Q+oe+D-U-S);if(A||R.slice(Q,se).trim()!==""){if(z&&T===0&&P.getCodePoint(0)!==32){const Y=B.lines.get(C[1]-1);if(Y&&P.isWrapped&&Y.getCodePoint(this._bufferService.cols-1)!==32){const ne=this._getWordAt([this._bufferService.cols-1,C[1]-1],!1,!0,!1);if(ne){const ae=this._bufferService.cols-ne.start;T-=ae,K+=ae}}}if(G&&T+K===this._bufferService.cols&&P.getCodePoint(this._bufferService.cols-1)!==32){const Y=B.lines.get(C[1]+1);if(Y!=null&&Y.isWrapped&&Y.getCodePoint(0)!==32){const ne=this._getWordAt([0,C[1]+1],!1,!1,!0);ne&&(K+=ne.length)}}return{start:T,length:K}}}_selectWordAt(C,A){const z=this._getWordAt(C,A);if(z){for(;z.start<0;)z.start+=this._bufferService.cols,C[1]--;this._model.selectionStart=[z.start,C[1]],this._model.selectionStartLength=z.length}}_selectToWordAt(C){const A=this._getWordAt(C,!0);if(A){let z=C[1];for(;A.start<0;)A.start+=this._bufferService.cols,z--;if(!this._model.areSelectionValuesReversed())for(;A.start+A.length>this._bufferService.cols;)A.length-=this._bufferService.cols,z++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?A.start:A.start+A.length,z]}}_isCharWordSeparator(C){return C.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(C.getChars())>=0}_selectLineAt(C){const A=this._bufferService.buffer.getWrappedRangeForLine(C),z={start:{x:0,y:A.first},end:{x:this._bufferService.cols-1,y:A.last}};this._model.selectionStart=[0,A.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,n.getRangeLength)(z,this._bufferService.cols)}};i.SelectionService=E=f([p(3,v.IBufferService),p(4,v.ICoreService),p(5,w.IMouseService),p(6,v.IOptionsService),p(7,w.IRenderService),p(8,w.ICoreBrowserService)],E)},4725:(b,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ILinkProviderService=i.IThemeService=i.ICharacterJoinerService=i.ISelectionService=i.IRenderService=i.IMouseService=i.ICoreBrowserService=i.ICharSizeService=void 0;const f=r(8343);i.ICharSizeService=(0,f.createDecorator)("CharSizeService"),i.ICoreBrowserService=(0,f.createDecorator)("CoreBrowserService"),i.IMouseService=(0,f.createDecorator)("MouseService"),i.IRenderService=(0,f.createDecorator)("RenderService"),i.ISelectionService=(0,f.createDecorator)("SelectionService"),i.ICharacterJoinerService=(0,f.createDecorator)("CharacterJoinerService"),i.IThemeService=(0,f.createDecorator)("ThemeService"),i.ILinkProviderService=(0,f.createDecorator)("LinkProviderService")},6731:function(b,i,r){var f=this&&this.__decorate||function(E,C,A,z){var G,B=arguments.length,P=B<3?C:z===null?z=Object.getOwnPropertyDescriptor(C,A):z;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")P=Reflect.decorate(E,C,A,z);else for(var R=E.length-1;R>=0;R--)(G=E[R])&&(P=(B<3?G(P):B>3?G(C,A,P):G(C,A))||P);return B>3&&P&&Object.defineProperty(C,A,P),P},p=this&&this.__param||function(E,C){return function(A,z){C(A,z,E)}};Object.defineProperty(i,"__esModule",{value:!0}),i.ThemeService=i.DEFAULT_ANSI_COLORS=void 0;const h=r(7239),_=r(8055),m=r(8460),w=r(844),g=r(2585),l=_.css.toColor("#ffffff"),a=_.css.toColor("#000000"),n=_.css.toColor("#ffffff"),c=_.css.toColor("#000000"),v={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};i.DEFAULT_ANSI_COLORS=Object.freeze((()=>{const E=[_.css.toColor("#2e3436"),_.css.toColor("#cc0000"),_.css.toColor("#4e9a06"),_.css.toColor("#c4a000"),_.css.toColor("#3465a4"),_.css.toColor("#75507b"),_.css.toColor("#06989a"),_.css.toColor("#d3d7cf"),_.css.toColor("#555753"),_.css.toColor("#ef2929"),_.css.toColor("#8ae234"),_.css.toColor("#fce94f"),_.css.toColor("#729fcf"),_.css.toColor("#ad7fa8"),_.css.toColor("#34e2e2"),_.css.toColor("#eeeeec")],C=[0,95,135,175,215,255];for(let A=0;A<216;A++){const z=C[A/36%6|0],G=C[A/6%6|0],B=C[A%6];E.push({css:_.channels.toCss(z,G,B),rgba:_.channels.toRgba(z,G,B)})}for(let A=0;A<24;A++){const z=8+10*A;E.push({css:_.channels.toCss(z,z,z),rgba:_.channels.toRgba(z,z,z)})}return E})());let x=i.ThemeService=class extends w.Disposable{get colors(){return this._colors}constructor(E){super(),this._optionsService=E,this._contrastCache=new h.ColorContrastCache,this._halfContrastCache=new h.ColorContrastCache,this._onChangeColors=this.register(new m.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:l,background:a,cursor:n,cursorAccent:c,selectionForeground:void 0,selectionBackgroundTransparent:v,selectionBackgroundOpaque:_.color.blend(a,v),selectionInactiveBackgroundTransparent:v,selectionInactiveBackgroundOpaque:_.color.blend(a,v),ansi:i.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",(()=>this._contrastCache.clear()))),this.register(this._optionsService.onSpecificOptionChange("theme",(()=>this._setTheme(this._optionsService.rawOptions.theme))))}_setTheme(E={}){const C=this._colors;if(C.foreground=k(E.foreground,l),C.background=k(E.background,a),C.cursor=k(E.cursor,n),C.cursorAccent=k(E.cursorAccent,c),C.selectionBackgroundTransparent=k(E.selectionBackground,v),C.selectionBackgroundOpaque=_.color.blend(C.background,C.selectionBackgroundTransparent),C.selectionInactiveBackgroundTransparent=k(E.selectionInactiveBackground,C.selectionBackgroundTransparent),C.selectionInactiveBackgroundOpaque=_.color.blend(C.background,C.selectionInactiveBackgroundTransparent),C.selectionForeground=E.selectionForeground?k(E.selectionForeground,_.NULL_COLOR):void 0,C.selectionForeground===_.NULL_COLOR&&(C.selectionForeground=void 0),_.color.isOpaque(C.selectionBackgroundTransparent)&&(C.selectionBackgroundTransparent=_.color.opacity(C.selectionBackgroundTransparent,.3)),_.color.isOpaque(C.selectionInactiveBackgroundTransparent)&&(C.selectionInactiveBackgroundTransparent=_.color.opacity(C.selectionInactiveBackgroundTransparent,.3)),C.ansi=i.DEFAULT_ANSI_COLORS.slice(),C.ansi[0]=k(E.black,i.DEFAULT_ANSI_COLORS[0]),C.ansi[1]=k(E.red,i.DEFAULT_ANSI_COLORS[1]),C.ansi[2]=k(E.green,i.DEFAULT_ANSI_COLORS[2]),C.ansi[3]=k(E.yellow,i.DEFAULT_ANSI_COLORS[3]),C.ansi[4]=k(E.blue,i.DEFAULT_ANSI_COLORS[4]),C.ansi[5]=k(E.magenta,i.DEFAULT_ANSI_COLORS[5]),C.ansi[6]=k(E.cyan,i.DEFAULT_ANSI_COLORS[6]),C.ansi[7]=k(E.white,i.DEFAULT_ANSI_COLORS[7]),C.ansi[8]=k(E.brightBlack,i.DEFAULT_ANSI_COLORS[8]),C.ansi[9]=k(E.brightRed,i.DEFAULT_ANSI_COLORS[9]),C.ansi[10]=k(E.brightGreen,i.DEFAULT_ANSI_COLORS[10]),C.ansi[11]=k(E.brightYellow,i.DEFAULT_ANSI_COLORS[11]),C.ansi[12]=k(E.brightBlue,i.DEFAULT_ANSI_COLORS[12]),C.ansi[13]=k(E.brightMagenta,i.DEFAULT_ANSI_COLORS[13]),C.ansi[14]=k(E.brightCyan,i.DEFAULT_ANSI_COLORS[14]),C.ansi[15]=k(E.brightWhite,i.DEFAULT_ANSI_COLORS[15]),E.extendedAnsi){const A=Math.min(C.ansi.length-16,E.extendedAnsi.length);for(let z=0;z<A;z++)C.ansi[z+16]=k(E.extendedAnsi[z],i.DEFAULT_ANSI_COLORS[z+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(E){this._restoreColor(E),this._onChangeColors.fire(this.colors)}_restoreColor(E){if(E!==void 0)switch(E){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[E]=this._restoreColors.ansi[E]}else for(let C=0;C<this._restoreColors.ansi.length;++C)this._colors.ansi[C]=this._restoreColors.ansi[C]}modifyColors(E){E(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function k(E,C){if(E!==void 0)try{return _.css.toColor(E)}catch{}return C}i.ThemeService=x=f([p(0,g.IOptionsService)],x)},6349:(b,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CircularList=void 0;const f=r(8460),p=r(844);class h extends p.Disposable{constructor(m){super(),this._maxLength=m,this.onDeleteEmitter=this.register(new f.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new f.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new f.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(m){if(this._maxLength===m)return;const w=new Array(m);for(let g=0;g<Math.min(m,this.length);g++)w[g]=this._array[this._getCyclicIndex(g)];this._array=w,this._maxLength=m,this._startIndex=0}get length(){return this._length}set length(m){if(m>this._length)for(let w=this._length;w<m;w++)this._array[w]=void 0;this._length=m}get(m){return this._array[this._getCyclicIndex(m)]}set(m,w){this._array[this._getCyclicIndex(m)]=w}push(m){this._array[this._getCyclicIndex(this._length)]=m,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(m,w,...g){if(w){for(let l=m;l<this._length-w;l++)this._array[this._getCyclicIndex(l)]=this._array[this._getCyclicIndex(l+w)];this._length-=w,this.onDeleteEmitter.fire({index:m,amount:w})}for(let l=this._length-1;l>=m;l--)this._array[this._getCyclicIndex(l+g.length)]=this._array[this._getCyclicIndex(l)];for(let l=0;l<g.length;l++)this._array[this._getCyclicIndex(m+l)]=g[l];if(g.length&&this.onInsertEmitter.fire({index:m,amount:g.length}),this._length+g.length>this._maxLength){const l=this._length+g.length-this._maxLength;this._startIndex+=l,this._length=this._maxLength,this.onTrimEmitter.fire(l)}else this._length+=g.length}trimStart(m){m>this._length&&(m=this._length),this._startIndex+=m,this._length-=m,this.onTrimEmitter.fire(m)}shiftElements(m,w,g){if(!(w<=0)){if(m<0||m>=this._length)throw new Error("start argument out of range");if(m+g<0)throw new Error("Cannot shift elements in list beyond index 0");if(g>0){for(let a=w-1;a>=0;a--)this.set(m+a+g,this.get(m+a));const l=m+w+g-this._length;if(l>0)for(this._length+=l;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let l=0;l<w;l++)this.set(m+l+g,this.get(m+l))}}_getCyclicIndex(m){return(this._startIndex+m)%this._maxLength}}i.CircularList=h},1439:(b,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.clone=void 0,i.clone=function r(f,p=5){if(typeof f!="object")return f;const h=Array.isArray(f)?[]:{};for(const _ in f)h[_]=p<=1?f[_]:f[_]&&r(f[_],p-1);return h}},8055:(b,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.contrastRatio=i.toPaddedHex=i.rgba=i.rgb=i.css=i.color=i.channels=i.NULL_COLOR=void 0;let r=0,f=0,p=0,h=0;var _,m,w,g,l;function a(c){const v=c.toString(16);return v.length<2?"0"+v:v}function n(c,v){return c<v?(v+.05)/(c+.05):(c+.05)/(v+.05)}i.NULL_COLOR={css:"#00000000",rgba:0},(function(c){c.toCss=function(v,x,k,E){return E!==void 0?`#${a(v)}${a(x)}${a(k)}${a(E)}`:`#${a(v)}${a(x)}${a(k)}`},c.toRgba=function(v,x,k,E=255){return(v<<24|x<<16|k<<8|E)>>>0},c.toColor=function(v,x,k,E){return{css:c.toCss(v,x,k,E),rgba:c.toRgba(v,x,k,E)}}})(_||(i.channels=_={})),(function(c){function v(x,k){return h=Math.round(255*k),[r,f,p]=l.toChannels(x.rgba),{css:_.toCss(r,f,p,h),rgba:_.toRgba(r,f,p,h)}}c.blend=function(x,k){if(h=(255&k.rgba)/255,h===1)return{css:k.css,rgba:k.rgba};const E=k.rgba>>24&255,C=k.rgba>>16&255,A=k.rgba>>8&255,z=x.rgba>>24&255,G=x.rgba>>16&255,B=x.rgba>>8&255;return r=z+Math.round((E-z)*h),f=G+Math.round((C-G)*h),p=B+Math.round((A-B)*h),{css:_.toCss(r,f,p),rgba:_.toRgba(r,f,p)}},c.isOpaque=function(x){return(255&x.rgba)==255},c.ensureContrastRatio=function(x,k,E){const C=l.ensureContrastRatio(x.rgba,k.rgba,E);if(C)return _.toColor(C>>24&255,C>>16&255,C>>8&255)},c.opaque=function(x){const k=(255|x.rgba)>>>0;return[r,f,p]=l.toChannels(k),{css:_.toCss(r,f,p),rgba:k}},c.opacity=v,c.multiplyOpacity=function(x,k){return h=255&x.rgba,v(x,h*k/255)},c.toColorRGB=function(x){return[x.rgba>>24&255,x.rgba>>16&255,x.rgba>>8&255]}})(m||(i.color=m={})),(function(c){let v,x;try{const k=document.createElement("canvas");k.width=1,k.height=1;const E=k.getContext("2d",{willReadFrequently:!0});E&&(v=E,v.globalCompositeOperation="copy",x=v.createLinearGradient(0,0,1,1))}catch{}c.toColor=function(k){if(k.match(/#[\da-f]{3,8}/i))switch(k.length){case 4:return r=parseInt(k.slice(1,2).repeat(2),16),f=parseInt(k.slice(2,3).repeat(2),16),p=parseInt(k.slice(3,4).repeat(2),16),_.toColor(r,f,p);case 5:return r=parseInt(k.slice(1,2).repeat(2),16),f=parseInt(k.slice(2,3).repeat(2),16),p=parseInt(k.slice(3,4).repeat(2),16),h=parseInt(k.slice(4,5).repeat(2),16),_.toColor(r,f,p,h);case 7:return{css:k,rgba:(parseInt(k.slice(1),16)<<8|255)>>>0};case 9:return{css:k,rgba:parseInt(k.slice(1),16)>>>0}}const E=k.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(E)return r=parseInt(E[1]),f=parseInt(E[2]),p=parseInt(E[3]),h=Math.round(255*(E[5]===void 0?1:parseFloat(E[5]))),_.toColor(r,f,p,h);if(!v||!x)throw new Error("css.toColor: Unsupported css format");if(v.fillStyle=x,v.fillStyle=k,typeof v.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(v.fillRect(0,0,1,1),[r,f,p,h]=v.getImageData(0,0,1,1).data,h!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:_.toRgba(r,f,p,h),css:k}}})(w||(i.css=w={})),(function(c){function v(x,k,E){const C=x/255,A=k/255,z=E/255;return .2126*(C<=.03928?C/12.92:Math.pow((C+.055)/1.055,2.4))+.7152*(A<=.03928?A/12.92:Math.pow((A+.055)/1.055,2.4))+.0722*(z<=.03928?z/12.92:Math.pow((z+.055)/1.055,2.4))}c.relativeLuminance=function(x){return v(x>>16&255,x>>8&255,255&x)},c.relativeLuminance2=v})(g||(i.rgb=g={})),(function(c){function v(k,E,C){const A=k>>24&255,z=k>>16&255,G=k>>8&255;let B=E>>24&255,P=E>>16&255,R=E>>8&255,Q=n(g.relativeLuminance2(B,P,R),g.relativeLuminance2(A,z,G));for(;Q<C&&(B>0||P>0||R>0);)B-=Math.max(0,Math.ceil(.1*B)),P-=Math.max(0,Math.ceil(.1*P)),R-=Math.max(0,Math.ceil(.1*R)),Q=n(g.relativeLuminance2(B,P,R),g.relativeLuminance2(A,z,G));return(B<<24|P<<16|R<<8|255)>>>0}function x(k,E,C){const A=k>>24&255,z=k>>16&255,G=k>>8&255;let B=E>>24&255,P=E>>16&255,R=E>>8&255,Q=n(g.relativeLuminance2(B,P,R),g.relativeLuminance2(A,z,G));for(;Q<C&&(B<255||P<255||R<255);)B=Math.min(255,B+Math.ceil(.1*(255-B))),P=Math.min(255,P+Math.ceil(.1*(255-P))),R=Math.min(255,R+Math.ceil(.1*(255-R))),Q=n(g.relativeLuminance2(B,P,R),g.relativeLuminance2(A,z,G));return(B<<24|P<<16|R<<8|255)>>>0}c.blend=function(k,E){if(h=(255&E)/255,h===1)return E;const C=E>>24&255,A=E>>16&255,z=E>>8&255,G=k>>24&255,B=k>>16&255,P=k>>8&255;return r=G+Math.round((C-G)*h),f=B+Math.round((A-B)*h),p=P+Math.round((z-P)*h),_.toRgba(r,f,p)},c.ensureContrastRatio=function(k,E,C){const A=g.relativeLuminance(k>>8),z=g.relativeLuminance(E>>8);if(n(A,z)<C){if(z<A){const P=v(k,E,C),R=n(A,g.relativeLuminance(P>>8));if(R<C){const Q=x(k,E,C);return R>n(A,g.relativeLuminance(Q>>8))?P:Q}return P}const G=x(k,E,C),B=n(A,g.relativeLuminance(G>>8));if(B<C){const P=v(k,E,C);return B>n(A,g.relativeLuminance(P>>8))?G:P}return G}},c.reduceLuminance=v,c.increaseLuminance=x,c.toChannels=function(k){return[k>>24&255,k>>16&255,k>>8&255,255&k]}})(l||(i.rgba=l={})),i.toPaddedHex=a,i.contrastRatio=n},8969:(b,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CoreTerminal=void 0;const f=r(844),p=r(2585),h=r(4348),_=r(7866),m=r(744),w=r(7302),g=r(6975),l=r(8460),a=r(1753),n=r(1480),c=r(7994),v=r(9282),x=r(5435),k=r(5981),E=r(2660);let C=!1;class A extends f.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new l.EventEmitter),this._onScroll.event((G=>{var B;(B=this._onScrollApi)==null||B.fire(G.position)}))),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(G){for(const B in G)this.optionsService.options[B]=G[B]}constructor(G){super(),this._windowsWrappingHeuristics=this.register(new f.MutableDisposable),this._onBinary=this.register(new l.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new l.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new l.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new l.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new l.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new l.EventEmitter),this._instantiationService=new h.InstantiationService,this.optionsService=this.register(new w.OptionsService(G)),this._instantiationService.setService(p.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(m.BufferService)),this._instantiationService.setService(p.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(_.LogService)),this._instantiationService.setService(p.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(g.CoreService)),this._instantiationService.setService(p.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(a.CoreMouseService)),this._instantiationService.setService(p.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(n.UnicodeService)),this._instantiationService.setService(p.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(c.CharsetService),this._instantiationService.setService(p.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(E.OscLinkService),this._instantiationService.setService(p.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new x.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,l.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,l.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,l.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,l.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom((()=>this.scrollToBottom()))),this.register(this.coreService.onUserInput((()=>this._writeBuffer.handleUserInput()))),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],(()=>this._handleWindowsPtyOptionChange()))),this.register(this._bufferService.onScroll((B=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)}))),this.register(this._inputHandler.onScroll((B=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)}))),this._writeBuffer=this.register(new k.WriteBuffer(((B,P)=>this._inputHandler.parse(B,P)))),this.register((0,l.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write(G,B){this._writeBuffer.write(G,B)}writeSync(G,B){this._logService.logLevel<=p.LogLevelEnum.WARN&&!C&&(this._logService.warn("writeSync is unreliable and will be removed soon."),C=!0),this._writeBuffer.writeSync(G,B)}input(G,B=!0){this.coreService.triggerDataEvent(G,B)}resize(G,B){isNaN(G)||isNaN(B)||(G=Math.max(G,m.MINIMUM_COLS),B=Math.max(B,m.MINIMUM_ROWS),this._bufferService.resize(G,B))}scroll(G,B=!1){this._bufferService.scroll(G,B)}scrollLines(G,B,P){this._bufferService.scrollLines(G,B,P)}scrollPages(G){this.scrollLines(G*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(G){const B=G-this._bufferService.buffer.ydisp;B!==0&&this.scrollLines(B)}registerEscHandler(G,B){return this._inputHandler.registerEscHandler(G,B)}registerDcsHandler(G,B){return this._inputHandler.registerDcsHandler(G,B)}registerCsiHandler(G,B){return this._inputHandler.registerCsiHandler(G,B)}registerOscHandler(G,B){return this._inputHandler.registerOscHandler(G,B)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let G=!1;const B=this.optionsService.rawOptions.windowsPty;B&&B.buildNumber!==void 0&&B.buildNumber!==void 0?G=B.backend==="conpty"&&B.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(G=!0),G?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){const G=[];G.push(this.onLineFeed(v.updateWindowsModeWrappedState.bind(null,this._bufferService))),G.push(this.registerCsiHandler({final:"H"},(()=>((0,v.updateWindowsModeWrappedState)(this._bufferService),!1)))),this._windowsWrappingHeuristics.value=(0,f.toDisposable)((()=>{for(const B of G)B.dispose()}))}}}i.CoreTerminal=A},8460:(b,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.runAndSubscribe=i.forwardEvent=i.EventEmitter=void 0,i.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=r=>(this._listeners.push(r),{dispose:()=>{if(!this._disposed){for(let f=0;f<this._listeners.length;f++)if(this._listeners[f]===r)return void this._listeners.splice(f,1)}}})),this._event}fire(r,f){const p=[];for(let h=0;h<this._listeners.length;h++)p.push(this._listeners[h]);for(let h=0;h<p.length;h++)p[h].call(void 0,r,f)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},i.forwardEvent=function(r,f){return r((p=>f.fire(p)))},i.runAndSubscribe=function(r,f){return f(void 0),r((p=>f(p)))}},5435:function(b,i,r){var f=this&&this.__decorate||function(oe,D,U,S){var T,K=arguments.length,Y=K<3?D:S===null?S=Object.getOwnPropertyDescriptor(D,U):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Y=Reflect.decorate(oe,D,U,S);else for(var ne=oe.length-1;ne>=0;ne--)(T=oe[ne])&&(Y=(K<3?T(Y):K>3?T(D,U,Y):T(D,U))||Y);return K>3&&Y&&Object.defineProperty(D,U,Y),Y},p=this&&this.__param||function(oe,D){return function(U,S){D(U,S,oe)}};Object.defineProperty(i,"__esModule",{value:!0}),i.InputHandler=i.WindowsOptionsReportType=void 0;const h=r(2584),_=r(7116),m=r(2015),w=r(844),g=r(482),l=r(8437),a=r(8460),n=r(643),c=r(511),v=r(3734),x=r(2585),k=r(1480),E=r(6242),C=r(6351),A=r(5941),z={"(":0,")":1,"*":2,"+":3,"-":1,".":2},G=131072;function B(oe,D){if(oe>24)return D.setWinLines||!1;switch(oe){case 1:return!!D.restoreWin;case 2:return!!D.minimizeWin;case 3:return!!D.setWinPosition;case 4:return!!D.setWinSizePixels;case 5:return!!D.raiseWin;case 6:return!!D.lowerWin;case 7:return!!D.refreshWin;case 8:return!!D.setWinSizeChars;case 9:return!!D.maximizeWin;case 10:return!!D.fullscreenWin;case 11:return!!D.getWinState;case 13:return!!D.getWinPosition;case 14:return!!D.getWinSizePixels;case 15:return!!D.getScreenSizePixels;case 16:return!!D.getCellSizePixels;case 18:return!!D.getWinSizeChars;case 19:return!!D.getScreenSizeChars;case 20:return!!D.getIconTitle;case 21:return!!D.getWinTitle;case 22:return!!D.pushTitle;case 23:return!!D.popTitle;case 24:return!!D.setWinLines}return!1}var P;(function(oe){oe[oe.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",oe[oe.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(P||(i.WindowsOptionsReportType=P={}));let R=0;class Q extends w.Disposable{getAttrData(){return this._curAttrData}constructor(D,U,S,T,K,Y,ne,ae,W=new m.EscapeSequenceParser){super(),this._bufferService=D,this._charsetService=U,this._coreService=S,this._logService=T,this._optionsService=K,this._oscLinkService=Y,this._coreMouseService=ne,this._unicodeService=ae,this._parser=W,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new g.StringToUtf32,this._utf8Decoder=new g.Utf8ToUtf32,this._workCell=new c.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=l.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=l.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new a.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new a.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new a.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new a.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new a.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new a.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new a.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new a.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new a.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new a.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new a.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new a.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new a.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new se(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate((L=>this._activeBuffer=L.activeBuffer))),this._parser.setCsiHandlerFallback(((L,ee)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(L),params:ee.toArray()})})),this._parser.setEscHandlerFallback((L=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(L)})})),this._parser.setExecuteHandlerFallback((L=>{this._logService.debug("Unknown EXECUTE code: ",{code:L})})),this._parser.setOscHandlerFallback(((L,ee,te)=>{this._logService.debug("Unknown OSC code: ",{identifier:L,action:ee,data:te})})),this._parser.setDcsHandlerFallback(((L,ee,te)=>{ee==="HOOK"&&(te=te.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(L),action:ee,payload:te})})),this._parser.setPrintHandler(((L,ee,te)=>this.print(L,ee,te))),this._parser.registerCsiHandler({final:"@"},(L=>this.insertChars(L))),this._parser.registerCsiHandler({intermediates:" ",final:"@"},(L=>this.scrollLeft(L))),this._parser.registerCsiHandler({final:"A"},(L=>this.cursorUp(L))),this._parser.registerCsiHandler({intermediates:" ",final:"A"},(L=>this.scrollRight(L))),this._parser.registerCsiHandler({final:"B"},(L=>this.cursorDown(L))),this._parser.registerCsiHandler({final:"C"},(L=>this.cursorForward(L))),this._parser.registerCsiHandler({final:"D"},(L=>this.cursorBackward(L))),this._parser.registerCsiHandler({final:"E"},(L=>this.cursorNextLine(L))),this._parser.registerCsiHandler({final:"F"},(L=>this.cursorPrecedingLine(L))),this._parser.registerCsiHandler({final:"G"},(L=>this.cursorCharAbsolute(L))),this._parser.registerCsiHandler({final:"H"},(L=>this.cursorPosition(L))),this._parser.registerCsiHandler({final:"I"},(L=>this.cursorForwardTab(L))),this._parser.registerCsiHandler({final:"J"},(L=>this.eraseInDisplay(L,!1))),this._parser.registerCsiHandler({prefix:"?",final:"J"},(L=>this.eraseInDisplay(L,!0))),this._parser.registerCsiHandler({final:"K"},(L=>this.eraseInLine(L,!1))),this._parser.registerCsiHandler({prefix:"?",final:"K"},(L=>this.eraseInLine(L,!0))),this._parser.registerCsiHandler({final:"L"},(L=>this.insertLines(L))),this._parser.registerCsiHandler({final:"M"},(L=>this.deleteLines(L))),this._parser.registerCsiHandler({final:"P"},(L=>this.deleteChars(L))),this._parser.registerCsiHandler({final:"S"},(L=>this.scrollUp(L))),this._parser.registerCsiHandler({final:"T"},(L=>this.scrollDown(L))),this._parser.registerCsiHandler({final:"X"},(L=>this.eraseChars(L))),this._parser.registerCsiHandler({final:"Z"},(L=>this.cursorBackwardTab(L))),this._parser.registerCsiHandler({final:"`"},(L=>this.charPosAbsolute(L))),this._parser.registerCsiHandler({final:"a"},(L=>this.hPositionRelative(L))),this._parser.registerCsiHandler({final:"b"},(L=>this.repeatPrecedingCharacter(L))),this._parser.registerCsiHandler({final:"c"},(L=>this.sendDeviceAttributesPrimary(L))),this._parser.registerCsiHandler({prefix:">",final:"c"},(L=>this.sendDeviceAttributesSecondary(L))),this._parser.registerCsiHandler({final:"d"},(L=>this.linePosAbsolute(L))),this._parser.registerCsiHandler({final:"e"},(L=>this.vPositionRelative(L))),this._parser.registerCsiHandler({final:"f"},(L=>this.hVPosition(L))),this._parser.registerCsiHandler({final:"g"},(L=>this.tabClear(L))),this._parser.registerCsiHandler({final:"h"},(L=>this.setMode(L))),this._parser.registerCsiHandler({prefix:"?",final:"h"},(L=>this.setModePrivate(L))),this._parser.registerCsiHandler({final:"l"},(L=>this.resetMode(L))),this._parser.registerCsiHandler({prefix:"?",final:"l"},(L=>this.resetModePrivate(L))),this._parser.registerCsiHandler({final:"m"},(L=>this.charAttributes(L))),this._parser.registerCsiHandler({final:"n"},(L=>this.deviceStatus(L))),this._parser.registerCsiHandler({prefix:"?",final:"n"},(L=>this.deviceStatusPrivate(L))),this._parser.registerCsiHandler({intermediates:"!",final:"p"},(L=>this.softReset(L))),this._parser.registerCsiHandler({intermediates:" ",final:"q"},(L=>this.setCursorStyle(L))),this._parser.registerCsiHandler({final:"r"},(L=>this.setScrollRegion(L))),this._parser.registerCsiHandler({final:"s"},(L=>this.saveCursor(L))),this._parser.registerCsiHandler({final:"t"},(L=>this.windowOptions(L))),this._parser.registerCsiHandler({final:"u"},(L=>this.restoreCursor(L))),this._parser.registerCsiHandler({intermediates:"'",final:"}"},(L=>this.insertColumns(L))),this._parser.registerCsiHandler({intermediates:"'",final:"~"},(L=>this.deleteColumns(L))),this._parser.registerCsiHandler({intermediates:'"',final:"q"},(L=>this.selectProtected(L))),this._parser.registerCsiHandler({intermediates:"$",final:"p"},(L=>this.requestMode(L,!0))),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},(L=>this.requestMode(L,!1))),this._parser.setExecuteHandler(h.C0.BEL,(()=>this.bell())),this._parser.setExecuteHandler(h.C0.LF,(()=>this.lineFeed())),this._parser.setExecuteHandler(h.C0.VT,(()=>this.lineFeed())),this._parser.setExecuteHandler(h.C0.FF,(()=>this.lineFeed())),this._parser.setExecuteHandler(h.C0.CR,(()=>this.carriageReturn())),this._parser.setExecuteHandler(h.C0.BS,(()=>this.backspace())),this._parser.setExecuteHandler(h.C0.HT,(()=>this.tab())),this._parser.setExecuteHandler(h.C0.SO,(()=>this.shiftOut())),this._parser.setExecuteHandler(h.C0.SI,(()=>this.shiftIn())),this._parser.setExecuteHandler(h.C1.IND,(()=>this.index())),this._parser.setExecuteHandler(h.C1.NEL,(()=>this.nextLine())),this._parser.setExecuteHandler(h.C1.HTS,(()=>this.tabSet())),this._parser.registerOscHandler(0,new E.OscHandler((L=>(this.setTitle(L),this.setIconName(L),!0)))),this._parser.registerOscHandler(1,new E.OscHandler((L=>this.setIconName(L)))),this._parser.registerOscHandler(2,new E.OscHandler((L=>this.setTitle(L)))),this._parser.registerOscHandler(4,new E.OscHandler((L=>this.setOrReportIndexedColor(L)))),this._parser.registerOscHandler(8,new E.OscHandler((L=>this.setHyperlink(L)))),this._parser.registerOscHandler(10,new E.OscHandler((L=>this.setOrReportFgColor(L)))),this._parser.registerOscHandler(11,new E.OscHandler((L=>this.setOrReportBgColor(L)))),this._parser.registerOscHandler(12,new E.OscHandler((L=>this.setOrReportCursorColor(L)))),this._parser.registerOscHandler(104,new E.OscHandler((L=>this.restoreIndexedColor(L)))),this._parser.registerOscHandler(110,new E.OscHandler((L=>this.restoreFgColor(L)))),this._parser.registerOscHandler(111,new E.OscHandler((L=>this.restoreBgColor(L)))),this._parser.registerOscHandler(112,new E.OscHandler((L=>this.restoreCursorColor(L)))),this._parser.registerEscHandler({final:"7"},(()=>this.saveCursor())),this._parser.registerEscHandler({final:"8"},(()=>this.restoreCursor())),this._parser.registerEscHandler({final:"D"},(()=>this.index())),this._parser.registerEscHandler({final:"E"},(()=>this.nextLine())),this._parser.registerEscHandler({final:"H"},(()=>this.tabSet())),this._parser.registerEscHandler({final:"M"},(()=>this.reverseIndex())),this._parser.registerEscHandler({final:"="},(()=>this.keypadApplicationMode())),this._parser.registerEscHandler({final:">"},(()=>this.keypadNumericMode())),this._parser.registerEscHandler({final:"c"},(()=>this.fullReset())),this._parser.registerEscHandler({final:"n"},(()=>this.setgLevel(2))),this._parser.registerEscHandler({final:"o"},(()=>this.setgLevel(3))),this._parser.registerEscHandler({final:"|"},(()=>this.setgLevel(3))),this._parser.registerEscHandler({final:"}"},(()=>this.setgLevel(2))),this._parser.registerEscHandler({final:"~"},(()=>this.setgLevel(1))),this._parser.registerEscHandler({intermediates:"%",final:"@"},(()=>this.selectDefaultCharset())),this._parser.registerEscHandler({intermediates:"%",final:"G"},(()=>this.selectDefaultCharset()));for(const L in _.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:L},(()=>this.selectCharset("("+L))),this._parser.registerEscHandler({intermediates:")",final:L},(()=>this.selectCharset(")"+L))),this._parser.registerEscHandler({intermediates:"*",final:L},(()=>this.selectCharset("*"+L))),this._parser.registerEscHandler({intermediates:"+",final:L},(()=>this.selectCharset("+"+L))),this._parser.registerEscHandler({intermediates:"-",final:L},(()=>this.selectCharset("-"+L))),this._parser.registerEscHandler({intermediates:".",final:L},(()=>this.selectCharset("."+L))),this._parser.registerEscHandler({intermediates:"/",final:L},(()=>this.selectCharset("/"+L)));this._parser.registerEscHandler({intermediates:"#",final:"8"},(()=>this.screenAlignmentPattern())),this._parser.setErrorHandler((L=>(this._logService.error("Parsing error: ",L),L))),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new C.DcsHandler(((L,ee)=>this.requestStatusString(L,ee))))}_preserveStack(D,U,S,T){this._parseStack.paused=!0,this._parseStack.cursorStartX=D,this._parseStack.cursorStartY=U,this._parseStack.decodedLength=S,this._parseStack.position=T}_logSlowResolvingAsync(D){this._logService.logLevel<=x.LogLevelEnum.WARN&&Promise.race([D,new Promise(((U,S)=>setTimeout((()=>S("#SLOW_TIMEOUT")),5e3)))]).catch((U=>{if(U!=="#SLOW_TIMEOUT")throw U;console.warn("async parser handler taking longer than 5000 ms")}))}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(D,U){let S,T=this._activeBuffer.x,K=this._activeBuffer.y,Y=0;const ne=this._parseStack.paused;if(ne){if(S=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,U))return this._logSlowResolvingAsync(S),S;T=this._parseStack.cursorStartX,K=this._parseStack.cursorStartY,this._parseStack.paused=!1,D.length>G&&(Y=this._parseStack.position+G)}if(this._logService.logLevel<=x.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof D=="string"?` "${D}"`:` "${Array.prototype.map.call(D,(L=>String.fromCharCode(L))).join("")}"`),typeof D=="string"?D.split("").map((L=>L.charCodeAt(0))):D),this._parseBuffer.length<D.length&&this._parseBuffer.length<G&&(this._parseBuffer=new Uint32Array(Math.min(D.length,G))),ne||this._dirtyRowTracker.clearRange(),D.length>G)for(let L=Y;L<D.length;L+=G){const ee=L+G<D.length?L+G:D.length,te=typeof D=="string"?this._stringDecoder.decode(D.substring(L,ee),this._parseBuffer):this._utf8Decoder.decode(D.subarray(L,ee),this._parseBuffer);if(S=this._parser.parse(this._parseBuffer,te))return this._preserveStack(T,K,te,L),this._logSlowResolvingAsync(S),S}else if(!ne){const L=typeof D=="string"?this._stringDecoder.decode(D,this._parseBuffer):this._utf8Decoder.decode(D,this._parseBuffer);if(S=this._parser.parse(this._parseBuffer,L))return this._preserveStack(T,K,L,0),this._logSlowResolvingAsync(S),S}this._activeBuffer.x===T&&this._activeBuffer.y===K||this._onCursorMove.fire();const ae=this._dirtyRowTracker.end+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp),W=this._dirtyRowTracker.start+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp);W<this._bufferService.rows&&this._onRequestRefreshRows.fire(Math.min(W,this._bufferService.rows-1),Math.min(ae,this._bufferService.rows-1))}print(D,U,S){let T,K;const Y=this._charsetService.charset,ne=this._optionsService.rawOptions.screenReaderMode,ae=this._bufferService.cols,W=this._coreService.decPrivateModes.wraparound,L=this._coreService.modes.insertMode,ee=this._curAttrData;let te=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&S-U>0&&te.getWidth(this._activeBuffer.x-1)===2&&te.setCellFromCodepoint(this._activeBuffer.x-1,0,1,ee);let he=this._parser.precedingJoinState;for(let H=U;H<S;++H){if(T=D[H],T<127&&Y){const V=Y[String.fromCharCode(T)];V&&(T=V.charCodeAt(0))}const q=this._unicodeService.charProperties(T,he);K=k.UnicodeService.extractWidth(q);const y=k.UnicodeService.extractShouldJoin(q),O=y?k.UnicodeService.extractWidth(he):0;if(he=q,ne&&this._onA11yChar.fire((0,g.stringFromCodePoint)(T)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),this._activeBuffer.x+K-O>ae){if(W){const V=te;let I=this._activeBuffer.x-O;for(this._activeBuffer.x=O,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),te=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y),O>0&&te instanceof l.BufferLine&&te.copyCellsFrom(V,I,0,O,!1);I<ae;)V.setCellFromCodepoint(I++,0,1,ee)}else if(this._activeBuffer.x=ae-1,K===2)continue}if(y&&this._activeBuffer.x){const V=te.getWidth(this._activeBuffer.x-1)?1:2;te.addCodepointToCell(this._activeBuffer.x-V,T,K);for(let I=K-O;--I>=0;)te.setCellFromCodepoint(this._activeBuffer.x++,0,0,ee)}else if(L&&(te.insertCells(this._activeBuffer.x,K-O,this._activeBuffer.getNullCell(ee)),te.getWidth(ae-1)===2&&te.setCellFromCodepoint(ae-1,n.NULL_CELL_CODE,n.NULL_CELL_WIDTH,ee)),te.setCellFromCodepoint(this._activeBuffer.x++,T,K,ee),K>0)for(;--K;)te.setCellFromCodepoint(this._activeBuffer.x++,0,0,ee)}this._parser.precedingJoinState=he,this._activeBuffer.x<ae&&S-U>0&&te.getWidth(this._activeBuffer.x)===0&&!te.hasContent(this._activeBuffer.x)&&te.setCellFromCodepoint(this._activeBuffer.x,0,1,ee),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(D,U){return D.final!=="t"||D.prefix||D.intermediates?this._parser.registerCsiHandler(D,U):this._parser.registerCsiHandler(D,(S=>!B(S.params[0],this._optionsService.rawOptions.windowOptions)||U(S)))}registerDcsHandler(D,U){return this._parser.registerDcsHandler(D,new C.DcsHandler(U))}registerEscHandler(D,U){return this._parser.registerEscHandler(D,U)}registerOscHandler(D,U){return this._parser.registerOscHandler(D,new E.OscHandler(U))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){var D;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&((D=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))!=null&&D.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;const U=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);U.hasWidth(this._activeBuffer.x)&&!U.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;const D=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-D),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(D=this._bufferService.cols-1){this._activeBuffer.x=Math.min(D,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(D,U){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=D,this._activeBuffer.y=this._activeBuffer.scrollTop+U):(this._activeBuffer.x=D,this._activeBuffer.y=U),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(D,U){this._restrictCursor(),this._setCursor(this._activeBuffer.x+D,this._activeBuffer.y+U)}cursorUp(D){const U=this._activeBuffer.y-this._activeBuffer.scrollTop;return U>=0?this._moveCursor(0,-Math.min(U,D.params[0]||1)):this._moveCursor(0,-(D.params[0]||1)),!0}cursorDown(D){const U=this._activeBuffer.scrollBottom-this._activeBuffer.y;return U>=0?this._moveCursor(0,Math.min(U,D.params[0]||1)):this._moveCursor(0,D.params[0]||1),!0}cursorForward(D){return this._moveCursor(D.params[0]||1,0),!0}cursorBackward(D){return this._moveCursor(-(D.params[0]||1),0),!0}cursorNextLine(D){return this.cursorDown(D),this._activeBuffer.x=0,!0}cursorPrecedingLine(D){return this.cursorUp(D),this._activeBuffer.x=0,!0}cursorCharAbsolute(D){return this._setCursor((D.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(D){return this._setCursor(D.length>=2?(D.params[1]||1)-1:0,(D.params[0]||1)-1),!0}charPosAbsolute(D){return this._setCursor((D.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(D){return this._moveCursor(D.params[0]||1,0),!0}linePosAbsolute(D){return this._setCursor(this._activeBuffer.x,(D.params[0]||1)-1),!0}vPositionRelative(D){return this._moveCursor(0,D.params[0]||1),!0}hVPosition(D){return this.cursorPosition(D),!0}tabClear(D){const U=D.params[0];return U===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:U===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(D){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let U=D.params[0]||1;for(;U--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(D){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let U=D.params[0]||1;for(;U--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(D){const U=D.params[0];return U===1&&(this._curAttrData.bg|=536870912),U!==2&&U!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(D,U,S,T=!1,K=!1){const Y=this._activeBuffer.lines.get(this._activeBuffer.ybase+D);Y.replaceCells(U,S,this._activeBuffer.getNullCell(this._eraseAttrData()),K),T&&(Y.isWrapped=!1)}_resetBufferLine(D,U=!1){const S=this._activeBuffer.lines.get(this._activeBuffer.ybase+D);S&&(S.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),U),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+D),S.isWrapped=!1)}eraseInDisplay(D,U=!1){let S;switch(this._restrictCursor(this._bufferService.cols),D.params[0]){case 0:for(S=this._activeBuffer.y,this._dirtyRowTracker.markDirty(S),this._eraseInBufferLine(S++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,U);S<this._bufferService.rows;S++)this._resetBufferLine(S,U);this._dirtyRowTracker.markDirty(S);break;case 1:for(S=this._activeBuffer.y,this._dirtyRowTracker.markDirty(S),this._eraseInBufferLine(S,0,this._activeBuffer.x+1,!0,U),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(S+1).isWrapped=!1);S--;)this._resetBufferLine(S,U);this._dirtyRowTracker.markDirty(0);break;case 2:for(S=this._bufferService.rows,this._dirtyRowTracker.markDirty(S-1);S--;)this._resetBufferLine(S,U);this._dirtyRowTracker.markDirty(0);break;case 3:const T=this._activeBuffer.lines.length-this._bufferService.rows;T>0&&(this._activeBuffer.lines.trimStart(T),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-T,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-T,0),this._onScroll.fire(0))}return!0}eraseInLine(D,U=!1){switch(this._restrictCursor(this._bufferService.cols),D.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,U);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,U);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,U)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(D){this._restrictCursor();let U=D.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const S=this._activeBuffer.ybase+this._activeBuffer.y,T=this._bufferService.rows-1-this._activeBuffer.scrollBottom,K=this._bufferService.rows-1+this._activeBuffer.ybase-T+1;for(;U--;)this._activeBuffer.lines.splice(K-1,1),this._activeBuffer.lines.splice(S,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(D){this._restrictCursor();let U=D.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const S=this._activeBuffer.ybase+this._activeBuffer.y;let T;for(T=this._bufferService.rows-1-this._activeBuffer.scrollBottom,T=this._bufferService.rows-1+this._activeBuffer.ybase-T;U--;)this._activeBuffer.lines.splice(S,1),this._activeBuffer.lines.splice(T,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(D){this._restrictCursor();const U=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return U&&(U.insertCells(this._activeBuffer.x,D.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(D){this._restrictCursor();const U=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return U&&(U.deleteCells(this._activeBuffer.x,D.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(D){let U=D.params[0]||1;for(;U--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(D){let U=D.params[0]||1;for(;U--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(l.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(D){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const U=D.params[0]||1;for(let S=this._activeBuffer.scrollTop;S<=this._activeBuffer.scrollBottom;++S){const T=this._activeBuffer.lines.get(this._activeBuffer.ybase+S);T.deleteCells(0,U,this._activeBuffer.getNullCell(this._eraseAttrData())),T.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(D){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const U=D.params[0]||1;for(let S=this._activeBuffer.scrollTop;S<=this._activeBuffer.scrollBottom;++S){const T=this._activeBuffer.lines.get(this._activeBuffer.ybase+S);T.insertCells(0,U,this._activeBuffer.getNullCell(this._eraseAttrData())),T.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(D){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const U=D.params[0]||1;for(let S=this._activeBuffer.scrollTop;S<=this._activeBuffer.scrollBottom;++S){const T=this._activeBuffer.lines.get(this._activeBuffer.ybase+S);T.insertCells(this._activeBuffer.x,U,this._activeBuffer.getNullCell(this._eraseAttrData())),T.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(D){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const U=D.params[0]||1;for(let S=this._activeBuffer.scrollTop;S<=this._activeBuffer.scrollBottom;++S){const T=this._activeBuffer.lines.get(this._activeBuffer.ybase+S);T.deleteCells(this._activeBuffer.x,U,this._activeBuffer.getNullCell(this._eraseAttrData())),T.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(D){this._restrictCursor();const U=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return U&&(U.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(D.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(D){const U=this._parser.precedingJoinState;if(!U)return!0;const S=D.params[0]||1,T=k.UnicodeService.extractWidth(U),K=this._activeBuffer.x-T,Y=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).getString(K),ne=new Uint32Array(Y.length*S);let ae=0;for(let L=0;L<Y.length;){const ee=Y.codePointAt(L)||0;ne[ae++]=ee,L+=ee>65535?2:1}let W=ae;for(let L=1;L<S;++L)ne.copyWithin(W,0,ae),W+=ae;return this.print(ne,0,W),!0}sendDeviceAttributesPrimary(D){return D.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(h.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(h.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(D){return D.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(h.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(h.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(D.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(h.C0.ESC+"[>83;40003;0c")),!0}_is(D){return(this._optionsService.rawOptions.termName+"").indexOf(D)===0}setMode(D){for(let U=0;U<D.length;U++)switch(D.params[U]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(D){for(let U=0;U<D.length;U++)switch(D.params[U]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,_.DEFAULT_CHARSET),this._charsetService.setgCharset(1,_.DEFAULT_CHARSET),this._charsetService.setgCharset(2,_.DEFAULT_CHARSET),this._charsetService.setgCharset(3,_.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(D){for(let U=0;U<D.length;U++)switch(D.params[U]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(D){for(let U=0;U<D.length;U++)switch(D.params[U]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),D.params[U]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(D,U){const S=this._coreService.decPrivateModes,{activeProtocol:T,activeEncoding:K}=this._coreMouseService,Y=this._coreService,{buffers:ne,cols:ae}=this._bufferService,{active:W,alt:L}=ne,ee=this._optionsService.rawOptions,te=y=>y?1:2,he=D.params[0];return H=he,q=U?he===2?4:he===4?te(Y.modes.insertMode):he===12?3:he===20?te(ee.convertEol):0:he===1?te(S.applicationCursorKeys):he===3?ee.windowOptions.setWinLines?ae===80?2:ae===132?1:0:0:he===6?te(S.origin):he===7?te(S.wraparound):he===8?3:he===9?te(T==="X10"):he===12?te(ee.cursorBlink):he===25?te(!Y.isCursorHidden):he===45?te(S.reverseWraparound):he===66?te(S.applicationKeypad):he===67?4:he===1e3?te(T==="VT200"):he===1002?te(T==="DRAG"):he===1003?te(T==="ANY"):he===1004?te(S.sendFocus):he===1005?4:he===1006?te(K==="SGR"):he===1015?4:he===1016?te(K==="SGR_PIXELS"):he===1048?1:he===47||he===1047||he===1049?te(W===L):he===2004?te(S.bracketedPasteMode):0,Y.triggerDataEvent(`${h.C0.ESC}[${U?"":"?"}${H};${q}$y`),!0;var H,q}_updateAttrColor(D,U,S,T,K){return U===2?(D|=50331648,D&=-16777216,D|=v.AttributeData.fromColorRGB([S,T,K])):U===5&&(D&=-50331904,D|=33554432|255&S),D}_extractColor(D,U,S){const T=[0,0,-1,0,0,0];let K=0,Y=0;do{if(T[Y+K]=D.params[U+Y],D.hasSubParams(U+Y)){const ne=D.getSubParams(U+Y);let ae=0;do T[1]===5&&(K=1),T[Y+ae+1+K]=ne[ae];while(++ae<ne.length&&ae+Y+1+K<T.length);break}if(T[1]===5&&Y+K>=2||T[1]===2&&Y+K>=5)break;T[1]&&(K=1)}while(++Y+U<D.length&&Y+K<T.length);for(let ne=2;ne<T.length;++ne)T[ne]===-1&&(T[ne]=0);switch(T[0]){case 38:S.fg=this._updateAttrColor(S.fg,T[1],T[3],T[4],T[5]);break;case 48:S.bg=this._updateAttrColor(S.bg,T[1],T[3],T[4],T[5]);break;case 58:S.extended=S.extended.clone(),S.extended.underlineColor=this._updateAttrColor(S.extended.underlineColor,T[1],T[3],T[4],T[5])}return Y}_processUnderline(D,U){U.extended=U.extended.clone(),(!~D||D>5)&&(D=1),U.extended.underlineStyle=D,U.fg|=268435456,D===0&&(U.fg&=-268435457),U.updateExtended()}_processSGR0(D){D.fg=l.DEFAULT_ATTR_DATA.fg,D.bg=l.DEFAULT_ATTR_DATA.bg,D.extended=D.extended.clone(),D.extended.underlineStyle=0,D.extended.underlineColor&=-67108864,D.updateExtended()}charAttributes(D){if(D.length===1&&D.params[0]===0)return this._processSGR0(this._curAttrData),!0;const U=D.length;let S;const T=this._curAttrData;for(let K=0;K<U;K++)S=D.params[K],S>=30&&S<=37?(T.fg&=-50331904,T.fg|=16777216|S-30):S>=40&&S<=47?(T.bg&=-50331904,T.bg|=16777216|S-40):S>=90&&S<=97?(T.fg&=-50331904,T.fg|=16777224|S-90):S>=100&&S<=107?(T.bg&=-50331904,T.bg|=16777224|S-100):S===0?this._processSGR0(T):S===1?T.fg|=134217728:S===3?T.bg|=67108864:S===4?(T.fg|=268435456,this._processUnderline(D.hasSubParams(K)?D.getSubParams(K)[0]:1,T)):S===5?T.fg|=536870912:S===7?T.fg|=67108864:S===8?T.fg|=1073741824:S===9?T.fg|=2147483648:S===2?T.bg|=134217728:S===21?this._processUnderline(2,T):S===22?(T.fg&=-134217729,T.bg&=-134217729):S===23?T.bg&=-67108865:S===24?(T.fg&=-268435457,this._processUnderline(0,T)):S===25?T.fg&=-536870913:S===27?T.fg&=-67108865:S===28?T.fg&=-1073741825:S===29?T.fg&=2147483647:S===39?(T.fg&=-67108864,T.fg|=16777215&l.DEFAULT_ATTR_DATA.fg):S===49?(T.bg&=-67108864,T.bg|=16777215&l.DEFAULT_ATTR_DATA.bg):S===38||S===48||S===58?K+=this._extractColor(D,K,T):S===53?T.bg|=1073741824:S===55?T.bg&=-1073741825:S===59?(T.extended=T.extended.clone(),T.extended.underlineColor=-1,T.updateExtended()):S===100?(T.fg&=-67108864,T.fg|=16777215&l.DEFAULT_ATTR_DATA.fg,T.bg&=-67108864,T.bg|=16777215&l.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",S);return!0}deviceStatus(D){switch(D.params[0]){case 5:this._coreService.triggerDataEvent(`${h.C0.ESC}[0n`);break;case 6:const U=this._activeBuffer.y+1,S=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${h.C0.ESC}[${U};${S}R`)}return!0}deviceStatusPrivate(D){if(D.params[0]===6){const U=this._activeBuffer.y+1,S=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${h.C0.ESC}[?${U};${S}R`)}return!0}softReset(D){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=l.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(D){const U=D.params[0]||1;switch(U){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}const S=U%2==1;return this._optionsService.options.cursorBlink=S,!0}setScrollRegion(D){const U=D.params[0]||1;let S;return(D.length<2||(S=D.params[1])>this._bufferService.rows||S===0)&&(S=this._bufferService.rows),S>U&&(this._activeBuffer.scrollTop=U-1,this._activeBuffer.scrollBottom=S-1,this._setCursor(0,0)),!0}windowOptions(D){if(!B(D.params[0],this._optionsService.rawOptions.windowOptions))return!0;const U=D.length>1?D.params[1]:0;switch(D.params[0]){case 14:U!==2&&this._onRequestWindowsOptionsReport.fire(P.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(P.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${h.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:U!==0&&U!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),U!==0&&U!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:U!==0&&U!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),U!==0&&U!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(D){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(D){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(D){return this._windowTitle=D,this._onTitleChange.fire(D),!0}setIconName(D){return this._iconName=D,!0}setOrReportIndexedColor(D){const U=[],S=D.split(";");for(;S.length>1;){const T=S.shift(),K=S.shift();if(/^\d+$/.exec(T)){const Y=parseInt(T);if(X(Y))if(K==="?")U.push({type:0,index:Y});else{const ne=(0,A.parseColor)(K);ne&&U.push({type:1,index:Y,color:ne})}}}return U.length&&this._onColor.fire(U),!0}setHyperlink(D){const U=D.split(";");return!(U.length<2)&&(U[1]?this._createHyperlink(U[0],U[1]):!U[0]&&this._finishHyperlink())}_createHyperlink(D,U){this._getCurrentLinkId()&&this._finishHyperlink();const S=D.split(":");let T;const K=S.findIndex((Y=>Y.startsWith("id=")));return K!==-1&&(T=S[K].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:T,uri:U}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(D,U){const S=D.split(";");for(let T=0;T<S.length&&!(U>=this._specialColors.length);++T,++U)if(S[T]==="?")this._onColor.fire([{type:0,index:this._specialColors[U]}]);else{const K=(0,A.parseColor)(S[T]);K&&this._onColor.fire([{type:1,index:this._specialColors[U],color:K}])}return!0}setOrReportFgColor(D){return this._setOrReportSpecialColor(D,0)}setOrReportBgColor(D){return this._setOrReportSpecialColor(D,1)}setOrReportCursorColor(D){return this._setOrReportSpecialColor(D,2)}restoreIndexedColor(D){if(!D)return this._onColor.fire([{type:2}]),!0;const U=[],S=D.split(";");for(let T=0;T<S.length;++T)if(/^\d+$/.exec(S[T])){const K=parseInt(S[T]);X(K)&&U.push({type:2,index:K})}return U.length&&this._onColor.fire(U),!0}restoreFgColor(D){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(D){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(D){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,_.DEFAULT_CHARSET),!0}selectCharset(D){return D.length!==2?(this.selectDefaultCharset(),!0):(D[0]==="/"||this._charsetService.setgCharset(z[D[0]],_.CHARSETS[D[1]]||_.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){const D=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,D,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=l.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=l.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(D){return this._charsetService.setgLevel(D),!0}screenAlignmentPattern(){const D=new c.CellData;D.content=4194373,D.fg=this._curAttrData.fg,D.bg=this._curAttrData.bg,this._setCursor(0,0);for(let U=0;U<this._bufferService.rows;++U){const S=this._activeBuffer.ybase+this._activeBuffer.y+U,T=this._activeBuffer.lines.get(S);T&&(T.fill(D),T.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(D,U){const S=this._bufferService.buffer,T=this._optionsService.rawOptions;return(K=>(this._coreService.triggerDataEvent(`${h.C0.ESC}${K}${h.C0.ESC}\\`),!0))(D==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:D==='"p'?'P1$r61;1"p':D==="r"?`P1$r${S.scrollTop+1};${S.scrollBottom+1}r`:D==="m"?"P1$r0m":D===" q"?`P1$r${{block:2,underline:4,bar:6}[T.cursorStyle]-(T.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(D,U){this._dirtyRowTracker.markRangeDirty(D,U)}}i.InputHandler=Q;let se=class{constructor(oe){this._bufferService=oe,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(oe){oe<this.start?this.start=oe:oe>this.end&&(this.end=oe)}markRangeDirty(oe,D){oe>D&&(R=oe,oe=D,D=R),oe<this.start&&(this.start=oe),D>this.end&&(this.end=D)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function X(oe){return 0<=oe&&oe<256}se=f([p(0,x.IBufferService)],se)},844:(b,i)=>{function r(f){for(const p of f)p.dispose();f.length=0}Object.defineProperty(i,"__esModule",{value:!0}),i.getDisposeArrayDisposable=i.disposeArray=i.toDisposable=i.MutableDisposable=i.Disposable=void 0,i.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const f of this._disposables)f.dispose();this._disposables.length=0}register(f){return this._disposables.push(f),f}unregister(f){const p=this._disposables.indexOf(f);p!==-1&&this._disposables.splice(p,1)}},i.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(f){var p;this._isDisposed||f===this._value||((p=this._value)==null||p.dispose(),this._value=f)}clear(){this.value=void 0}dispose(){var f;this._isDisposed=!0,(f=this._value)==null||f.dispose(),this._value=void 0}},i.toDisposable=function(f){return{dispose:f}},i.disposeArray=r,i.getDisposeArrayDisposable=function(f){return{dispose:()=>r(f)}}},1505:(b,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.FourKeyMap=i.TwoKeyMap=void 0;class r{constructor(){this._data={}}set(p,h,_){this._data[p]||(this._data[p]={}),this._data[p][h]=_}get(p,h){return this._data[p]?this._data[p][h]:void 0}clear(){this._data={}}}i.TwoKeyMap=r,i.FourKeyMap=class{constructor(){this._data=new r}set(f,p,h,_,m){this._data.get(f,p)||this._data.set(f,p,new r),this._data.get(f,p).set(h,_,m)}get(f,p,h,_){var m;return(m=this._data.get(f,p))==null?void 0:m.get(h,_)}clear(){this._data.clear()}}},6114:(b,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.isChromeOS=i.isLinux=i.isWindows=i.isIphone=i.isIpad=i.isMac=i.getSafariVersion=i.isSafari=i.isLegacyEdge=i.isFirefox=i.isNode=void 0,i.isNode=typeof process<"u"&&"title"in process;const r=i.isNode?"node":navigator.userAgent,f=i.isNode?"node":navigator.platform;i.isFirefox=r.includes("Firefox"),i.isLegacyEdge=r.includes("Edge"),i.isSafari=/^((?!chrome|android).)*safari/i.test(r),i.getSafariVersion=function(){if(!i.isSafari)return 0;const p=r.match(/Version\/(\d+)/);return p===null||p.length<2?0:parseInt(p[1])},i.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(f),i.isIpad=f==="iPad",i.isIphone=f==="iPhone",i.isWindows=["Windows","Win16","Win32","WinCE"].includes(f),i.isLinux=f.indexOf("Linux")>=0,i.isChromeOS=/\bCrOS\b/.test(r)},6106:(b,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.SortedList=void 0;let r=0;i.SortedList=class{constructor(f){this._getKey=f,this._array=[]}clear(){this._array.length=0}insert(f){this._array.length!==0?(r=this._search(this._getKey(f)),this._array.splice(r,0,f)):this._array.push(f)}delete(f){if(this._array.length===0)return!1;const p=this._getKey(f);if(p===void 0||(r=this._search(p),r===-1)||this._getKey(this._array[r])!==p)return!1;do if(this._array[r]===f)return this._array.splice(r,1),!0;while(++r<this._array.length&&this._getKey(this._array[r])===p);return!1}*getKeyIterator(f){if(this._array.length!==0&&(r=this._search(f),!(r<0||r>=this._array.length)&&this._getKey(this._array[r])===f))do yield this._array[r];while(++r<this._array.length&&this._getKey(this._array[r])===f)}forEachByKey(f,p){if(this._array.length!==0&&(r=this._search(f),!(r<0||r>=this._array.length)&&this._getKey(this._array[r])===f))do p(this._array[r]);while(++r<this._array.length&&this._getKey(this._array[r])===f)}values(){return[...this._array].values()}_search(f){let p=0,h=this._array.length-1;for(;h>=p;){let _=p+h>>1;const m=this._getKey(this._array[_]);if(m>f)h=_-1;else{if(!(m<f)){for(;_>0&&this._getKey(this._array[_-1])===f;)_--;return _}p=_+1}}return p}}},7226:(b,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DebouncedIdleTask=i.IdleTaskQueue=i.PriorityTaskQueue=void 0;const f=r(6114);class p{constructor(){this._tasks=[],this._i=0}enqueue(m){this._tasks.push(m),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(m){this._idleCallback=void 0;let w=0,g=0,l=m.timeRemaining(),a=0;for(;this._i<this._tasks.length;){if(w=Date.now(),this._tasks[this._i]()||this._i++,w=Math.max(1,Date.now()-w),g=Math.max(w,g),a=m.timeRemaining(),1.5*g>a)return l-w<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(l-w))}ms`),void this._start();l=a}this.clear()}}class h extends p{_requestCallback(m){return setTimeout((()=>m(this._createDeadline(16))))}_cancelCallback(m){clearTimeout(m)}_createDeadline(m){const w=Date.now()+m;return{timeRemaining:()=>Math.max(0,w-Date.now())}}}i.PriorityTaskQueue=h,i.IdleTaskQueue=!f.isNode&&"requestIdleCallback"in window?class extends p{_requestCallback(_){return requestIdleCallback(_)}_cancelCallback(_){cancelIdleCallback(_)}}:h,i.DebouncedIdleTask=class{constructor(){this._queue=new i.IdleTaskQueue}set(_){this._queue.clear(),this._queue.enqueue(_)}flush(){this._queue.flush()}}},9282:(b,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.updateWindowsModeWrappedState=void 0;const f=r(643);i.updateWindowsModeWrappedState=function(p){const h=p.buffer.lines.get(p.buffer.ybase+p.buffer.y-1),_=h==null?void 0:h.get(p.cols-1),m=p.buffer.lines.get(p.buffer.ybase+p.buffer.y);m&&_&&(m.isWrapped=_[f.CHAR_DATA_CODE_INDEX]!==f.NULL_CELL_CODE&&_[f.CHAR_DATA_CODE_INDEX]!==f.WHITESPACE_CELL_CODE)}},3734:(b,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ExtendedAttrs=i.AttributeData=void 0;class r{constructor(){this.fg=0,this.bg=0,this.extended=new f}static toColorRGB(h){return[h>>>16&255,h>>>8&255,255&h]}static fromColorRGB(h){return(255&h[0])<<16|(255&h[1])<<8|255&h[2]}clone(){const h=new r;return h.fg=this.fg,h.bg=this.bg,h.extended=this.extended.clone(),h}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}getUnderlineVariantOffset(){return this.extended.underlineVariantOffset}}i.AttributeData=r;class f{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(h){this._ext=h}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(h){this._ext&=-469762049,this._ext|=h<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(h){this._ext&=-67108864,this._ext|=67108863&h}get urlId(){return this._urlId}set urlId(h){this._urlId=h}get underlineVariantOffset(){const h=(3758096384&this._ext)>>29;return h<0?4294967288^h:h}set underlineVariantOffset(h){this._ext&=536870911,this._ext|=h<<29&3758096384}constructor(h=0,_=0){this._ext=0,this._urlId=0,this._ext=h,this._urlId=_}clone(){return new f(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}i.ExtendedAttrs=f},9092:(b,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Buffer=i.MAX_BUFFER_SIZE=void 0;const f=r(6349),p=r(7226),h=r(3734),_=r(8437),m=r(4634),w=r(511),g=r(643),l=r(4863),a=r(7116);i.MAX_BUFFER_SIZE=4294967295,i.Buffer=class{constructor(n,c,v){this._hasScrollback=n,this._optionsService=c,this._bufferService=v,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=_.DEFAULT_ATTR_DATA.clone(),this.savedCharset=a.DEFAULT_CHARSET,this.markers=[],this._nullCell=w.CellData.fromCharData([0,g.NULL_CELL_CHAR,g.NULL_CELL_WIDTH,g.NULL_CELL_CODE]),this._whitespaceCell=w.CellData.fromCharData([0,g.WHITESPACE_CELL_CHAR,g.WHITESPACE_CELL_WIDTH,g.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new p.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new f.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(n){return n?(this._nullCell.fg=n.fg,this._nullCell.bg=n.bg,this._nullCell.extended=n.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new h.ExtendedAttrs),this._nullCell}getWhitespaceCell(n){return n?(this._whitespaceCell.fg=n.fg,this._whitespaceCell.bg=n.bg,this._whitespaceCell.extended=n.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new h.ExtendedAttrs),this._whitespaceCell}getBlankLine(n,c){return new _.BufferLine(this._bufferService.cols,this.getNullCell(n),c)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){const n=this.ybase+this.y-this.ydisp;return n>=0&&n<this._rows}_getCorrectBufferLength(n){if(!this._hasScrollback)return n;const c=n+this._optionsService.rawOptions.scrollback;return c>i.MAX_BUFFER_SIZE?i.MAX_BUFFER_SIZE:c}fillViewportRows(n){if(this.lines.length===0){n===void 0&&(n=_.DEFAULT_ATTR_DATA);let c=this._rows;for(;c--;)this.lines.push(this.getBlankLine(n))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new f.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(n,c){const v=this.getNullCell(_.DEFAULT_ATTR_DATA);let x=0;const k=this._getCorrectBufferLength(c);if(k>this.lines.maxLength&&(this.lines.maxLength=k),this.lines.length>0){if(this._cols<n)for(let C=0;C<this.lines.length;C++)x+=+this.lines.get(C).resize(n,v);let E=0;if(this._rows<c)for(let C=this._rows;C<c;C++)this.lines.length<c+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new _.BufferLine(n,v)):this.ybase>0&&this.lines.length<=this.ybase+this.y+E+1?(this.ybase--,E++,this.ydisp>0&&this.ydisp--):this.lines.push(new _.BufferLine(n,v)));else for(let C=this._rows;C>c;C--)this.lines.length>c+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(k<this.lines.maxLength){const C=this.lines.length-k;C>0&&(this.lines.trimStart(C),this.ybase=Math.max(this.ybase-C,0),this.ydisp=Math.max(this.ydisp-C,0),this.savedY=Math.max(this.savedY-C,0)),this.lines.maxLength=k}this.x=Math.min(this.x,n-1),this.y=Math.min(this.y,c-1),E&&(this.y+=E),this.savedX=Math.min(this.savedX,n-1),this.scrollTop=0}if(this.scrollBottom=c-1,this._isReflowEnabled&&(this._reflow(n,c),this._cols>n))for(let E=0;E<this.lines.length;E++)x+=+this.lines.get(E).resize(n,v);this._cols=n,this._rows=c,this._memoryCleanupQueue.clear(),x>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue((()=>this._batchedMemoryCleanup())))}_batchedMemoryCleanup(){let n=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,n=!1);let c=0;for(;this._memoryCleanupPosition<this.lines.length;)if(c+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),c>100)return!0;return n}get _isReflowEnabled(){const n=this._optionsService.rawOptions.windowsPty;return n&&n.buildNumber?this._hasScrollback&&n.backend==="conpty"&&n.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(n,c){this._cols!==n&&(n>this._cols?this._reflowLarger(n,c):this._reflowSmaller(n,c))}_reflowLarger(n,c){const v=(0,m.reflowLargerGetLinesToRemove)(this.lines,this._cols,n,this.ybase+this.y,this.getNullCell(_.DEFAULT_ATTR_DATA));if(v.length>0){const x=(0,m.reflowLargerCreateNewLayout)(this.lines,v);(0,m.reflowLargerApplyNewLayout)(this.lines,x.layout),this._reflowLargerAdjustViewport(n,c,x.countRemoved)}}_reflowLargerAdjustViewport(n,c,v){const x=this.getNullCell(_.DEFAULT_ATTR_DATA);let k=v;for(;k-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<c&&this.lines.push(new _.BufferLine(n,x))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-v,0)}_reflowSmaller(n,c){const v=this.getNullCell(_.DEFAULT_ATTR_DATA),x=[];let k=0;for(let E=this.lines.length-1;E>=0;E--){let C=this.lines.get(E);if(!C||!C.isWrapped&&C.getTrimmedLength()<=n)continue;const A=[C];for(;C.isWrapped&&E>0;)C=this.lines.get(--E),A.unshift(C);const z=this.ybase+this.y;if(z>=E&&z<E+A.length)continue;const G=A[A.length-1].getTrimmedLength(),B=(0,m.reflowSmallerGetNewLineLengths)(A,this._cols,n),P=B.length-A.length;let R;R=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+P):Math.max(0,this.lines.length-this.lines.maxLength+P);const Q=[];for(let S=0;S<P;S++){const T=this.getBlankLine(_.DEFAULT_ATTR_DATA,!0);Q.push(T)}Q.length>0&&(x.push({start:E+A.length+k,newLines:Q}),k+=Q.length),A.push(...Q);let se=B.length-1,X=B[se];X===0&&(se--,X=B[se]);let oe=A.length-P-1,D=G;for(;oe>=0;){const S=Math.min(D,X);if(A[se]===void 0)break;if(A[se].copyCellsFrom(A[oe],D-S,X-S,S,!0),X-=S,X===0&&(se--,X=B[se]),D-=S,D===0){oe--;const T=Math.max(oe,0);D=(0,m.getWrappedLineTrimmedLength)(A,T,this._cols)}}for(let S=0;S<A.length;S++)B[S]<n&&A[S].setCell(B[S],v);let U=P-R;for(;U-- >0;)this.ybase===0?this.y<c-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+k)-c&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+P,this.ybase+c-1)}if(x.length>0){const E=[],C=[];for(let se=0;se<this.lines.length;se++)C.push(this.lines.get(se));const A=this.lines.length;let z=A-1,G=0,B=x[G];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+k);let P=0;for(let se=Math.min(this.lines.maxLength-1,A+k-1);se>=0;se--)if(B&&B.start>z+P){for(let X=B.newLines.length-1;X>=0;X--)this.lines.set(se--,B.newLines[X]);se++,E.push({index:z+1,amount:B.newLines.length}),P+=B.newLines.length,B=x[++G]}else this.lines.set(se,C[z--]);let R=0;for(let se=E.length-1;se>=0;se--)E[se].index+=R,this.lines.onInsertEmitter.fire(E[se]),R+=E[se].amount;const Q=Math.max(0,A+k-this.lines.maxLength);Q>0&&this.lines.onTrimEmitter.fire(Q)}}translateBufferLineToString(n,c,v=0,x){const k=this.lines.get(n);return k?k.translateToString(c,v,x):""}getWrappedRangeForLine(n){let c=n,v=n;for(;c>0&&this.lines.get(c).isWrapped;)c--;for(;v+1<this.lines.length&&this.lines.get(v+1).isWrapped;)v++;return{first:c,last:v}}setupTabStops(n){for(n!=null?this.tabs[n]||(n=this.prevStop(n)):(this.tabs={},n=0);n<this._cols;n+=this._optionsService.rawOptions.tabStopWidth)this.tabs[n]=!0}prevStop(n){for(n==null&&(n=this.x);!this.tabs[--n]&&n>0;);return n>=this._cols?this._cols-1:n<0?0:n}nextStop(n){for(n==null&&(n=this.x);!this.tabs[++n]&&n<this._cols;);return n>=this._cols?this._cols-1:n<0?0:n}clearMarkers(n){this._isClearing=!0;for(let c=0;c<this.markers.length;c++)this.markers[c].line===n&&(this.markers[c].dispose(),this.markers.splice(c--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let n=0;n<this.markers.length;n++)this.markers[n].dispose(),this.markers.splice(n--,1);this._isClearing=!1}addMarker(n){const c=new l.Marker(n);return this.markers.push(c),c.register(this.lines.onTrim((v=>{c.line-=v,c.line<0&&c.dispose()}))),c.register(this.lines.onInsert((v=>{c.line>=v.index&&(c.line+=v.amount)}))),c.register(this.lines.onDelete((v=>{c.line>=v.index&&c.line<v.index+v.amount&&c.dispose(),c.line>v.index&&(c.line-=v.amount)}))),c.register(c.onDispose((()=>this._removeMarker(c)))),c}_removeMarker(n){this._isClearing||this.markers.splice(this.markers.indexOf(n),1)}}},8437:(b,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferLine=i.DEFAULT_ATTR_DATA=void 0;const f=r(3734),p=r(511),h=r(643),_=r(482);i.DEFAULT_ATTR_DATA=Object.freeze(new f.AttributeData);let m=0;class w{constructor(l,a,n=!1){this.isWrapped=n,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*l);const c=a||p.CellData.fromCharData([0,h.NULL_CELL_CHAR,h.NULL_CELL_WIDTH,h.NULL_CELL_CODE]);for(let v=0;v<l;++v)this.setCell(v,c);this.length=l}get(l){const a=this._data[3*l+0],n=2097151&a;return[this._data[3*l+1],2097152&a?this._combined[l]:n?(0,_.stringFromCodePoint)(n):"",a>>22,2097152&a?this._combined[l].charCodeAt(this._combined[l].length-1):n]}set(l,a){this._data[3*l+1]=a[h.CHAR_DATA_ATTR_INDEX],a[h.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[l]=a[1],this._data[3*l+0]=2097152|l|a[h.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*l+0]=a[h.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|a[h.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(l){return this._data[3*l+0]>>22}hasWidth(l){return 12582912&this._data[3*l+0]}getFg(l){return this._data[3*l+1]}getBg(l){return this._data[3*l+2]}hasContent(l){return 4194303&this._data[3*l+0]}getCodePoint(l){const a=this._data[3*l+0];return 2097152&a?this._combined[l].charCodeAt(this._combined[l].length-1):2097151&a}isCombined(l){return 2097152&this._data[3*l+0]}getString(l){const a=this._data[3*l+0];return 2097152&a?this._combined[l]:2097151&a?(0,_.stringFromCodePoint)(2097151&a):""}isProtected(l){return 536870912&this._data[3*l+2]}loadCell(l,a){return m=3*l,a.content=this._data[m+0],a.fg=this._data[m+1],a.bg=this._data[m+2],2097152&a.content&&(a.combinedData=this._combined[l]),268435456&a.bg&&(a.extended=this._extendedAttrs[l]),a}setCell(l,a){2097152&a.content&&(this._combined[l]=a.combinedData),268435456&a.bg&&(this._extendedAttrs[l]=a.extended),this._data[3*l+0]=a.content,this._data[3*l+1]=a.fg,this._data[3*l+2]=a.bg}setCellFromCodepoint(l,a,n,c){268435456&c.bg&&(this._extendedAttrs[l]=c.extended),this._data[3*l+0]=a|n<<22,this._data[3*l+1]=c.fg,this._data[3*l+2]=c.bg}addCodepointToCell(l,a,n){let c=this._data[3*l+0];2097152&c?this._combined[l]+=(0,_.stringFromCodePoint)(a):2097151&c?(this._combined[l]=(0,_.stringFromCodePoint)(2097151&c)+(0,_.stringFromCodePoint)(a),c&=-2097152,c|=2097152):c=a|4194304,n&&(c&=-12582913,c|=n<<22),this._data[3*l+0]=c}insertCells(l,a,n){if((l%=this.length)&&this.getWidth(l-1)===2&&this.setCellFromCodepoint(l-1,0,1,n),a<this.length-l){const c=new p.CellData;for(let v=this.length-l-a-1;v>=0;--v)this.setCell(l+a+v,this.loadCell(l+v,c));for(let v=0;v<a;++v)this.setCell(l+v,n)}else for(let c=l;c<this.length;++c)this.setCell(c,n);this.getWidth(this.length-1)===2&&this.setCellFromCodepoint(this.length-1,0,1,n)}deleteCells(l,a,n){if(l%=this.length,a<this.length-l){const c=new p.CellData;for(let v=0;v<this.length-l-a;++v)this.setCell(l+v,this.loadCell(l+a+v,c));for(let v=this.length-a;v<this.length;++v)this.setCell(v,n)}else for(let c=l;c<this.length;++c)this.setCell(c,n);l&&this.getWidth(l-1)===2&&this.setCellFromCodepoint(l-1,0,1,n),this.getWidth(l)!==0||this.hasContent(l)||this.setCellFromCodepoint(l,0,1,n)}replaceCells(l,a,n,c=!1){if(c)for(l&&this.getWidth(l-1)===2&&!this.isProtected(l-1)&&this.setCellFromCodepoint(l-1,0,1,n),a<this.length&&this.getWidth(a-1)===2&&!this.isProtected(a)&&this.setCellFromCodepoint(a,0,1,n);l<a&&l<this.length;)this.isProtected(l)||this.setCell(l,n),l++;else for(l&&this.getWidth(l-1)===2&&this.setCellFromCodepoint(l-1,0,1,n),a<this.length&&this.getWidth(a-1)===2&&this.setCellFromCodepoint(a,0,1,n);l<a&&l<this.length;)this.setCell(l++,n)}resize(l,a){if(l===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;const n=3*l;if(l>this.length){if(this._data.buffer.byteLength>=4*n)this._data=new Uint32Array(this._data.buffer,0,n);else{const c=new Uint32Array(n);c.set(this._data),this._data=c}for(let c=this.length;c<l;++c)this.setCell(c,a)}else{this._data=this._data.subarray(0,n);const c=Object.keys(this._combined);for(let x=0;x<c.length;x++){const k=parseInt(c[x],10);k>=l&&delete this._combined[k]}const v=Object.keys(this._extendedAttrs);for(let x=0;x<v.length;x++){const k=parseInt(v[x],10);k>=l&&delete this._extendedAttrs[k]}}return this.length=l,4*n*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){const l=new Uint32Array(this._data.length);return l.set(this._data),this._data=l,1}return 0}fill(l,a=!1){if(a)for(let n=0;n<this.length;++n)this.isProtected(n)||this.setCell(n,l);else{this._combined={},this._extendedAttrs={};for(let n=0;n<this.length;++n)this.setCell(n,l)}}copyFrom(l){this.length!==l.length?this._data=new Uint32Array(l._data):this._data.set(l._data),this.length=l.length,this._combined={};for(const a in l._combined)this._combined[a]=l._combined[a];this._extendedAttrs={};for(const a in l._extendedAttrs)this._extendedAttrs[a]=l._extendedAttrs[a];this.isWrapped=l.isWrapped}clone(){const l=new w(0);l._data=new Uint32Array(this._data),l.length=this.length;for(const a in this._combined)l._combined[a]=this._combined[a];for(const a in this._extendedAttrs)l._extendedAttrs[a]=this._extendedAttrs[a];return l.isWrapped=this.isWrapped,l}getTrimmedLength(){for(let l=this.length-1;l>=0;--l)if(4194303&this._data[3*l+0])return l+(this._data[3*l+0]>>22);return 0}getNoBgTrimmedLength(){for(let l=this.length-1;l>=0;--l)if(4194303&this._data[3*l+0]||50331648&this._data[3*l+2])return l+(this._data[3*l+0]>>22);return 0}copyCellsFrom(l,a,n,c,v){const x=l._data;if(v)for(let E=c-1;E>=0;E--){for(let C=0;C<3;C++)this._data[3*(n+E)+C]=x[3*(a+E)+C];268435456&x[3*(a+E)+2]&&(this._extendedAttrs[n+E]=l._extendedAttrs[a+E])}else for(let E=0;E<c;E++){for(let C=0;C<3;C++)this._data[3*(n+E)+C]=x[3*(a+E)+C];268435456&x[3*(a+E)+2]&&(this._extendedAttrs[n+E]=l._extendedAttrs[a+E])}const k=Object.keys(l._combined);for(let E=0;E<k.length;E++){const C=parseInt(k[E],10);C>=a&&(this._combined[C-a+n]=l._combined[C])}}translateToString(l,a,n,c){a=a??0,n=n??this.length,l&&(n=Math.min(n,this.getTrimmedLength())),c&&(c.length=0);let v="";for(;a<n;){const x=this._data[3*a+0],k=2097151&x,E=2097152&x?this._combined[a]:k?(0,_.stringFromCodePoint)(k):h.WHITESPACE_CELL_CHAR;if(v+=E,c)for(let C=0;C<E.length;++C)c.push(a);a+=x>>22||1}return c&&c.push(a),v}}i.BufferLine=w},4841:(b,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.getRangeLength=void 0,i.getRangeLength=function(r,f){if(r.start.y>r.end.y)throw new Error(`Buffer range end (${r.end.x}, ${r.end.y}) cannot be before start (${r.start.x}, ${r.start.y})`);return f*(r.end.y-r.start.y)+(r.end.x-r.start.x+1)}},4634:(b,i)=>{function r(f,p,h){if(p===f.length-1)return f[p].getTrimmedLength();const _=!f[p].hasContent(h-1)&&f[p].getWidth(h-1)===1,m=f[p+1].getWidth(0)===2;return _&&m?h-1:h}Object.defineProperty(i,"__esModule",{value:!0}),i.getWrappedLineTrimmedLength=i.reflowSmallerGetNewLineLengths=i.reflowLargerApplyNewLayout=i.reflowLargerCreateNewLayout=i.reflowLargerGetLinesToRemove=void 0,i.reflowLargerGetLinesToRemove=function(f,p,h,_,m){const w=[];for(let g=0;g<f.length-1;g++){let l=g,a=f.get(++l);if(!a.isWrapped)continue;const n=[f.get(g)];for(;l<f.length&&a.isWrapped;)n.push(a),a=f.get(++l);if(_>=g&&_<l){g+=n.length-1;continue}let c=0,v=r(n,c,p),x=1,k=0;for(;x<n.length;){const C=r(n,x,p),A=C-k,z=h-v,G=Math.min(A,z);n[c].copyCellsFrom(n[x],k,v,G,!1),v+=G,v===h&&(c++,v=0),k+=G,k===C&&(x++,k=0),v===0&&c!==0&&n[c-1].getWidth(h-1)===2&&(n[c].copyCellsFrom(n[c-1],h-1,v++,1,!1),n[c-1].setCell(h-1,m))}n[c].replaceCells(v,h,m);let E=0;for(let C=n.length-1;C>0&&(C>c||n[C].getTrimmedLength()===0);C--)E++;E>0&&(w.push(g+n.length-E),w.push(E)),g+=n.length-1}return w},i.reflowLargerCreateNewLayout=function(f,p){const h=[];let _=0,m=p[_],w=0;for(let g=0;g<f.length;g++)if(m===g){const l=p[++_];f.onDeleteEmitter.fire({index:g-w,amount:l}),g+=l-1,w+=l,m=p[++_]}else h.push(g);return{layout:h,countRemoved:w}},i.reflowLargerApplyNewLayout=function(f,p){const h=[];for(let _=0;_<p.length;_++)h.push(f.get(p[_]));for(let _=0;_<h.length;_++)f.set(_,h[_]);f.length=p.length},i.reflowSmallerGetNewLineLengths=function(f,p,h){const _=[],m=f.map(((a,n)=>r(f,n,p))).reduce(((a,n)=>a+n));let w=0,g=0,l=0;for(;l<m;){if(m-l<h){_.push(m-l);break}w+=h;const a=r(f,g,p);w>a&&(w-=a,g++);const n=f[g].getWidth(w-1)===2;n&&w--;const c=n?h-1:h;_.push(c),l+=c}return _},i.getWrappedLineTrimmedLength=r},5295:(b,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferSet=void 0;const f=r(8460),p=r(844),h=r(9092);class _ extends p.Disposable{constructor(w,g){super(),this._optionsService=w,this._bufferService=g,this._onBufferActivate=this.register(new f.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",(()=>this.resize(this._bufferService.cols,this._bufferService.rows)))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",(()=>this.setupTabStops())))}reset(){this._normal=new h.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new h.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(w){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(w),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(w,g){this._normal.resize(w,g),this._alt.resize(w,g),this.setupTabStops(w)}setupTabStops(w){this._normal.setupTabStops(w),this._alt.setupTabStops(w)}}i.BufferSet=_},511:(b,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CellData=void 0;const f=r(482),p=r(643),h=r(3734);class _ extends h.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new h.ExtendedAttrs,this.combinedData=""}static fromCharData(w){const g=new _;return g.setFromCharData(w),g}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,f.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(w){this.fg=w[p.CHAR_DATA_ATTR_INDEX],this.bg=0;let g=!1;if(w[p.CHAR_DATA_CHAR_INDEX].length>2)g=!0;else if(w[p.CHAR_DATA_CHAR_INDEX].length===2){const l=w[p.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=l&&l<=56319){const a=w[p.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=a&&a<=57343?this.content=1024*(l-55296)+a-56320+65536|w[p.CHAR_DATA_WIDTH_INDEX]<<22:g=!0}else g=!0}else this.content=w[p.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|w[p.CHAR_DATA_WIDTH_INDEX]<<22;g&&(this.combinedData=w[p.CHAR_DATA_CHAR_INDEX],this.content=2097152|w[p.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}i.CellData=_},643:(b,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WHITESPACE_CELL_CODE=i.WHITESPACE_CELL_WIDTH=i.WHITESPACE_CELL_CHAR=i.NULL_CELL_CODE=i.NULL_CELL_WIDTH=i.NULL_CELL_CHAR=i.CHAR_DATA_CODE_INDEX=i.CHAR_DATA_WIDTH_INDEX=i.CHAR_DATA_CHAR_INDEX=i.CHAR_DATA_ATTR_INDEX=i.DEFAULT_EXT=i.DEFAULT_ATTR=i.DEFAULT_COLOR=void 0,i.DEFAULT_COLOR=0,i.DEFAULT_ATTR=256|i.DEFAULT_COLOR<<9,i.DEFAULT_EXT=0,i.CHAR_DATA_ATTR_INDEX=0,i.CHAR_DATA_CHAR_INDEX=1,i.CHAR_DATA_WIDTH_INDEX=2,i.CHAR_DATA_CODE_INDEX=3,i.NULL_CELL_CHAR="",i.NULL_CELL_WIDTH=1,i.NULL_CELL_CODE=0,i.WHITESPACE_CELL_CHAR=" ",i.WHITESPACE_CELL_WIDTH=1,i.WHITESPACE_CELL_CODE=32},4863:(b,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Marker=void 0;const f=r(8460),p=r(844);class h{get id(){return this._id}constructor(m){this.line=m,this.isDisposed=!1,this._disposables=[],this._id=h._nextId++,this._onDispose=this.register(new f.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,p.disposeArray)(this._disposables),this._disposables.length=0)}register(m){return this._disposables.push(m),m}}i.Marker=h,h._nextId=1},7116:(b,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DEFAULT_CHARSET=i.CHARSETS=void 0,i.CHARSETS={},i.DEFAULT_CHARSET=i.CHARSETS.B,i.CHARSETS[0]={"`":"",a:"",b:"",c:"",d:"",e:"",f:"",g:"",h:"",i:"",j:"",k:"",l:"",m:"",n:"",o:"",p:"",q:"",r:"",s:"",t:"",u:"",v:"",w:"",x:"",y:"",z:"","{":"","|":"","}":"","~":""},i.CHARSETS.A={"#":""},i.CHARSETS.B=void 0,i.CHARSETS[4]={"#":"","@":"","[":"ij","\\":"","]":"|","{":"","|":"f","}":"","~":""},i.CHARSETS.C=i.CHARSETS[5]={"[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},i.CHARSETS.R={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""},i.CHARSETS.Q={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},i.CHARSETS.K={"@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""},i.CHARSETS.Y={"#":"","@":"","[":"","\\":"","]":"","`":"","{":"","|":"","}":"","~":""},i.CHARSETS.E=i.CHARSETS[6]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},i.CHARSETS.Z={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":""},i.CHARSETS.H=i.CHARSETS[7]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},i.CHARSETS["="]={"#":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":""}},2584:(b,i)=>{var r,f,p;Object.defineProperty(i,"__esModule",{value:!0}),i.C1_ESCAPED=i.C1=i.C0=void 0,(function(h){h.NUL="\0",h.SOH="",h.STX="",h.ETX="",h.EOT="",h.ENQ="",h.ACK="",h.BEL="\x07",h.BS="\b",h.HT="	",h.LF=`
`,h.VT="\v",h.FF="\f",h.CR="\r",h.SO="",h.SI="",h.DLE="",h.DC1="",h.DC2="",h.DC3="",h.DC4="",h.NAK="",h.SYN="",h.ETB="",h.CAN="",h.EM="",h.SUB="",h.ESC="\x1B",h.FS="",h.GS="",h.RS="",h.US="",h.SP=" ",h.DEL=""})(r||(i.C0=r={})),(function(h){h.PAD="",h.HOP="",h.BPH="",h.NBH="",h.IND="",h.NEL="",h.SSA="",h.ESA="",h.HTS="",h.HTJ="",h.VTS="",h.PLD="",h.PLU="",h.RI="",h.SS2="",h.SS3="",h.DCS="",h.PU1="",h.PU2="",h.STS="",h.CCH="",h.MW="",h.SPA="",h.EPA="",h.SOS="",h.SGCI="",h.SCI="",h.CSI="",h.ST="",h.OSC="",h.PM="",h.APC=""})(f||(i.C1=f={})),(function(h){h.ST=`${r.ESC}\\`})(p||(i.C1_ESCAPED=p={}))},7399:(b,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.evaluateKeyboardEvent=void 0;const f=r(2584),p={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};i.evaluateKeyboardEvent=function(h,_,m,w){const g={type:0,cancel:!1,key:void 0},l=(h.shiftKey?1:0)|(h.altKey?2:0)|(h.ctrlKey?4:0)|(h.metaKey?8:0);switch(h.keyCode){case 0:h.key==="UIKeyInputUpArrow"?g.key=_?f.C0.ESC+"OA":f.C0.ESC+"[A":h.key==="UIKeyInputLeftArrow"?g.key=_?f.C0.ESC+"OD":f.C0.ESC+"[D":h.key==="UIKeyInputRightArrow"?g.key=_?f.C0.ESC+"OC":f.C0.ESC+"[C":h.key==="UIKeyInputDownArrow"&&(g.key=_?f.C0.ESC+"OB":f.C0.ESC+"[B");break;case 8:g.key=h.ctrlKey?"\b":f.C0.DEL,h.altKey&&(g.key=f.C0.ESC+g.key);break;case 9:if(h.shiftKey){g.key=f.C0.ESC+"[Z";break}g.key=f.C0.HT,g.cancel=!0;break;case 13:g.key=h.altKey?f.C0.ESC+f.C0.CR:f.C0.CR,g.cancel=!0;break;case 27:g.key=f.C0.ESC,h.altKey&&(g.key=f.C0.ESC+f.C0.ESC),g.cancel=!0;break;case 37:if(h.metaKey)break;l?(g.key=f.C0.ESC+"[1;"+(l+1)+"D",g.key===f.C0.ESC+"[1;3D"&&(g.key=f.C0.ESC+(m?"b":"[1;5D"))):g.key=_?f.C0.ESC+"OD":f.C0.ESC+"[D";break;case 39:if(h.metaKey)break;l?(g.key=f.C0.ESC+"[1;"+(l+1)+"C",g.key===f.C0.ESC+"[1;3C"&&(g.key=f.C0.ESC+(m?"f":"[1;5C"))):g.key=_?f.C0.ESC+"OC":f.C0.ESC+"[C";break;case 38:if(h.metaKey)break;l?(g.key=f.C0.ESC+"[1;"+(l+1)+"A",m||g.key!==f.C0.ESC+"[1;3A"||(g.key=f.C0.ESC+"[1;5A")):g.key=_?f.C0.ESC+"OA":f.C0.ESC+"[A";break;case 40:if(h.metaKey)break;l?(g.key=f.C0.ESC+"[1;"+(l+1)+"B",m||g.key!==f.C0.ESC+"[1;3B"||(g.key=f.C0.ESC+"[1;5B")):g.key=_?f.C0.ESC+"OB":f.C0.ESC+"[B";break;case 45:h.shiftKey||h.ctrlKey||(g.key=f.C0.ESC+"[2~");break;case 46:g.key=l?f.C0.ESC+"[3;"+(l+1)+"~":f.C0.ESC+"[3~";break;case 36:g.key=l?f.C0.ESC+"[1;"+(l+1)+"H":_?f.C0.ESC+"OH":f.C0.ESC+"[H";break;case 35:g.key=l?f.C0.ESC+"[1;"+(l+1)+"F":_?f.C0.ESC+"OF":f.C0.ESC+"[F";break;case 33:h.shiftKey?g.type=2:h.ctrlKey?g.key=f.C0.ESC+"[5;"+(l+1)+"~":g.key=f.C0.ESC+"[5~";break;case 34:h.shiftKey?g.type=3:h.ctrlKey?g.key=f.C0.ESC+"[6;"+(l+1)+"~":g.key=f.C0.ESC+"[6~";break;case 112:g.key=l?f.C0.ESC+"[1;"+(l+1)+"P":f.C0.ESC+"OP";break;case 113:g.key=l?f.C0.ESC+"[1;"+(l+1)+"Q":f.C0.ESC+"OQ";break;case 114:g.key=l?f.C0.ESC+"[1;"+(l+1)+"R":f.C0.ESC+"OR";break;case 115:g.key=l?f.C0.ESC+"[1;"+(l+1)+"S":f.C0.ESC+"OS";break;case 116:g.key=l?f.C0.ESC+"[15;"+(l+1)+"~":f.C0.ESC+"[15~";break;case 117:g.key=l?f.C0.ESC+"[17;"+(l+1)+"~":f.C0.ESC+"[17~";break;case 118:g.key=l?f.C0.ESC+"[18;"+(l+1)+"~":f.C0.ESC+"[18~";break;case 119:g.key=l?f.C0.ESC+"[19;"+(l+1)+"~":f.C0.ESC+"[19~";break;case 120:g.key=l?f.C0.ESC+"[20;"+(l+1)+"~":f.C0.ESC+"[20~";break;case 121:g.key=l?f.C0.ESC+"[21;"+(l+1)+"~":f.C0.ESC+"[21~";break;case 122:g.key=l?f.C0.ESC+"[23;"+(l+1)+"~":f.C0.ESC+"[23~";break;case 123:g.key=l?f.C0.ESC+"[24;"+(l+1)+"~":f.C0.ESC+"[24~";break;default:if(!h.ctrlKey||h.shiftKey||h.altKey||h.metaKey)if(m&&!w||!h.altKey||h.metaKey)!m||h.altKey||h.ctrlKey||h.shiftKey||!h.metaKey?h.key&&!h.ctrlKey&&!h.altKey&&!h.metaKey&&h.keyCode>=48&&h.key.length===1?g.key=h.key:h.key&&h.ctrlKey&&(h.key==="_"&&(g.key=f.C0.US),h.key==="@"&&(g.key=f.C0.NUL)):h.keyCode===65&&(g.type=1);else{const a=p[h.keyCode],n=a==null?void 0:a[h.shiftKey?1:0];if(n)g.key=f.C0.ESC+n;else if(h.keyCode>=65&&h.keyCode<=90){const c=h.ctrlKey?h.keyCode-64:h.keyCode+32;let v=String.fromCharCode(c);h.shiftKey&&(v=v.toUpperCase()),g.key=f.C0.ESC+v}else if(h.keyCode===32)g.key=f.C0.ESC+(h.ctrlKey?f.C0.NUL:" ");else if(h.key==="Dead"&&h.code.startsWith("Key")){let c=h.code.slice(3,4);h.shiftKey||(c=c.toLowerCase()),g.key=f.C0.ESC+c,g.cancel=!0}}else h.keyCode>=65&&h.keyCode<=90?g.key=String.fromCharCode(h.keyCode-64):h.keyCode===32?g.key=f.C0.NUL:h.keyCode>=51&&h.keyCode<=55?g.key=String.fromCharCode(h.keyCode-51+27):h.keyCode===56?g.key=f.C0.DEL:h.keyCode===219?g.key=f.C0.ESC:h.keyCode===220?g.key=f.C0.FS:h.keyCode===221&&(g.key=f.C0.GS)}return g}},482:(b,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Utf8ToUtf32=i.StringToUtf32=i.utf32ToString=i.stringFromCodePoint=void 0,i.stringFromCodePoint=function(r){return r>65535?(r-=65536,String.fromCharCode(55296+(r>>10))+String.fromCharCode(r%1024+56320)):String.fromCharCode(r)},i.utf32ToString=function(r,f=0,p=r.length){let h="";for(let _=f;_<p;++_){let m=r[_];m>65535?(m-=65536,h+=String.fromCharCode(55296+(m>>10))+String.fromCharCode(m%1024+56320)):h+=String.fromCharCode(m)}return h},i.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(r,f){const p=r.length;if(!p)return 0;let h=0,_=0;if(this._interim){const m=r.charCodeAt(_++);56320<=m&&m<=57343?f[h++]=1024*(this._interim-55296)+m-56320+65536:(f[h++]=this._interim,f[h++]=m),this._interim=0}for(let m=_;m<p;++m){const w=r.charCodeAt(m);if(55296<=w&&w<=56319){if(++m>=p)return this._interim=w,h;const g=r.charCodeAt(m);56320<=g&&g<=57343?f[h++]=1024*(w-55296)+g-56320+65536:(f[h++]=w,f[h++]=g)}else w!==65279&&(f[h++]=w)}return h}},i.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(r,f){const p=r.length;if(!p)return 0;let h,_,m,w,g=0,l=0,a=0;if(this.interim[0]){let v=!1,x=this.interim[0];x&=(224&x)==192?31:(240&x)==224?15:7;let k,E=0;for(;(k=63&this.interim[++E])&&E<4;)x<<=6,x|=k;const C=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,A=C-E;for(;a<A;){if(a>=p)return 0;if(k=r[a++],(192&k)!=128){a--,v=!0;break}this.interim[E++]=k,x<<=6,x|=63&k}v||(C===2?x<128?a--:f[g++]=x:C===3?x<2048||x>=55296&&x<=57343||x===65279||(f[g++]=x):x<65536||x>1114111||(f[g++]=x)),this.interim.fill(0)}const n=p-4;let c=a;for(;c<p;){for(;!(!(c<n)||128&(h=r[c])||128&(_=r[c+1])||128&(m=r[c+2])||128&(w=r[c+3]));)f[g++]=h,f[g++]=_,f[g++]=m,f[g++]=w,c+=4;if(h=r[c++],h<128)f[g++]=h;else if((224&h)==192){if(c>=p)return this.interim[0]=h,g;if(_=r[c++],(192&_)!=128){c--;continue}if(l=(31&h)<<6|63&_,l<128){c--;continue}f[g++]=l}else if((240&h)==224){if(c>=p)return this.interim[0]=h,g;if(_=r[c++],(192&_)!=128){c--;continue}if(c>=p)return this.interim[0]=h,this.interim[1]=_,g;if(m=r[c++],(192&m)!=128){c--;continue}if(l=(15&h)<<12|(63&_)<<6|63&m,l<2048||l>=55296&&l<=57343||l===65279)continue;f[g++]=l}else if((248&h)==240){if(c>=p)return this.interim[0]=h,g;if(_=r[c++],(192&_)!=128){c--;continue}if(c>=p)return this.interim[0]=h,this.interim[1]=_,g;if(m=r[c++],(192&m)!=128){c--;continue}if(c>=p)return this.interim[0]=h,this.interim[1]=_,this.interim[2]=m,g;if(w=r[c++],(192&w)!=128){c--;continue}if(l=(7&h)<<18|(63&_)<<12|(63&m)<<6|63&w,l<65536||l>1114111)continue;f[g++]=l}}return g}}},225:(b,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.UnicodeV6=void 0;const f=r(1480),p=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],h=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]];let _;i.UnicodeV6=class{constructor(){if(this.version="6",!_){_=new Uint8Array(65536),_.fill(1),_[0]=0,_.fill(0,1,32),_.fill(0,127,160),_.fill(2,4352,4448),_[9001]=2,_[9002]=2,_.fill(2,11904,42192),_[12351]=1,_.fill(2,44032,55204),_.fill(2,63744,64256),_.fill(2,65040,65050),_.fill(2,65072,65136),_.fill(2,65280,65377),_.fill(2,65504,65511);for(let m=0;m<p.length;++m)_.fill(0,p[m][0],p[m][1]+1)}}wcwidth(m){return m<32?0:m<127?1:m<65536?_[m]:(function(w,g){let l,a=0,n=g.length-1;if(w<g[0][0]||w>g[n][1])return!1;for(;n>=a;)if(l=a+n>>1,w>g[l][1])a=l+1;else{if(!(w<g[l][0]))return!0;n=l-1}return!1})(m,h)?0:m>=131072&&m<=196605||m>=196608&&m<=262141?2:1}charProperties(m,w){let g=this.wcwidth(m),l=g===0&&w!==0;if(l){const a=f.UnicodeService.extractWidth(w);a===0?l=!1:a>g&&(g=a)}return f.UnicodeService.createPropertyValue(0,g,l)}}},5981:(b,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WriteBuffer=void 0;const f=r(8460),p=r(844);class h extends p.Disposable{constructor(m){super(),this._action=m,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new f.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(m,w){if(w!==void 0&&this._syncCalls>w)return void(this._syncCalls=0);if(this._pendingData+=m.length,this._writeBuffer.push(m),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let g;for(this._isSyncWriting=!0;g=this._writeBuffer.shift();){this._action(g);const l=this._callbacks.shift();l&&l()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(m,w){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=m.length,this._writeBuffer.push(m),this._callbacks.push(w),void this._innerWrite();setTimeout((()=>this._innerWrite()))}this._pendingData+=m.length,this._writeBuffer.push(m),this._callbacks.push(w)}_innerWrite(m=0,w=!0){const g=m||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){const l=this._writeBuffer[this._bufferOffset],a=this._action(l,w);if(a){const c=v=>Date.now()-g>=12?setTimeout((()=>this._innerWrite(0,v))):this._innerWrite(g,v);return void a.catch((v=>(queueMicrotask((()=>{throw v})),Promise.resolve(!1)))).then(c)}const n=this._callbacks[this._bufferOffset];if(n&&n(),this._bufferOffset++,this._pendingData-=l.length,Date.now()-g>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout((()=>this._innerWrite()))):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}i.WriteBuffer=h},5941:(b,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.toRgbString=i.parseColor=void 0;const r=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,f=/^[\da-f]+$/;function p(h,_){const m=h.toString(16),w=m.length<2?"0"+m:m;switch(_){case 4:return m[0];case 8:return w;case 12:return(w+w).slice(0,3);default:return w+w}}i.parseColor=function(h){if(!h)return;let _=h.toLowerCase();if(_.indexOf("rgb:")===0){_=_.slice(4);const m=r.exec(_);if(m){const w=m[1]?15:m[4]?255:m[7]?4095:65535;return[Math.round(parseInt(m[1]||m[4]||m[7]||m[10],16)/w*255),Math.round(parseInt(m[2]||m[5]||m[8]||m[11],16)/w*255),Math.round(parseInt(m[3]||m[6]||m[9]||m[12],16)/w*255)]}}else if(_.indexOf("#")===0&&(_=_.slice(1),f.exec(_)&&[3,6,9,12].includes(_.length))){const m=_.length/3,w=[0,0,0];for(let g=0;g<3;++g){const l=parseInt(_.slice(m*g,m*g+m),16);w[g]=m===1?l<<4:m===2?l:m===3?l>>4:l>>8}return w}},i.toRgbString=function(h,_=16){const[m,w,g]=h;return`rgb:${p(m,_)}/${p(w,_)}/${p(g,_)}`}},5770:(b,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.PAYLOAD_LIMIT=void 0,i.PAYLOAD_LIMIT=1e7},6351:(b,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DcsHandler=i.DcsParser=void 0;const f=r(482),p=r(8742),h=r(5770),_=[];i.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=_,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=_}registerHandler(w,g){this._handlers[w]===void 0&&(this._handlers[w]=[]);const l=this._handlers[w];return l.push(g),{dispose:()=>{const a=l.indexOf(g);a!==-1&&l.splice(a,1)}}}clearHandler(w){this._handlers[w]&&delete this._handlers[w]}setHandlerFallback(w){this._handlerFb=w}reset(){if(this._active.length)for(let w=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;w>=0;--w)this._active[w].unhook(!1);this._stack.paused=!1,this._active=_,this._ident=0}hook(w,g){if(this.reset(),this._ident=w,this._active=this._handlers[w]||_,this._active.length)for(let l=this._active.length-1;l>=0;l--)this._active[l].hook(g);else this._handlerFb(this._ident,"HOOK",g)}put(w,g,l){if(this._active.length)for(let a=this._active.length-1;a>=0;a--)this._active[a].put(w,g,l);else this._handlerFb(this._ident,"PUT",(0,f.utf32ToString)(w,g,l))}unhook(w,g=!0){if(this._active.length){let l=!1,a=this._active.length-1,n=!1;if(this._stack.paused&&(a=this._stack.loopPosition-1,l=g,n=this._stack.fallThrough,this._stack.paused=!1),!n&&l===!1){for(;a>=0&&(l=this._active[a].unhook(w),l!==!0);a--)if(l instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=a,this._stack.fallThrough=!1,l;a--}for(;a>=0;a--)if(l=this._active[a].unhook(!1),l instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=a,this._stack.fallThrough=!0,l}else this._handlerFb(this._ident,"UNHOOK",w);this._active=_,this._ident=0}};const m=new p.Params;m.addParam(0),i.DcsHandler=class{constructor(w){this._handler=w,this._data="",this._params=m,this._hitLimit=!1}hook(w){this._params=w.length>1||w.params[0]?w.clone():m,this._data="",this._hitLimit=!1}put(w,g,l){this._hitLimit||(this._data+=(0,f.utf32ToString)(w,g,l),this._data.length>h.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(w){let g=!1;if(this._hitLimit)g=!1;else if(w&&(g=this._handler(this._data,this._params),g instanceof Promise))return g.then((l=>(this._params=m,this._data="",this._hitLimit=!1,l)));return this._params=m,this._data="",this._hitLimit=!1,g}}},2015:(b,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.EscapeSequenceParser=i.VT500_TRANSITION_TABLE=i.TransitionTable=void 0;const f=r(844),p=r(8742),h=r(6242),_=r(6351);class m{constructor(a){this.table=new Uint8Array(a)}setDefault(a,n){this.table.fill(a<<4|n)}add(a,n,c,v){this.table[n<<8|a]=c<<4|v}addMany(a,n,c,v){for(let x=0;x<a.length;x++)this.table[n<<8|a[x]]=c<<4|v}}i.TransitionTable=m;const w=160;i.VT500_TRANSITION_TABLE=(function(){const l=new m(4095),a=Array.apply(null,Array(256)).map(((E,C)=>C)),n=(E,C)=>a.slice(E,C),c=n(32,127),v=n(0,24);v.push(25),v.push.apply(v,n(28,32));const x=n(0,14);let k;for(k in l.setDefault(1,0),l.addMany(c,0,2,0),x)l.addMany([24,26,153,154],k,3,0),l.addMany(n(128,144),k,3,0),l.addMany(n(144,152),k,3,0),l.add(156,k,0,0),l.add(27,k,11,1),l.add(157,k,4,8),l.addMany([152,158,159],k,0,7),l.add(155,k,11,3),l.add(144,k,11,9);return l.addMany(v,0,3,0),l.addMany(v,1,3,1),l.add(127,1,0,1),l.addMany(v,8,0,8),l.addMany(v,3,3,3),l.add(127,3,0,3),l.addMany(v,4,3,4),l.add(127,4,0,4),l.addMany(v,6,3,6),l.addMany(v,5,3,5),l.add(127,5,0,5),l.addMany(v,2,3,2),l.add(127,2,0,2),l.add(93,1,4,8),l.addMany(c,8,5,8),l.add(127,8,5,8),l.addMany([156,27,24,26,7],8,6,0),l.addMany(n(28,32),8,0,8),l.addMany([88,94,95],1,0,7),l.addMany(c,7,0,7),l.addMany(v,7,0,7),l.add(156,7,0,0),l.add(127,7,0,7),l.add(91,1,11,3),l.addMany(n(64,127),3,7,0),l.addMany(n(48,60),3,8,4),l.addMany([60,61,62,63],3,9,4),l.addMany(n(48,60),4,8,4),l.addMany(n(64,127),4,7,0),l.addMany([60,61,62,63],4,0,6),l.addMany(n(32,64),6,0,6),l.add(127,6,0,6),l.addMany(n(64,127),6,0,0),l.addMany(n(32,48),3,9,5),l.addMany(n(32,48),5,9,5),l.addMany(n(48,64),5,0,6),l.addMany(n(64,127),5,7,0),l.addMany(n(32,48),4,9,5),l.addMany(n(32,48),1,9,2),l.addMany(n(32,48),2,9,2),l.addMany(n(48,127),2,10,0),l.addMany(n(48,80),1,10,0),l.addMany(n(81,88),1,10,0),l.addMany([89,90,92],1,10,0),l.addMany(n(96,127),1,10,0),l.add(80,1,11,9),l.addMany(v,9,0,9),l.add(127,9,0,9),l.addMany(n(28,32),9,0,9),l.addMany(n(32,48),9,9,12),l.addMany(n(48,60),9,8,10),l.addMany([60,61,62,63],9,9,10),l.addMany(v,11,0,11),l.addMany(n(32,128),11,0,11),l.addMany(n(28,32),11,0,11),l.addMany(v,10,0,10),l.add(127,10,0,10),l.addMany(n(28,32),10,0,10),l.addMany(n(48,60),10,8,10),l.addMany([60,61,62,63],10,0,11),l.addMany(n(32,48),10,9,12),l.addMany(v,12,0,12),l.add(127,12,0,12),l.addMany(n(28,32),12,0,12),l.addMany(n(32,48),12,9,12),l.addMany(n(48,64),12,0,11),l.addMany(n(64,127),12,12,13),l.addMany(n(64,127),10,12,13),l.addMany(n(64,127),9,12,13),l.addMany(v,13,13,13),l.addMany(c,13,13,13),l.add(127,13,0,13),l.addMany([27,156,24,26],13,14,0),l.add(w,0,2,0),l.add(w,8,5,8),l.add(w,6,0,6),l.add(w,11,0,11),l.add(w,13,13,13),l})();class g extends f.Disposable{constructor(a=i.VT500_TRANSITION_TABLE){super(),this._transitions=a,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new p.Params,this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._printHandlerFb=(n,c,v)=>{},this._executeHandlerFb=n=>{},this._csiHandlerFb=(n,c)=>{},this._escHandlerFb=n=>{},this._errorHandlerFb=n=>n,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,f.toDisposable)((()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)}))),this._oscParser=this.register(new h.OscParser),this._dcsParser=this.register(new _.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},(()=>!0))}_identifier(a,n=[64,126]){let c=0;if(a.prefix){if(a.prefix.length>1)throw new Error("only one byte as prefix supported");if(c=a.prefix.charCodeAt(0),c&&60>c||c>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(a.intermediates){if(a.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let x=0;x<a.intermediates.length;++x){const k=a.intermediates.charCodeAt(x);if(32>k||k>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");c<<=8,c|=k}}if(a.final.length!==1)throw new Error("final must be a single byte");const v=a.final.charCodeAt(0);if(n[0]>v||v>n[1])throw new Error(`final must be in range ${n[0]} .. ${n[1]}`);return c<<=8,c|=v,c}identToString(a){const n=[];for(;a;)n.push(String.fromCharCode(255&a)),a>>=8;return n.reverse().join("")}setPrintHandler(a){this._printHandler=a}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(a,n){const c=this._identifier(a,[48,126]);this._escHandlers[c]===void 0&&(this._escHandlers[c]=[]);const v=this._escHandlers[c];return v.push(n),{dispose:()=>{const x=v.indexOf(n);x!==-1&&v.splice(x,1)}}}clearEscHandler(a){this._escHandlers[this._identifier(a,[48,126])]&&delete this._escHandlers[this._identifier(a,[48,126])]}setEscHandlerFallback(a){this._escHandlerFb=a}setExecuteHandler(a,n){this._executeHandlers[a.charCodeAt(0)]=n}clearExecuteHandler(a){this._executeHandlers[a.charCodeAt(0)]&&delete this._executeHandlers[a.charCodeAt(0)]}setExecuteHandlerFallback(a){this._executeHandlerFb=a}registerCsiHandler(a,n){const c=this._identifier(a);this._csiHandlers[c]===void 0&&(this._csiHandlers[c]=[]);const v=this._csiHandlers[c];return v.push(n),{dispose:()=>{const x=v.indexOf(n);x!==-1&&v.splice(x,1)}}}clearCsiHandler(a){this._csiHandlers[this._identifier(a)]&&delete this._csiHandlers[this._identifier(a)]}setCsiHandlerFallback(a){this._csiHandlerFb=a}registerDcsHandler(a,n){return this._dcsParser.registerHandler(this._identifier(a),n)}clearDcsHandler(a){this._dcsParser.clearHandler(this._identifier(a))}setDcsHandlerFallback(a){this._dcsParser.setHandlerFallback(a)}registerOscHandler(a,n){return this._oscParser.registerHandler(a,n)}clearOscHandler(a){this._oscParser.clearHandler(a)}setOscHandlerFallback(a){this._oscParser.setHandlerFallback(a)}setErrorHandler(a){this._errorHandler=a}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(a,n,c,v,x){this._parseStack.state=a,this._parseStack.handlers=n,this._parseStack.handlerPos=c,this._parseStack.transition=v,this._parseStack.chunkPos=x}parse(a,n,c){let v,x=0,k=0,E=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,E=this._parseStack.chunkPos+1;else{if(c===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");const C=this._parseStack.handlers;let A=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(c===!1&&A>-1){for(;A>=0&&(v=C[A](this._params),v!==!0);A--)if(v instanceof Promise)return this._parseStack.handlerPos=A,v}this._parseStack.handlers=[];break;case 4:if(c===!1&&A>-1){for(;A>=0&&(v=C[A](),v!==!0);A--)if(v instanceof Promise)return this._parseStack.handlerPos=A,v}this._parseStack.handlers=[];break;case 6:if(x=a[this._parseStack.chunkPos],v=this._dcsParser.unhook(x!==24&&x!==26,c),v)return v;x===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(x=a[this._parseStack.chunkPos],v=this._oscParser.end(x!==24&&x!==26,c),v)return v;x===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,E=this._parseStack.chunkPos+1,this.precedingJoinState=0,this.currentState=15&this._parseStack.transition}for(let C=E;C<n;++C){switch(x=a[C],k=this._transitions.table[this.currentState<<8|(x<160?x:w)],k>>4){case 2:for(let P=C+1;;++P){if(P>=n||(x=a[P])<32||x>126&&x<w){this._printHandler(a,C,P),C=P-1;break}if(++P>=n||(x=a[P])<32||x>126&&x<w){this._printHandler(a,C,P),C=P-1;break}if(++P>=n||(x=a[P])<32||x>126&&x<w){this._printHandler(a,C,P),C=P-1;break}if(++P>=n||(x=a[P])<32||x>126&&x<w){this._printHandler(a,C,P),C=P-1;break}}break;case 3:this._executeHandlers[x]?this._executeHandlers[x]():this._executeHandlerFb(x),this.precedingJoinState=0;break;case 0:break;case 1:if(this._errorHandler({position:C,code:x,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:const A=this._csiHandlers[this._collect<<8|x];let z=A?A.length-1:-1;for(;z>=0&&(v=A[z](this._params),v!==!0);z--)if(v instanceof Promise)return this._preserveStack(3,A,z,k,C),v;z<0&&this._csiHandlerFb(this._collect<<8|x,this._params),this.precedingJoinState=0;break;case 8:do switch(x){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(x-48)}while(++C<n&&(x=a[C])>47&&x<60);C--;break;case 9:this._collect<<=8,this._collect|=x;break;case 10:const G=this._escHandlers[this._collect<<8|x];let B=G?G.length-1:-1;for(;B>=0&&(v=G[B](),v!==!0);B--)if(v instanceof Promise)return this._preserveStack(4,G,B,k,C),v;B<0&&this._escHandlerFb(this._collect<<8|x),this.precedingJoinState=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|x,this._params);break;case 13:for(let P=C+1;;++P)if(P>=n||(x=a[P])===24||x===26||x===27||x>127&&x<w){this._dcsParser.put(a,C,P),C=P-1;break}break;case 14:if(v=this._dcsParser.unhook(x!==24&&x!==26),v)return this._preserveStack(6,[],0,k,C),v;x===27&&(k|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0;break;case 4:this._oscParser.start();break;case 5:for(let P=C+1;;P++)if(P>=n||(x=a[P])<32||x>127&&x<w){this._oscParser.put(a,C,P),C=P-1;break}break;case 6:if(v=this._oscParser.end(x!==24&&x!==26),v)return this._preserveStack(5,[],0,k,C),v;x===27&&(k|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0}this.currentState=15&k}}}i.EscapeSequenceParser=g},6242:(b,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.OscHandler=i.OscParser=void 0;const f=r(5770),p=r(482),h=[];i.OscParser=class{constructor(){this._state=0,this._active=h,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(_,m){this._handlers[_]===void 0&&(this._handlers[_]=[]);const w=this._handlers[_];return w.push(m),{dispose:()=>{const g=w.indexOf(m);g!==-1&&w.splice(g,1)}}}clearHandler(_){this._handlers[_]&&delete this._handlers[_]}setHandlerFallback(_){this._handlerFb=_}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=h}reset(){if(this._state===2)for(let _=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;_>=0;--_)this._active[_].end(!1);this._stack.paused=!1,this._active=h,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||h,this._active.length)for(let _=this._active.length-1;_>=0;_--)this._active[_].start();else this._handlerFb(this._id,"START")}_put(_,m,w){if(this._active.length)for(let g=this._active.length-1;g>=0;g--)this._active[g].put(_,m,w);else this._handlerFb(this._id,"PUT",(0,p.utf32ToString)(_,m,w))}start(){this.reset(),this._state=1}put(_,m,w){if(this._state!==3){if(this._state===1)for(;m<w;){const g=_[m++];if(g===59){this._state=2,this._start();break}if(g<48||57<g)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+g-48}this._state===2&&w-m>0&&this._put(_,m,w)}}end(_,m=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let w=!1,g=this._active.length-1,l=!1;if(this._stack.paused&&(g=this._stack.loopPosition-1,w=m,l=this._stack.fallThrough,this._stack.paused=!1),!l&&w===!1){for(;g>=0&&(w=this._active[g].end(_),w!==!0);g--)if(w instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=g,this._stack.fallThrough=!1,w;g--}for(;g>=0;g--)if(w=this._active[g].end(!1),w instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=g,this._stack.fallThrough=!0,w}else this._handlerFb(this._id,"END",_);this._active=h,this._id=-1,this._state=0}}},i.OscHandler=class{constructor(_){this._handler=_,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(_,m,w){this._hitLimit||(this._data+=(0,p.utf32ToString)(_,m,w),this._data.length>f.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(_){let m=!1;if(this._hitLimit)m=!1;else if(_&&(m=this._handler(this._data),m instanceof Promise))return m.then((w=>(this._data="",this._hitLimit=!1,w)));return this._data="",this._hitLimit=!1,m}}},8742:(b,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Params=void 0;const r=2147483647;class f{static fromArray(h){const _=new f;if(!h.length)return _;for(let m=Array.isArray(h[0])?1:0;m<h.length;++m){const w=h[m];if(Array.isArray(w))for(let g=0;g<w.length;++g)_.addSubParam(w[g]);else _.addParam(w)}return _}constructor(h=32,_=32){if(this.maxLength=h,this.maxSubParamsLength=_,_>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(h),this.length=0,this._subParams=new Int32Array(_),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(h),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){const h=new f(this.maxLength,this.maxSubParamsLength);return h.params.set(this.params),h.length=this.length,h._subParams.set(this._subParams),h._subParamsLength=this._subParamsLength,h._subParamsIdx.set(this._subParamsIdx),h._rejectDigits=this._rejectDigits,h._rejectSubDigits=this._rejectSubDigits,h._digitIsSub=this._digitIsSub,h}toArray(){const h=[];for(let _=0;_<this.length;++_){h.push(this.params[_]);const m=this._subParamsIdx[_]>>8,w=255&this._subParamsIdx[_];w-m>0&&h.push(Array.prototype.slice.call(this._subParams,m,w))}return h}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(h){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(h<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=h>r?r:h}}addSubParam(h){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(h<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=h>r?r:h,this._subParamsIdx[this.length-1]++}}hasSubParams(h){return(255&this._subParamsIdx[h])-(this._subParamsIdx[h]>>8)>0}getSubParams(h){const _=this._subParamsIdx[h]>>8,m=255&this._subParamsIdx[h];return m-_>0?this._subParams.subarray(_,m):null}getSubParamsAll(){const h={};for(let _=0;_<this.length;++_){const m=this._subParamsIdx[_]>>8,w=255&this._subParamsIdx[_];w-m>0&&(h[_]=this._subParams.slice(m,w))}return h}addDigit(h){let _;if(this._rejectDigits||!(_=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;const m=this._digitIsSub?this._subParams:this.params,w=m[_-1];m[_-1]=~w?Math.min(10*w+h,r):h}}i.Params=f},5741:(b,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.AddonManager=void 0,i.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let r=this._addons.length-1;r>=0;r--)this._addons[r].instance.dispose()}loadAddon(r,f){const p={instance:f,dispose:f.dispose,isDisposed:!1};this._addons.push(p),f.dispose=()=>this._wrappedAddonDispose(p),f.activate(r)}_wrappedAddonDispose(r){if(r.isDisposed)return;let f=-1;for(let p=0;p<this._addons.length;p++)if(this._addons[p]===r){f=p;break}if(f===-1)throw new Error("Could not dispose an addon that has not been loaded");r.isDisposed=!0,r.dispose.apply(r.instance),this._addons.splice(f,1)}}},8771:(b,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferApiView=void 0;const f=r(3785),p=r(511);i.BufferApiView=class{constructor(h,_){this._buffer=h,this.type=_}init(h){return this._buffer=h,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(h){const _=this._buffer.lines.get(h);if(_)return new f.BufferLineApiView(_)}getNullCell(){return new p.CellData}}},3785:(b,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferLineApiView=void 0;const f=r(511);i.BufferLineApiView=class{constructor(p){this._line=p}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(p,h){if(!(p<0||p>=this._line.length))return h?(this._line.loadCell(p,h),h):this._line.loadCell(p,new f.CellData)}translateToString(p,h,_){return this._line.translateToString(p,h,_)}}},8285:(b,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferNamespaceApi=void 0;const f=r(8771),p=r(8460),h=r(844);class _ extends h.Disposable{constructor(w){super(),this._core=w,this._onBufferChange=this.register(new p.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new f.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new f.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate((()=>this._onBufferChange.fire(this.active)))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}i.BufferNamespaceApi=_},7975:(b,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ParserApi=void 0,i.ParserApi=class{constructor(r){this._core=r}registerCsiHandler(r,f){return this._core.registerCsiHandler(r,(p=>f(p.toArray())))}addCsiHandler(r,f){return this.registerCsiHandler(r,f)}registerDcsHandler(r,f){return this._core.registerDcsHandler(r,((p,h)=>f(p,h.toArray())))}addDcsHandler(r,f){return this.registerDcsHandler(r,f)}registerEscHandler(r,f){return this._core.registerEscHandler(r,f)}addEscHandler(r,f){return this.registerEscHandler(r,f)}registerOscHandler(r,f){return this._core.registerOscHandler(r,f)}addOscHandler(r,f){return this.registerOscHandler(r,f)}}},7090:(b,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.UnicodeApi=void 0,i.UnicodeApi=class{constructor(r){this._core=r}register(r){this._core.unicodeService.register(r)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(r){this._core.unicodeService.activeVersion=r}}},744:function(b,i,r){var f=this&&this.__decorate||function(l,a,n,c){var v,x=arguments.length,k=x<3?a:c===null?c=Object.getOwnPropertyDescriptor(a,n):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(l,a,n,c);else for(var E=l.length-1;E>=0;E--)(v=l[E])&&(k=(x<3?v(k):x>3?v(a,n,k):v(a,n))||k);return x>3&&k&&Object.defineProperty(a,n,k),k},p=this&&this.__param||function(l,a){return function(n,c){a(n,c,l)}};Object.defineProperty(i,"__esModule",{value:!0}),i.BufferService=i.MINIMUM_ROWS=i.MINIMUM_COLS=void 0;const h=r(8460),_=r(844),m=r(5295),w=r(2585);i.MINIMUM_COLS=2,i.MINIMUM_ROWS=1;let g=i.BufferService=class extends _.Disposable{get buffer(){return this.buffers.active}constructor(l){super(),this.isUserScrolling=!1,this._onResize=this.register(new h.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new h.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(l.rawOptions.cols||0,i.MINIMUM_COLS),this.rows=Math.max(l.rawOptions.rows||0,i.MINIMUM_ROWS),this.buffers=this.register(new m.BufferSet(l,this))}resize(l,a){this.cols=l,this.rows=a,this.buffers.resize(l,a),this._onResize.fire({cols:l,rows:a})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(l,a=!1){const n=this.buffer;let c;c=this._cachedBlankLine,c&&c.length===this.cols&&c.getFg(0)===l.fg&&c.getBg(0)===l.bg||(c=n.getBlankLine(l,a),this._cachedBlankLine=c),c.isWrapped=a;const v=n.ybase+n.scrollTop,x=n.ybase+n.scrollBottom;if(n.scrollTop===0){const k=n.lines.isFull;x===n.lines.length-1?k?n.lines.recycle().copyFrom(c):n.lines.push(c.clone()):n.lines.splice(x+1,0,c.clone()),k?this.isUserScrolling&&(n.ydisp=Math.max(n.ydisp-1,0)):(n.ybase++,this.isUserScrolling||n.ydisp++)}else{const k=x-v+1;n.lines.shiftElements(v+1,k-1,-1),n.lines.set(x,c.clone())}this.isUserScrolling||(n.ydisp=n.ybase),this._onScroll.fire(n.ydisp)}scrollLines(l,a,n){const c=this.buffer;if(l<0){if(c.ydisp===0)return;this.isUserScrolling=!0}else l+c.ydisp>=c.ybase&&(this.isUserScrolling=!1);const v=c.ydisp;c.ydisp=Math.max(Math.min(c.ydisp+l,c.ybase),0),v!==c.ydisp&&(a||this._onScroll.fire(c.ydisp))}};i.BufferService=g=f([p(0,w.IOptionsService)],g)},7994:(b,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CharsetService=void 0,i.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(r){this.glevel=r,this.charset=this._charsets[r]}setgCharset(r,f){this._charsets[r]=f,this.glevel===r&&(this.charset=f)}}},1753:function(b,i,r){var f=this&&this.__decorate||function(c,v,x,k){var E,C=arguments.length,A=C<3?v:k===null?k=Object.getOwnPropertyDescriptor(v,x):k;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")A=Reflect.decorate(c,v,x,k);else for(var z=c.length-1;z>=0;z--)(E=c[z])&&(A=(C<3?E(A):C>3?E(v,x,A):E(v,x))||A);return C>3&&A&&Object.defineProperty(v,x,A),A},p=this&&this.__param||function(c,v){return function(x,k){v(x,k,c)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CoreMouseService=void 0;const h=r(2585),_=r(8460),m=r(844),w={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:c=>c.button!==4&&c.action===1&&(c.ctrl=!1,c.alt=!1,c.shift=!1,!0)},VT200:{events:19,restrict:c=>c.action!==32},DRAG:{events:23,restrict:c=>c.action!==32||c.button!==3},ANY:{events:31,restrict:c=>!0}};function g(c,v){let x=(c.ctrl?16:0)|(c.shift?4:0)|(c.alt?8:0);return c.button===4?(x|=64,x|=c.action):(x|=3&c.button,4&c.button&&(x|=64),8&c.button&&(x|=128),c.action===32?x|=32:c.action!==0||v||(x|=3)),x}const l=String.fromCharCode,a={DEFAULT:c=>{const v=[g(c,!1)+32,c.col+32,c.row+32];return v[0]>255||v[1]>255||v[2]>255?"":`\x1B[M${l(v[0])}${l(v[1])}${l(v[2])}`},SGR:c=>{const v=c.action===0&&c.button!==4?"m":"M";return`\x1B[<${g(c,!0)};${c.col};${c.row}${v}`},SGR_PIXELS:c=>{const v=c.action===0&&c.button!==4?"m":"M";return`\x1B[<${g(c,!0)};${c.x};${c.y}${v}`}};let n=i.CoreMouseService=class extends m.Disposable{constructor(c,v){super(),this._bufferService=c,this._coreService=v,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new _.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(const x of Object.keys(w))this.addProtocol(x,w[x]);for(const x of Object.keys(a))this.addEncoding(x,a[x]);this.reset()}addProtocol(c,v){this._protocols[c]=v}addEncoding(c,v){this._encodings[c]=v}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(c){if(!this._protocols[c])throw new Error(`unknown protocol "${c}"`);this._activeProtocol=c,this._onProtocolChange.fire(this._protocols[c].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(c){if(!this._encodings[c])throw new Error(`unknown encoding "${c}"`);this._activeEncoding=c}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(c){if(c.col<0||c.col>=this._bufferService.cols||c.row<0||c.row>=this._bufferService.rows||c.button===4&&c.action===32||c.button===3&&c.action!==32||c.button!==4&&(c.action===2||c.action===3)||(c.col++,c.row++,c.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,c,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(c))return!1;const v=this._encodings[this._activeEncoding](c);return v&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(v):this._coreService.triggerDataEvent(v,!0)),this._lastEvent=c,!0}explainEvents(c){return{down:!!(1&c),up:!!(2&c),drag:!!(4&c),move:!!(8&c),wheel:!!(16&c)}}_equalEvents(c,v,x){if(x){if(c.x!==v.x||c.y!==v.y)return!1}else if(c.col!==v.col||c.row!==v.row)return!1;return c.button===v.button&&c.action===v.action&&c.ctrl===v.ctrl&&c.alt===v.alt&&c.shift===v.shift}};i.CoreMouseService=n=f([p(0,h.IBufferService),p(1,h.ICoreService)],n)},6975:function(b,i,r){var f=this&&this.__decorate||function(n,c,v,x){var k,E=arguments.length,C=E<3?c:x===null?x=Object.getOwnPropertyDescriptor(c,v):x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(n,c,v,x);else for(var A=n.length-1;A>=0;A--)(k=n[A])&&(C=(E<3?k(C):E>3?k(c,v,C):k(c,v))||C);return E>3&&C&&Object.defineProperty(c,v,C),C},p=this&&this.__param||function(n,c){return function(v,x){c(v,x,n)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CoreService=void 0;const h=r(1439),_=r(8460),m=r(844),w=r(2585),g=Object.freeze({insertMode:!1}),l=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0});let a=i.CoreService=class extends m.Disposable{constructor(n,c,v){super(),this._bufferService=n,this._logService=c,this._optionsService=v,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new _.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new _.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new _.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new _.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,h.clone)(g),this.decPrivateModes=(0,h.clone)(l)}reset(){this.modes=(0,h.clone)(g),this.decPrivateModes=(0,h.clone)(l)}triggerDataEvent(n,c=!1){if(this._optionsService.rawOptions.disableStdin)return;const v=this._bufferService.buffer;c&&this._optionsService.rawOptions.scrollOnUserInput&&v.ybase!==v.ydisp&&this._onRequestScrollToBottom.fire(),c&&this._onUserInput.fire(),this._logService.debug(`sending data "${n}"`,(()=>n.split("").map((x=>x.charCodeAt(0))))),this._onData.fire(n)}triggerBinaryEvent(n){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${n}"`,(()=>n.split("").map((c=>c.charCodeAt(0))))),this._onBinary.fire(n))}};i.CoreService=a=f([p(0,w.IBufferService),p(1,w.ILogService),p(2,w.IOptionsService)],a)},9074:(b,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DecorationService=void 0;const f=r(8055),p=r(8460),h=r(844),_=r(6106);let m=0,w=0;class g extends h.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new _.SortedList((n=>n==null?void 0:n.marker.line)),this._onDecorationRegistered=this.register(new p.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new p.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,h.toDisposable)((()=>this.reset())))}registerDecoration(n){if(n.marker.isDisposed)return;const c=new l(n);if(c){const v=c.marker.onDispose((()=>c.dispose()));c.onDispose((()=>{c&&(this._decorations.delete(c)&&this._onDecorationRemoved.fire(c),v.dispose())})),this._decorations.insert(c),this._onDecorationRegistered.fire(c)}return c}reset(){for(const n of this._decorations.values())n.dispose();this._decorations.clear()}*getDecorationsAtCell(n,c,v){let x=0,k=0;for(const E of this._decorations.getKeyIterator(c))x=E.options.x??0,k=x+(E.options.width??1),n>=x&&n<k&&(!v||(E.options.layer??"bottom")===v)&&(yield E)}forEachDecorationAtCell(n,c,v,x){this._decorations.forEachByKey(c,(k=>{m=k.options.x??0,w=m+(k.options.width??1),n>=m&&n<w&&(!v||(k.options.layer??"bottom")===v)&&x(k)}))}}i.DecorationService=g;class l extends h.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=f.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=f.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}constructor(n){super(),this.options=n,this.onRenderEmitter=this.register(new p.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new p.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=n.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(b,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.InstantiationService=i.ServiceCollection=void 0;const f=r(2585),p=r(8343);class h{constructor(...m){this._entries=new Map;for(const[w,g]of m)this.set(w,g)}set(m,w){const g=this._entries.get(m);return this._entries.set(m,w),g}forEach(m){for(const[w,g]of this._entries.entries())m(w,g)}has(m){return this._entries.has(m)}get(m){return this._entries.get(m)}}i.ServiceCollection=h,i.InstantiationService=class{constructor(){this._services=new h,this._services.set(f.IInstantiationService,this)}setService(_,m){this._services.set(_,m)}getService(_){return this._services.get(_)}createInstance(_,...m){const w=(0,p.getServiceDependencies)(_).sort(((a,n)=>a.index-n.index)),g=[];for(const a of w){const n=this._services.get(a.id);if(!n)throw new Error(`[createInstance] ${_.name} depends on UNKNOWN service ${a.id}.`);g.push(n)}const l=w.length>0?w[0].index:m.length;if(m.length!==l)throw new Error(`[createInstance] First service dependency of ${_.name} at position ${l+1} conflicts with ${m.length} static arguments`);return new _(...m,...g)}}},7866:function(b,i,r){var f=this&&this.__decorate||function(l,a,n,c){var v,x=arguments.length,k=x<3?a:c===null?c=Object.getOwnPropertyDescriptor(a,n):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(l,a,n,c);else for(var E=l.length-1;E>=0;E--)(v=l[E])&&(k=(x<3?v(k):x>3?v(a,n,k):v(a,n))||k);return x>3&&k&&Object.defineProperty(a,n,k),k},p=this&&this.__param||function(l,a){return function(n,c){a(n,c,l)}};Object.defineProperty(i,"__esModule",{value:!0}),i.traceCall=i.setTraceLogger=i.LogService=void 0;const h=r(844),_=r(2585),m={trace:_.LogLevelEnum.TRACE,debug:_.LogLevelEnum.DEBUG,info:_.LogLevelEnum.INFO,warn:_.LogLevelEnum.WARN,error:_.LogLevelEnum.ERROR,off:_.LogLevelEnum.OFF};let w,g=i.LogService=class extends h.Disposable{get logLevel(){return this._logLevel}constructor(l){super(),this._optionsService=l,this._logLevel=_.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",(()=>this._updateLogLevel()))),w=this}_updateLogLevel(){this._logLevel=m[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(l){for(let a=0;a<l.length;a++)typeof l[a]=="function"&&(l[a]=l[a]())}_log(l,a,n){this._evalLazyOptionalParams(n),l.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+a,...n)}trace(l,...a){var n;this._logLevel<=_.LogLevelEnum.TRACE&&this._log(((n=this._optionsService.options.logger)==null?void 0:n.trace.bind(this._optionsService.options.logger))??console.log,l,a)}debug(l,...a){var n;this._logLevel<=_.LogLevelEnum.DEBUG&&this._log(((n=this._optionsService.options.logger)==null?void 0:n.debug.bind(this._optionsService.options.logger))??console.log,l,a)}info(l,...a){var n;this._logLevel<=_.LogLevelEnum.INFO&&this._log(((n=this._optionsService.options.logger)==null?void 0:n.info.bind(this._optionsService.options.logger))??console.info,l,a)}warn(l,...a){var n;this._logLevel<=_.LogLevelEnum.WARN&&this._log(((n=this._optionsService.options.logger)==null?void 0:n.warn.bind(this._optionsService.options.logger))??console.warn,l,a)}error(l,...a){var n;this._logLevel<=_.LogLevelEnum.ERROR&&this._log(((n=this._optionsService.options.logger)==null?void 0:n.error.bind(this._optionsService.options.logger))??console.error,l,a)}};i.LogService=g=f([p(0,_.IOptionsService)],g),i.setTraceLogger=function(l){w=l},i.traceCall=function(l,a,n){if(typeof n.value!="function")throw new Error("not supported");const c=n.value;n.value=function(...v){if(w.logLevel!==_.LogLevelEnum.TRACE)return c.apply(this,v);w.trace(`GlyphRenderer#${c.name}(${v.map((k=>JSON.stringify(k))).join(", ")})`);const x=c.apply(this,v);return w.trace(`GlyphRenderer#${c.name} return`,x),x}}},7302:(b,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.OptionsService=i.DEFAULT_OPTIONS=void 0;const f=r(8460),p=r(844),h=r(6114);i.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,documentOverride:null,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rescaleOverlappingGlyphs:!1,rightClickSelectsWord:h.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};const _=["normal","bold","100","200","300","400","500","600","700","800","900"];class m extends p.Disposable{constructor(g){super(),this._onOptionChange=this.register(new f.EventEmitter),this.onOptionChange=this._onOptionChange.event;const l={...i.DEFAULT_OPTIONS};for(const a in g)if(a in l)try{const n=g[a];l[a]=this._sanitizeAndValidateOption(a,n)}catch(n){console.error(n)}this.rawOptions=l,this.options={...l},this._setupOptions(),this.register((0,p.toDisposable)((()=>{this.rawOptions.linkHandler=null,this.rawOptions.documentOverride=null})))}onSpecificOptionChange(g,l){return this.onOptionChange((a=>{a===g&&l(this.rawOptions[g])}))}onMultipleOptionChange(g,l){return this.onOptionChange((a=>{g.indexOf(a)!==-1&&l()}))}_setupOptions(){const g=a=>{if(!(a in i.DEFAULT_OPTIONS))throw new Error(`No option with key "${a}"`);return this.rawOptions[a]},l=(a,n)=>{if(!(a in i.DEFAULT_OPTIONS))throw new Error(`No option with key "${a}"`);n=this._sanitizeAndValidateOption(a,n),this.rawOptions[a]!==n&&(this.rawOptions[a]=n,this._onOptionChange.fire(a))};for(const a in this.rawOptions){const n={get:g.bind(this,a),set:l.bind(this,a)};Object.defineProperty(this.options,a,n)}}_sanitizeAndValidateOption(g,l){switch(g){case"cursorStyle":if(l||(l=i.DEFAULT_OPTIONS[g]),!(function(a){return a==="block"||a==="underline"||a==="bar"})(l))throw new Error(`"${l}" is not a valid value for ${g}`);break;case"wordSeparator":l||(l=i.DEFAULT_OPTIONS[g]);break;case"fontWeight":case"fontWeightBold":if(typeof l=="number"&&1<=l&&l<=1e3)break;l=_.includes(l)?l:i.DEFAULT_OPTIONS[g];break;case"cursorWidth":l=Math.floor(l);case"lineHeight":case"tabStopWidth":if(l<1)throw new Error(`${g} cannot be less than 1, value: ${l}`);break;case"minimumContrastRatio":l=Math.max(1,Math.min(21,Math.round(10*l)/10));break;case"scrollback":if((l=Math.min(l,4294967295))<0)throw new Error(`${g} cannot be less than 0, value: ${l}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(l<=0)throw new Error(`${g} cannot be less than or equal to 0, value: ${l}`);break;case"rows":case"cols":if(!l&&l!==0)throw new Error(`${g} must be numeric, value: ${l}`);break;case"windowsPty":l=l??{}}return l}}i.OptionsService=m},2660:function(b,i,r){var f=this&&this.__decorate||function(m,w,g,l){var a,n=arguments.length,c=n<3?w:l===null?l=Object.getOwnPropertyDescriptor(w,g):l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(m,w,g,l);else for(var v=m.length-1;v>=0;v--)(a=m[v])&&(c=(n<3?a(c):n>3?a(w,g,c):a(w,g))||c);return n>3&&c&&Object.defineProperty(w,g,c),c},p=this&&this.__param||function(m,w){return function(g,l){w(g,l,m)}};Object.defineProperty(i,"__esModule",{value:!0}),i.OscLinkService=void 0;const h=r(2585);let _=i.OscLinkService=class{constructor(m){this._bufferService=m,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(m){const w=this._bufferService.buffer;if(m.id===void 0){const v=w.addMarker(w.ybase+w.y),x={data:m,id:this._nextId++,lines:[v]};return v.onDispose((()=>this._removeMarkerFromLink(x,v))),this._dataByLinkId.set(x.id,x),x.id}const g=m,l=this._getEntryIdKey(g),a=this._entriesWithId.get(l);if(a)return this.addLineToLink(a.id,w.ybase+w.y),a.id;const n=w.addMarker(w.ybase+w.y),c={id:this._nextId++,key:this._getEntryIdKey(g),data:g,lines:[n]};return n.onDispose((()=>this._removeMarkerFromLink(c,n))),this._entriesWithId.set(c.key,c),this._dataByLinkId.set(c.id,c),c.id}addLineToLink(m,w){const g=this._dataByLinkId.get(m);if(g&&g.lines.every((l=>l.line!==w))){const l=this._bufferService.buffer.addMarker(w);g.lines.push(l),l.onDispose((()=>this._removeMarkerFromLink(g,l)))}}getLinkData(m){var w;return(w=this._dataByLinkId.get(m))==null?void 0:w.data}_getEntryIdKey(m){return`${m.id};;${m.uri}`}_removeMarkerFromLink(m,w){const g=m.lines.indexOf(w);g!==-1&&(m.lines.splice(g,1),m.lines.length===0&&(m.data.id!==void 0&&this._entriesWithId.delete(m.key),this._dataByLinkId.delete(m.id)))}};i.OscLinkService=_=f([p(0,h.IBufferService)],_)},8343:(b,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.createDecorator=i.getServiceDependencies=i.serviceRegistry=void 0;const r="di$target",f="di$dependencies";i.serviceRegistry=new Map,i.getServiceDependencies=function(p){return p[f]||[]},i.createDecorator=function(p){if(i.serviceRegistry.has(p))return i.serviceRegistry.get(p);const h=function(_,m,w){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(g,l,a){l[r]===l?l[f].push({id:g,index:a}):(l[f]=[{id:g,index:a}],l[r]=l)})(h,_,w)};return h.toString=()=>p,i.serviceRegistry.set(p,h),h}},2585:(b,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.IDecorationService=i.IUnicodeService=i.IOscLinkService=i.IOptionsService=i.ILogService=i.LogLevelEnum=i.IInstantiationService=i.ICharsetService=i.ICoreService=i.ICoreMouseService=i.IBufferService=void 0;const f=r(8343);var p;i.IBufferService=(0,f.createDecorator)("BufferService"),i.ICoreMouseService=(0,f.createDecorator)("CoreMouseService"),i.ICoreService=(0,f.createDecorator)("CoreService"),i.ICharsetService=(0,f.createDecorator)("CharsetService"),i.IInstantiationService=(0,f.createDecorator)("InstantiationService"),(function(h){h[h.TRACE=0]="TRACE",h[h.DEBUG=1]="DEBUG",h[h.INFO=2]="INFO",h[h.WARN=3]="WARN",h[h.ERROR=4]="ERROR",h[h.OFF=5]="OFF"})(p||(i.LogLevelEnum=p={})),i.ILogService=(0,f.createDecorator)("LogService"),i.IOptionsService=(0,f.createDecorator)("OptionsService"),i.IOscLinkService=(0,f.createDecorator)("OscLinkService"),i.IUnicodeService=(0,f.createDecorator)("UnicodeService"),i.IDecorationService=(0,f.createDecorator)("DecorationService")},1480:(b,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.UnicodeService=void 0;const f=r(8460),p=r(225);class h{static extractShouldJoin(m){return(1&m)!=0}static extractWidth(m){return m>>1&3}static extractCharKind(m){return m>>3}static createPropertyValue(m,w,g=!1){return(16777215&m)<<3|(3&w)<<1|(g?1:0)}constructor(){this._providers=Object.create(null),this._active="",this._onChange=new f.EventEmitter,this.onChange=this._onChange.event;const m=new p.UnicodeV6;this.register(m),this._active=m.version,this._activeProvider=m}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(m){if(!this._providers[m])throw new Error(`unknown Unicode version "${m}"`);this._active=m,this._activeProvider=this._providers[m],this._onChange.fire(m)}register(m){this._providers[m.version]=m}wcwidth(m){return this._activeProvider.wcwidth(m)}getStringCellWidth(m){let w=0,g=0;const l=m.length;for(let a=0;a<l;++a){let n=m.charCodeAt(a);if(55296<=n&&n<=56319){if(++a>=l)return w+this.wcwidth(n);const x=m.charCodeAt(a);56320<=x&&x<=57343?n=1024*(n-55296)+x-56320+65536:w+=this.wcwidth(x)}const c=this.charProperties(n,g);let v=h.extractWidth(c);h.extractShouldJoin(c)&&(v-=h.extractWidth(g)),w+=v,g=c}return w}charProperties(m,w){return this._activeProvider.charProperties(m,w)}}i.UnicodeService=h}},o={};function u(b){var i=o[b];if(i!==void 0)return i.exports;var r=o[b]={exports:{}};return s[b].call(r.exports,r,r.exports,u),r.exports}var d={};return(()=>{var b=d;Object.defineProperty(b,"__esModule",{value:!0}),b.Terminal=void 0;const i=u(9042),r=u(3236),f=u(844),p=u(5741),h=u(8285),_=u(7975),m=u(7090),w=["cols","rows"];class g extends f.Disposable{constructor(a){super(),this._core=this.register(new r.Terminal(a)),this._addonManager=this.register(new p.AddonManager),this._publicOptions={...this._core.options};const n=v=>this._core.options[v],c=(v,x)=>{this._checkReadonlyOptions(v),this._core.options[v]=x};for(const v in this._core.options){const x={get:n.bind(this,v),set:c.bind(this,v)};Object.defineProperty(this._publicOptions,v,x)}}_checkReadonlyOptions(a){if(w.includes(a))throw new Error(`Option "${a}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new _.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new m.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new h.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){const a=this._core.coreService.decPrivateModes;let n="none";switch(this._core.coreMouseService.activeProtocol){case"X10":n="x10";break;case"VT200":n="vt200";break;case"DRAG":n="drag";break;case"ANY":n="any"}return{applicationCursorKeysMode:a.applicationCursorKeys,applicationKeypadMode:a.applicationKeypad,bracketedPasteMode:a.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:n,originMode:a.origin,reverseWraparoundMode:a.reverseWraparound,sendFocusMode:a.sendFocus,wraparoundMode:a.wraparound}}get options(){return this._publicOptions}set options(a){for(const n in a)this._publicOptions[n]=a[n]}blur(){this._core.blur()}focus(){this._core.focus()}input(a,n=!0){this._core.input(a,n)}resize(a,n){this._verifyIntegers(a,n),this._core.resize(a,n)}open(a){this._core.open(a)}attachCustomKeyEventHandler(a){this._core.attachCustomKeyEventHandler(a)}attachCustomWheelEventHandler(a){this._core.attachCustomWheelEventHandler(a)}registerLinkProvider(a){return this._core.registerLinkProvider(a)}registerCharacterJoiner(a){return this._checkProposedApi(),this._core.registerCharacterJoiner(a)}deregisterCharacterJoiner(a){this._checkProposedApi(),this._core.deregisterCharacterJoiner(a)}registerMarker(a=0){return this._verifyIntegers(a),this._core.registerMarker(a)}registerDecoration(a){return this._checkProposedApi(),this._verifyPositiveIntegers(a.x??0,a.width??0,a.height??0),this._core.registerDecoration(a)}hasSelection(){return this._core.hasSelection()}select(a,n,c){this._verifyIntegers(a,n,c),this._core.select(a,n,c)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(a,n){this._verifyIntegers(a,n),this._core.selectLines(a,n)}dispose(){super.dispose()}scrollLines(a){this._verifyIntegers(a),this._core.scrollLines(a)}scrollPages(a){this._verifyIntegers(a),this._core.scrollPages(a)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(a){this._verifyIntegers(a),this._core.scrollToLine(a)}clear(){this._core.clear()}write(a,n){this._core.write(a,n)}writeln(a,n){this._core.write(a),this._core.write(`\r
`,n)}paste(a){this._core.paste(a)}refresh(a,n){this._verifyIntegers(a,n),this._core.refresh(a,n)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(a){this._addonManager.loadAddon(this,a)}static get strings(){return i}_verifyIntegers(...a){for(const n of a)if(n===1/0||isNaN(n)||n%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...a){for(const n of a)if(n&&(n===1/0||isNaN(n)||n%1!=0||n<0))throw new Error("This API only accepts positive integers")}}b.Terminal=g})(),d})()))})($r)),$r.exports}var Gg=Kg(),Hr={exports:{}},Vo;function Zg(){return Vo||(Vo=1,(function(e,t){(function(s,o){e.exports=o()})(self,(()=>(()=>{var s={};return(()=>{var o=s;Object.defineProperty(o,"__esModule",{value:!0}),o.FitAddon=void 0,o.FitAddon=class{activate(u){this._terminal=u}dispose(){}fit(){const u=this.proposeDimensions();if(!u||!this._terminal||isNaN(u.cols)||isNaN(u.rows))return;const d=this._terminal._core;this._terminal.rows===u.rows&&this._terminal.cols===u.cols||(d._renderService.clear(),this._terminal.resize(u.cols,u.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;const u=this._terminal._core,d=u._renderService.dimensions;if(d.css.cell.width===0||d.css.cell.height===0)return;const b=this._terminal.options.scrollback===0?0:u.viewport.scrollBarWidth,i=window.getComputedStyle(this._terminal.element.parentElement),r=parseInt(i.getPropertyValue("height")),f=Math.max(0,parseInt(i.getPropertyValue("width"))),p=window.getComputedStyle(this._terminal.element),h=r-(parseInt(p.getPropertyValue("padding-top"))+parseInt(p.getPropertyValue("padding-bottom"))),_=f-(parseInt(p.getPropertyValue("padding-right"))+parseInt(p.getPropertyValue("padding-left")))-b;return{cols:Math.max(2,Math.floor(_/d.css.cell.width)),rows:Math.max(1,Math.floor(h/d.css.cell.height))}}}})(),s})()))})(Hr)),Hr.exports}var Xg=Zg();const Yg={class:"min-h-screen bg-gradient-to-br from-slate-900 to-slate-800 p-4 md:p-6"},Jg={key:0,class:"fixed inset-0 bg-black/60 flex items-center justify-center z-50"},Qg={class:"bg-slate-800 rounded-lg shadow-2xl border border-slate-700 p-6 w-80"},e0={class:"text-slate-300 mb-4"},t0={class:"max-w-6xl mx-auto"},s0={class:"flex items-center justify-between mb-6"},i0={class:"flex items-center gap-4"},r0={class:"flex items-center gap-3 text-slate-400"},n0={class:"flex items-center gap-2"},o0={class:"text-sm"},a0={key:0,class:"mb-6"},l0={class:"bg-slate-800/50 backdrop-blur rounded-lg p-4 md:p-6 border border-slate-700"},c0={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 md:gap-6"},h0={class:"mt-6 flex flex-col sm:flex-row gap-3 md:gap-4"},u0=["disabled"],d0={key:1,class:"bg-black rounded-lg shadow-2xl border border-slate-700 overflow-hidden"},f0={class:"flex items-center justify-between px-4 py-2 bg-slate-800 border-b border-slate-700"},p0={class:"flex items-center gap-2"},m0={class:"text-sm text-slate-300"},_0={key:0,class:"px-4 py-1 bg-slate-900 border-t border-slate-700 flex items-center justify-between"},g0={class:"flex items-center gap-4"},v0={key:0,class:"text-slate-400 text-sm font-mono"},b0={class:"text-slate-500 text-xs"},w0={class:"px-4 py-3 md:px-6 md:py-4 bg-slate-800 border-t border-slate-700 flex flex-col md:flex-row items-start md:items-center justify-between gap-2"},y0={class:"text-sm md:text-base text-slate-500"},S0=ct({__name:"SshTerminal",setup(e){const t=fe(),s=fe(""),o=fe(!1),u=fe(""),d=fe(!1),b=fe(!1),i=fe("NORMAL"),r=fe(""),f=fe(""),p=fe(!1),h=Pe(()=>{switch(i.value){case"NORMAL":return"NORMAL";case"INSERT":return"INSERT";case"COMMAND":return"COMMAND";case"VISUAL":return"VISUAL";case"VISUAL_LINE":return"VISUAL LINE";case"VISUAL_BLOCK":return"VISUAL BLOCK";case"REPLACE":return"REPLACE";default:return"NORMAL"}}),_=Pe(()=>{switch(i.value){case"NORMAL":return"bg-blue-600 text-white";case"INSERT":return"bg-green-600 text-white";case"COMMAND":return"bg-yellow-600 text-black";case"VISUAL":case"VISUAL_LINE":case"VISUAL_BLOCK":return"bg-purple-600 text-white";case"REPLACE":return"bg-red-600 text-white";default:return"bg-blue-600 text-white"}}),m=fe({hostname:"",port:22,username:"",password:""}),w=Pe(()=>{const S="ws://127.0.0.1:8003/ws/ssh".split(",").map(T=>T.trim()).filter(T=>T);return S.length===0&&S.push("ws://127.0.0.1:8003/ws/ssh"),{defaultHost:"localhost",defaultPort:"22",websocketUrl:"ws://127.0.0.1:8003/ws/ssh",executeUrl:"wss://127.0.0.1:8003/ws/ssh/execute",websocketDomains:S}}),g=Pe(()=>m.value.hostname.trim()!==""&&m.value.username.trim()!==""&&m.value.password.trim()!=="");function l(){const U={hostname:m.value.hostname,port:m.value.port,username:m.value.username};localStorage.setItem("ssh_config",JSON.stringify(U))}function a(){const U=localStorage.getItem("ssh_config");if(U)try{const S=JSON.parse(U);m.value.hostname=S.hostname||m.value.hostname,m.value.port=S.port||m.value.port,m.value.username=S.username||m.value.username}catch(S){console.warn(":",S)}}function n(U){u.value=U,d.value=!0,setTimeout(()=>{d.value=!1},3e3)}async function c(){var U;if(!g.value){n("");return}l();try{if(o.value=!0,await cr(),!t.value)throw console.error(""),new Error("");await k()}catch(S){console.error("SSH:",S),o.value=!1;let T="SSH";S.message.includes("hostname")?T="":S.message.includes("username")?T="":S.message.includes("password")?T="":S.message.includes("Field required")?T="":S.message.includes("")?T="":S.message.includes("WebSocket")?T="":T=`${S.message}`,n(T);const K=(U=window.sshTerminalManager)==null?void 0:U.getTerminal();K?K.write(`\r
\x1B[31m${T}\x1B[0m\r
`):console.error(":",S.message)}}class v{constructor(S,T,K,Y,ne){this.mode="NORMAL",this.commandBuffer="",this.insertBuffer="",this.cursorLine=0,this.cursorCol=0,this.fileName="",this.filePath="",this.modified=!1,this.repeatCount=0,this.pendingOperator="",this.currentPath="",this.fileContent=[],this.originalContent=[],this.contentInitialized=!1,this.onModeChange=S,this.onCommandBufferChange=T,this.onModifiedChange=K,this.onSendToServer=Y,this.onTerminalWrite=ne}getMode(){return this.mode}setFileName(S){this.fileName=S}getFileName(){return this.fileName}setFilePath(S){this.filePath=S}getFilePath(){if(this.filePath)return this.filePath;if(this.currentPath&&this.fileName){const S=this.currentPath.endsWith("/")?"":"/";return`${this.currentPath}${S}${this.fileName}`}return this.fileName}setCurrentPath(S){this.currentPath=S}getCurrentPath(){return this.currentPath}isModified(){return this.modified}getCommandBuffer(){return this.commandBuffer}initContent(S){this.fileContent=S.split(`
`),this.originalContent=[...this.fileContent],this.modified=!1,this.contentInitialized=!0,this.cursorLine=0,this.cursorCol=0,this.onModifiedChange(!1),console.debug("[VIM] Content initialized, lines:",this.fileContent.length)}ensureContentInitialized(){(!this.contentInitialized||this.fileContent.length===0)&&(this.fileContent=[""],this.contentInitialized=!0,this.cursorLine=0,this.cursorCol=0,console.debug("[VIM] Content auto-initialized for new file"))}insertCharAtCursor(S){this.ensureContentInitialized(),this.cursorLine>=this.fileContent.length&&(this.cursorLine=this.fileContent.length-1),this.cursorLine<0&&(this.cursorLine=0);const T=this.fileContent[this.cursorLine]||"";this.cursorCol>T.length&&(this.cursorCol=T.length),this.cursorCol<0&&(this.cursorCol=0);const K=T.slice(0,this.cursorCol)+S+T.slice(this.cursorCol);this.fileContent[this.cursorLine]=K,this.cursorCol++,console.debug(`[VIM] Inserted char '${S}' at line ${this.cursorLine}, col ${this.cursorCol-1}`)}insertNewlineAtCursor(){this.ensureContentInitialized(),this.cursorLine>=this.fileContent.length&&(this.cursorLine=this.fileContent.length-1),this.cursorLine<0&&(this.cursorLine=0);const S=this.fileContent[this.cursorLine]||"";this.cursorCol>S.length&&(this.cursorCol=S.length),this.cursorCol<0&&(this.cursorCol=0);const T=S.slice(0,this.cursorCol),K=S.slice(this.cursorCol);this.fileContent[this.cursorLine]=T,this.fileContent.splice(this.cursorLine+1,0,K),this.cursorLine++,this.cursorCol=0,console.debug(`[VIM] Inserted newline, now at line ${this.cursorLine}`)}backspaceAtCursor(){if(this.ensureContentInitialized(),this.cursorLine>=this.fileContent.length&&(this.cursorLine=this.fileContent.length-1),this.cursorLine<0)return;const S=this.fileContent[this.cursorLine]||"";if(this.cursorCol>0){const T=S.slice(0,this.cursorCol-1)+S.slice(this.cursorCol);this.fileContent[this.cursorLine]=T,this.cursorCol--,console.debug(`[VIM] Backspace at line ${this.cursorLine}, col ${this.cursorCol}`)}else if(this.cursorLine>0){const T=this.fileContent[this.cursorLine-1]||"",K=T.length;this.fileContent[this.cursorLine-1]=T+S,this.fileContent.splice(this.cursorLine,1),this.cursorLine--,this.cursorCol=K,console.debug(`[VIM] Backspace merged lines, now at line ${this.cursorLine}, col ${this.cursorCol}`)}}getContent(){return this.fileContent.join(`
`)}hasUnsavedChanges(){return JSON.stringify(this.fileContent)!==JSON.stringify(this.originalContent)}markAsSaved(){this.originalContent=[...this.fileContent],this.modified=!1,this.onModifiedChange(!1)}reset(){this.mode="NORMAL",this.commandBuffer="",this.insertBuffer="",this.fileName="",this.filePath="",this.modified=!1,this.repeatCount=0,this.pendingOperator="",this.fileContent=[],this.originalContent=[],this.contentInitialized=!1,this.cursorLine=0,this.cursorCol=0,this.onModeChange("NORMAL"),this.onCommandBufferChange(""),this.onModifiedChange(!1)}switchMode(S){const T=this.mode;this.mode=S,this.onModeChange(S),T==="INSERT"&&S==="NORMAL"&&this.insertBuffer&&(this.onSendToServer("vim_command",{action:"insert_text",text:this.insertBuffer}),this.insertBuffer=""),console.debug(`[VIM] Mode: ${T} -> ${S}`)}handleInput(S){switch(console.debug(`[VIM] Input: mode=${this.mode}, data=${JSON.stringify(S)}`),this.mode){case"NORMAL":return this.handleNormalMode(S);case"INSERT":return this.handleInsertMode(S);case"COMMAND":return this.handleCommandMode(S);case"VISUAL":case"VISUAL_LINE":case"VISUAL_BLOCK":return this.handleVisualMode(S);case"REPLACE":return this.handleReplaceMode(S);default:return!1}}parseAndExecuteCommand(S){S=S.trim();const T=["wq","wq!","x","x!","wqa","wqa!"];if(this.isSaveCommand(S)){const K=T.some(Y=>S===Y||S.startsWith(Y+" "));this.handleSaveCommand(S,K);return}if(this.isExitCommand(S)){const K=S.includes("!");this.handleExitCommand(S,K);return}this.onSendToServer("vim_command",{action:"ex_command",command:S,currentPath:this.currentPath})}isSaveCommand(S){return/^w($|!|\s)/.test(S)||/^wq($|!)/.test(S)||/^x($|!)/.test(S)||/^wqa($|!)/.test(S)}isExitCommand(S){return/^q($|!|a|a!)/.test(S)}handleSaveCommand(S,T=!1){const K=S.includes("!");let Y=this.fileName,ne=this.getFilePath();const ae=S.match(/^w\s+(.+)$/);if(ae)if(Y=ae[1].trim(),this.currentPath){const W=this.currentPath.endsWith("/")?"":"/";ne=`${this.currentPath}${W}${Y}`}else ne=Y;if((S==="x"||S==="x!")&&!this.hasUnsavedChanges()){T&&this.onSendToServer("vim_command",{action:"exit_vim",command:S,forceQuit:!0,currentPath:this.currentPath});return}this.onSendToServer("vim_command",{action:"save_with_content",command:S,fileName:Y,filePath:ne,content:this.getContent(),encoding:"utf-8",createBackup:!K,lineEnding:"unix",currentPath:this.currentPath,alsoQuit:T})}handleExitCommand(S,T=!1){if(!T&&this.hasUnsavedChanges()){this.onTerminalWrite(`\r
E37: No write since last change (add ! to override)\r
`);return}this.onSendToServer("vim_command",{action:"exit_vim",command:S,forceQuit:T,currentPath:this.currentPath})}handleSaveResult(S){S.success?(this.markAsSaved(),this.onTerminalWrite(`\r
"${S.fileName}" ${S.bytesWritten||0}B written\r
`),S.alsoQuit&&S.prompt&&(this.reset(),this.onTerminalWrite(S.prompt))):this.onTerminalWrite(`\r
E212: ${S.error||"Can't open file for writing"}\r
`)}handleExitResult(S){S.success?(this.reset(),S.prompt&&this.onTerminalWrite(S.prompt)):this.onTerminalWrite(`\r
${S.error||"Cannot exit"}\r
`)}handleError(S){const K={E212:"Can't open file for writing",E37:"No write since last change (add ! to override)",E32:"No file name",E45:"'readonly' option is set (add ! to override)"}[S.code]||S.message;this.onTerminalWrite(`\r
${S.code}: ${K}\r
`)}handleNormalMode(S){if(S==="\x1B")return this.pendingOperator="",this.repeatCount=0,!0;if(S>="1"&&S<="9")return this.repeatCount=this.repeatCount*10+parseInt(S),!0;if(S==="0"&&this.repeatCount>0)return this.repeatCount=this.repeatCount*10,!0;const T=this.repeatCount||1;if(this.repeatCount=0,S==="i")return this.switchMode("INSERT"),this.onSendToServer("vim_command",{action:"enter_insert",position:"before"}),!0;if(S==="I")return this.switchMode("INSERT"),this.onSendToServer("vim_command",{action:"enter_insert",position:"line_start"}),!0;if(S==="a")return this.switchMode("INSERT"),this.onSendToServer("vim_command",{action:"enter_insert",position:"after"}),!0;if(S==="A")return this.switchMode("INSERT"),this.onSendToServer("vim_command",{action:"enter_insert",position:"line_end"}),!0;if(S==="o")return this.switchMode("INSERT"),this.onSendToServer("vim_command",{action:"enter_insert",position:"new_line_below"}),!0;if(S==="O")return this.switchMode("INSERT"),this.onSendToServer("vim_command",{action:"enter_insert",position:"new_line_above"}),!0;if(S==="R")return this.switchMode("REPLACE"),this.onSendToServer("vim_command",{action:"enter_replace"}),!0;if(S==="v")return this.switchMode("VISUAL"),this.onSendToServer("vim_command",{action:"enter_visual",type:"char"}),!0;if(S==="V")return this.switchMode("VISUAL_LINE"),this.onSendToServer("vim_command",{action:"enter_visual",type:"line"}),!0;if(S==="")return this.switchMode("VISUAL_BLOCK"),this.onSendToServer("vim_command",{action:"enter_visual",type:"block"}),!0;if(S===":")return this.switchMode("COMMAND"),this.commandBuffer=":",this.onCommandBufferChange(":"),!0;if(S==="h"||S==="\x1B[D")return this.onSendToServer("vim_command",{action:"move",direction:"left",count:T}),!0;if(S==="j"||S==="\x1B[B")return this.onSendToServer("vim_command",{action:"move",direction:"down",count:T}),!0;if(S==="k"||S==="\x1B[A")return this.onSendToServer("vim_command",{action:"move",direction:"up",count:T}),!0;if(S==="l"||S==="\x1B[C")return this.onSendToServer("vim_command",{action:"move",direction:"right",count:T}),!0;if(S==="w")return this.onSendToServer("vim_command",{action:"move",direction:"word_next",count:T}),!0;if(S==="b")return this.onSendToServer("vim_command",{action:"move",direction:"word_prev",count:T}),!0;if(S==="e")return this.onSendToServer("vim_command",{action:"move",direction:"word_end",count:T}),!0;if(S==="0"&&this.repeatCount===0)return this.onSendToServer("vim_command",{action:"move",direction:"line_start"}),!0;if(S==="$")return this.onSendToServer("vim_command",{action:"move",direction:"line_end"}),!0;if(S==="^")return this.onSendToServer("vim_command",{action:"move",direction:"line_first_char"}),!0;if(S==="G")return this.onSendToServer("vim_command",{action:"move",direction:"file_end",line:T>1?T:void 0}),!0;if(S==="g")return this.pendingOperator="g",!0;if(this.pendingOperator==="g"&&S==="g")return this.pendingOperator="",this.onSendToServer("vim_command",{action:"move",direction:"file_start"}),!0;if(S==="x")return this.onSendToServer("vim_command",{action:"delete",target:"char",count:T}),this.modified=!0,this.onModifiedChange(!0),!0;if(S==="X")return this.onSendToServer("vim_command",{action:"delete",target:"char_before",count:T}),this.modified=!0,this.onModifiedChange(!0),!0;if(S==="d")return this.pendingOperator="d",!0;if(S==="y")return this.pendingOperator="y",!0;if(S==="c")return this.pendingOperator="c",!0;if(S==="p")return this.onSendToServer("vim_command",{action:"paste",position:"after",count:T}),this.modified=!0,this.onModifiedChange(!0),!0;if(S==="P")return this.onSendToServer("vim_command",{action:"paste",position:"before",count:T}),this.modified=!0,this.onModifiedChange(!0),!0;if(S==="u")return this.onSendToServer("vim_command",{action:"undo",count:T}),!0;if(S==="")return this.onSendToServer("vim_command",{action:"redo",count:T}),!0;if(S===".")return this.onSendToServer("vim_command",{action:"repeat",count:T}),!0;if(this.pendingOperator){const K=this.pendingOperator;if(this.pendingOperator="",S===K){const ne=K==="d"?"delete":K==="y"?"yank":"change";return this.onSendToServer("vim_command",{action:ne,target:"line",count:T}),K!=="y"&&(this.modified=!0,this.onModifiedChange(!0)),K==="c"&&this.switchMode("INSERT"),!0}const Y={w:"word_next",b:"word_prev",e:"word_end",$:"line_end",0:"line_start","^":"line_first_char"};if(Y[S]){const ne=K==="d"?"delete":K==="y"?"yank":"change";return this.onSendToServer("vim_command",{action:ne,target:Y[S],count:T}),K!=="y"&&(this.modified=!0,this.onModifiedChange(!0)),K==="c"&&this.switchMode("INSERT"),!0}}if(this.pendingOperator==="Z"){if(S==="Z")return this.pendingOperator="",this.handleSaveCommand("wq",!0),!0;if(S==="Q")return this.pendingOperator="",this.handleExitCommand("q!",!0),!0;this.pendingOperator=""}return S==="Z"?(this.pendingOperator="Z",!0):S==="/"?(this.switchMode("COMMAND"),this.commandBuffer="/",this.onCommandBufferChange("/"),this.onTerminalWrite(`\r
/`),!0):S==="?"?(this.switchMode("COMMAND"),this.commandBuffer="?",this.onCommandBufferChange("?"),this.onTerminalWrite(`\r
?`),!0):S==="n"?(this.onSendToServer("vim_command",{action:"search_next",count:T}),!0):S==="N"?(this.onSendToServer("vim_command",{action:"search_prev",count:T}),!0):!1}handleInsertMode(S){return S==="\x1B"?(this.insertBuffer&&(this.onSendToServer("vim_command",{action:"insert_text",text:this.insertBuffer}),this.insertBuffer=""),this.switchMode("NORMAL"),this.onSendToServer("vim_command",{action:"exit_insert"}),!0):S===""||S==="\b"?(this.insertBuffer.length>0&&(this.insertBuffer=this.insertBuffer.slice(0,-1)),this.backspaceAtCursor(),this.onSendToServer("vim_command",{action:"backspace"}),this.onTerminalWrite("\b \b"),this.modified=!0,this.onModifiedChange(!0),!0):S==="\r"||S===`
`?(this.insertBuffer+=`
`,this.insertNewlineAtCursor(),this.onSendToServer("vim_command",{action:"newline"}),this.onTerminalWrite(`\r
`),this.modified=!0,this.onModifiedChange(!0),!0):S>=" "&&S<="~"?(this.insertBuffer+=S,this.insertCharAtCursor(S),this.onSendToServer("vim_command",{action:"insert_char",char:S}),this.onTerminalWrite(S),this.modified=!0,this.onModifiedChange(!0),!0):!1}handleCommandMode(S){if(S==="\x1B")return this.switchMode("NORMAL"),this.commandBuffer="",this.onCommandBufferChange(""),!0;if(S==="\r"||S===`
`){const T=this.commandBuffer,K=T.startsWith(":")?T.slice(1):T;return this.switchMode("NORMAL"),this.commandBuffer="",this.onCommandBufferChange(""),T.startsWith("/")||T.startsWith("?")?this.onSendToServer("vim_command",{action:"search",pattern:K,direction:T[0]==="/"?"forward":"backward"}):K&&this.parseAndExecuteCommand(K),!0}return S===""||S==="\b"?(this.commandBuffer.length>0&&(this.commandBuffer=this.commandBuffer.slice(0,-1),this.onCommandBufferChange(this.commandBuffer)),!0):S>=" "&&S<="~"?(this.commandBuffer+=S,this.onCommandBufferChange(this.commandBuffer),!0):!1}handleVisualMode(S){return S==="\x1B"||S==="v"||S==="V"?(this.switchMode("NORMAL"),this.onSendToServer("vim_command",{action:"exit_visual"}),!0):S==="h"||S==="\x1B[D"?(this.onSendToServer("vim_command",{action:"visual_move",direction:"left"}),!0):S==="j"||S==="\x1B[B"?(this.onSendToServer("vim_command",{action:"visual_move",direction:"down"}),!0):S==="k"||S==="\x1B[A"?(this.onSendToServer("vim_command",{action:"visual_move",direction:"up"}),!0):S==="l"||S==="\x1B[C"?(this.onSendToServer("vim_command",{action:"visual_move",direction:"right"}),!0):S==="d"||S==="x"?(this.onSendToServer("vim_command",{action:"visual_delete"}),this.switchMode("NORMAL"),this.modified=!0,this.onModifiedChange(!0),!0):S==="y"?(this.onSendToServer("vim_command",{action:"visual_yank"}),this.switchMode("NORMAL"),!0):S==="c"?(this.onSendToServer("vim_command",{action:"visual_change"}),this.switchMode("INSERT"),this.modified=!0,this.onModifiedChange(!0),!0):!1}handleReplaceMode(S){return S==="\x1B"?(this.switchMode("NORMAL"),this.onSendToServer("vim_command",{action:"exit_replace"}),!0):S>=" "&&S<="~"?(this.onSendToServer("vim_command",{action:"replace_char",char:S}),this.onTerminalWrite(S),this.modified=!0,this.onModifiedChange(!0),!0):!1}}class x{constructor(S,T,K,Y,ne=[],ae){this.ws=null,this.terminal=null,this.fitAddon=null,this.sessionId=null,this.terminalContainer=null,this.connectionConfig=null,this.isConnecting=!1,this.websocketDomains=[],this.currentDomainIndex=0,this.commandHistory=[],this.historyIndex=-1,this.currentInput="",this.inputBuffer="",this.currentWorkingDirectory="~",this.lastPrompt="",this.vimEditor=null,this.isVimMode=!1,this.vimFileName="",this.onVimModeChange=null,this.onVimModeUpdate=null,this.onVimCommandBufferChange=null,this.onVimFileNameChange=null,this.onVimModifiedChange=null,this.terminalContainer=S,this.connectionConfig=T,this.onConnectionChange=K,this.onError=Y,this.websocketDomains=ne,ae&&(this.onVimModeChange=ae.onVimModeChange||null,this.onVimModeUpdate=ae.onVimModeUpdate||null,this.onVimCommandBufferChange=ae.onVimCommandBufferChange||null,this.onVimFileNameChange=ae.onVimFileNameChange||null,this.onVimModifiedChange=ae.onVimModifiedChange||null),this.websocketDomains.length===0&&this.websocketDomains.push("ws://127.0.0.1:8003/ws/ssh"),this.connect()}setVimCallbacks(S){this.onVimModeChange=S.onVimModeChange||null,this.onVimModeUpdate=S.onVimModeUpdate||null,this.onVimCommandBufferChange=S.onVimCommandBufferChange||null,this.onVimFileNameChange=S.onVimFileNameChange||null,this.onVimModifiedChange=S.onVimModifiedChange||null}enterVimMode(S=""){this.isVimMode||(this.isVimMode=!0,this.vimFileName=S,this.vimEditor=new v(T=>{this.onVimModeUpdate&&this.onVimModeUpdate(T)},T=>{this.onVimCommandBufferChange&&this.onVimCommandBufferChange(T)},T=>{this.onVimModifiedChange&&this.onVimModifiedChange(T)},(T,K)=>{this.sendVimCommand(T,K)},T=>{this.terminal&&this.terminal.write(T)}),this.vimEditor.setFileName(S),this.onVimModeChange&&this.onVimModeChange(!0),this.onVimFileNameChange&&this.onVimFileNameChange(S),this.onVimModeUpdate&&this.onVimModeUpdate("NORMAL"),console.debug("[VIM] Entered VIM mode, file:",S))}exitVimMode(){this.isVimMode&&(this.isVimMode=!1,this.vimFileName="",this.vimEditor&&(this.vimEditor.reset(),this.vimEditor=null),this.onVimModeChange&&this.onVimModeChange(!1),this.onVimFileNameChange&&this.onVimFileNameChange(""),this.onVimCommandBufferChange&&this.onVimCommandBufferChange(""),this.onVimModifiedChange&&this.onVimModifiedChange(!1),console.debug("[VIM] Exited VIM mode"))}sendVimCommand(S,T){if(!this.ws||this.ws.readyState!==WebSocket.OPEN){console.warn("[VIM] Cannot send command - WebSocket not ready");return}this.vimEditor&&this.vimEditor.setCurrentPath(this.currentWorkingDirectory||"~"),this.ws.send(JSON.stringify({type:"vim_command",data:{...T,currentPath:this.currentWorkingDirectory||"~",fileName:this.vimFileName}})),console.debug("[VIM] Sent vim_command:",T)}isVimStartCommand(S){const T=S.trim(),K=T.match(/^(vim|vi|nvim)\s+(.+)$/);return K?{isVim:!0,fileName:K[2].trim()}:/^(vim|vi|nvim)\s*$/.test(T)?{isVim:!0,fileName:""}:{isVim:!1,fileName:""}}isInVimMode(){return this.isVimMode}getVimEditor(){return this.vimEditor}initTerminal(){if(console.debug("initTerminal called"),!this.terminalContainer){console.debug("terminalContainer not found, returning");return}console.debug("terminalContainer found, initializing terminal"),this.terminal=new Gg.Terminal({theme:{background:"#0a0e27",foreground:"#98d1ce",cursor:"#98d1ce",cursorAccent:"#0a0e27",selection:"#2d3b55",black:"#0a0e27",red:"#ff5c57",green:"#5af78e",yellow:"#f3f99d",blue:"#57c7ff",magenta:"#ff6ac1",cyan:"#9aedfe",white:"#f8f8f2",brightBlack:"#6272a4",brightRed:"#ff6e67",brightGreen:"#69ff94",brightYellow:"#ffffa5",brightBlue:"#d6acff",brightMagenta:"#ff92df",brightCyan:"#a4ffff",brightWhite:"#ffffff"},fontSize:14,fontFamily:'Consolas, "Courier New", monospace',cursorBlink:!0,allowTransparency:!1,disableStdin:!1,allowProposedApi:!1,rendererType:"canvas",convertEol:!0,rows:24,cols:120,scrollback:1e3,tabStopWidth:8}),this.fitAddon=new Xg.FitAddon,this.terminal.loadAddon(this.fitAddon),console.debug("Opening terminal with container:",this.terminalContainer),this.terminal.open(this.terminalContainer),console.debug("Terminal opened successfully"),this.fitAddon.fit(),console.debug("Terminal dimensions after fit:",{cols:this.terminal.cols,rows:this.terminal.rows}),setTimeout(()=>{var S;try{(S=this.terminal)==null||S.focus(),console.debug("Terminal focused in setTimeout")}catch(T){console.warn(":",T)}},100),this.terminal.write(`\x1B[1;32mSSH v3.0\x1B[0m\r
`),this.terminal.write(` \x1B[33mhelp\x1B[0m \r
\r
`),this.inputBuffer="",this.commandHistory=[],this.historyIndex=-1,this.currentInput="",this.terminal.onData(S=>{try{if(console.debug("Terminal onData received:",JSON.stringify(S)),!this.ws||this.ws.readyState!==WebSocket.OPEN){console.debug("Cannot process input - WebSocket not ready");return}if(this.isVimMode&&this.vimEditor){console.debug("[VIM] Processing input in VIM mode:",JSON.stringify(S)),this.vimEditor.setCurrentPath(this.currentWorkingDirectory||"~");const T=this.vimEditor.getMode(),K=this.vimEditor.getCommandBuffer(),Y=K.startsWith(":")?K.slice(1):K;if((S==="\r"||S===`
`)&&T==="COMMAND"){const ae=["q","q!","wq","wq!","x","x!","qa","qa!","wqa","wqa!"],W=["w","w!"];if(ae.includes(Y)){console.debug("[VIM] Exit/Save command detected:",Y),this.vimEditor.handleInput(S);return}if(W.includes(Y)||Y.startsWith("w ")){console.debug("[VIM] Save command detected:",Y),this.vimEditor.handleInput(S);return}}this.vimEditor.handleInput(S)?console.debug("[VIM] Input handled by VIM editor"):(console.debug("[VIM] Input not handled, forwarding to server"),this.ws.send(JSON.stringify({type:"vim_command",data:{action:"raw_input",input:S,currentPath:this.currentWorkingDirectory||"~",fileName:this.vimFileName}})));return}switch(S){case"\r":case`
`:console.debug("Enter key pressed, processing command"),this.inputBuffer.trim()&&this.commandHistory[this.commandHistory.length-1]!==this.inputBuffer&&(this.commandHistory.push(this.inputBuffer),this.commandHistory.length>50&&this.commandHistory.shift());const T=this.inputBuffer.trim();if(T==="clear"){console.debug("Local clear command detected"),this.terminal.write(`\r
`),this.handleLocalClear(),this.inputBuffer="",this.historyIndex=-1,this.currentInput="";break}const K=this.isVimStartCommand(T);if(K.isVim){console.debug("[VIM] VIM start command detected:",T),this.enterVimMode(K.fileName),this.ws.send(JSON.stringify({type:"command",data:{command:this.inputBuffer+`
`,currentPath:this.currentWorkingDirectory||"~"}})),this.inputBuffer="",this.historyIndex=-1,this.currentInput="",this.terminal.write(`\r
`);break}console.debug("Sending command to server:",this.inputBuffer),this.ws.send(JSON.stringify({type:"command",data:{command:this.inputBuffer+`
`,currentPath:this.currentWorkingDirectory||"~"}})),console.debug("Command sent to server with current path:",this.currentWorkingDirectory),this.inputBuffer="",this.historyIndex=-1,this.currentInput="",this.terminal.write(`\r
`);break;case"":case"\b":console.debug("Backspace key pressed"),this.inputBuffer.length>0&&(this.inputBuffer=this.inputBuffer.slice(0,-1),this.terminal.write("\b \b"));break;case"":console.debug("Ctrl+C pressed"),this.ws.send(JSON.stringify({type:"interrupt",data:{signal:"SIGINT",currentPath:this.currentWorkingDirectory||"~"}})),this.inputBuffer="",this.historyIndex=-1,this.currentInput="";break;case"\x1B[A":console.debug("Up arrow pressed"),this.handleUpArrow();break;case"\x1B[B":console.debug("Down arrow pressed"),this.handleDownArrow();break;case"	":console.debug("Tab key pressed"),this.handleTabCompletion();break;case"\x1B[C":case"\x1B[D":console.debug("Arrow key pressed, local handling");break;default:S>=" "&&S<="~"?(console.debug("Regular character input:",S),this.inputBuffer+=S,this.terminal.write(S),this.historyIndex=-1):(console.debug("Other control character:",JSON.stringify(S)),S===""?this.ws.send(JSON.stringify({type:"eof",data:{currentPath:this.currentWorkingDirectory||"~"}})):console.debug("Control character ignored:",JSON.stringify(S)))}}catch(T){console.warn(":",T)}}),window.addEventListener("resize",()=>{this.resizeTerminal()})}resizeTerminal(){var S,T,K;try{if(console.debug("resizeTerminal called"),this.fitAddon&&(console.debug("Fitting terminal with fitAddon"),this.fitAddon.fit(),console.debug("Terminal fitted, new dimensions:",{cols:(S=this.terminal)==null?void 0:S.cols,rows:(T=this.terminal)==null?void 0:T.rows})),this.ws&&this.ws.readyState===WebSocket.OPEN&&this.terminal){const Y=this.terminal.cols,ne=this.terminal.rows;console.debug("Sending resize message to backend:",{width:Y,height:ne}),this.ws.send(JSON.stringify({type:"resize",data:{width:Y,height:ne,currentPath:this.currentWorkingDirectory||"~"}})),console.debug("Resize message sent successfully")}else console.debug("Cannot send resize message - conditions not met:",{wsExists:!!this.ws,wsOpen:((K=this.ws)==null?void 0:K.readyState)===WebSocket.OPEN,terminalExists:!!this.terminal})}catch(Y){console.warn(":",Y)}}handleUpArrow(){this.commandHistory.length!==0&&(this.historyIndex===-1?(this.currentInput=this.inputBuffer,this.historyIndex=this.commandHistory.length-1):this.historyIndex>0&&this.historyIndex--,this.displayHistoryCommand())}handleDownArrow(){var S,T;if(!(this.commandHistory.length===0||this.historyIndex===-1))if(this.historyIndex<this.commandHistory.length-1)this.historyIndex++,this.displayHistoryCommand();else{this.historyIndex=-1;const K=this.inputBuffer;this.inputBuffer=this.currentInput;const Y="\b \b".repeat(K.length);(S=this.terminal)==null||S.write(Y),(T=this.terminal)==null||T.write(this.inputBuffer)}}handleTabCompletion(){var S;(S=this.ws)==null||S.send(JSON.stringify({type:"tab_complete",data:{command:this.inputBuffer,currentPath:this.currentWorkingDirectory||"~"}}))}handleTabCompletionResponse(S){let T=S.options||[];const K=S.base||"";if(!Array.isArray(T)){console.warn("Invalid tab completion options - not an array:",T);return}if(T=T.filter(Y=>!(typeof Y!="string"||Y.includes("Expanded Security Maintenance"))),T.length!==0){if(T.length===1){const Y=T[0];if(this.inputBuffer.endsWith(K)){const ae=(K.length>0?this.inputBuffer.slice(0,-K.length):this.inputBuffer)+Y;this.replaceCurrentCommand(ae),this.inputBuffer=ae}else this.replaceCurrentCommand(Y),this.inputBuffer=Y}else if(this.terminal){const Y=this.inputBuffer;this.terminal.write(`\r
`),this.terminal.write(T.join("  ")),this.terminal.write(`\r
`),this.terminal.write(Y)}}}displayHistoryCommand(){if(this.historyIndex>=0&&this.historyIndex<this.commandHistory.length){const S=this.commandHistory[this.historyIndex];this.replaceCurrentCommand(S),this.inputBuffer=S}}displayCurrentInput(){var S,T;(S=this.terminal)==null||S.write("\r\x1B[K"),(T=this.terminal)==null||T.write(this.inputBuffer)}replaceCurrentCommand(S){var K,Y;const T="\b \b".repeat(this.inputBuffer.length);(K=this.terminal)==null||K.write(T),(Y=this.terminal)==null||Y.write(S)}handleLocalClear(){if(this.terminal)try{this.terminal.clear(),this.lastPrompt&&this.terminal.write(this.lastPrompt)}catch(S){console.warn(":",S)}}log(S){try{console.debug("Log function called with message:",S),console.debug("Terminal exists:",!!this.terminal),this.terminal?(this.terminal.write(`\r
\x1B[33m${S}\x1B[0m\r
`),console.debug("Message written to terminal")):console.debug("Terminal not found, cannot write message")}catch(T){console.warn(":",T)}}async connect(){if(!this.isConnecting)return this.isConnecting=!0,console.debug("SSH connect method called"),new Promise((S,T)=>{if(!this.terminalContainer){console.debug("Terminal container not found"),T(new Error(""));return}console.debug("Initializing terminal before connection"),this.initTerminal(),console.debug("Terminal initialized, starting WebSocket connection");const K=()=>{if(this.currentDomainIndex>=this.websocketDomains.length){this.isConnecting=!1,T(new Error("SSH"));return}const Y=this.websocketDomains[this.currentDomainIndex];this.currentDomainIndex++,this.log("..."),this.ws=new WebSocket(Y),this.ws.onopen=()=>{var ne,ae,W,L,ee;console.log("WebSocket:",Y),this.log("SSH..."),(ee=this.ws)==null||ee.send(JSON.stringify({type:"connect",data:{...this.connectionConfig,currentPath:this.currentWorkingDirectory||"~",cols:((ne=this.terminal)==null?void 0:ne.cols)||120,rows:((ae=this.terminal)==null?void 0:ae.rows)||24,width:((W=this.terminal)==null?void 0:W.cols)||120,height:((L=this.terminal)==null?void 0:L.rows)||24}}))},this.ws.onmessage=ne=>{try{const ae=JSON.parse(ne.data);switch(console.debug("WebSocket message received:",ae),console.debug("Message type:",ae.type),console.debug("Message data:",ae.data),ae.type){case"vim_save_result":console.debug("[VIM] Save result received:",ae.data),this.vimEditor&&(this.vimEditor.handleSaveResult(ae.data),ae.data.success&&ae.data.alsoQuit&&this.exitVimMode());break;case"vim_exit_result":console.debug("[VIM] Exit result received:",ae.data),this.vimEditor&&(this.vimEditor.handleExitResult(ae.data),ae.data.success&&this.exitVimMode());break;case"vim_file_content":console.debug("[VIM] File content received:",ae.data),this.vimEditor&&(this.vimEditor.setFileName(ae.data.fileName),this.vimEditor.setFilePath(ae.data.filePath),this.vimEditor.initContent(ae.data.content||""));break;case"vim_error":console.debug("[VIM] Error received:",ae.data),this.vimEditor&&this.vimEditor.handleError(ae.data);break;case"connected":if(this.sessionId=ae.session_id,this.onConnectionChange(!0),console.debug("Connected message received, terminal exists:",!!this.terminal),console.debug("Terminal container exists:",!!this.terminalContainer),console.debug("Terminal container element:",this.terminalContainer),ae.data?this.extractAndUpdatePath(ae.data,"connected")||(this.currentWorkingDirectory="~",console.debug("No valid initial path from server, using default: ~")):(this.currentWorkingDirectory="~",console.debug("No data in connected message, using default: ~")),console.debug("Initial working directory set to:",this.currentWorkingDirectory),this.terminal){console.debug("Terminal instance exists, checking focus");try{this.terminal.focus(),console.debug("Terminal focused successfully")}catch(L){console.debug("Error focusing terminal:",L)}}else console.debug("Terminal instance not found, cannot focus");this.log("SSH"),this.isConnecting=!1,setTimeout(()=>{this.resizeTerminal()},100),S();break;case"welcome":case"banner":case"motd":console.debug("Welcome/banner message received:",ae.type),this.terminal&&ae.data&&(console.debug("Writing welcome message to terminal"),this.terminal.write(ae.data));break;case"tab_completion_options":this.handleTabCompletionResponse(ae.data);break;case"ls_output":console.debug("=== LS_OUTPUT MESSAGE START ===");try{if(ae.data&&(this.extractAndUpdatePath(ae.data,"ls_output"),ae.data.prompt&&(this.lastPrompt=ae.data.prompt)),this.terminal){const L=B(ae.data,this.terminal);this.terminal.write(L)}else console.error("TERMINAL NOT FOUND - cannot write ls output!")}catch(L){console.error("LS :",L),this.terminal&&ae.data&&this.terminal.write(JSON.stringify(ae.data))}console.debug("=== LS_OUTPUT MESSAGE END ===");break;case"output":case"data":console.debug("=== OUTPUT/DATA MESSAGE START ===");try{if(ae.data&&typeof ae.data=="object"&&this.extractAndUpdatePath(ae.data,"output"),this.terminal){let L="";if(typeof ae.data=="object"&&ae.data!==null?L=ae.data.output||ae.data.data||"":L=ae.data||ae.output||"",typeof L=="string"){L=L.replace(/Expanded Security Maintenance for Applications is not enabled\.\s*/g,"");const ee=L.match(/(\([^)]+\)\s+)?[\w-]+@[\w.-]+:[^\$#]*[\$#]\s*$/);ee&&(this.lastPrompt=ee[0])}L&&this.terminal.write(L)}else console.debug("TERMINAL NOT FOUND - cannot write output!")}catch(L){console.error(":",L)}console.debug("=== OUTPUT/DATA MESSAGE END ===");break;case"error":const W=ae.message||"";this.onError(W);try{this.terminal&&this.terminal.write(`\r
\x1B[31m: ${W}\x1B[0m\r
`)}catch(L){console.warn(":",L)}this.isConnecting=!1,T(new Error(W));break;case"completed":this.log(`: ${ae.exit_code}`),ae.data&&this.extractAndUpdatePath(ae.data,"completed");break;case"cd_result":console.debug("CD result received:",ae.data),ae.data&&this.extractAndUpdatePath(ae.data,"cd_result")&&console.debug("Path updated from cd_result to:",this.currentWorkingDirectory);break;case"path_changed":console.debug("Path changed notification received:",ae.data),ae.data&&(this.extractAndUpdatePath(ae.data,"path_changed")?console.debug("Working directory updated to:",this.currentWorkingDirectory):console.warn("path_changed: Failed to update path from:",ae.data));break;case"disconnected":this.onConnectionChange(!1),this.log("SSH");break;default:console.debug("Unknown message type received:",ae.type),console.debug("Full message:",ae);break}}catch(ae){console.error(":",ae),this.onError(""),this.isConnecting=!1}},this.ws.onerror=ne=>{console.error(`WebSocket (${Y}):`,ne),this.log(`... (${this.currentDomainIndex}/${this.websocketDomains.length})`),this.ws&&(this.ws.close(),this.ws=null),setTimeout(K,500)},this.ws.onclose=()=>{console.log(`WebSocket (${Y})`),this.isConnecting?(this.log(`... (${this.currentDomainIndex}/${this.websocketDomains.length})`),setTimeout(K,500)):(this.onConnectionChange(!1),this.log(""))},setTimeout(()=>{var ne;((ne=this.ws)==null?void 0:ne.readyState)!==WebSocket.OPEN&&this.isConnecting&&(console.log(` (${Y})`),this.log(`... (${this.currentDomainIndex}/${this.websocketDomains.length})`),this.ws&&(this.ws.close(),this.ws=null),K())},1e4)};K()})}disconnect(){try{this.ws&&this.ws.readyState===WebSocket.OPEN&&this.ws.send(JSON.stringify({type:"disconnect",data:{currentPath:this.currentWorkingDirectory||"~"}})),this.ws&&(this.ws.close(),this.ws=null),this.terminal&&(this.terminal.dispose(),this.terminal=null),this.onConnectionChange(!1)}catch(S){console.warn(":",S)}}getTerminal(){return this.terminal}getCurrentWorkingDirectory(){return this.currentWorkingDirectory}setCurrentWorkingDirectory(S){this.currentWorkingDirectory=S,console.debug("Working directory manually set to:",S)}updateCurrentPathFromServer(S,T="unknown"){try{if(typeof S!="string")return console.debug(`[PATH-UPDATE] ${T}: :`,typeof S,S),!1;const K=S.trim();if(K==="")return console.debug(`[PATH-UPDATE] ${T}: `),!1;if(!K.startsWith("/")&&!K.startsWith("~"))return console.debug(`[PATH-UPDATE] ${T}: :`,K),!1;if(K.length>4096)return console.debug(`[PATH-UPDATE] ${T}: :`,K.length),!1;if(K===this.currentWorkingDirectory)return console.debug(`[PATH-UPDATE] ${T}: :`,K),!0;const Y=this.currentWorkingDirectory;return this.currentWorkingDirectory=K,console.debug(`[PATH-UPDATE] ${T}:  "${Y}" -> "${K}"`),!0}catch(K){return console.warn(`[PATH-UPDATE] ${T}: :`,K),!1}}extractAndUpdatePath(S,T="unknown"){if(!S||typeof S!="object")return!1;const K=["currentPath","newPath","path","initialPath"];for(const Y of K)if(S[Y]!==void 0&&S[Y]!==null&&this.updateCurrentPathFromServer(S[Y],`${T}.${Y}`))return!0;return!1}isSimpleLsOutput(S){const T=S.trim().split(`
`);if(T.length===0)return!1;for(const K of T){const Y=K.trim();if(Y!==""&&(Y.includes("\x1B[")||Y.includes("\x1B[")||Y.includes("  ")||Y.includes("	")))return!1}return!0}formatSimpleLsOutput(S){const T=S.trim().split(`
`).filter(ee=>ee.trim()!=="");if(T.length===0)return S;const Y=Math.max(...T.map(ee=>ee.trim().length))+2,ae=Math.floor(120/Y),W=Math.max(1,ae);let L="";for(let ee=0;ee<T.length;ee+=W){let te="";for(let he=0;he<W&&ee+he<T.length;he++){const H=T[ee+he].trim();te+=H.padEnd(Y)}L+=te.trimEnd()+`\r
`}return L}}async function k(){if(!t.value)throw new Error("");const U=new x(t.value,m.value,S=>{o.value=S,S||(b.value=!1,i.value="NORMAL",r.value="",f.value="",p.value=!1)},S=>{console.error("SSH:",S);let T="SSH";S.includes("hostname")?T="":S.includes("username")?T="":S.includes("password")?T="":S.includes("Field required")?T="":S.includes("")?T="":S.includes("WebSocket")?T="":S.includes("SSH")?T="SSH":T=`${S}`,n(T)},w.value.websocketDomains,{onVimModeChange:S=>{b.value=S,console.debug("[VIM] Mode active changed:",S)},onVimModeUpdate:S=>{i.value=S,console.debug("[VIM] Mode updated:",S)},onVimCommandBufferChange:S=>{r.value=S,console.debug("[VIM] Command buffer changed:",S)},onVimFileNameChange:S=>{f.value=S,console.debug("[VIM] File name changed:",S)},onVimModifiedChange:S=>{p.value=S,console.debug("[VIM] Modified changed:",S)}});try{await U.connect(),window.sshTerminalManager=U}catch(S){throw console.error("SSH:",S),S}}function E(){window.sshTerminalManager&&(window.sshTerminalManager.disconnect(),window.sshTerminalManager=null),o.value=!1}function C(){o.value&&E(),m.value={hostname:"",port:22,username:"",password:""},o.value=!1,u.value="",d.value=!1,window.sshTerminalManager&&(window.sshTerminalManager.disconnect(),window.sshTerminalManager=null)}function A(){var S;const U=(S=window.sshTerminalManager)==null?void 0:S.getTerminal();U&&(U.clear(),U.write(`\x1B[1;32mSSH v3.0\x1B[0m\r
`),U.write(` \x1B[33mhelp\x1B[0m \r
\r
`))}function z(){s.value=new Date().toLocaleString("zh-CN")}const G={directory:"\x1B[34m",file:"\x1B[0m",executable:"\x1B[32m",symlink:"\x1B[36m",base:"\x1B[33;1m",socket:"\x1B[35m",pipe:"\x1B[33m",block:"\x1B[34;46m",reset:"\x1B[0m"};function B(U,S){const{files:T,prompt:K}=U;if(!T||!Array.isArray(T)||T.length===0)return K||"";const Y=(S==null?void 0:S.cols)||120,ae=Math.max(...T.map(H=>{var q;return((q=H.name)==null?void 0:q.length)||0}))+2,W=Math.max(1,Math.floor(Y/ae)),L=Math.min(W,8),ee=T.map(H=>{let q=G.reset;H.is_base?q=G.base:H.type==="directory"?q=G.directory:H.is_executable?q=G.executable:H.type==="symlink"?q=G.symlink:H.type==="socket"?q=G.socket:H.type==="pipe"?q=G.pipe:H.type==="block"||H.type==="char"?q=G.block:q=G.file;const y=H.name||"";return{name:y,colored:q+y+G.reset,width:y.length}});let te="";const he=Math.ceil(ee.length/L);for(let H=0;H<he;H++){let q="";for(let y=0;y<L;y++){const O=H*L+y;if(O<ee.length){const V=ee[O];if(y<L-1){const I=ae-V.width;q+=V.colored+" ".repeat(I)}else q+=V.colored}}te+=q.trimEnd()+`
`}return K&&(te+=K),te}function P(){try{window.sshTerminalManager&&(window.sshTerminalManager.disconnect(),window.sshTerminalManager=null),window.removeEventListener("resize",R)}catch(U){console.warn(":",U)}}function R(){var S,T;((S=window.sshTerminalManager)==null?void 0:S.getTerminal())&&((T=window.sshTerminalManager)==null||T.resizeTerminal())}let Q=null,se=null,X=null,oe=null,D=null;return ls(()=>{m.value.hostname=w.value.defaultHost,m.value.port=parseInt(w.value.defaultPort),a(),setTimeout(()=>{Q=HTMLBodyElement.prototype.addEventListener,HTMLBodyElement.prototype.addEventListener=function(K,Y,ne){if(K==="click"||K==="mousedown"||K==="mouseup"){const ae=function(W){try{Y&&Y.call(this,W)}catch(L){if(L.message&&L.message.includes("Cannot read properties of undefined")){console.warn("body");return}throw L}};return Q.call(this,K,ae,ne)}return Q.call(this,K,Y,ne)}},0),se=console.error,console.error=function(...K){var ne;const Y=((ne=K[0])==null?void 0:ne.toString())||"";if(Y.includes("Cannot read properties of undefined")||Y.includes("all.js")||Y.includes("TypeError")){console.warn(":",Y);return}se.apply(console,K)},X=K=>{var ae;const Y=((ae=K.error)==null?void 0:ae.message)||K.message||"",ne=K.filename||"";if(Y.includes("Cannot read properties of undefined")||ne.includes("all.js")||Y.includes("reading '0'")||Y.includes("addDocumentListenerMouse")||Y.includes("HTMLBodyElement")||K.error&&K.error.stack&&K.error.stack.includes("all.js"))return console.warn(" all.js :",Y,":",ne),K.preventDefault(),K.stopPropagation(),!1},oe=K=>{var ne;(((ne=K.reason)==null?void 0:ne.toString())||"").includes("Cannot read properties of undefined")&&(console.warn("Promise"),K.preventDefault(),K.stopPropagation())},window.addEventListener("error",X,!0),window.addEventListener("unhandledrejection",oe,!0),window.onerror=function(K,Y,ne,ae,W){const L=(K==null?void 0:K.toString())||"",ee=(W==null?void 0:W.stack)||"";return L.includes("Cannot read properties of undefined")||Y&&Y.includes("all.js")||L.includes("addDocumentListenerMouse")||L.includes("HTMLBodyElement")||ee.includes("all.js")||W&&W.message&&W.message.includes("Cannot read properties of undefined")?(console.warn("window.onerror all.js :",L,":",ne,":",ee),!0):!1},document.querySelectorAll('script[src*="all.js"]').forEach(K=>{console.warn(" all.js ")}),D=document.addEventListener,document.addEventListener=function(K,Y,ne){if(K==="mousedown"||K==="mouseup"||K==="click"){const ae=function(W){try{const L=new Proxy(W,{get(ee,te){return te==="path"&&!ee.path?[ee.target]:ee[te]}});Y&&Y.call(this,L)}catch(L){if(L.message&&(L.message.includes("Cannot read properties of undefined")||L.message.includes("reading '0'")||L.message.includes("path"))){console.warn(":",L.message);return}throw L}};return D.call(this,K,ae,ne)}return D.call(this,K,Y,ne)},new MutationObserver(K=>{K.forEach(Y=>{Y.addedNodes.forEach(ne=>{ne.nodeName==="SCRIPT"&&ne.src&&ne.src.includes("all.js")&&(console.warn(" all.js "),ne.addEventListener("error",ae=>{ae.preventDefault(),ae.stopPropagation(),console.warn("all.js ")}))})})}).observe(document.head||document.documentElement,{childList:!0,subtree:!0}),z();const T=setInterval(z,1e3);Si(()=>{clearInterval(T),P(),console.error=se,window.removeEventListener("error",X,!0),window.removeEventListener("unhandledrejection",oe,!0),window.onerror=null,HTMLBodyElement.prototype.addEventListener!==Q&&(HTMLBodyElement.prototype.addEventListener=Q),document.addEventListener!==D&&(document.addEventListener=D)}),window.addEventListener("resize",R)}),(U,S)=>(ue(),pe("div",Yg,[d.value?(ue(),pe("div",Jg,[M("div",Qg,[S[5]||(S[5]=M("div",{class:"flex items-center gap-3 mb-4"},[M("span",{class:"text-yellow-400 text-xl"},""),M("span",{class:"text-white font-semibold"},"")],-1)),M("div",e0,be(u.value),1),M("button",{onClick:S[0]||(S[0]=T=>d.value=!1),class:"px-4 py-2 bg-blue-600 hover:bg-blue-500 rounded text-white transition-colors w-full"},"  ")])])):Oe("",!0),M("div",t0,[M("div",s0,[M("div",i0,[_e(ve(Zt),{to:"/",class:"flex items-center gap-2 px-3 py-2 bg-white/10 backdrop-blur rounded-lg shadow-sm border border-slate-700 text-slate-300 hover:text-white hover:bg-white/20 transition-colors"},{default:Gt(()=>[_e(ve(fs),{class:"w-4 h-4"}),S[6]||(S[6]=Je("  ",-1))]),_:1}),S[7]||(S[7]=M("h1",{class:"text-3xl md:text-4xl font-bold text-white"},"SSH ",-1))]),M("div",r0,[M("div",n0,[M("div",{class:Ae(["w-2 h-2 rounded-full",o.value?"bg-green-500 animate-pulse":"bg-red-500"])},null,2),M("span",o0,be(o.value?"":""),1)]),o.value?(ue(),pe("button",{key:0,onClick:E,class:"px-3 py-1.5 bg-red-600 hover:bg-red-500 rounded text-sm transition-colors"},"  ")):Oe("",!0),M("button",{onClick:A,class:"px-3 py-1.5 bg-slate-700 hover:bg-slate-600 rounded text-sm transition-colors"},"  ")])]),o.value?Oe("",!0):(ue(),pe("div",a0,[M("div",l0,[S[12]||(S[12]=qs('<h2 class="text-xl md:text-2xl font-bold text-white mb-4 md:mb-6" data-v-d04b5a35>SSH </h2><div class="mb-4 p-3 bg-slate-700/50 rounded-lg border border-slate-600" data-v-d04b5a35><div class="flex items-center gap-2 mb-2" data-v-d04b5a35><span class="text-blue-400 text-sm" data-v-d04b5a35></span><span class="text-slate-300 text-sm font-medium" data-v-d04b5a35>SSH</span></div><div class="text-slate-400 text-xs space-y-1" data-v-d04b5a35><div data-v-d04b5a35>: <span class="text-green-400" data-v-d04b5a35></span></div></div></div>',2)),M("div",c0,[M("div",null,[S[8]||(S[8]=M("label",{class:"block text-base md:text-lg font-medium text-slate-300 mb-3"},"",-1)),Xe(M("input",{"onUpdate:modelValue":S[1]||(S[1]=T=>m.value.hostname=T),type:"text",placeholder:"192.168.1.100",class:"w-full px-4 py-3 bg-slate-700 border border-slate-600 rounded text-white placeholder-slate-400 focus:outline-none focus:border-blue-500 text-base md:text-lg"},null,512),[[Ye,m.value.hostname]])]),M("div",null,[S[9]||(S[9]=M("label",{class:"block text-base md:text-lg font-medium text-slate-300 mb-3"},"",-1)),Xe(M("input",{"onUpdate:modelValue":S[2]||(S[2]=T=>m.value.port=T),type:"number",placeholder:"22",class:"w-full px-4 py-3 bg-slate-700 border border-slate-600 rounded text-white placeholder-slate-400 focus:outline-none focus:border-blue-500 text-base md:text-lg"},null,512),[[Ye,m.value.port]])]),M("div",null,[S[10]||(S[10]=M("label",{class:"block text-base md:text-lg font-medium text-slate-300 mb-3"},"",-1)),Xe(M("input",{"onUpdate:modelValue":S[3]||(S[3]=T=>m.value.username=T),type:"text",placeholder:"root",class:"w-full px-4 py-3 bg-slate-700 border border-slate-600 rounded text-white placeholder-slate-400 focus:outline-none focus:border-blue-500 text-base md:text-lg"},null,512),[[Ye,m.value.username]])]),M("div",null,[S[11]||(S[11]=M("label",{class:"block text-base md:text-lg font-medium text-slate-300 mb-3"},"",-1)),Xe(M("input",{"onUpdate:modelValue":S[4]||(S[4]=T=>m.value.password=T),type:"password",placeholder:"",class:"w-full px-4 py-3 bg-slate-700 border border-slate-600 rounded text-white placeholder-slate-400 focus:outline-none focus:border-blue-500 text-base md:text-lg"},null,512),[[Ye,m.value.password]])])]),M("div",h0,[o.value?Oe("",!0):(ue(),pe("button",{key:0,onClick:c,disabled:!g.value,class:Ae(["px-6 py-3 md:px-8 md:py-4 rounded-lg font-bold text-lg md:text-xl transition-colors",g.value?"bg-green-600 hover:bg-green-500 text-white":"bg-slate-600 text-slate-400 cursor-not-allowed"])},"  ",10,u0)),M("button",{onClick:C,class:"px-6 py-3 md:px-8 md:py-4 bg-slate-600 hover:bg-slate-500 rounded-lg text-white transition-colors text-lg md:text-xl font-bold"},"  ")])])])),o.value?(ue(),pe("div",d0,[M("div",f0,[M("div",p0,[S[13]||(S[13]=M("div",{class:"flex gap-1.5"},[M("div",{class:"w-3 h-3 rounded-full bg-red-500"}),M("div",{class:"w-3 h-3 rounded-full bg-yellow-500"}),M("div",{class:"w-3 h-3 rounded-full bg-green-500"})],-1)),M("span",m0," ssh "+be(m.value.username)+"@"+be(m.value.hostname)+":"+be(m.value.port),1)]),S[14]||(S[14]=M("div",{class:"text-sm md:text-base text-slate-500"}," SSH v3.0 ",-1))]),M("div",{ref_key:"terminalContainer",ref:t,class:"h-96 w-full text-sm font-mono overflow-hidden"},null,512),b.value?(ue(),pe("div",_0,[M("div",g0,[M("span",{class:Ae(["px-2 py-0.5 rounded text-xs font-bold",_.value])}," -- "+be(h.value)+" -- ",3),r.value?(ue(),pe("span",v0,be(r.value),1)):Oe("",!0)]),M("div",b0,be(f.value)+" "+be(p.value?"[+]":""),1)])):Oe("",!0),M("div",w0,[S[15]||(S[15]=M("div",{class:"text-sm md:text-base text-slate-500"},[Je("  "),M("span",{class:"text-slate-300"},"help"),Je("  ")],-1)),M("div",y0,be(s.value),1)])])):Oe("",!0),S[16]||(S[16]=qs('<div class="mt-6 grid md:grid-cols-2 lg:grid-cols-3 gap-4" data-v-d04b5a35><div class="bg-slate-800/50 backdrop-blur rounded-lg p-4 border border-slate-700" data-v-d04b5a35><h3 class="font-medium text-white mb-2" data-v-d04b5a35></h3><ul class="text-sm text-slate-300 space-y-1" data-v-d04b5a35><li data-v-d04b5a35><code class="text-green-400" data-v-d04b5a35>ls</code> - </li><li data-v-d04b5a35><code class="text-green-400" data-v-d04b5a35>cd</code> - </li><li data-v-d04b5a35><code class="text-green-400" data-v-d04b5a35>pwd</code> - </li><li data-v-d04b5a35><code class="text-green-400" data-v-d04b5a35>cat</code> - </li></ul></div><div class="bg-slate-800/50 backdrop-blur rounded-lg p-4 border border-slate-700" data-v-d04b5a35><h3 class="font-medium text-white mb-2" data-v-d04b5a35></h3><ul class="text-sm text-slate-300 space-y-1" data-v-d04b5a35><li data-v-d04b5a35><code class="text-green-400" data-v-d04b5a35>date</code> - </li><li data-v-d04b5a35><code class="text-green-400" data-v-d04b5a35>whoami</code> - </li><li data-v-d04b5a35><code class="text-green-400" data-v-d04b5a35>uname</code> - </li><li data-v-d04b5a35><code class="text-green-400" data-v-d04b5a35>echo</code> - </li></ul></div><div class="bg-slate-800/50 backdrop-blur rounded-lg p-4 border border-slate-700" data-v-d04b5a35><h3 class="font-medium text-white mb-2" data-v-d04b5a35></h3><ul class="text-sm text-slate-300 space-y-1" data-v-d04b5a35><li data-v-d04b5a35><code class="text-green-400" data-v-d04b5a35>clear</code> - </li><li data-v-d04b5a35><code class="text-green-400" data-v-d04b5a35>help</code> - </li><li data-v-d04b5a35><code class="text-green-400" data-v-d04b5a35>theme</code> - </li><li data-v-d04b5a35><code class="text-green-400" data-v-d04b5a35>exit</code> - </li></ul></div></div>',1))])]))}}),x0=Sl(S0,[["__scopeId","data-v-d04b5a35"]]),C0={class:"min-h-screen bg-gradient-to-b from-brand-50 to-white"},k0={class:"max-w-4xl mx-auto px-4 py-6"},E0={class:"flex items-center justify-between mb-6"},T0={class:"flex items-center gap-3"},A0={class:"w-10 h-10 rounded-xl bg-brand-100 flex items-center justify-center text-brand-600"},R0={class:"flex items-center gap-2"},M0={key:0,class:"mb-6 p-4 bg-white rounded-xl border border-slate-200 shadow-sm"},D0={class:"space-y-4"},L0={class:"grid grid-cols-2 md:grid-cols-3 gap-2"},I0=["onClick"],O0={class:"font-medium text-sm"},B0={class:"text-xs text-slate-500 mt-0.5"},P0={class:"bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden"},$0={key:0,class:"h-full flex flex-col items-center justify-center text-slate-400"},H0={class:"text-xs mt-1"},N0={class:"text-sm whitespace-pre-wrap break-words"},F0={class:"border-t border-slate-200 p-4"},z0={class:"flex gap-3"},U0={class:"flex-1 relative"},W0=["disabled"],j0=["disabled"],V0={class:"mt-2 flex items-center justify-between text-xs text-slate-400"},q0=ct({__name:"MultiModelChat",setup(e){const t=[{id:"mimo-v2-flash",name:"Mimo V2 Flash",desc:""},{id:"mimo-v2-pro",name:"Mimo V2 Pro",desc:""},{id:"gpt-4o-mini",name:"GPT-4o Mini",desc:"OpenAI "},{id:"gpt-4o",name:"GPT-4o",desc:"OpenAI "},{id:"claude-3-haiku",name:"Claude 3 Haiku",desc:"Anthropic "}],s=fe("mimo-v2-flash"),o=fe("You are a helpful assistant."),u=fe(""),d=fe([]),b=fe(!1),i=fe(!1),r=fe(null),f=fe("sk-ck83wowei4botla6w7o6yos3kbgpxv9fepmjshtv2rrmytde");let p=0;const h=async()=>{await cr(),r.value&&(r.value.scrollTop=r.value.scrollHeight)},_=async()=>{var n,c,v,x;if(!u.value.trim()||b.value)return;const l={id:++p,role:"user",content:u.value.trim(),timestamp:new Date};d.value.push(l),u.value="",b.value=!0;const a={id:++p,role:"assistant",content:"",timestamp:new Date,isStreaming:!0};d.value.push(a),await h();try{const k=[{role:"system",content:o.value}];d.value.slice(0,-1).forEach(B=>{B.role!=="system"&&k.push({role:B.role,content:B.content})});const E=await fetch("/api/chat/completions",{method:"POST",headers:{Authorization:`Bearer ${f.value}`,"Content-Type":"application/json",Accept:"*/*"},body:JSON.stringify({model:s.value,messages:k,stream:!0})});if(!E.ok)throw new Error(`HTTP error! status: ${E.status}`);const C=(n=E.body)==null?void 0:n.getReader(),A=new TextDecoder;if(!C)throw new Error("No reader available");let z="";for(;;){const{done:B,value:P}=await C.read();if(B)break;const Q=A.decode(P,{stream:!0}).split(`
`);for(const se of Q)if(se.startsWith("data: ")){const X=se.slice(6);if(X==="[DONE]")continue;try{const D=((x=(v=(c=JSON.parse(X).choices)==null?void 0:c[0])==null?void 0:v.delta)==null?void 0:x.content)||"";if(D){z+=D;const U=d.value[d.value.length-1];U&&U.role==="assistant"&&(U.content=z),await h()}}catch{}}}const G=d.value[d.value.length-1];G&&G.role==="assistant"&&(G.isStreaming=!1)}catch(k){console.error("Error:",k);const E=d.value[d.value.length-1];if(E&&E.role==="assistant"){const C=k instanceof Error?k.message:"";E.content=`: ${C}`,E.isStreaming=!1}}finally{b.value=!1}},m=()=>{d.value=[],p=0},w=l=>{l.key==="Enter"&&!l.shiftKey&&(l.preventDefault(),_())},g=l=>l.toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit"});return(l,a)=>{var n,c;return ue(),pe("div",C0,[M("div",k0,[M("div",E0,[M("div",T0,[M("div",A0,[_e(ve(Mr),{class:"w-5 h-5"})]),a[3]||(a[3]=M("div",null,[M("h1",{class:"text-xl font-bold text-slate-900"},""),M("p",{class:"text-sm text-slate-500"}," AI ")],-1))]),M("div",R0,[M("button",{onClick:a[0]||(a[0]=v=>i.value=!i.value),class:"p-2 rounded-lg hover:bg-slate-100 text-slate-600 transition-colors",title:""},[_e(ve(Dd),{class:"w-5 h-5"})]),M("button",{onClick:m,class:"p-2 rounded-lg hover:bg-red-50 text-slate-600 hover:text-red-600 transition-colors",title:""},[_e(ve(_r),{class:"w-5 h-5"})])])]),i.value?(ue(),pe("div",M0,[a[6]||(a[6]=M("h3",{class:"text-sm font-medium text-slate-700 mb-3"},"",-1)),M("div",D0,[M("div",null,[a[4]||(a[4]=M("label",{class:"block text-sm text-slate-600 mb-2"},"",-1)),M("div",L0,[(ue(),pe(tt,null,Nt(t,v=>M("button",{key:v.id,onClick:x=>s.value=v.id,class:Ae(["p-3 rounded-lg border text-left transition-all",s.value===v.id?"border-brand-500 bg-brand-50 text-brand-700":"border-slate-200 hover:border-slate-300 text-slate-700"])},[M("div",O0,be(v.name),1),M("div",B0,be(v.desc),1)],10,I0)),64))])]),M("div",null,[a[5]||(a[5]=M("label",{class:"block text-sm text-slate-600 mb-2"},"",-1)),Xe(M("textarea",{"onUpdate:modelValue":a[1]||(a[1]=v=>o.value=v),rows:"3",class:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-brand-500 focus:border-transparent resize-none",placeholder:" AI ..."},null,512),[[Ye,o.value]])])])])):Oe("",!0),M("div",P0,[M("div",{ref_key:"chatContainer",ref:r,class:"h-[500px] overflow-y-auto p-4 space-y-4"},[d.value.length===0?(ue(),pe("div",$0,[_e(ve(Mr),{class:"w-12 h-12 mb-3 opacity-50"}),a[7]||(a[7]=M("p",{class:"text-sm"}," AI ",-1)),M("p",H0,": "+be((n=t.find(v=>v.id===s.value))==null?void 0:n.name),1)])):Oe("",!0),(ue(!0),pe(tt,null,Nt(d.value,v=>(ue(),pe("div",{key:v.id,class:Ae(["flex gap-3",v.role==="user"?"flex-row-reverse":""])},[M("div",{class:Ae(["w-8 h-8 rounded-lg flex items-center justify-center flex-shrink-0",v.role==="user"?"bg-brand-500 text-white":"bg-slate-100 text-slate-600"])},[v.role==="user"?(ue(),$t(ve(Id),{key:0,class:"w-4 h-4"})):(ue(),$t(ve(Mr),{key:1,class:"w-4 h-4"}))],2),M("div",{class:Ae(["max-w-[80%] rounded-xl px-4 py-2.5",v.role==="user"?"bg-brand-500 text-white":"bg-slate-100 text-slate-800"])},[M("div",N0,be(v.content||"..."),1),M("div",{class:Ae(["text-xs mt-1 flex items-center gap-2",v.role==="user"?"text-brand-200":"text-slate-400"])},[M("span",null,be(g(v.timestamp)),1),v.isStreaming?(ue(),$t(ve(Ro),{key:0,class:"w-3 h-3 animate-spin"})):Oe("",!0)],2)],2)],2))),128))],512),M("div",F0,[M("div",z0,[M("div",U0,[Xe(M("textarea",{"onUpdate:modelValue":a[2]||(a[2]=v=>u.value=v),onKeydown:w,rows:"1",class:"w-full px-4 py-3 pr-12 border border-slate-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-brand-500 focus:border-transparent resize-none",placeholder:" Enter ...",disabled:b.value},null,40,W0),[[Ye,u.value]])]),M("button",{onClick:_,disabled:!u.value.trim()||b.value,class:Ae(["px-4 py-3 rounded-xl font-medium text-sm transition-all flex items-center gap-2",u.value.trim()&&!b.value?"bg-brand-500 text-white hover:bg-brand-600":"bg-slate-100 text-slate-400 cursor-not-allowed"])},[b.value?(ue(),$t(ve(Ro),{key:0,class:"w-4 h-4 animate-spin"})):(ue(),$t(ve(Md),{key:1,class:"w-4 h-4"})),a[8]||(a[8]=M("span",{class:"hidden sm:inline"},"",-1))],10,j0)]),M("div",V0,[M("span",null,": "+be((c=t.find(v=>v.id===s.value))==null?void 0:c.name),1),a[9]||(a[9]=M("span",null,"Shift + Enter ",-1))])])])])])}}}),K0=[{path:"/",name:"home",component:Kd},{path:"/reader",name:"reader",component:pp},{path:"/json",name:"json",component:Ap},{path:"/timestamp",name:"timestamp",component:um},{path:"/case",name:"case",component:Mm},{path:"/string",name:"string",component:Vm},{path:"/images",name:"images",component:fg},{path:"/images-new",name:"images-new",component:Ag},{path:"/image-to-base64",name:"image-to-base64",component:qg},{path:"/ssh",name:"ssh",component:x0},{path:"/chat",name:"chat",component:q0}],G0=Zu({history:ku(),routes:K0}),Cl=qh(nd);Cl.use(G0);Cl.mount("#app");
